Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-19 20:15:32 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-19 20:15:32 +0400
  [1m[36mProductType Load (39.6ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveFilledTypes (20200919162956)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mProductType Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_types" WHERE "product_types"."id_name" IN ($1, $2, $3)[0m  [["id_name", "catalog_product"], ["id_name", "service"], ["id_name", "working_hour"]]
  â†³ db/migrate/20200919162956_remove_filled_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919162956"]]
  â†³ bin/rails:9
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to AddAndChangeProductTypeTable (20200919163118)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.7ms)[0m  [1m[35mALTER TABLE "product_types" ALTER COLUMN "name" TYPE json[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:3
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddAndChangeProductTypeTable (20200919163118)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (66.6ms)[0m  [1m[35mALTER TABLE "product_types" ALTER COLUMN "name" TYPE json USING name::json[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:3
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddAndChangeProductTypeTable (20200919163118)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (46.3ms)[0m  [1m[35mALTER TABLE "product_types" ALTER COLUMN "name" TYPE json USING name::json[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:3
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "product_types" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919163118"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-19 21:08:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-19 21:08:07 +0400
Started POST "/en/product_types" for 127.0.0.1 at 2020-09-19 21:10:28 +0400
Processing by ProductTypesController#create as JSON
  Parameters: {"name"=>{"no"=>"aba1", "en"=>"aba1"}, "active"=>true, "locale"=>"en", "product_type"=>{"name"=>{"no"=>"aba1", "en"=>"aba1"}, "active"=>true}}
Unpermitted parameters: :format, :locale, :product_type
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:29
  [1m[36mProductType Create (3.6ms)[0m  [1m[32mINSERT INTO "product_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"no\":\"aba1\",\"en\":\"aba1\"}"], ["id_name", "aba1"]]
  â†³ app/services/products/product_type_service.rb:29
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:29
Completed 201 Created in 114ms (Views: 0.2ms | ActiveRecord: 10.9ms)


Started PUT "/en/product_types" for 127.0.0.1 at 2020-09-19 21:11:01 +0400
Processing by ProductTypesController#update as JSON
  Parameters: {"id"=>4, "name"=>{"no"=>"aba 2", "en"=>"aba 2"}, "active"=>true, "locale"=>"en", "product_type"=>{"id"=>4, "name"=>{"no"=>"aba 2", "en"=>"aba 2"}, "active"=>true}}
Unpermitted parameters: :format, :locale, :product_type
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_type_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:38
  [1m[36mProductType Update (0.3ms)[0m  [1m[33mUPDATE "product_types" SET "name" = $1 WHERE "product_types"."id" = $2[0m  [["name", "{\"no\":\"aba 2\",\"en\":\"aba 2\"}"], ["id", 4]]
  â†³ app/services/products/product_type_service.rb:38
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:38
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 9.8ms)


Started DELETE "/en/product_types?id=4" for 127.0.0.1 at 2020-09-19 21:11:15 +0400
Processing by ProductTypesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductType Load (0.2ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_type_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:46
  [1m[36mProductType Destroy (0.2ms)[0m  [1m[31mDELETE FROM "product_types" WHERE "product_types"."id" = $1[0m  [["id", 4]]
  â†³ app/services/products/product_type_service.rb:46
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:46
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 36.6ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:12:20 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:12:32 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `empty?' for nil:NilClass):
  
app/services/products/product_type_service.rb:52:in `list'
app/controllers/product_types_controller.rb:28:in `list'
Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:13:02 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:13:27 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  â†³ app/services/products/product_type_service.rb:23
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-20 01:59:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-20 01:59:25 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mProductType Load (1.1ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  [1m[36mProductType Load (0.8ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for ::1 at 2020-09-21 17:12:55 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-standalone-preset.js" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/swagger-ui.css" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/v1/swagger.json" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/favicon-32x32.png" for ::1 at 2020-09-21 17:12:57 +0400
Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:13:09 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 8.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for ::1 at 2020-09-21 17:14:06 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for ::1 at 2020-09-21 17:14:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for ::1 at 2020-09-21 17:14:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for ::1 at 2020-09-21 17:14:06 +0400
Started GET "/api-docs/v1/swagger.json" for ::1 at 2020-09-21 17:14:07 +0400
Started GET "/api-docs/favicon-32x32.png" for ::1 at 2020-09-21 17:14:07 +0400
Started GET "/%7Blocale%7D/categories/category_list" for ::1 at 2020-09-21 17:14:14 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"{locale}"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("{locale}" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for ::1 at 2020-09-21 17:17:55 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/v1/swagger.json" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/favicon-32x32.png" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:18:09 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 5.4ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:18:17 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:19:08 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>1, "name"=>"buka", "locale"=>"en", "category"=>{"id"=>1, "name"=>"buka"}}
Unpermitted parameter: :name
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:19:22 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:19:30 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:24:34 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:43:53 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>1, "name"=>{"en"=>"buka"}, "locale"=>"en", "category"=>{"id"=>1, "name"=>{"en"=>"buka"}}}
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
  [1m[36mCategory Update (5.8ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1 WHERE "categories"."id" = $2[0m  [["name", "{\"en\":\"buka\"}"], ["id", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:37
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 7.4ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:43:58 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:44:05 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:44:54 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>1, "name"=>{"en"=>"buka"}, "locale"=>"en", "category"=>{"id"=>1, "name"=>{"en"=>"buka"}}}
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:59
  [1m[36mCategory Load (0.8ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):18
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):19
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:59
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:38
  [1m[36mCategory Update (0.3ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1 WHERE "categories"."id" = $2[0m  [["name", "{\"en\":\"buka\",\"no\":\"change_1\"}"], ["id", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:38
  [1m[35m (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:38
Completed 200 OK in 595557ms (Views: 0.2ms | ActiveRecord: 47.4ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:55:34 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:54
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 3.6ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:55:48 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>2, "name"=>{"en"=>"buka"}, "locale"=>"en", "category"=>{"id"=>2, "name"=>{"en"=>"buka"}}}
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:67
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:39
  [1m[36mCategory Update (1.0ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1 WHERE "categories"."id" = $2[0m  [["name", "{\"en\":\"buka\",\"no\":\"category_no 2\"}"], ["id", 2]]
  â†³ app/services/category_sub_categories/categories_service.rb:39
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:39
Completed 200 OK in 6373ms (Views: 0.6ms | ActiveRecord: 38.7ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:56:05 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:54
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:56:17 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:54
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-21 23:53:32 +0400
Started GET "/en/supplier/business_types" for 127.0.0.1 at 2020-09-21 23:53:47 +0400
Processing by SuppliersController#business_types as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/supplier/business_types" for 127.0.0.1 at 2020-09-21 23:54:29 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SuppliersController#business_types as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mBusinessType Load (7.8ms)[0m  [1m[34mSELECT "business_types".* FROM "business_types"[0m
  â†³ app/services/suppliers/supplier_helper_service.rb:14
Completed 200 OK in 80ms (Views: 0.8ms | ActiveRecord: 26.2ms)


Started GET "/en/supplier/integration_systems" for 127.0.0.1 at 2020-09-21 23:56:25 +0400
Processing by SuppliersController#integration_systems as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mIntegrationSystem Load (4.6ms)[0m  [1m[34mSELECT "integration_systems".* FROM "integration_systems"[0m
  â†³ app/services/suppliers/supplier_helper_service.rb:18
Completed 200 OK in 65ms (Views: 0.2ms | ActiveRecord: 8.6ms)


  [1m[36mBusinessType Load (0.8ms)[0m  [1m[34mSELECT "business_types".* FROM "business_types"[0m
  [1m[36mBusinessType Load (1.4ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" ORDER BY "business_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBusinessType Load (0.8ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" ORDER BY "business_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mIntegrationSystem Load (0.9ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" ORDER BY "integration_systems"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddBusinessTypes (20200921200604)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mBusinessType Create (4.1ms)[0m  [1m[32mINSERT INTO "business_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"default\",\"no\":\"default\"}"], ["id_name", "general"]]
  â†³ db/migrate/20200921200604_add_business_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921200604"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to AddIntegrationSystem (20200921203149)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mIntegrationSystem Create (1.1ms)[0m  [1m[32mINSERT INTO "integration_systems" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "manual"]]
  â†³ db/migrate/20200921203149_add_integration_system.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921203149"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mSupplier Load (40.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mIntegrationSystem Load (0.5ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-22 00:49:59 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 00:50:09 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
  [1m[36mIntegrationSystem Load (0.4ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 43ms (Views: 0.4ms | ActiveRecord: 13.2ms)


  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-22 10:36:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-22 10:36:15 +0400
Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 10:36:26 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (3.4ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
  [1m[36mIntegrationSystem Load (1.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 48ms (Views: 0.3ms | ActiveRecord: 24.6ms)


Started PUT "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:37:10 +0400
Processing by SuppliersController#update as JSON
  Parameters: {"active"=>false, "locale"=>"en", "id"=>"3", "supplier"=>{"active"=>false}}
Unpermitted parameters: :active, :format, :locale, :supplier
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:40
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mIntegrationSystem Load (0.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mBusinessType Load (2.2ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" WHERE "business_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 6.1ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 10:37:17 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
  [1m[36mIntegrationSystem Load (0.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started PUT "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:37:48 +0400
Processing by SuppliersController#update as JSON
  Parameters: {"active"=>false, "locale"=>"en", "id"=>"3", "supplier"=>{"active"=>false}}
Unpermitted parameters: :format, :locale, :supplier
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:40
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mIntegrationSystem Load (0.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mBusinessType Load (0.3ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" WHERE "business_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mSupplier Update (2.4ms)[0m  [1m[33mUPDATE "suppliers" SET "active" = $1 WHERE "suppliers"."id" = $2[0m  [["active", false], ["id", 3]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 12.3ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 10:37:53 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started DELETE "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:42:32 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SuppliersController#destroy as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:47
Completed 500 Internal Server Error in 54ms (ActiveRecord: 4.6ms)


  
NoMethodError (undefined method `destroy' for nil:NilClass):
  
app/services/suppliers/suppliers_service.rb:48:in `destroy_supplier'
app/controllers/suppliers_controller.rb:27:in `destroy'
Started DELETE "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:42:43 +0400
Processing by SuppliersController#destroy as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:48
Completed 500 Internal Server Error in 17136ms (ActiveRecord: 12.5ms)


  
NoMethodError (undefined method `destroy' for nil:NilClass):
  
app/services/suppliers/suppliers_service.rb:49:in `destroy_supplier'
app/controllers/suppliers_controller.rb:27:in `destroy'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started POST "/en/product_types" for 127.0.0.1 at 2020-09-26 11:01:23 +0400
Processing by ProductTypesController#create as JSON
  Parameters: {"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true, "locale"=>"en", "product_type"=>{"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true}}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.4ms | ActiveRecord: 10.2ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-26 11:01:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-26 11:01:44 +0400
Started POST "/en/product_types" for 127.0.0.1 at 2020-09-26 11:01:52 +0400
Processing by ProductTypesController#create as JSON
  Parameters: {"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true, "locale"=>"en", "product_type"=>{"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true}}
Unpermitted parameters: :format, :locale, :product_type
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:29
  [1m[36mProductType Create (4.3ms)[0m  [1m[32mINSERT INTO "product_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"no\":\"string\",\"en\":\"string\"}"], ["id_name", "string"]]
  â†³ app/services/products/product_type_service.rb:29
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:29
Completed 201 Created in 193ms (Views: 0.4ms | ActiveRecord: 12.1ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-26 11:02:20 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  â†³ app/services/products/product_type_service.rb:23
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 0.4ms)


Started GET "/en/products/list" for 127.0.0.1 at 2020-09-26 11:02:39 +0400
Processing by ProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (7.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (2.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 11], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 13], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
Completed 200 OK in 145ms (Views: 1.1ms | ActiveRecord: 29.8ms)


Started GET "/en/products/product_vat_type" for 127.0.0.1 at 2020-09-26 11:03:10 +0400
Processing by ProductsController#product_vat_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductVatType Load (3.6ms)[0m  [1m[34mSELECT "product_vat_types".* FROM "product_vat_types"[0m
  â†³ app/services/products/product_list_service.rb:25
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 10.1ms)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-26 18:11:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-26 18:11:24 +0400
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (1.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (1.0ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.6ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToProductCharacteristics (20200926145340)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "product_characteristic" ADD "subscription" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20200926145340_add_columns_to_product_characteristics.rb:3
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToProductCharacteristics (20200926145340)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (44.9ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD "subscription" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20200926145340_add_columns_to_product_characteristics.rb:3
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD "commission" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20200926145340_add_columns_to_product_characteristics.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926145340"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mProductCharacteristic Load (0.8ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductType Load (1.4ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
Started POST "/en/products" for 127.0.0.1 at 2020-09-26 19:19:41 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#create as JSON
  Parameters: {"name"=>"buka", "full_name"=>"full buka", "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}, "locale"=>"en", "product"=>{"name"=>"buka", "full_name"=>"full buka", "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}}}
Unpermitted parameters: :name, :full_name, :format, :locale, :product
  [1m[36mProductType Load (0.8ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:41
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:47
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_create_service.rb:59
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/products/product_create_service.rb:59
Completed 400 Bad Request in 3715ms (Views: 0.6ms | ActiveRecord: 26.6ms)


Started POST "/en/products" for 127.0.0.1 at 2020-09-26 19:20:23 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}, "locale"=>"en", "product"=>{"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:41
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:47
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_create_service.rb:59
  [1m[36mProduct Create (35.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "full_name", "description", "code", "instruction") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "{\"en\":\"buka\"}"], ["full_name", "{\"en\":\"full buka\"}"], ["description", "Test product"], ["code", "20569"], ["instruction", "Take cerfule with this product"]]
  â†³ app/services/products/product_create_service.rb:59
  [1m[36mProductCharacteristic Create (2.2ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "shape", "volume", "packaging", "manufacturer", "description", "external_code", "sales_start", "sales_end", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17) RETURNING "id"[0m  [["product_id", 14], ["sub_category_id", 2], ["shape", "some shape"], ["volume", "some volume"], ["packaging", "big"], ["manufacturer", "OSRAM"], ["description", "Good lights"], ["external_code", "232323"], ["sales_start", "2020-09-30 00:00:00"], ["sales_end", "2020-12-30 00:00:00"], ["EAN_code", "89665"], ["weight", "24.3"], ["width", "78.3"], ["height", "23.96"], ["depth", "5.3"], ["product_type_id", 5], ["product_vat_type_id", 2]]
  â†³ app/services/products/product_create_service.rb:59
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_create_service.rb:59
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:24
  [1m[36mProductType Load (0.6ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:24
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:24
Completed 201 Created in 6854ms (Views: 0.8ms | ActiveRecord: 52.7ms)


Started PUT "/en/product_types" for 127.0.0.1 at 2020-09-26 19:21:59 +0400
Processing by ProductTypesController#update as JSON
  Parameters: {"id"=>5, "name"=>{"no"=>"string_1", "en"=>"string_1"}, "id_name"=>"string_1", "active"=>true, "locale"=>"en", "product_type"=>{"id"=>5, "name"=>{"no"=>"string_1", "en"=>"string_1"}, "id_name"=>"string_1", "active"=>true}}
Unpermitted parameters: :id_name, :format, :locale, :product_type
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_type_service.rb:67
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:39
  [1m[36mProductType Update (0.5ms)[0m  [1m[33mUPDATE "product_types" SET "name" = $1 WHERE "product_types"."id" = $2[0m  [["name", "{\"no\":\"string_1\",\"en\":\"string\"}"], ["id", 5]]
  â†³ app/services/products/product_type_service.rb:39
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:39
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.4ms)


Started GET "/en/products/list" for 127.0.0.1 at 2020-09-26 19:22:12 +0400
Processing by ProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.2ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.2ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 11], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 13], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.2ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.2ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
Completed 200 OK in 20ms (Views: 2.4ms | ActiveRecord: 2.9ms)


Started POST "/en/products" for 127.0.0.1 at 2020-09-26 19:32:36 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}, "locale"=>"en", "product"=>{"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}}}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 8.6ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:14:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:14:04 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/en/product/id" for 127.0.0.1 at 2020-09-27 00:14:43 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/product/id"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/en/product/edit_product" for 127.0.0.1 at 2020-09-27 00:19:19 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/product/edit_product"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:20:08 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 7790ms (ActiveRecord: 7.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:25:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:20:59 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 4830ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:25:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:21:23 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 6030ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:25:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:21:39 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 18750ms (ActiveRecord: 3.7ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:22:09 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 38208ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:22:50 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 5793ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:22:59 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 7913ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/en/products/edit_product?id=14" for 127.0.0.1 at 2020-09-27 00:23:41 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"14", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:26
Completed 500 Internal Server Error in 6715ms (ActiveRecord: 11.2ms)


  
NameError (undefined local variable or method `product_characteristics_schema' for #<Products::ProductUpdateService:0x00007efc4001b290>):
  
app/services/products/product_update_service.rb:15:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/products_controller.rb:30:in `edit_product'
Started GET "/en/products/edit_product?id=14" for 127.0.0.1 at 2020-09-27 00:24:19 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"14", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
Completed 500 Internal Server Error in 21638ms (ActiveRecord: 4.1ms)


  
NameError (undefined local variable or method `product_characteristics_schema' for #<Products::ProductUpdateService:0x00007efc38027ed0>):
  
app/services/products/product_update_service.rb:16:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/products_controller.rb:30:in `edit_product'
Started GET "/en/products/edit_product?id=14" for 127.0.0.1 at 2020-09-27 00:25:36 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"14", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 5593ms (Views: 0.4ms | ActiveRecord: 26.4ms)


  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveColumnsFromProductCharacteristics (20200926203704)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (41.8ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "shape"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "packing"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:4
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveColumnsFromProductCharacteristics (20200926203704)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "shape"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "packaging"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "sales_start"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:5
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "sales_end"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926203704"]]
  â†³ bin/rails:9
  [1m[35m (32.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:51:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:51:28 +0400
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCurrencies (20200926205812)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (26.0ms)[0m  [1m[35mCREATE TABLE "currencies" ("id" bigserial primary key, "name" json NOT NULL, "symbol" character varying(20) NOT NULL, "code" character varying(3) NOT NULL)[0m
  â†³ db/migrate/20200926205812_create_currencies.rb:3
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_currencies_on_code" ON "currencies"  ("code")[0m
  â†³ db/migrate/20200926205812_create_currencies.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926205812"]]
  â†³ bin/rails:9
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillCurrencies (20200926210103)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mCurrency Create (0.7ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Krone\""], ["symbol", "â€ŽKR"], ["code", "nok"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:3
  [1m[36mCurrency Create (0.2ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"USD dollar\""], ["symbol", "$"], ["code", "usd"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:4
  [1m[36mCurrency Create (0.4ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Euro\""], ["symbol", "â‚¬"], ["code", "euro"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:5
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillCurrencies (20200926210103)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mCurrency Create (0.5ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Krone\""], ["symbol", "â€ŽKR"], ["code", "nok"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:3
  [1m[36mCurrency Create (0.3ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"USD dollar\""], ["symbol", "$"], ["code", "usd"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:4
  [1m[36mCurrency Create (0.2ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Euro\""], ["symbol", "â‚¬"], ["code", "eur"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926210103"]]
  â†³ bin/rails:9
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/en/currencies/currencies_list" for 127.0.0.1 at 2020-09-27 01:26:57 +0400
Processing by CurrenciesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 204 No Content in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/currencies/currencies_list" for 127.0.0.1 at 2020-09-27 01:27:30 +0400
Processing by CurrenciesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCurrency Load (0.6ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
  â†³ app/services/general/currencies_service.rb:14
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 5.6ms)


  [1m[36mSupplierProduct Load (1.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddQuantityColumnToSupplierProducts (20200927103709)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "supplier_products" ADD "quantity" integer[0m
  â†³ db/migrate/20200927103709_add_quantity_column_to_supplier_products.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200927103709"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveMinSellAmountColumnFromSupplierProduct (20200927104129)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "supplier_products" DROP COLUMN "min_sell_amount"[0m
  â†³ db/migrate/20200927104129_remove_min_sell_amount_column_from_supplier_product.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200927104129"]]
  â†³ bin/rails:9
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/en/sub_categories/sub_category_list?category_id=1" for 127.0.0.1 at 2020-09-27 18:58:43 +0400
Processing by SubCategoriesController#list as JSON
  Parameters: {"category_id"=>"1", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/en/sub_categories/sub_category_list?category_id=1" for 127.0.0.1 at 2020-09-27 18:59:05 +0400
Processing by SubCategoriesController#list as JSON
  Parameters: {"category_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSubCategory Load (0.8ms)[0m  [1m[34mSELECT "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."category_id" = $1[0m  [["category_id", 1]]
  â†³ app/services/category_sub_categories/sub_categories_service.rb:22
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 9.9ms)


Started POST "/en/products" for 127.0.0.1 at 2020-09-27 19:00:01 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "sales_start"=>"as", "sales_end"=>"striascng", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}, "locale"=>"en", "product"=>{"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "sales_start"=>"as", "sales_end"=>"striascng", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProductType Load (1.1ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:40
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:46
Completed 500 Internal Server Error in 93ms (ActiveRecord: 20.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'sales_start' for ProductCharacteristic.):
  
app/services/products/product_create_service.rb:57:in `create_product_item'
app/services/products/product_create_service.rb:18:in `create_product'
app/controllers/products_controller.rb:16:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 19:02:46 +0400
Started POST "/en/products" for 127.0.0.1 at 2020-09-27 19:03:08 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}, "locale"=>"en", "product"=>{"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProductType Load (1.0ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:40
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:46
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_create_service.rb:58
  [1m[36mProduct Create (2.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "full_name", "description", "code", "instruction") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "{\"en\":\"test_product\",\"no\":\"test_product_no\"}"], ["full_name", "{\"en\":\"test_product\",\"no\":\"test_product_no\"}"], ["description", "kaia kata"], ["code", "986532"], ["instruction", "You should take care about it"]]
  â†³ app/services/products/product_create_service.rb:58
  [1m[36mProductCharacteristic Create (2.6ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "volume", "manufacturer", "description", "external_code", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id", "subscription", "commission") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15) RETURNING "id"[0m  [["product_id", 15], ["sub_category_id", 2], ["volume", "askja"], ["manufacturer", "Oslo"], ["description", "dasdasd"], ["external_code", "030201"], ["EAN_code", "string"], ["weight", "23.0"], ["width", "23.0"], ["height", "23.0"], ["depth", "23.0"], ["product_type_id", 5], ["product_vat_type_id", 2], ["subscription", true], ["commission", true]]
  â†³ app/services/products/product_create_service.rb:58
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_create_service.rb:58
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:23
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:23
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:23
Completed 201 Created in 46ms (Views: 0.5ms | ActiveRecord: 10.2ms)


  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 19:41:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 19:41:08 +0400
  [1m[36mSupplierProductPrice Load (2.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveAndAddColumnsFroCurrency (20200927155250)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" DROP COLUMN "currency"[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:3
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_298846d27d"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:4
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveAndAddColumnsFroCurrency (20200927155250)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" DROP COLUMN "currency"[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:3
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD "currency_id" integer[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:4
  [1m[35m (16.2ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_298846d27d"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:5
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "supplier_product_prices_currency" ON "supplier_product_prices"  ("currency_id")[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200927155250"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 22:23:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 22:23:39 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 22:26:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 22:26:03 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
  [1m[36mSupplier Load (8.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCurrency Load (0.4ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" ORDER BY "currencies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:29:14 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 5.3ms)


  
NameError (uninitialized constant Supplier::SupplierProductsService):
  
app/controllers/supplier_products_controller.rb:9:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:29:44 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 2.8ms)


  
NameError (uninitialized constant Supplier::SupplierProductsService):
  
app/controllers/supplier_products_controller.rb:9:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:31:26 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant Supplier::SupplierProductsService):
  
app/controllers/supplier_products_controller.rb:9:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:37:45 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 5491ms (ActiveRecord: 2.7ms)


  
LoadError (Unable to autoload constant Suppliers::SupplierProductsService, expected /home/buka/always24/app/services/suppliers/supplier_products_service.rb to define it):
  
app/controllers/supplier_products_controller.rb:10:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:38:20 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:59
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
Completed 500 Internal Server Error in 24567ms (ActiveRecord: 28.2ms)


  
NoMethodError (undefined method `provider_id' for #<SupplierProduct:0x00007f238c0e6c38>):
  
app/services/suppliers/supplier_products_service.rb:49:in `create_item'
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:39:36 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:59
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
Completed 500 Internal Server Error in 3502ms (ActiveRecord: 21.6ms)


  
NoMethodError (undefined method `med_code' for #<SupplierProduct:0x00007f238cb1f808>):
  
app/services/suppliers/supplier_products_service.rb:49:in `create_item'
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:40:03 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:59
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
Completed 500 Internal Server Error in 5683ms (ActiveRecord: 25.6ms)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
lib/errors_format.rb:22:in `fill_errors'
app/services/suppliers/supplier_products_service.rb:50:in `create_item'
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:40:34 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
Completed 500 Internal Server Error in 10697ms (ActiveRecord: 2.1ms)


  
NameError (undefined local variable or method `validate_data' for #<Suppliers::SupplierProductsService:0x00007f238cf0bc28>
Did you mean?  validate_data!):
  
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:41:30 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:56
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
Completed 500 Internal Server Error in 4587ms (ActiveRecord: 25.8ms)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
lib/errors_format.rb:22:in `fill_errors'
app/services/suppliers/supplier_products_service.rb:52:in `create_item'
app/services/suppliers/supplier_products_service.rb:17:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:41:39 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:56
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
Completed 500 Internal Server Error in 5694ms (ActiveRecord: 2.5ms)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
lib/errors_format.rb:22:in `fill_errors'
app/services/suppliers/supplier_products_service.rb:52:in `create_item'
app/services/suppliers/supplier_products_service.rb:17:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:42:29 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:58
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:63
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:53
Completed 400 Bad Request in 7303ms (Views: 0.3ms | ActiveRecord: 27.6ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:43:26 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:62
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):9
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):11
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):11
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):12
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):12
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):13
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):14
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):14
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):15
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):15
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):16
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):16
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:52
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:52
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:52
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:52
Completed 400 Bad Request in 640618ms (Views: 0.7ms | ActiveRecord: 35.9ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-29 20:57:29 +0400
Started GET "/en/products/edit_product?id=7" for 127.0.0.1 at 2020-09-29 20:57:59 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (2.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
Completed 404 Not Found in 560499ms (ActiveRecord: 30.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=7):
  
app/services/products/product_update_service.rb:27:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
  [1m[36mProduct Load (3.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:10:58 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (7.8ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (1.7ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (1.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (1.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 11878ms (Views: 0.5ms | ActiveRecord: 35.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:11:49 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 33263ms (Views: 0.4ms | ActiveRecord: 29.6ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:12:25 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.6ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 9754ms (Views: 0.3ms | ActiveRecord: 23.2ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:12:44 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 7122ms (Views: 0.5ms | ActiveRecord: 2.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:12:54 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 4379ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:13:10 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 6926ms (Views: 0.4ms | ActiveRecord: 1.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:13:23 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 1135690ms (Views: 0.4ms | ActiveRecord: 25.1ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:34:50 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 7410ms (Views: 0.7ms | ActiveRecord: 24.6ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:35:29 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 5283ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
config/initializers/multilanguage.rb:2:in `multilanguage'
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:38:30 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 11537ms (ActiveRecord: 5.5ms)


  
NoMethodError (undefined method `edit_action?' for #<Class:0x0000560d80459438>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:39:10 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 89044ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `edit_action?' for #<Class:0x00007f91d008e3c8>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:40:47 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 4767ms (ActiveRecord: 3.8ms)


  
NameError (undefined local variable or method `action' for #<Class:0x00007f91bc5a4470>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:41:07 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 22954ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `action' for #<Class:0x00007f91c89ca818>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:46:48 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 6799ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `action' for #<Class:0x00007f91d0773328>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:47:07 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 9704ms (Views: 0.5ms | ActiveRecord: 27.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:47:25 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.6ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 13602ms (Views: 0.9ms | ActiveRecord: 2.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:47:47 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.7ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.7ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 95586ms (Views: 0.8ms | ActiveRecord: 28.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:52:41 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 8423ms (Views: 0.5ms | ActiveRecord: 23.9ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:16 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.2ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:23 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:24 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.2ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.2ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:26 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 1.8ms)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  [1m[36mProductType Load (1.0ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSubCategory Load (1.1ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (1.6ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 22:00:30 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 173ms (Views: 0.4ms | ActiveRecord: 32.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-29 22:07:58 +0400
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 22:08:16 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 34ms (Views: 0.4ms | ActiveRecord: 0.0ms)


  [1m[36mSupplier Load (7.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:24:10 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:60
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mCACHE Supplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 400 Bad Request in 100695ms (Views: 0.5ms | ActiveRecord: 41.7ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:28:53 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:65
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:70
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
Completed 400 Bad Request in 81168ms (Views: 0.7ms | ActiveRecord: 22.1ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:30:18 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (9.1ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:30:23.809969"], ["updated_at", "2020-09-29 18:30:23.809969"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 400 Bad Request in 30850ms (Views: 0.4ms | ActiveRecord: 45.4ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:31:08 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:31:13.905474"], ["updated_at", "2020-09-29 18:31:13.905474"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (9.0ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 2], ["price", "25.0"], ["created_at", "2020-09-29 18:31:14.486813"], ["updated_at", "2020-09-29 18:31:14.486813"], ["currency_id", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 500 Internal Server Error in 5875ms (ActiveRecord: 33.2ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: INSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/suppliers/supplier_products_service.rb:64:in `create_price'
app/services/suppliers/supplier_products_service.rb:16:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:31:21 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:31:25.041458"], ["updated_at", "2020-09-29 18:31:25.041458"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (2.2ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 3], ["price", "25.0"], ["created_at", "2020-09-29 18:32:58.753978"], ["updated_at", "2020-09-29 18:32:58.753978"], ["currency_id", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 500 Internal Server Error in 96857ms (ActiveRecord: 10.4ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: INSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/suppliers/supplier_products_service.rb:64:in `create_price'
app/services/suppliers/supplier_products_service.rb:16:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:33:02 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:33:05.503843"], ["updated_at", "2020-09-29 18:33:05.503843"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (1.3ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 4], ["price", "25.0"], ["created_at", "2020-09-29 18:33:09.752482"], ["updated_at", "2020-09-29 18:33:09.752482"], ["currency_id", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 500 Internal Server Error in 7656ms (ActiveRecord: 7.6ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: INSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/suppliers/supplier_products_service.rb:64:in `create_price'
app/services/suppliers/supplier_products_service.rb:16:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
  [1m[36mCurrency Load (1.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" ORDER BY "currencies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCurrency Load (0.4ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:33:35 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:33:39.503367"], ["updated_at", "2020-09-29 18:33:39.503367"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (0.8ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 5], ["price", "25.0"], ["created_at", "2020-09-29 18:33:40.229638"], ["updated_at", "2020-09-29 18:33:40.229638"], ["currency_id", 3]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 204 No Content in 5074ms (Views: 0.3ms | ActiveRecord: 8.4ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:36:26 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>4}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>4}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:70
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:75
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:15
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mSupplierProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:36:34.424650"], ["updated_at", "2020-09-29 18:36:34.424650"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:65
  [1m[36mSupplierProductPrice Create (1.2ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 6], ["price", "25.0"], ["created_at", "2020-09-29 18:36:34.450011"], ["updated_at", "2020-09-29 18:36:34.450011"], ["currency_id", 4]]
  â†³ app/services/suppliers/supplier_products_service.rb:65
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:15
Completed 204 No Content in 7818ms (Views: 0.2ms | ActiveRecord: 28.7ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-29 22:42:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-29 22:42:33 +0400
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:42:50 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>5}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>5}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:79
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:19
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[36mSupplierProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:42:58.324208"], ["updated_at", "2020-09-29 18:42:58.324208"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mSupplierProductPrice Create (1.3ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 7], ["price", "25.0"], ["created_at", "2020-09-29 18:42:58.357730"], ["updated_at", "2020-09-29 18:42:58.357730"], ["currency_id", 5]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:19
Completed 201 Created in 8025ms (Views: 0.2ms | ActiveRecord: 49.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started DELETE "/en/products?id=15" for 127.0.0.1 at 2020-09-30 00:34:31 +0400
Processing by ProductsController#destroy as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started DELETE "/en/products?id=15" for 127.0.0.1 at 2020-09-30 00:35:04 +0400
Processing by ProductsController#destroy as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_destroy_service.rb:20
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProductCharacteristic Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_characteristics" WHERE "product_characteristics"."id" = $1[0m  [["id", 21]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProductImage Load (5.3ms)[0m  [1m[34mSELECT "product_images".* FROM "product_images" WHERE "product_images"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProduct Destroy (2.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 15]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/products/product_destroy_service.rb:21
Completed 500 Internal Server Error in 16390ms (ActiveRecord: 28.5ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "products" violates foreign key constraint "fk_rails_9a363579c5" on table "supplier_products"
DETAIL:  Key (id)=(15) is still referenced from table "supplier_products".
: DELETE FROM "products" WHERE "products"."id" = $1):
  
app/services/products/product_destroy_service.rb:21:in `destroy_product'
app/controllers/products_controller.rb:34:in `destroy'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddActiveColumnToProduct (20200929203713)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.7ms)[0m  [1m[35mALTER TABLE "products" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20200929203713_add_active_column_to_product.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200929203713"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/products?id=2" for 127.0.0.1 at 2020-09-30 00:39:43 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_destroy_service.rb:20
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_destroy_service.rb:22
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "active" = $1 WHERE "products"."id" = $2[0m  [["active", false], ["id", 2]]
  â†³ app/services/products/product_destroy_service.rb:22
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_destroy_service.rb:22
Completed 200 OK in 21999ms (Views: 0.2ms | ActiveRecord: 46.2ms)


  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.9ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (1.1ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
Started PUT "/en/products" for 127.0.0.1 at 2020-09-30 00:46:46 +0400
Processing by ProductsController#update as JSON
  Parameters: {"id"=>2, "name"=>{"en"=>"changed name"}, "full_name"=>{"en"=>"changed full name"}, "description"=>"changed description", "instruction"=>"changed instruction", "code"=>"02020202", "product_characteristic_attributes"=>{"id"=>2, "sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"54", "manufacturer"=>"OSLAM", "description"=>"changed description", "external_code"=>"989898", "EAN_code"=>"25639", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}, "locale"=>"en", "product"=>{"id"=>2, "name"=>{"en"=>"changed name"}, "full_name"=>{"en"=>"changed full name"}, "description"=>"changed description", "code"=>"02020202", "instruction"=>"changed instruction", "product_characteristic_attributes"=>{"id"=>2, "sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"54", "manufacturer"=>"OSLAM", "description"=>"changed description", "external_code"=>"989898", "EAN_code"=>"25639", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):6
  [1m[36mProductCharacteristic Load (0.9ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mProductCharacteristic Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_characteristics" WHERE "product_characteristics"."id" = $1[0m  [["id", 2]]
  â†³ (pry):6
  [1m[36mProduct Update (38.2ms)[0m  [1m[33mUPDATE "products" SET "name" = $1, "full_name" = $2, "description" = $3, "code" = $4, "instruction" = $5 WHERE "products"."id" = $6[0m  [["name", "{\"en\":\"changed name\"}"], ["full_name", "{\"en\":\"changed full name\"}"], ["description", "changed description"], ["code", "02020202"], ["instruction", "changed instruction"], ["id", 2]]
  â†³ (pry):6
  [1m[36mProductCharacteristic Create (6.4ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "volume", "manufacturer", "description", "external_code", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id", "subscription", "commission") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15) RETURNING "id"[0m  [["product_id", 2], ["sub_category_id", 2], ["volume", "54"], ["manufacturer", "OSLAM"], ["description", "changed description"], ["external_code", "989898"], ["EAN_code", "25639"], ["weight", "23.0"], ["width", "23.0"], ["height", "23.0"], ["depth", "23.0"], ["product_type_id", 5], ["product_vat_type_id", 2], ["subscription", true], ["commission", true]]
  â†³ (pry):6
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):6
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:22
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductCharacteristic Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_characteristics" WHERE "product_characteristics"."id" = $1[0m  [["id", 22]]
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductCharacteristic Create (0.7ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "volume", "manufacturer", "description", "external_code", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id", "subscription", "commission") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15) RETURNING "id"[0m  [["product_id", 2], ["sub_category_id", 2], ["volume", "54"], ["manufacturer", "OSLAM"], ["description", "changed description"], ["external_code", "989898"], ["EAN_code", "25639"], ["weight", "23.0"], ["width", "23.0"], ["height", "23.0"], ["depth", "23.0"], ["product_type_id", 5], ["product_vat_type_id", 2], ["subscription", true], ["commission", true]]
  â†³ app/services/products/product_update_service.rb:23
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.6ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 111426ms (Views: 3.2ms | ActiveRecord: 128.3ms)


Started GET "/en/products/list" for 127.0.0.1 at 2020-09-30 00:53:30 +0400
Processing by ProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.6ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 11], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 13], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE ProductType Load (0.0ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE ProductVatType Load (0.0ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
Completed 200 OK in 148ms (Views: 1.3ms | ActiveRecord: 32.9ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-30 00:55:20 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-30 00:56:00 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms)


  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:21:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:21:28 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:32:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:32:26 +0400
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:33:14 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :id, :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (1.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 31036ms (ActiveRecord: 4.7ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f26f807cd00>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:34:06 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:34:07 +0400
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 7575ms (ActiveRecord: 9.4ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f26f42ec6c0>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 36960ms (ActiveRecord: 7.6ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f2708270f20>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:34:55 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 36445ms (ActiveRecord: 0.5ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f26f8127458>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:35:35 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 6854ms (Views: 0.6ms | ActiveRecord: 15.5ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:35:53 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):10
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[36mSupplierProductPrice Destroy (1.2ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ (pry):10
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):10
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):11
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):11
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 84839ms (Views: 0.2ms | ActiveRecord: 7.3ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:37:21 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 17206ms (Views: 0.2ms | ActiveRecord: 13.7ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:37:51 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 4491ms (Views: 0.2ms | ActiveRecord: 20.8ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:38:02 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):18
  [1m[36mCACHE SupplierProduct Load (0.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):19
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ (pry):19
  [1m[36mCACHE SupplierProduct Load (0.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mCACHE SupplierProductPrice Load (0.0ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 90420ms (Views: 0.8ms | ActiveRecord: 4.1ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:40:19 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):21
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ (pry):21
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):21
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):21
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):21
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):23
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):23
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):25
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):27
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ (pry):28
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):29
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):30
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 61223ms (Views: 0.1ms | ActiveRecord: 8.5ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:41:28 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProduct Update (0.5ms)[0m  [1m[33mUPDATE "supplier_products" SET "product_id" = $1, "supplier_code" = $2, "quantity" = $3, "updated_at" = $4 WHERE "supplier_products"."id" = $5[0m  [["product_id", 2], ["supplier_code", "0066"], ["quantity", 20], ["updated_at", "2020-09-29 21:41:33.961357"], ["id", 7]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Update (0.7ms)[0m  [1m[33mUPDATE "supplier_product_prices" SET "price" = $1, "currency_id" = $2, "updated_at" = $3 WHERE "supplier_product_prices"."id" = $4[0m  [["price", "20.0"], ["currency_id", 1], ["updated_at", "2020-09-29 21:41:33.962833"], ["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 500 Internal Server Error in 5556ms (ActiveRecord: 2.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: UPDATE "supplier_product_prices" SET "price" = $1, "currency_id" = $2, "updated_at" = $3 WHERE "supplier_product_prices"."id" = $4):
  
app/services/suppliers/supplier_products_service.rb:33:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:17:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:41:47 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProduct Update (0.4ms)[0m  [1m[33mUPDATE "supplier_products" SET "product_id" = $1, "supplier_code" = $2, "quantity" = $3, "updated_at" = $4 WHERE "supplier_products"."id" = $5[0m  [["product_id", 2], ["supplier_code", "0066"], ["quantity", 20], ["updated_at", "2020-09-29 21:41:52.336022"], ["id", 7]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Update (0.4ms)[0m  [1m[33mUPDATE "supplier_product_prices" SET "price" = $1, "currency_id" = $2, "updated_at" = $3 WHERE "supplier_product_prices"."id" = $4[0m  [["price", "20.0"], ["currency_id", 3], ["updated_at", "2020-09-29 21:41:52.337401"], ["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 200 OK in 5354ms (Views: 0.3ms | ActiveRecord: 37.6ms)


  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:46:04 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
Completed 500 Internal Server Error in 9796ms (ActiveRecord: 15.1ms)


  
NoMethodError (undefined method `currency' for #<SupplierProductPrice:0x00007f26f4497650>
Did you mean?  currency_id):
  
app/services/suppliers/supplier_products_service.rb:18:in `update_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/supplier_products_controller.rb:18:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:46:49 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
Completed 200 OK in 4524ms (Views: 0.3ms | ActiveRecord: 18.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:47:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:47:20 +0400
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:55:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:55:06 +0400
Started DELETE "/en/supplier_products?id=7" for 127.0.0.1 at 2020-09-30 01:55:19 +0400
Processing by SupplierProductsController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 12.5ms)


  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products"[0m
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/supplier_products?id=7" for 127.0.0.1 at 2020-09-30 01:56:04 +0400
Processing by SupplierProductsController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mSupplierProduct Update (0.4ms)[0m  [1m[33mUPDATE "supplier_products" SET "is_active" = $1, "updated_at" = $2 WHERE "supplier_products"."id" = $3[0m  [["is_active", true], ["updated_at", "2020-09-29 21:56:04.520817"], ["id", 7]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
Completed 200 OK in 49ms (Views: 0.2ms | ActiveRecord: 13.8ms)


  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeColumnDefaultValue (20200929215700)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeColumnDefaultValue (20200929215700)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (39.6ms)[0m  [1m[35mALTER TABLE "supplier_products" ALTER COLUMN "is_active" TYPE boolean, ALTER COLUMN "is_active" SET DEFAULT TRUE[0m
  â†³ db/migrate/20200929215700_change_column_default_value.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200929215700"]]
  â†³ bin/rails:9
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 16:56:42 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
  [1m[36mSupplierProduct Load (6.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 17:31:01 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 17:31:01 +0400
Started GET "/en/supplier_products/list" for 127.0.0.1 at 2020-09-30 17:31:13 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/supplier_products/list" for 127.0.0.1 at 2020-09-30 17:31:27 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mProduct Load (4.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mSupplierProductPrice Load (2.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mCurrency Load (1.6ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 84ms (Views: 0.3ms | ActiveRecord: 24.8ms)


  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-01 19:04:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-01 19:04:44 +0400
Started GET "/en/supplier_products/list?supplier_id=2" for 127.0.0.1 at 2020-10-01 19:05:18 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (3.6ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 2], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 16.7ms)


Started GET "/en/supplier_products/list?supplier_id=5" for 127.0.0.1 at 2020-10-01 19:05:25 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 5], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started GET "/en/supplier_products/list?supplier_id=1" for 127.0.0.1 at 2020-10-01 19:05:31 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 1], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/en/supplier_products/list?supplier_id=2" for 127.0.0.1 at 2020-10-01 19:05:36 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 2], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/en/supplier_products/list?supplier_id=3" for 127.0.0.1 at 2020-10-01 19:05:42 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 3], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/supplier_products/list?supplier_id=4" for 127.0.0.1 at 2020-10-01 19:05:46 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (35.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 4], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mProduct Load (3.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mSupplierProductPrice Load (2.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mCurrency Load (2.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 165ms (Views: 0.4ms | ActiveRecord: 73.9ms)


  [1m[36mProductCharacteristic Load (3.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (38.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductPrices (20201001214457)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (21.4ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "product_id" bigint NOT NULL, "list_price_type" character varying(30) NOT NULL, "list_price_amount" decimal NOT NULL, "manufacturing_cost" decimal NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  â†³ db/migrate/20201001214457_create_product_prices.rb:3
  [1m[35m (104.0ms)[0m  [1m[35mCREATE  INDEX  "index_product_prices_on_product_id" ON "product_prices"  ("product_id")[0m
  â†³ db/migrate/20201001214457_create_product_prices.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201001214457"]]
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductPrice Load (1.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (37.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 01:54:59 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
  [1m[36mProduct Load (3.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 01:57:56 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 6.6ms)


  
NameError (uninitialized constant Products::ProductsPrice):
  
app/controllers/product_prices_controller.rb:9:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:00:21 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 1.7ms)


  
NameError (uninitialized constant Products::ProductsPriceService):
  
app/controllers/product_prices_controller.rb:9:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:00:45 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Completed 500 Internal Server Error in 56042ms (ActiveRecord: 2.4ms)


  
NameError (uninitialized constant Products::ProductsPriceService):
  
app/controllers/product_prices_controller.rb:10:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:01:46 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:22
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:27
Completed 500 Internal Server Error in 5612ms (ActiveRecord: 13.2ms)


  
NameError (undefined local variable or method `params' for #<Products::ProductPriceService:0x00007ff884174fd8>):
  
app/services/products/product_price_service.rb:28:in `first_or_initialize_price'
app/services/products/product_price_service.rb:15:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:02:54 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:22
  [1m[36mProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:27
Completed 500 Internal Server Error in 108091ms (ActiveRecord: 1.7ms)


  
NameError (undefined local variable or method `params' for #<Products::ProductPriceService:0x00007ff8700ebb98>):
  
app/services/products/product_price_service.rb:28:in `first_or_initialize_price'
app/services/products/product_price_service.rb:15:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:05:13 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:25
  [1m[36mProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:30
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mProductPrice Create (6.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("product_id", "list_price_type", "list_price_amount", "manufacturing_cost", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_id", 15], ["list_price_type", "fix_price"], ["list_price_amount", "200.0"], ["manufacturing_cost", "300.0"], ["created_at", "2020-10-02 22:05:39.266495"], ["updated_at", "2020-10-02 22:05:39.266495"]]
  â†³ app/services/products/product_price_service.rb:31
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):13
Completed 204 No Content in 2954989ms (Views: 0.2ms | ActiveRecord: 28.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 02:54:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 02:54:51 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 02:56:02 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 02:56:02 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 02:57:20 +0400
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 03:05:38 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>50, "manufacturing_cost"=>200, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>50, "manufacturing_cost"=>200}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:30
  [1m[36mProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:36
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:36
  [1m[36mProductPrice Update (0.8ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_type" = $1, "list_price_amount" = $2, "manufacturing_cost" = $3, "updated_at" = $4 WHERE "product_prices"."id" = $5[0m  [["list_price_type", "percent"], ["list_price_amount", "50.0"], ["manufacturing_cost", "200.0"], ["updated_at", "2020-10-02 23:05:45.999521"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:36
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:36
Completed 500 Internal Server Error in 7591ms (ActiveRecord: 18.4ms)


  
ActiveRecord::ConfigurationError (Can't join 'ProductPrice' to association named 'products'; perhaps you misspelled it?):
  
app/services/products/product_price_service.rb:53:in `calculation'
app/services/products/product_price_service.rb:20:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
  [1m[36mProductPrice Load (2.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductPrice Load (4.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" INNER JOIN "supplier_products" ON "supplier_products"."product_id" = "products"."id" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductPrice Load (1.6ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" INNER JOIN "supplier_products" ON "supplier_products"."product_id" = "products"."id"[0m
  [1m[36mProductPrice Load (1.3ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id"[0m
  [1m[36mProductPrice Load (1.8ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id = products.id[0m
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id = products.id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProductPrice Load (1.6ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id == products.id[0m
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id == products.id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id == products.id[0m
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id == products.id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProductPrice Load (1.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id = products.id[0m
  [1m[36mProductPrice Load (40.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id = products.id LEFT JOIN supplier_product_prices as prices ON prices.supplier_product_id = supplier_products.id[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 17:23:30 +0400
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 17:24:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 17:24:48 +0400
  [1m[36mSupplierProduct Load (4.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (6.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (14.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:36:51 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (3.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (39.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.9ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_amount" = $1, "manufacturing_cost" = $2, "updated_at" = $3 WHERE "product_prices"."id" = $4[0m  [["list_price_amount", "20.0"], ["manufacturing_cost", "100.0"], ["updated_at", "2020-10-03 13:36:59.298049"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:42
  [1m[36mCACHE SupplierProduct Load (0.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 36351ms (ActiveRecord: 72.5ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products"[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 ORDER BY "supplier_products"."id" DESC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 5]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 ORDER BY "supplier_products"."id" DESC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 5]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 ORDER BY "supplier_products"."id" DESC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 5]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 1], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (1.4ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 2], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 2]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 3], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 3]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 4], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (0.3ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 4]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 5], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (1.1ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 4]]
  [1m[36mSupplierProduct Destroy (1.1ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 5]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 6], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (0.8ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 5]]
  [1m[36mSupplierProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 6]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Create (15.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-10-03 13:39:22.038753"], ["updated_at", "2020-10-03 13:39:22.038753"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-10-03 13:39:49.181275"], ["updated_at", "2020-10-03 13:39:49.181275"], ["quantity", 50]]
  [1m[35m (35.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "supplier_products"[0m
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 8], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (0.9ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 8]]
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:41:13 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.5ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 22971ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:41:51 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 166368ms (ActiveRecord: 4.3ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:44:40 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:42
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):11
Completed 500 Internal Server Error in 109857ms (ActiveRecord: 26.2ms)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:47:53 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):19
Completed 500 Internal Server Error in 32510ms (ActiveRecord: 4.6ms)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:48:39 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):22
Completed 500 Internal Server Error in 34184ms (ActiveRecord: 36.3ms)


  
TypeError (nil can't be coerced into BigDecimal):
  
app/services/products/product_price_service.rb:56:in `+'
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:49:47 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mSupplier Load (1.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):28
  [1m[36mCACHE Supplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):29
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):30
  [1m[36mCACHE Supplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
Completed 500 Internal Server Error in 95853ms (ActiveRecord: 42.2ms)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:51:40 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:56
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
Completed 201 Created in 6253ms (Views: 0.2ms | ActiveRecord: 46.7ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:52:14 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:57
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:59
Completed 201 Created in 5499ms (Views: 0.3ms | ActiveRecord: 47.6ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:52:52 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 17115ms (Views: 0.7ms | ActiveRecord: 41.0ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:53:29 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 5493ms (Views: 0.8ms | ActiveRecord: 44.1ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:54:34 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (1.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 5635ms (Views: 0.6ms | ActiveRecord: 49.2ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:55:07 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.1ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_type" = $1, "list_price_amount" = $2, "updated_at" = $3 WHERE "product_prices"."id" = $4[0m  [["list_price_type", "fix_price"], ["list_price_amount", "30.0"], ["updated_at", "2020-10-03 13:55:11.519251"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 6674ms (Views: 0.5ms | ActiveRecord: 41.8ms)


  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCurrency Load (6.4ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.7ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Create (36.0ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 9], ["price", "100.0"], ["created_at", "2020-10-03 13:56:43.059730"], ["updated_at", "2020-10-03 13:56:43.059730"], ["currency_id", 3]]
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:56:46 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.7ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 6836ms (Views: 0.7ms | ActiveRecord: 10.4ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:57:11 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (0.8ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_type" = $1, "updated_at" = $2 WHERE "product_prices"."id" = $3[0m  [["list_price_type", "percent"], ["updated_at", "2020-10-03 13:57:13.857079"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 4621ms (Views: 0.6ms | ActiveRecord: 41.4ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:57:26 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.1ms)[0m  [1m[33mUPDATE "product_prices" SET "manufacturing_cost" = $1, "updated_at" = $2 WHERE "product_prices"."id" = $3[0m  [["manufacturing_cost", "0.0"], ["updated_at", "2020-10-03 13:57:29.707511"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 5069ms (Views: 0.5ms | ActiveRecord: 10.0ms)


  [1m[36mSupplier Load (1.5ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 3], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-10-03 13:58:08.973874"], ["updated_at", "2020-10-03 13:58:08.973874"], ["quantity", 50]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.6ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Create (1.4ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 10], ["price", "120.0"], ["created_at", "2020-10-03 13:58:19.796233"], ["updated_at", "2020-10-03 13:58:19.796233"], ["currency_id", 3]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:58:22 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 10], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 24934ms (Views: 0.6ms | ActiveRecord: 6.0ms)


  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 10], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (0.6ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 8]]
  [1m[36mSupplierProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 10]]
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (0.8ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 7]]
  [1m[36mSupplierProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 9]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:59:36 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.5ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 12480ms (ActiveRecord: 3.6ms)


  
NoMethodError (undefined method `supplier_id' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:50:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:00:22 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.3ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 6032ms (ActiveRecord: 21.6ms)


  
NoMethodError (undefined method `supplier_id' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:50:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:00:42 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 500 Internal Server Error in 4976ms (ActiveRecord: 24.9ms)


  
NoMethodError (undefined method `name' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:50:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:01:07 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.2ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplier Load (1.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 7671ms (Views: 0.8ms | ActiveRecord: 28.1ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:01:31 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>50, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>50}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.4ms)[0m  [1m[33mUPDATE "product_prices" SET "manufacturing_cost" = $1, "updated_at" = $2 WHERE "product_prices"."id" = $3[0m  [["manufacturing_cost", "50.0"], ["updated_at", "2020-10-03 14:01:41.940575"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (36.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 13098ms (Views: 0.6ms | ActiveRecord: 42.1ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 18:30:23 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/product_prices/price?product_id=15" for 127.0.0.1 at 2020-10-03 18:32:30 +0400
Processing by ProductPricesController#price as JSON
  Parameters: {"product_id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:51
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:64
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 10.3ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:05:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:05:47 +0400
  [1m[36mProductPrice Load (2.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:33:27 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:34:02 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:34:02 +0400
Started GET "/en/product_prices/%7Bid%7D" for 127.0.0.1 at 2020-10-06 17:34:22 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/product_prices/%7Bid%7D"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:35:29 +0400
Started GET "/en/product_prices/%7Bid%7D" for 127.0.0.1 at 2020-10-06 17:35:37 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{id}"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:25
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.5ms)


Started GET "/en/product_prices/%7Bid%7D" for 127.0.0.1 at 2020-10-06 17:36:11 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{id}"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (1.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 30090ms (Views: 0.1ms | ActiveRecord: 9.3ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/en/product_prices/15" for 127.0.0.1 at 2020-10-06 17:38:44 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"15"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 23829ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/en/product_prices/15" for 127.0.0.1 at 2020-10-06 17:39:45 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"15"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 5524ms (Views: 0.7ms | ActiveRecord: 12.6ms)


Started GET "/en/product_prices/56" for 127.0.0.1 at 2020-10-06 17:40:35 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"56"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 56], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 4194ms (Views: 0.2ms | ActiveRecord: 0.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201007134238)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (63.3ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL)[0m
  â†³ db/migrate/20201007134238_create_departments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007134238"]]
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSubDepartments (20201007140014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "sub_departments" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL, "department_id" integer NOT NULL)[0m
  â†³ db/migrate/20201007140014_create_sub_departments.rb:3
  [1m[35m (7.4ms)[0m  [1m[35mALTER TABLE "sub_departments" ADD CONSTRAINT "fk_rails_6f78497161"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/migrate/20201007140014_create_sub_departments.rb:10
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007140014"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSubDepartments (20201007140014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.8ms)[0m  [1m[35mALTER TABLE "sub_departments" DROP CONSTRAINT "fk_rails_6f78497161"[0m
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "sub_departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201007140014"]]
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201007134238)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201007134238"]]
  â†³ bin/rails:9
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCustomerType Load (2.7ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" ORDER BY "customer_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomerType Load (0.9ms)[0m  [1m[34mSELECT "customer_types".* FROM "customer_types"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanies (20201007194524)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying)[0m
  â†³ db/migrate/20201007194524_create_companies.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007194524"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCountries (20201007200055)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "countries" ("id" bigserial primary key, "name" character varying NOT NULL, "country_code" character varying NOT NULL)[0m
  â†³ db/migrate/20201007200055_create_countries.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007200055"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateCities (20201007200103)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "cities" ("id" bigserial primary key, "name" character varying NOT NULL, "city_code" character varying NOT NULL, "country_id" bigint NOT NULL, CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
)[0m
  â†³ db/migrate/20201007200103_create_cities.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  â†³ db/migrate/20201007200103_create_cities.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007200103"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "countries_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_countries_id" ON "companies"  ("countries_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_0db510c354"
FOREIGN KEY ("countries_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "cities_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_cities_id" ON "companies"  ("cities_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_4cf4bc2908"
FOREIGN KEY ("cities_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_parent_id" ON "companies"  ("parent_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "parents" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "countries_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_countries_id" ON "companies"  ("countries_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_0db510c354"
FOREIGN KEY ("countries_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "cities_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_cities_id" ON "companies"  ("cities_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_4cf4bc2908"
FOREIGN KEY ("cities_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_parent_id" ON "companies"  ("parent_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "parents" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "countries_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_countries_id" ON "companies"  ("countries_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_0db510c354"
FOREIGN KEY ("countries_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "cities_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_cities_id" ON "companies"  ("cities_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_4cf4bc2908"
FOREIGN KEY ("cities_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" integer[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007201451"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:40:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:40:26 +0400
Started POST "/%7Blocale%7D/settings/country" for 127.0.0.1 at 2020-10-08 01:41:02 +0400
  
ActionController::RoutingError (uninitialized constant SettingsController):
  
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `block in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `rescue in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:56:in `load_missing_constant'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/%7Blocale%7D/settings/country" for 127.0.0.1 at 2020-10-08 01:42:36 +0400
  
AbstractController::ActionNotFound (The action 'country' could not be found for SettingsController):
  
actionpack (5.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/%7Blocale%7D/settings/country" for 127.0.0.1 at 2020-10-08 01:43:08 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"{locale}", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("{locale}" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:44:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:44:43 +0400
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:44:58 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
Completed 500 Internal Server Error in 39ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `paramsp' for #<Settings::CountryAndCityService:0x000055aa02129678>
Did you mean?  params
               @params):
  
app/services/settings/country_and_city_service.rb:22:in `country'
app/controllers/settings_controller.rb:10:in `country'
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:17 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "geo"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Create (3.4ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Georgia"], ["country_code", "geo"]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 10.7ms)


Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:26 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgiaaa", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgiaaa", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "geo"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Update (0.3ms)[0m  [1m[33mUPDATE "countries" SET "name" = $1 WHERE "countries"."id" = $2[0m  [["name", "Georgiaaa"], ["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.6ms)


Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:34 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "geo"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Update (0.3ms)[0m  [1m[33mUPDATE "countries" SET "name" = $1 WHERE "countries"."id" = $2[0m  [["name", "Georgia"], ["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 36.6ms)


Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:43 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Norway", "country_code"=>"nor", "locale"=>"en", "setting"=>{"name"=>"Norway", "country_code"=>"nor"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "nor"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Create (0.3ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Norway"], ["country_code", "nor"]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 2.8ms)


Started GET "/en/settings/countries" for 127.0.0.1 at 2020-10-08 01:45:52 +0400
Processing by SettingsController#countries as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 204 No Content in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:46:20 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `paramsp' for #<Settings::CountryAndCityService:0x00007f605026c8e0>
Did you mean?  params
               @params):
  
app/services/settings/country_and_city_service.rb:28:in `city'
app/controllers/settings_controller.rb:16:in `city'
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:47:30 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:36
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[36mCity Create (0.8ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:37
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.5ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (1, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:37:in `city'
app/controllers/settings_controller.rb:16:in `city'
Started GET "/en/settings/countries" for 127.0.0.1 at 2020-10-08 01:48:07 +0400
Processing by SettingsController#countries as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT "countries".* FROM "countries"[0m
  â†³ app/services/settings/country_and_city_service.rb:22
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 2.8ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:49:08 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 46648ms (ActiveRecord: 12.3ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (2, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:16:in `city'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:50:48 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 5253ms (ActiveRecord: 5.7ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (3, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:51:00 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 37719ms (ActiveRecord: 1.0ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (4, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:51:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:51:41 +0400
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:51:51 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.6ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 4014ms (ActiveRecord: 2.4ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (5, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:52:03 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 33613ms (ActiveRecord: 1.2ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (6, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:52:56 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:52:56 +0400
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:53:09 +0400
Processing by SettingsController#city as JSON
  Parameters: {"country_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"country_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.7ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code", "country_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"], ["country_id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 200 OK in 9144ms (Views: 1.1ms | ActiveRecord: 43.3ms)


Started GET "/en/settings/cities?country_id=1" for 127.0.0.1 at 2020-10-08 01:53:31 +0400
Processing by SettingsController#cities as JSON
  Parameters: {"country_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1[0m  [["country_id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:26
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.4ms)


  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 17:49:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 17:49:25 +0400
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:49:35 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (1.3ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 500 Internal Server Error in 20ms (ActiveRecord: 8.8ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:59:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_city?id=2" for 127.0.0.1 at 2020-10-08 17:49:53 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[36mCountry Destroy (0.9ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 2]]
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:65
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 35.8ms)


Started DELETE "/en/settings/destroy_country?id=2" for 127.0.0.1 at 2020-10-08 17:50:01 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Country with 'id'=2):
  
app/services/settings/country_and_city_service.rb:58:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:50:05 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (0.7ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:59:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_city?id=1" for 127.0.0.1 at 2020-10-08 17:50:16 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[36mCountry Destroy (0.5ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:65
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.9ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:65:in `destroy_city'
app/controllers/settings_controller.rb:40:in `destroy_city'
Started DELETE "/en/settings/destroy_city?id=1" for 127.0.0.1 at 2020-10-08 17:51:12 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
Completed 404 Not Found in 9ms (ActiveRecord: 3.6ms)


  
ActiveRecord::RecordNotFound (Couldn't find City with 'id'=1):
  
app/services/settings/country_and_city_service.rb:64:in `destroy_city'
app/controllers/settings_controller.rb:40:in `destroy_city'
Started DELETE "/en/settings/destroy_city?id=2" for 127.0.0.1 at 2020-10-08 17:51:19 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find City with 'id'=2):
  
app/services/settings/country_and_city_service.rb:64:in `destroy_city'
app/controllers/settings_controller.rb:40:in `destroy_city'
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:51:25 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (0.6ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 500 Internal Server Error in 10ms (ActiveRecord: 4.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:59:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_country?id=2" for 127.0.0.1 at 2020-10-08 17:51:31 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Country with 'id'=2):
  
app/services/settings/country_and_city_service.rb:58:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT "cities".* FROM "cities"[0m
Started DELETE "/en/settings/destroy_city?id=7" for 127.0.0.1 at 2020-10-08 17:51:56 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[36mCity Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 7]]
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[35m (35.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:65
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 36.7ms)


Started DELETE "/en/settings/destroy_country?id=2" for 127.0.0.1 at 2020-10-08 17:52:05 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Country with 'id'=2):
  
app/services/settings/country_and_city_service.rb:58:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:52:08 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (0.6ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 36.9ms)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-09 00:30:55 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"GEO", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"GEO"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (1.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "GEO"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[36mCountry Create (1.7ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Georgia"], ["country_code", "GEO"]]
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:39
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 10.6ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-09 00:31:14 +0400
Processing by SettingsController#city as JSON
  Parameters: {"country_id"=>3, "name"=>"Tbilisi", "city_code"=>"TBL", "locale"=>"en", "setting"=>{"country_id"=>3, "name"=>"Tbilisi", "city_code"=>"TBL"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "TBL"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:44
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[36mCity Create (4.9ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code", "country_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "TBL"], ["country_id", 3]]
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:45
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 15.6ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:32:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:32:15 +0400
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:32:25 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
Completed 500 Internal Server Error in 12ms (ActiveRecord: 5.9ms)


  
NameError (undefined local variable or method `params' for #<Companies::CompaniesService:0x000055cd38657a10>
Did you mean?  @params):
  
app/services/companies/companies_service.rb:26:in `validate_country'
app/services/companies/companies_service.rb:21:in `validate_data!'
app/services/companies/companies_service.rb:14:in `create_company'
app/controllers/companies_controller.rb:10:in `create'
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:32:47 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:26
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:38
  [1m[36mCompany Create (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:38
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:38
Completed 400 Bad Request in 112ms (Views: 0.2ms | ActiveRecord: 11.2ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:33:14 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 82593ms (Views: 0.3ms | ActiveRecord: 21.9ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:34:52 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 4518ms (Views: 0.6ms | ActiveRecord: 59.7ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:35:13 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 8349ms (Views: 0.5ms | ActiveRecord: 62.3ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:35:35 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (1.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 35464ms (Views: 0.4ms | ActiveRecord: 4.7ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:36:13 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 14784ms (Views: 0.5ms | ActiveRecord: 59.1ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:36:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:36:49 +0400
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:37:04 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (1.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id", "cities_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3], ["cities_id", 8]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 204 No Content in 13319ms (Views: 0.2ms | ActiveRecord: 49.3ms)


  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT "countries".* FROM "countries"[0m
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCountry Destroy (6.8ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (2.1ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (5.5ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (1.8ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (1.1ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (0.8ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (2.0ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (0.5ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 6]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 5]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 2]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (0.8ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (0.9ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCountry Destroy (2.2ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 3]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:10
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "cities_id"[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:11
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "parent_id"[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:12
  [1m[36mActiveRecord::SchemaMigration Destroy (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201007201451"]]
  â†³ bin/rails:9
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "companies" ADD "country_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_country_id" ON "companies"  ("country_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (5.9ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_75b15a5c36"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "city_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_city_id" ON "companies"  ("city_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_268726594d"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" integer[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007201451"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:45:49 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (1.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
Completed 500 Internal Server Error in 3767ms (ActiveRecord: 17.5ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'countries_id' for Company.):
  
app/services/companies/companies_service.rb:44:in `create_company_obj'
app/services/companies/companies_service.rb:20:in `create_company'
app/controllers/companies_controller.rb:11:in `create'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:46:24 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
Completed 500 Internal Server Error in 3182ms (ActiveRecord: 12.1ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'countries_id' for Company.):
  
app/services/companies/companies_service.rb:44:in `create_company_obj'
app/services/companies/companies_service.rb:20:in `create_company'
app/controllers/companies_controller.rb:11:in `create'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:47:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-09 00:48:35 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"GEO", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"GEO"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "GEO"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[36mCountry Create (0.5ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Georgia"], ["country_code", "GEO"]]
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:39
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 11.8ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-09 00:49:03 +0400
Processing by SettingsController#city as JSON
  Parameters: {"country_id"=>4, "name"=>"Tbilisi", "city_code"=>"TBL", "locale"=>"en", "setting"=>{"country_id"=>4, "name"=>"Tbilisi", "city_code"=>"TBL"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "TBL"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:44
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[36mCity Create (0.8ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code", "country_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "TBL"], ["country_id", 4]]
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:45
Completed 200 OK in 54ms (Views: 0.3ms | ActiveRecord: 41.7ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:49:24 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>4, "cities_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :countries_id, :cities_id, :format, :locale, :company
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:45
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:45
Completed 400 Bad Request in 7363ms (Views: 0.5ms | ActiveRecord: 8.5ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:50:04 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>4, "cities_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :countries_id, :cities_id, :format, :locale, :company
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:45
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:45
Completed 400 Bad Request in 40801ms (Views: 0.8ms | ActiveRecord: 1.5ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:51:05 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:39
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:45
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:45
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:45
  [1m[36mCompany Create (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:45
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:45
Completed 201 Created in 7174ms (Views: 0.2ms | ActiveRecord: 6.3ms)


  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.6ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:55:38 +0400
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:55:48 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (1.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:31
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:44
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:44
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:44
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:44
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:44
Completed 201 Created in 6491ms (Views: 0.5ms | ActiveRecord: 35.3ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 01:21:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 01:21:37 +0400
Started PUT "/en/companies" for 127.0.0.1 at 2020-10-09 01:22:30 +0400
Processing by CompaniesController#update as JSON
  Parameters: {"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:35
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:41
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/services/companies/companies_service.rb:52
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCompany Update (0.6ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "description" = $2, "address" = $3, "phone_number" = $4 WHERE "companies"."id" = $5[0m  [["name", "changed name for test"], ["description", "changed description for test"], ["address", "changed address for test"], ["phone_number", "changed phone for test"], ["id", 9]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:52
Completed 500 Internal Server Error in 52ms (ActiveRecord: 19.6ms)


  
NoMethodError (undefined method `errors' for #<Array:0x00007f17d84a2710>):
  
app/services/companies/companies_service.rb:53:in `update_company_obj'
app/services/companies/companies_service.rb:24:in `update_company'
app/controllers/companies_controller.rb:16:in `update'
Started PUT "/en/companies" for 127.0.0.1 at 2020-10-09 01:23:32 +0400
Processing by CompaniesController#update as JSON
  Parameters: {"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:35
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:41
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:53
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:53
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:53
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:53
Completed 200 OK in 71ms (Views: 0.4ms | ActiveRecord: 15.5ms)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 01:36:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 01:36:07 +0400
Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:36:18 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:42
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:74
Completed 404 Not Found in 28ms (Views: 0.2ms | ActiveRecord: 9.2ms)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:36:44 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:42
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:74
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms)


  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:37:19 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:43
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ (pry):14
  [1m[36mCACHE Company Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:43
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:75
Completed 404 Not Found in 58226ms (Views: 0.6ms | ActiveRecord: 14.7ms)


Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:38:20 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 9]]
  â†³ app/services/companies/companies_service.rb:43
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:75
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:36
  [1m[36mCompany Destroy (0.7ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 9]]
  â†³ app/services/companies/companies_service.rb:36
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:36
Completed 200 OK in 5289ms (Views: 0.2ms | ActiveRecord: 7.6ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 01:39:21 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>8, "locale"=>"en", "company"=>{"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>8}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:58
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:64
Completed 400 Bad Request in 44ms (Views: 0.2ms | ActiveRecord: 10.5ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 01:39:28 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Buka LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat 13"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:64
Completed 201 Created in 13ms (Views: 0.2ms | ActiveRecord: 4.1ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 01:40:04 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Buka LTD _test", "description"=>"Software development company test", "address"=>"Gogebashvili streat 13/test", "phone_number"=>"5775202500000", "country_id"=>4, "city_id"=>9, "parent_id"=>10, "locale"=>"en", "company"=>{"name"=>"Buka LTD _test", "description"=>"Software development company test", "address"=>"Gogebashvili streat 13/test", "phone_number"=>"5775202500000", "country_id"=>4, "city_id"=>9, "parent_id"=>10}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id", "parent_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Buka LTD _test"], ["description", "Software development company test"], ["address", "Gogebashvili streat 13/test"], ["phone_number", "5775202500000"], ["country_id", 4], ["city_id", 9], ["parent_id", 10]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:64
Completed 201 Created in 9ms (Views: 0.2ms | ActiveRecord: 2.9ms)


  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 01:58:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-09 01:59:08 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 9.9ms)


Started GET "/en/companies/sub_company_list?parent_id=10" for 127.0.0.1 at 2020-10-09 01:59:22 +0400
Processing by CompaniesController#sub_company_list as JSON
  Parameters: {"parent_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 10]]
  â†³ app/services/companies/companies_service.rb:26
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (35.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (38.8ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, "parent_id" integer, "integer" integer, CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_8e1e5764fc"
FOREIGN KEY ("parent_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/migrate/20201009103111_create_departments.rb:14
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "departments" DROP CONSTRAINT "fk_rails_8e1e5764fc"[0m
  â†³ bin/rails:9
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (50.0ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, "department_id" bigint NOT NULL, CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
, CONSTRAINT "fk_rails_75958392cf"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_department_id" ON "departments"  ("department_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (38.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (43.6ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddParentIdToDepartments (20201009103857)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "departments" ADD "parent_id" integer[0m
  â†³ db/migrate/20201009103857_add_parent_id_to_departments.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_8e1e5764fc"
FOREIGN KEY ("parent_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/migrate/20201009103857_add_parent_id_to_departments.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103857"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (5.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started POST "/en/departments" for 127.0.0.1 at 2020-10-09 15:58:30 +0400
Error occurred while parsing request parameters.
Contents:

{
  "name": "HR department",
  "description": "This is HR department",
  "address": "tseretlis 123",
  "phone_number": "577520250",
  "country_id": 4,
  "city_id": 9
  "company_id": 11
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "HR department",
  "description": "This is HR department",
  "address": "tseretlis 123",
  "phone_number": "577520250",
  "country_id": 4,
  "city_id": 9
  "company_id": 11
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-09 15:58:38 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"HR department", "description"=>"This is HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11, "locale"=>"en", "department"=>{"name"=>"HR department", "description"=>"This is HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (2.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mDepartment Create (1.0ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "address", "phone_number", "country_id", "city_id", "company_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "HR department"], ["description", "This is HR department"], ["address", "tseretlis 123"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9], ["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:86
Completed 201 Created in 70ms (Views: 0.2ms | ActiveRecord: 25.6ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 16:09:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 16:09:03 +0400
Started PUT "/en/departments" for 127.0.0.1 at 2020-10-09 16:10:29 +0400
Processing by DepartmentsController#update as JSON
  Parameters: {"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11, "locale"=>"en", "department"=>{"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
Completed 500 Internal Server Error in 36ms (ActiveRecord: 14.4ms)


  
NameError (undefined local variable or method `update_department_obj' for #<Companies::DepartmentsService:0x00007f84442e4800>
Did you mean?  update_department):
  
app/services/companies/departments_service.rb:36:in `update_department'
app/controllers/departments_controller.rb:16:in `update'
Started PUT "/en/departments" for 127.0.0.1 at 2020-10-09 16:10:59 +0400
Processing by DepartmentsController#update as JSON
  Parameters: {"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11, "locale"=>"en", "department"=>{"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:97
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mDepartment Update (0.6ms)[0m  [1m[33mUPDATE "departments" SET "name" = $1, "description" = $2 WHERE "departments"."id" = $3[0m  [["name", "HR department chnaged"], ["description", "This is changed HR department"], ["id", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:92
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 15.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 17:44:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 17:44:26 +0400
Started GET "/en/departments/department_list" for 127.0.0.1 at 2020-10-09 17:44:34 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL[0m
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 6.6ms)


Started POST "/en/departments" for 127.0.0.1 at 2020-10-09 17:45:33 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"sub department", "description"=>"sub department description", "address"=>"sdcsdcsdcsdc", "phone_number"=>"sdcsdcsdc", "country_id"=>4, "city_id"=>9, "parent_id"=>1, "company_id"=>11, "locale"=>"en", "department"=>{"name"=>"sub department", "description"=>"sub department description", "address"=>"sdcsdcsdcsdc", "phone_number"=>"sdcsdcsdc", "country_id"=>4, "city_id"=>9, "company_id"=>11, "parent_id"=>1}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mDepartment Create (1.1ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "address", "phone_number", "country_id", "city_id", "company_id", "parent_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "sub department"], ["description", "sub department description"], ["address", "sdcsdcsdcsdc"], ["phone_number", "sdcsdcsdc"], ["country_id", 4], ["city_id", 9], ["company_id", 11], ["parent_id", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:86
Completed 201 Created in 47ms (Views: 0.2ms | ActiveRecord: 14.1ms)


Started GET "/en/departments/sub_departments_list?parent_id=1" for 127.0.0.1 at 2020-10-09 17:45:46 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/departments/sub_departments_list"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 17:46:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 17:46:36 +0400
Started GET "/en/departments/sub_department_list?parent_id=1" for 127.0.0.1 at 2020-10-09 17:46:43 +0400
Processing by DepartmentsController#sub_department_list as JSON
  Parameters: {"parent_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" = $1[0m  [["parent_id", 1]]
  â†³ app/services/companies/departments_service.rb:26
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started DELETE "/en/departments?id=2" for 127.0.0.1 at 2020-10-09 17:46:55 +0400
Processing by DepartmentsController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" = $1[0m  [["parent_id", 2]]
  â†³ app/services/companies/departments_service.rb:58
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:97
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:43
  [1m[36mDepartment Destroy (0.7ms)[0m  [1m[31mDELETE FROM "departments" WHERE "departments"."id" = $1[0m  [["id", 2]]
  â†³ app/services/companies/departments_service.rb:43
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:43
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 4.0ms)


  [1m[36mDepartment Load (36.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 17:56:40 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"zdfsdf", "description"=>"strivvadvng", "address"=>"strdfvdfving", "phone_number"=>"strdfvdfving", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"zdfsdf", "description"=>"strivvadvng", "address"=>"strdfvdfving", "phone_number"=>"strdfvdfving", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:67
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:73
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:79
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:79
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:79
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "zdfsdf"], ["description", "strivvadvng"], ["address", "strdfvdfving"], ["phone_number", "strdfvdfving"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:79
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:79
Completed 201 Created in 13ms (Views: 0.2ms | ActiveRecord: 5.0ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 17:06:14 +0400
Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-11 17:06:25 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-11 17:06:42 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 17.5ms)


Started GET "/en/departments/department_list?company_id=12" for 127.0.0.1 at 2020-10-11 17:06:53 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 12]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 17:09:17 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 17:09:33 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 61ms (Views: 0.5ms | ActiveRecord: 15.4ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 17:10:34 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyLogos (20201011131733)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (33.9ms)[0m  [1m[35mCREATE TABLE "company_logos" ("id" bigserial primary key, "company_id" bigint NOT NULL, "image" character varying(50), "uuid" uuid NOT NULL, CONSTRAINT "fk_rails_8ae580a1d6"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_logos_on_company_id" ON "company_logos"  ("company_id")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (3.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_company_logos_on_uuid" ON "company_logos"  ("uuid")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201011131733"]]
  â†³ bin/rails:9
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyLogos (20201011131733)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.0ms)[0m  [1m[35mDROP INDEX  "index_company_logos_on_uuid"[0m
  â†³ bin/rails:9
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "company_logos"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201011131733"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyLogos (20201011131733)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (40.3ms)[0m  [1m[35mCREATE TABLE "company_logos" ("id" bigserial primary key, "company_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL, CONSTRAINT "fk_rails_8ae580a1d6"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_logos_on_company_id" ON "company_logos"  ("company_id")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (3.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_company_logos_on_uuid" ON "company_logos"  ("uuid")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201011131733"]]
  â†³ bin/rails:9
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 17:52:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 17:52:03 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 18:38:30 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 43ms (Views: 0.3ms | ActiveRecord: 13.4ms)


Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:39:00 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x000055719762f1c0 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-1a4d92n.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:3:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:14:in `create_company_logo'
app/controllers/company_logos_controller.rb:10:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:41:12 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00005571975804e0 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-1y924mp.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 6146ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:3:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:14:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:41:53 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007f69e01d3d18 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-vu6qae.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 54062ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:14:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:43:41 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007f69cc23b648 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-2dukme.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 24360ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:15:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:45:28 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007fb1882ede48 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-24526-tcwpi.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 42159ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:15:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:47:48 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007fb1783686d0 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-24526-1ae5vj3.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 28997ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:15:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:49:50 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007fb194050d00 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-24526-fp1im.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/company_logo_service.rb:16
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:16
  [1m[36mCompanyLogo Create (0.8ms)[0m  [1m[32mINSERT INTO "company_logos" ("company_id", "logo", "uuid") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 10], ["logo", "bank_id_new.png"], ["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"]]
  â†³ app/services/companies/company_logo_service.rb:16
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/company_logo_service.rb:16
Completed 201 Created in 10445ms (Views: 0.2ms | ActiveRecord: 9.6ms)


Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:50:15 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.4ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)


  
NoMethodError (undefined method `image' for #<CompanyLogo:0x000055cd0008cc80>):
  
app/services/companies/company_logo_service.rb:29:in `read_logo'
app/controllers/company_logos_controller.rb:17:in `show_logo'
Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:50:47 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Sent data bank_id_new.png (0.2ms)
Completed 200 OK in 7263ms (Views: 0.1ms | ActiveRecord: 4.2ms)


Started DELETE "/en/company_logo/38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:51:09 +0400
  
ActionController::RoutingError (No route matches [DELETE] "/en/company_logo/38f2903f-1370-4e1c-98b8-023a97b4d61c"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started DELETE "/en/company_logo/38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:53:06 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompanyLogosController#destroy as JSON
  Parameters: {"locale"=>"en", "uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (1.1ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Completed 200 OK in 9391ms (Views: 0.2ms | ActiveRecord: 16.3ms)


Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:53:21 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Completed 400 Bad Request in 213ms (Views: 0.2ms | ActiveRecord: 0.2ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartmentLogos (20201011150112)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "department_logos" ("id" bigserial primary key, "department_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL, CONSTRAINT "fk_rails_0beebfc42e"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  â†³ db/migrate/20201011150112_create_department_logos.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_department_logos_on_department_id" ON "department_logos"  ("department_id")[0m
  â†³ db/migrate/20201011150112_create_department_logos.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_department_logos_on_uuid" ON "department_logos"  ("uuid")[0m
  â†³ db/migrate/20201011150112_create_department_logos.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201011150112"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 19:08:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 19:08:36 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 19:10:58 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/en/departments/department_list?company_id=10" for 127.0.0.1 at 2020-10-11 19:11:13 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 10]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.5ms)


Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-11 19:11:18 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 2.7ms)


Started POST "/en/department_logos" for 127.0.0.1 at 2020-10-11 19:11:49 +0400
Processing by DepartmentLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007f77a40195c8 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-5139-eu16gz.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "department_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :department_id, :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/department_logo_service.rb:15
Completed 400 Bad Request in 118ms (Views: 0.2ms | ActiveRecord: 3.8ms)


  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/department_logos" for 127.0.0.1 at 2020-10-11 19:12:37 +0400
Processing by DepartmentLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x000055bbb2f27f38 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-5139-1qbrdtw.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "department_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[36mDepartment Load (0.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[36mDepartmentLogo Create (1.1ms)[0m  [1m[32mINSERT INTO "department_logos" ("department_id", "logo", "uuid") VALUES ($1, $2, $3) RETURNING "id"[0m  [["department_id", 1], ["logo", "bank_id_new.png"], ["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"]]
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/department_logo_service.rb:15
Completed 201 Created in 88ms (Views: 0.1ms | ActiveRecord: 8.1ms)


Started GET "/en/department_logos/logo?uuid=7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:12:49 +0400
Processing by DepartmentLogosController#show_logo as JSON
  Parameters: {"uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Sent data bank_id_new.png (0.3ms)
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started DELETE "/en/department_logo/7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:12:56 +0400
  
ActionController::RoutingError (No route matches [DELETE] "/en/department_logo/7ef2bc05-f348-4182-8a61-87b39b8f1070"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started DELETE "/en/department_logo/7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:13:16 +0400
Processing by DepartmentLogosController#destroy as JSON
  Parameters: {"locale"=>"en", "uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 4.0ms)


Started GET "/en/department_logos/logo?uuid=7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:13:21 +0400
Processing by DepartmentLogosController#show_logo as JSON
  Parameters: {"uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)


  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-12 00:03:17 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00005571fe5f8190 @tempfile=#<Tempfile:/tmp/RackMultipart20201012-29156-zg8rwm.png>, @original_filename="bank_id.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/company_logo_service.rb:15
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:15
  [1m[36mCompanyLogo Create (1.2ms)[0m  [1m[32mINSERT INTO "company_logos" ("company_id", "logo", "uuid") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 12], ["logo", "bank_id.png"], ["uuid", "c6f47625-9b6c-4a8a-bb94-86ab62821e4e"]]
  â†³ app/services/companies/company_logo_service.rb:15
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/company_logo_service.rb:15
Completed 201 Created in 149ms (Views: 0.2ms | ActiveRecord: 17.7ms)


  [1m[36mCompanyLogo Load (0.6ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompanyLogo Load (1.1ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN company_logos ON company_logos.company_id = companies.id[0m
  [1m[36mCompany Load (2.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN company_logos ON company_logos.company_id = companies.id ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN company_logos ON company_logos.company_id = companies.id ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.4ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.7ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 00:18:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 00:18:55 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/en/companies/12" for 127.0.0.1 at 2020-10-12 00:20:30 +0400
Processing by CompaniesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"12"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:94
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 200 OK in 67ms (Views: 0.4ms | ActiveRecord: 18.9ms)


Started GET "/en/companies/12" for 127.0.0.1 at 2020-10-12 00:21:16 +0400
Processing by CompaniesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"12"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:94
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 200 OK in 80ms (Views: 0.3ms | ActiveRecord: 23.2ms)


Started GET "/en/companies/10" for 127.0.0.1 at 2020-10-12 00:21:31 +0400
Processing by CompaniesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"10"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:94
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-12 00:21:58 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:49
Completed 400 Bad Request in 75ms (Views: 0.2ms | ActiveRecord: 0.5ms)


  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:27:53 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 4811ms (Views: 0.5ms | ActiveRecord: 8.2ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:28:14 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:52
Completed 200 OK in 16595ms (Views: 0.5ms | ActiveRecord: 4.6ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:28:38 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:52
Completed 200 OK in 20350ms (Views: 0.5ms | ActiveRecord: 0.6ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:29:17 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 2345ms (Views: 0.4ms | ActiveRecord: 29.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
  [1m[36mCompanyLogo Load (1.7ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.9ms)[0m  [1m[34mSELECT "company_logos".* FROM "company_logos"[0m
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-12 15:48:10 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00005634fe9135c8 @tempfile=#<Tempfile:/tmp/RackMultipart20201012-10873-1wq2ne0.png>, @original_filename="Group 20721.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"Group 20721.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (1.1ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 ORDER BY "company_logos"."id" ASC LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/company_logo_service.rb:22
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:22
  [1m[36mCompanyLogo Update (1.7ms)[0m  [1m[33mUPDATE "company_logos" SET "logo" = $1, "uuid" = $2 WHERE "company_logos"."id" = $3[0m  [["logo", "Group_20721.png"], ["uuid", "5084daa2-6105-441f-ab67-b86c0a8227c1"], ["id", 1]]
  â†³ app/services/companies/company_logo_service.rb:22
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/company_logo_service.rb:22
Completed 201 Created in 107ms (Views: 0.2ms | ActiveRecord: 17.3ms)


  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT "company_logos".* FROM "company_logos"[0m
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:48:40 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 15.7ms)


  [1m[36mCompanyLogo Load (0.7ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompanyLogo Destroy (0.5ms)[0m  [1m[31mDELETE FROM "company_logos" WHERE "company_logos"."id" = $1[0m  [["id", 2]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompanyLogo Load (1.0ms)[0m  [1m[34mSELECT "company_logos".* FROM "company_logos"[0m
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:49:01 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.2ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:49:06 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:49:42 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 46ms (Views: 0.3ms | ActiveRecord: 13.2ms)


Started POST "/en/departments" for 127.0.0.1 at 2020-10-12 15:58:46 +0400
Error occurred while parsing request parameters.
Contents:

{
  "name": "Tech Department",
  "description": "This is tech support department",
  "address": "Also gogebashvili sterat",
  "phone_number": "577520250",
  "country_id": 8,
  "city_id": 3
  "company_id": 12
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "Tech Department",
  "description": "This is tech support department",
  "address": "Also gogebashvili sterat",
  "phone_number": "577520250",
  "country_id": 8,
  "city_id": 3
  "company_id": 12
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/departments/department_list?company_id=10" for 127.0.0.1 at 2020-10-12 16:03:06 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" LEFT JOIN department_logos ON department_logos.department_id = departments.id WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 10]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.9ms)


  [1m[36mDepartment Load (4.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-12 16:03:25 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" LEFT JOIN department_logos ON department_logos.department_id = departments.id WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
Completed 500 Internal Server Error in 43ms (ActiveRecord: 12.0ms)


  
NoMethodError (undefined method `company_logo' for #<Department:0x00007fcfd83a4350>
Did you mean?  company):
  
app/services/companies/departments_service.rb:22:in `department_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/departments_controller.rb:29:in `department_list'
Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-12 16:03:45 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" LEFT JOIN department_logos ON department_logos.department_id = departments.id WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mDepartmentLogo Load (0.2ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."department_id" = $1 LIMIT $2[0m  [["department_id", 1], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 45ms (Views: 0.3ms | ActiveRecord: 12.4ms)


Started GET "/en/department_logos/logo?uuid=7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-12 16:04:13 +0400
Processing by DepartmentLogosController#show_logo as JSON
  Parameters: {"uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Completed 400 Bad Request in 79ms (Views: 0.2ms | ActiveRecord: 0.3ms)


  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" ORDER BY "department_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartmentLogo Load (0.8ms)[0m  [1m[34mSELECT "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateRoleGroups (20201012142347)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (20.7ms)[0m  [1m[35mCREATE TABLE "role_groups" ("id" bigserial primary key, "name" character varying NOT NULL, "id_name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20201012142347_create_role_groups.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012142347"]]
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "product_group_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "activate" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_636fe72066"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_product_group_permissions_on_role_group_id" ON "product_group_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012143738"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "activate" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "product_import_persmissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_0b406b044e"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_persmissions_on_role_group_id" ON "product_import_persmissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "set_price" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.5ms)[0m  [1m[35mDROP TABLE "product_catalog_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (1.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "product_import_persmissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "product_type_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "activate" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "product_import_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_27485bdbba"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_permissions_on_role_group_id" ON "product_import_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "set_price" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductImportPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" ORDER BY "product_import_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 20:50:40 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 20:50:40 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 20:52:50 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permissions_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permissions_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 79001ms (ActiveRecord: 10.6ms)


  
NoMethodError (undefined method `[]' for true:TrueClass):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 20:58:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 20:58:33 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 20:59:33 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}], "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}]}}
Unpermitted parameters: :product_group_permissions_attributes, :product_type_permissions_attributes, :product_import_permissions_attributes, :product_catalog_permissions_attributes, :format, :locale, :role_group
Unpermitted parameters: :product_group_permissions_attributes, :product_type_permissions_attributes, :product_import_permissions_attributes, :product_catalog_permissions_attributes, :format, :locale, :role_group
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mRoleGroup Create (3.0ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 16:59:48.111288"], ["updated_at", "2020-10-12 16:59:48.111288"]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:21
Completed 201 Created in 14772ms (Views: 0.3ms | ActiveRecord: 11.4ms)


  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductGroupPermission Load (0.8ms)[0m  [1m[34mSELECT "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mProductTypePermission Load (3.1ms)[0m  [1m[34mSELECT "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mProductImportPermission Load (0.6ms)[0m  [1m[34mSELECT "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mProductCatalogPermission Load (1.3ms)[0m  [1m[34mSELECT "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mRoleGroup Destroy (0.9ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:01:15 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}], "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}]}}
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :import
Unpermitted parameters: :show, :read, :create, :edit, :set_price, :delete
Unpermitted parameters: :format, :locale, :role_group
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :import
Unpermitted parameters: :show, :read, :create, :edit, :set_price, :delete
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 42426ms (ActiveRecord: 16.2ms)


  
ActiveRecord::DangerousAttributeError (delete is defined by Active Record. Check to make sure that you don't have an attribute or method with the same name.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:02:38 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:02:38 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:04:05 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"string", "product_group_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permissions_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"string"}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Completed 500 Internal Server Error in 66283ms (ActiveRecord: 9.3ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'product_group_permissions_attributes' for RoleGroup.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:05:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:05:15 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:05:28 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 42984ms (ActiveRecord: 13.4ms)


  
ActiveRecord::DangerousAttributeError (delete is defined by Active Record. Check to make sure that you don't have an attribute or method with the same name.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "product_catalog_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "product_import_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "product_type_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "product_group_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012143738"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "product_group_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_636fe72066"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_product_group_permissions_on_role_group_id" ON "product_group_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012143738"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "product_import_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_27485bdbba"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_permissions_on_role_group_id" ON "product_import_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "set_price_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:11:11 +0400
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 26732ms (ActiveRecord: 12.6ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'show' for ProductGroupPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:12:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:12:37 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:15:32 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_data"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_data"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 46855ms (ActiveRecord: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'delete_data' for ProductGroupPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:19:42 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:19:42 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:19:59 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 17279ms (ActiveRecord: 12.1ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'set_price' for ProductCatalogPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:23:04 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 5482ms (ActiveRecord: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'set_price' for ProductCatalogPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:23:38 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mRoleGroup Create (1.8ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 17:23:51.502023"], ["updated_at", "2020-10-12 17:23:51.502023"]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductGroupPermission Create (3.2ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductTypePermission Create (1.6ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductImportPermission Create (2.2ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductCatalogPermission Create (2.2ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:21
Completed 201 Created in 13136ms (Views: 1.0ms | ActiveRecord: 30.0ms)


  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.7ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:34:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:34:39 +0400
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductGroupPermission Load (1.0ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductGroupPermission Destroy (1.0ms)[0m  [1m[31mDELETE FROM "product_group_permissions" WHERE "product_group_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mProductTypePermission Load (0.7ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductTypePermission Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_type_permissions" WHERE "product_type_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mProductImportPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductImportPermission Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_import_permissions" WHERE "product_import_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mProductCatalogPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductCatalogPermission Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mRoleGroup Destroy (1.7ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 2]]
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:37:08 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mRoleGroup Create (0.7ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 17:37:08.512495"], ["updated_at", "2020-10-12 17:37:08.512495"]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductGroupPermission Create (0.9ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductTypePermission Create (0.5ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductImportPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductCatalogPermission Create (1.2ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:20
Completed 201 Created in 96ms (Views: 0.5ms | ActiveRecord: 30.6ms)


  [1m[36mSupplier Load (40.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSuppliersPermissions (20201012200334)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (47.9ms)[0m  [1m[35mCREATE TABLE "suppliers_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_286bbd792d"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012200334_create_suppliers_permissions.rb:3
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_permissions_on_role_group_id" ON "suppliers_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012200334_create_suppliers_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012200334"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:08:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:08:20 +0400
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyPermissions (20201012203316)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "company_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_f551c3cfb1"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012203316_create_company_permissions.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_permissions_on_role_group_id" ON "company_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012203316_create_company_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012203316"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateSystemDataPermissions (20201012203339)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "system_data_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_0e8be8eda7"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012203339_create_system_data_permissions.rb:3
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_system_data_permissions_on_role_group_id" ON "system_data_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012203339_create_system_data_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012203339"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (24.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "always_24_test"[0m
  â†³ bin/rails:9
  [1m[35m (319.3ms)[0m  [1m[35mCREATE DATABASE "always_24_test" ENCODING = 'unicode'[0m
  â†³ bin/rails:9
  [1m[35mSQL (0.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ db/schema.rb:16
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_types" CASCADE[0m
  â†³ db/schema.rb:18
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE "business_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/schema.rb:18
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL)[0m
  â†³ db/schema.rb:23
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "cities" CASCADE[0m
  â†³ db/schema.rb:29
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "cities" ("id" bigserial primary key, "name" character varying NOT NULL, "city_code" character varying NOT NULL, "country_id" bigint NOT NULL)[0m
  â†³ db/schema.rb:29
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  â†³ db/schema.rb:29
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ db/schema.rb:36
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint, "city_id" bigint, "parent_id" integer)[0m
  â†³ db/schema.rb:36
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_city_id" ON "companies"  ("city_id")[0m
  â†³ db/schema.rb:36
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_country_id" ON "companies"  ("country_id")[0m
  â†³ db/schema.rb:36
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_logos" CASCADE[0m
  â†³ db/schema.rb:48
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "company_logos" ("id" bigserial primary key, "company_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL)[0m
  â†³ db/schema.rb:48
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_logos_on_company_id" ON "company_logos"  ("company_id")[0m
  â†³ db/schema.rb:48
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_company_logos_on_uuid" ON "company_logos"  ("uuid")[0m
  â†³ db/schema.rb:48
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_permissions" CASCADE[0m
  â†³ db/schema.rb:56
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "company_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:56
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_permissions_on_role_group_id" ON "company_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:56
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "confirmation_codes" CASCADE[0m
  â†³ db/schema.rb:67
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "confirmation_codes" ("id" bigserial primary key, "confirmation_token" character varying, "sms_code" character varying, "retry_count" integer, "generation_time" timestamp, "failed_attempts_count" integer, "user_account_id" bigint NOT NULL, "confirmation_type_id" bigint NOT NULL)[0m
  â†³ db/schema.rb:67
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_confirmation_codes_on_confirmation_type_id" ON "confirmation_codes"  ("confirmation_type_id")[0m
  â†³ db/schema.rb:67
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_confirmation_codes_on_user_account_id" ON "confirmation_codes"  ("user_account_id")[0m
  â†³ db/schema.rb:67
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "confirmation_types" CASCADE[0m
  â†³ db/schema.rb:79
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "confirmation_types" ("id" bigserial primary key, "name" character varying(150), "id_name" character varying(50))[0m
  â†³ db/schema.rb:79
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "countries" CASCADE[0m
  â†³ db/schema.rb:84
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "countries" ("id" bigserial primary key, "name" character varying NOT NULL, "country_code" character varying NOT NULL)[0m
  â†³ db/schema.rb:84
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "country_phone_indices" CASCADE[0m
  â†³ db/schema.rb:89
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "country_phone_indices" ("id" bigserial primary key, "iso_code" character varying(2) NOT NULL, "phone_index" character varying(10) NOT NULL, "length_limit" integer DEFAULT 9 NOT NULL)[0m
  â†³ db/schema.rb:89
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupon_codes" CASCADE[0m
  â†³ db/schema.rb:95
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "coupon_codes" ("id" bigserial primary key, "coupon_promotion_id" integer, "code" character varying)[0m
  â†³ db/schema.rb:95
  [1m[35m (3.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_coupon_codes_on_coupon_promotion_id_and_code" ON "coupon_codes"  ("coupon_promotion_id", "code")[0m
  â†³ db/schema.rb:95
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "currencies" CASCADE[0m
  â†³ db/schema.rb:101
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "currencies" ("id" bigserial primary key, "name" json NOT NULL, "symbol" character varying(20) NOT NULL, "code" character varying(3) NOT NULL)[0m
  â†³ db/schema.rb:101
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_currencies_on_code" ON "currencies"  ("code")[0m
  â†³ db/schema.rb:101
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "customer_types" CASCADE[0m
  â†³ db/schema.rb:108
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "customer_types" ("id" bigserial primary key, "name" character varying, "id_name" character varying)[0m
  â†³ db/schema.rb:108
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  â†³ db/schema.rb:113
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying(50) NOT NULL, "delivery_address" character varying, "invoice_address" timestamp, "active" boolean DEFAULT TRUE NOT NULL, "user_account_id" integer, "customer_type_id" integer NOT NULL, "legal_id" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:113
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "department_logos" CASCADE[0m
  â†³ db/schema.rb:125
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "department_logos" ("id" bigserial primary key, "department_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL)[0m
  â†³ db/schema.rb:125
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_department_logos_on_department_id" ON "department_logos"  ("department_id")[0m
  â†³ db/schema.rb:125
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_department_logos_on_uuid" ON "department_logos"  ("uuid")[0m
  â†³ db/schema.rb:125
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "departments" CASCADE[0m
  â†³ db/schema.rb:133
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, "parent_id" integer)[0m
  â†³ db/schema.rb:133
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/schema.rb:133
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/schema.rb:133
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/schema.rb:133
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "integration_systems" CASCADE[0m
  â†³ db/schema.rb:147
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "integration_systems" ("id" bigserial primary key, "name" character varying)[0m
  â†³ db/schema.rb:147
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "locking_types" CASCADE[0m
  â†³ db/schema.rb:151
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "locking_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50))[0m
  â†³ db/schema.rb:151
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_catalog_permissions" CASCADE[0m
  â†³ db/schema.rb:156
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "set_price_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:156
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:156
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_characteristics" CASCADE[0m
  â†³ db/schema.rb:167
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "product_characteristics" ("id" bigserial primary key, "product_id" bigint NOT NULL, "sub_category_id" bigint NOT NULL, "volume" character varying, "manufacturer" character varying, "description" character varying, "external_code" character varying(50), "EAN_code" character varying(50), "weight" decimal, "width" decimal, "height" decimal, "depth" decimal, "product_type_id" integer, "product_vat_type_id" integer, "subscription" boolean DEFAULT FALSE, "commission" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:167
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_product_id" ON "product_characteristics"  ("product_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_product_type_id" ON "product_characteristics"  ("product_type_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_product_vat_type_id" ON "product_characteristics"  ("product_vat_type_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_sub_category_id" ON "product_characteristics"  ("sub_category_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_group_permissions" CASCADE[0m
  â†³ db/schema.rb:189
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "product_group_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:189
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_group_permissions_on_role_group_id" ON "product_group_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:189
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_images" CASCADE[0m
  â†³ db/schema.rb:200
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "product_images" ("id" bigserial primary key, "product_id" bigint NOT NULL, "image" character varying(50), "uuid" uuid NOT NULL)[0m
  â†³ db/schema.rb:200
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_product_images_on_product_id" ON "product_images"  ("product_id")[0m
  â†³ db/schema.rb:200
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_product_images_on_uuid" ON "product_images"  ("uuid")[0m
  â†³ db/schema.rb:200
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_import_permissions" CASCADE[0m
  â†³ db/schema.rb:208
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "product_import_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:208
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_permissions_on_role_group_id" ON "product_import_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:208
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  â†³ db/schema.rb:215
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "product_id" bigint NOT NULL, "list_price_type" character varying(30) NOT NULL, "list_price_amount" decimal NOT NULL, "manufacturing_cost" decimal NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:215
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_product_prices_on_product_id" ON "product_prices"  ("product_id")[0m
  â†³ db/schema.rb:215
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_type_permissions" CASCADE[0m
  â†³ db/schema.rb:225
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:225
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:225
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_types" CASCADE[0m
  â†³ db/schema.rb:236
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "product_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL, "active" boolean DEFAULT TRUE)[0m
  â†³ db/schema.rb:236
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_vat_types" CASCADE[0m
  â†³ db/schema.rb:242
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "product_vat_types" ("id" bigserial primary key, "name" character varying NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/schema.rb:242
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  â†³ db/schema.rb:247
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" json NOT NULL, "full_name" json NOT NULL, "description" character varying NOT NULL, "code" character varying NOT NULL, "instruction" character varying(500), "active" boolean DEFAULT TRUE)[0m
  â†³ db/schema.rb:247
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_products_on_code" ON "products"  ("code")[0m
  â†³ db/schema.rb:247
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "role_groups" CASCADE[0m
  â†³ db/schema.rb:257
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "role_groups" ("id" bigserial primary key, "name" character varying NOT NULL, "id_name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:257
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "sub_categories" CASCADE[0m
  â†³ db/schema.rb:264
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "sub_categories" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL, "category_id" integer NOT NULL)[0m
  â†³ db/schema.rb:264
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "supplier_product_prices" CASCADE[0m
  â†³ db/schema.rb:271
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "supplier_product_prices" ("id" bigserial primary key, "supplier_product_id" bigint NOT NULL, "price" decimal NOT NULL, "price_per_unit" decimal, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "currency_id" integer)[0m
  â†³ db/schema.rb:271
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "supplier_product_prices_currency" ON "supplier_product_prices"  ("currency_id")[0m
  â†³ db/schema.rb:271
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_supplier_product_prices_on_supplier_product_id" ON "supplier_product_prices"  ("supplier_product_id")[0m
  â†³ db/schema.rb:271
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "supplier_products" CASCADE[0m
  â†³ db/schema.rb:282
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "supplier_products" ("id" bigserial primary key, "supplier_id" bigint NOT NULL, "product_id" bigint NOT NULL, "supplier_code" character varying, "is_active" boolean DEFAULT TRUE, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "quantity" integer)[0m
  â†³ db/schema.rb:282
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_supplier_products_on_product_id" ON "supplier_products"  ("product_id")[0m
  â†³ db/schema.rb:282
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_supplier_products_on_supplier_id" ON "supplier_products"  ("supplier_id")[0m
  â†³ db/schema.rb:282
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "suppliers" CASCADE[0m
  â†³ db/schema.rb:294
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "suppliers" ("id" bigserial primary key, "registration_date" timestamp, "active" boolean, "integration_system_id" bigint NOT NULL, "business_type_id" bigint NOT NULL, "name" character varying NOT NULL, "identification_code" character varying NOT NULL, "phone_number" character varying)[0m
  â†³ db/schema.rb:294
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_on_business_type_id" ON "suppliers"  ("business_type_id")[0m
  â†³ db/schema.rb:294
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_on_integration_system_id" ON "suppliers"  ("integration_system_id")[0m
  â†³ db/schema.rb:294
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "suppliers_permissions" CASCADE[0m
  â†³ db/schema.rb:306
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "suppliers_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:306
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_permissions_on_role_group_id" ON "suppliers_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:306
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "system_data_permissions" CASCADE[0m
  â†³ db/schema.rb:317
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "system_data_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:317
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_system_data_permissions_on_role_group_id" ON "system_data_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:317
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "terms_and_condition_agreements" CASCADE[0m
  â†³ db/schema.rb:328
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "terms_and_condition_agreements" ("id" bigserial primary key, "user_account_id" bigint NOT NULL, "terms_and_condition_id" bigint NOT NULL, "agreed_date" timestamp)[0m
  â†³ db/schema.rb:328
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_terms_and_condition_agreements_on_terms_and_condition_id" ON "terms_and_condition_agreements"  ("terms_and_condition_id")[0m
  â†³ db/schema.rb:328
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_terms_and_condition_agreements_on_user_account_id" ON "terms_and_condition_agreements"  ("user_account_id")[0m
  â†³ db/schema.rb:328
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "terms_and_conditions" CASCADE[0m
  â†³ db/schema.rb:336
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "terms_and_conditions" ("id" bigserial primary key, "active_from" timestamp NOT NULL, "version" character varying(50) NOT NULL, "description" character varying, "terms_and_condition" character varying)[0m
  â†³ db/schema.rb:336
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_accounts" CASCADE[0m
  â†³ db/schema.rb:343
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "user_accounts" ("id" bigserial primary key, "phone_number" character varying NOT NULL, "email" character varying NOT NULL, "crypted_password" character varying(255) NOT NULL, "active" boolean DEFAULT FALSE NOT NULL, "failed_logins_count" integer, "last_attempt_date" date, "locked" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "salt" character varying, "username" character varying, "phone_number_iso" character varying(2) DEFAULT 'de' NOT NULL)[0m
  â†³ db/schema.rb:343
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/schema.rb:358
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_268726594d"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/schema.rb:359
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/schema.rb:360
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_75b15a5c36"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/schema.rb:361
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "company_logos" ADD CONSTRAINT "fk_rails_8ae580a1d6"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/schema.rb:362
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "company_permissions" ADD CONSTRAINT "fk_rails_f551c3cfb1"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:363
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "confirmation_codes" ADD CONSTRAINT "fk_rails_4663c32944"
FOREIGN KEY ("confirmation_type_id")
  REFERENCES "confirmation_types" ("id")
[0m
  â†³ db/schema.rb:364
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "confirmation_codes" ADD CONSTRAINT "fk_rails_04eb0acbcb"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
[0m
  â†³ db/schema.rb:365
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "customers" ADD CONSTRAINT "fk_rails_9e248b531a"
FOREIGN KEY ("customer_type_id")
  REFERENCES "customer_types" ("id")
[0m
  â†³ db/schema.rb:366
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "department_logos" ADD CONSTRAINT "fk_rails_0beebfc42e"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/schema.rb:367
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/schema.rb:368
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/schema.rb:369
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/schema.rb:370
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_8e1e5764fc"
FOREIGN KEY ("parent_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/schema.rb:371
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_catalog_permissions" ADD CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:372
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD CONSTRAINT "fk_rails_682445a94f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:373
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD CONSTRAINT "fk_rails_99eb751a25"
FOREIGN KEY ("sub_category_id")
  REFERENCES "sub_categories" ("id")
[0m
  â†³ db/schema.rb:374
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_group_permissions" ADD CONSTRAINT "fk_rails_636fe72066"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:375
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_images" ADD CONSTRAINT "fk_rails_1c991d3be6"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:376
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_import_permissions" ADD CONSTRAINT "fk_rails_27485bdbba"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:377
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:378
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_type_permissions" ADD CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:379
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "sub_categories" ADD CONSTRAINT "fk_rails_8e75c2ee78"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ db/schema.rb:380
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_298846d27d"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
[0m
  â†³ db/schema.rb:381
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_02de7c65e2"
FOREIGN KEY ("supplier_product_id")
  REFERENCES "supplier_products" ("id")
[0m
  â†³ db/schema.rb:382
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "supplier_products" ADD CONSTRAINT "fk_rails_9a363579c5"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:383
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "supplier_products" ADD CONSTRAINT "fk_rails_8e1c65b71a"
FOREIGN KEY ("supplier_id")
  REFERENCES "suppliers" ("id")
[0m
  â†³ db/schema.rb:384
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "suppliers" ADD CONSTRAINT "fk_rails_d7795d572e"
FOREIGN KEY ("business_type_id")
  REFERENCES "business_types" ("id")
[0m
  â†³ db/schema.rb:385
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "suppliers" ADD CONSTRAINT "fk_rails_7d49358d6a"
FOREIGN KEY ("integration_system_id")
  REFERENCES "integration_systems" ("id")
[0m
  â†³ db/schema.rb:386
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "suppliers_permissions" ADD CONSTRAINT "fk_rails_286bbd792d"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:387
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "system_data_permissions" ADD CONSTRAINT "fk_rails_0e8be8eda7"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:388
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "terms_and_condition_agreements" ADD CONSTRAINT "fk_rails_08d124cbc2"
FOREIGN KEY ("terms_and_condition_id")
  REFERENCES "terms_and_conditions" ("id")
[0m
  â†³ db/schema.rb:389
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "terms_and_condition_agreements" ADD CONSTRAINT "fk_rails_10d3a09624"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
[0m
  â†³ db/schema.rb:390
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201012203339)[0m
  â†³ db/schema.rb:13
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201007200103),
(20201007194524),
(20200727195202),
(20200727193023),
(20200725155414),
(20200929203713),
(20200927104129),
(20200621120918),
(20200824193304),
(20200727194715),
(20200707214242),
(20200927155250),
(20201012200334),
(20200824195719),
(20200621120451),
(20200926210103),
(20200828093215),
(20201012144424),
(20200824195406),
(20200625214408),
(20200921203149),
(20200919162956),
(20201011131733),
(20200919163118),
(20200707214349),
(20201012203316),
(20200715203104),
(20200624222700),
(20200624194331),
(20200926205812),
(20200824155541),
(20200824193629),
(20201009103111),
(20200725155753),
(20200621104114),
(20201012142347),
(20200824154722),
(20200624205228),
(20200929215700),
(20201009103857),
(20200727193640),
(20201012144027),
(20200927103709),
(20200621120044),
(20200624223129),
(20200926145340),
(20200707213330),
(20201012143738),
(20200926203704),
(20200625214145),
(20200824193950),
(20200707214821),
(20200624194923),
(20200715203325),
(20201012144338),
(20200624224252),
(20200625080846),
(20200707215402),
(20200624210354),
(20201007201451),
(20200824195218),
(20200921200604),
(20201011150112),
(20200715202636),
(20201007200055),
(20201001214457),
(20200624205328);

[0m
  â†³ db/schema.rb:13
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-10-12 20:50:25.698407"], ["updated_at", "2020-10-12 20:50:25.698407"]]
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2020-10-12 20:50:25.702319"], ["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateRoleManagementPermissions (20201012204644)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "role_management_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_b25cf760ee"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012204644_create_role_management_permissions.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_role_management_permissions_on_role_group_id" ON "role_management_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012204644_create_role_management_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012204644"]]
  â†³ bin/rails:9
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:51:13 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:51:13 +0400
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductGroupPermission Load (1.0ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductGroupPermission Destroy (0.9ms)[0m  [1m[31mDELETE FROM "product_group_permissions" WHERE "product_group_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mProductTypePermission Load (0.6ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductTypePermission Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_type_permissions" WHERE "product_type_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mProductImportPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductImportPermission Destroy (0.7ms)[0m  [1m[31mDELETE FROM "product_import_permissions" WHERE "product_import_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mProductCatalogPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductCatalogPermission Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mSuppliersPermission Load (1.0ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mCompanyPermission Load (0.6ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mSystemDataPermission Load (0.5ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mRoleManagementPermission Load (0.6ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mRoleGroup Destroy (1.8ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 3]]
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:52:56 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "supplier_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 82ms (ActiveRecord: 27.9ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'supplier_permission_attributes' for RoleGroup.):
  
app/services/roles/role_management_service.rb:18:in `create_role'
app/controllers/role_groups_controller.rb:10:in `create'
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:54:10 +0400
  
ArgumentError (No association found for name `suppliers_permission'. Has it been defined yet?):
  
app/models/role_group.rb:17:in `<class:RoleGroup>'
app/models/role_group.rb:1:in `<main>'
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:54:30 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "supplier_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "supplier_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 76ms (ActiveRecord: 20.1ms)


  
NameError (uninitialized constant RoleGroup::SupplierPermission):
  
app/services/roles/role_management_service.rb:18:in `create_role'
app/controllers/role_groups_controller.rb:10:in `create'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:58:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:58:54 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:59:08 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mRoleGroup Create (1.2ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 20:59:08.348941"], ["updated_at", "2020-10-12 20:59:08.348941"]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductGroupPermission Create (1.1ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductTypePermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductImportPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductCatalogPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mSuppliersPermission Create (1.4ms)[0m  [1m[32mINSERT INTO "suppliers_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mCompanyPermission Create (1.2ms)[0m  [1m[32mINSERT INTO "company_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mSystemDataPermission Create (1.4ms)[0m  [1m[32mINSERT INTO "system_data_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mRoleManagementPermission Create (0.9ms)[0m  [1m[32mINSERT INTO "role_management_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:20
Completed 201 Created in 200ms (Views: 0.3ms | ActiveRecord: 67.1ms)


  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" ORDER BY "suppliers_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompanyPermission Load (0.7ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" ORDER BY "company_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSystemDataPermission Load (0.7ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" ORDER BY "system_data_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartment Load (3.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnToCompany (20201013091205)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (12.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201013091205_add_column_to_company.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201013091205"]]
  â†³ bin/rails:9
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to AddColumnToDepartment (20201013091414)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "departments" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201013091414_add_column_to_department.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201013091414"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (6.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCountry Load (2.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "active" = $1 WHERE "companies"."id" = $2[0m  [["active", false], ["id", 10]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 13:33:05 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-13 13:33:19 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 65ms (Views: 0.3ms | ActiveRecord: 15.9ms)


Started DELETE "/en/companies?id=12" for 127.0.0.1 at 2020-10-13 13:33:29 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:63
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:95
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.0ms)


  
NoMethodError (undefined method `acitve=' for #<Company:0x000055b81c8d14e8>
Did you mean?  active=):
  
app/services/companies/companies_service.rb:47:in `destroy'
app/controllers/companies_controller.rb:22:in `destroy'
Started DELETE "/en/companies?id=12" for 127.0.0.1 at 2020-10-13 13:34:25 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Load (3.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:96
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:96
Completed 500 Internal Server Error in 62323ms (ActiveRecord: 24.2ms)


  
NoMethodError (undefined method `acitve=' for #<Company:0x00007ff7c50e4c90>
Did you mean?  active=):
  
app/services/companies/companies_service.rb:48:in `destroy'
app/controllers/companies_controller.rb:22:in `destroy'
Started DELETE "/en/companies?id=12" for 127.0.0.1 at 2020-10-13 13:35:31 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:96
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:49
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:49
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:49
  [1m[36mCompany Update (0.5ms)[0m  [1m[33mUPDATE "companies" SET "active" = $1 WHERE "companies"."id" = $2[0m  [["active", false], ["id", 12]]
  â†³ app/services/companies/companies_service.rb:49
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:49
Completed 200 OK in 3374ms (Views: 0.2ms | ActiveRecord: 26.2ms)


  [1m[36mRoleGroup Load (37.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 18:54:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 18:54:58 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:55:16 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `all?' for #<Class:0x00007ff7c505e780>
Did you mean?  all):
  
app/services/roles/role_management_service.rb:25:in `list'
app/controllers/role_groups_controller.rb:16:in `list'
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:55:33 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms)


  
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
NoMethodError (undefined method `errors' for #<RoleGroup::ActiveRecord_Relation:0x000055b81ef158c0>):
  
app/services/roles/role_management_service.rb:26:in `list'
app/controllers/role_groups_controller.rb:16:in `list'
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:55:39 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
NoMethodError (undefined method `errors' for #<RoleGroup::ActiveRecord_Relation:0x00007ff7c41a4820>):
  
app/services/roles/role_management_service.rb:26:in `list'
app/controllers/role_groups_controller.rb:16:in `list'
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:56:43 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:14
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 5.0ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:58:38 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 4.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 18:58:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 18:58:43 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:59:29 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:00:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:00:54 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 19:01:04 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 9.5ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:22:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:22:06 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:25:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:25:58 +0400
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (36.8ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.9ms)[0m  [1m[34mSELECT "product_group_permissions".* FROM "product_group_permissions"[0m
  [1m[36mProductTypePermission Load (3.5ms)[0m  [1m[34mSELECT "product_type_permissions".* FROM "product_type_permissions"[0m
Started PUT "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 19:28:42 +0400
Processing by RoleGroupsController#update as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "id"=>"4", "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 7ms (ActiveRecord: 4.2ms)


  
NameError (undefined local variable or method `find_category' for #<Roles::RoleManagementService:0x00007ff7c504f460>
Did you mean?  find_role):
  
app/services/roles/role_management_service.rb:33:in `update'
app/controllers/role_groups_controller.rb:22:in `update'
Started PUT "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 19:28:58 +0400
Processing by RoleGroupsController#update as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "id"=>"4", "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:44
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:35
  [1m[36mProductTypePermission Load (0.6ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:35
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mProductGroupPermission Update (0.6ms)[0m  [1m[33mUPDATE "product_group_permissions" SET "create_data" = $1, "edit_data" = $2, "activate_data" = $3, "delete_record" = $4 WHERE "product_group_permissions"."id" = $5[0m  [["create_data", false], ["edit_data", false], ["activate_data", false], ["delete_record", false], ["id", 3]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mProductTypePermission Update (0.8ms)[0m  [1m[33mUPDATE "product_type_permissions" SET "create_data" = $1, "edit_data" = $2, "activate_data" = $3, "delete_record" = $4 WHERE "product_type_permissions"."id" = $5[0m  [["create_data", false], ["edit_data", false], ["activate_data", false], ["delete_record", false], ["id", 3]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:36
Completed 200 OK in 61ms (Views: 0.2ms | ActiveRecord: 21.6ms)


  [1m[36mProductTypePermission Load (0.9ms)[0m  [1m[34mSELECT "product_type_permissions".* FROM "product_type_permissions"[0m
  [1m[36mProductGroupPermission Load (1.0ms)[0m  [1m[34mSELECT "product_group_permissions".* FROM "product_group_permissions"[0m
  [1m[36mUserAccount Load (37.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (3.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUserRoles (20201013155127)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (21.6ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_account_id" bigint NOT NULL, "role_group_id" bigint NOT NULL, CONSTRAINT "fk_rails_12b7316092"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
, CONSTRAINT "fk_rails_957cec92dd"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201013155127_create_user_roles.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_account_id" ON "user_roles"  ("user_account_id")[0m
  â†³ db/migrate/20201013155127_create_user_roles.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_group_id" ON "user_roles"  ("role_group_id")[0m
  â†³ db/migrate/20201013155127_create_user_roles.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201013155127"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 21:55:24 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 21:56:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/user_roles?user_account_id=52&role_group_id=4" for 127.0.0.1 at 2020-10-13 21:58:58 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"52", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 52], ["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:18
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 52], ["role_group_id", 4]]
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:19
Completed 201 Created in 53ms (Views: 0.2ms | ActiveRecord: 16.4ms)


  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (0.3ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
Started POST "/en/user_roles?user_account_id=52&role_group_id=4" for 127.0.0.1 at 2020-10-13 22:03:45 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"52", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:27
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:33
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 52], ["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 52], ["role_group_id", 4]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:40
Completed 201 Created in 48ms (Views: 0.1ms | ActiveRecord: 13.7ms)


  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (0.5ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 2]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/user_roles?user_account_id=52&role_group_id=4" for 127.0.0.1 at 2020-10-13 22:03:56 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"52", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:27
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:33
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 52], ["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserRole Create (0.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 52], ["role_group_id", 4]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:40
Completed 201 Created in 44ms (Views: 0.1ms | ActiveRecord: 38.2ms)


  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 22:25:53 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 22:25:53 +0400
Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:26:08 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:61
Completed 500 Internal Server Error in 39ms (ActiveRecord: 6.1ms)


  
NoMethodError (undefined method `validate_destroy!' for #<Roles::RoleManagementService:0x00007ff7a81b23b0>
Did you mean?  validate_destroy):
  
app/services/roles/role_management_service.rb:43:in `destroy'
app/controllers/role_groups_controller.rb:28:in `destroy'
Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:26:28 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:61
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductGroupPermission Destroy (0.3ms)[0m  [1m[31mDELETE FROM "product_group_permissions" WHERE "product_group_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductTypePermission Destroy (0.3ms)[0m  [1m[31mDELETE FROM "product_type_permissions" WHERE "product_type_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductImportPermission Load (4.7ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductImportPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "product_import_permissions" WHERE "product_import_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductCatalogPermission Load (0.9ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductCatalogPermission Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSuppliersPermission Load (1.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSuppliersPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "suppliers_permissions" WHERE "suppliers_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mCompanyPermission Load (2.9ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mCompanyPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "company_permissions" WHERE "company_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSystemDataPermission Load (1.1ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSystemDataPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "system_data_permissions" WHERE "system_data_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mRoleManagementPermission Load (1.1ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mRoleManagementPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "role_management_permissions" WHERE "role_management_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mRoleGroup Destroy (2.1ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 4]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/roles/role_management_service.rb:56
Completed 500 Internal Server Error in 232ms (ActiveRecord: 53.5ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "role_groups" violates foreign key constraint "fk_rails_957cec92dd" on table "user_roles"
DETAIL:  Key (id)=(4) is still referenced from table "user_roles".
: DELETE FROM "role_groups" WHERE "role_groups"."id" = $1):
  
app/services/roles/role_management_service.rb:56:in `destroy_role_group'
app/services/roles/role_management_service.rb:44:in `destroy'
app/controllers/role_groups_controller.rb:28:in `destroy'
Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:26:56 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 48ms (Views: 0.7ms | ActiveRecord: 9.3ms)


Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:27:27 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 23ms (Views: 0.2ms | ActiveRecord: 6.3ms)


Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:28:02 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 62ms (Views: 0.2ms | ActiveRecord: 8.6ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 13:53:10 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 13:53:10 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:53:20 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 4.0ms)


  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:54:00 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:54:24 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.7ms)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCompany Update (5.4ms)[0m  [1m[33mUPDATE "companies" SET "active" = $1 WHERE "companies"."id" = $2[0m  [["active", true], ["id", 10]]
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:54:53 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (1.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 118ms (Views: 0.2ms | ActiveRecord: 22.5ms)


Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:55:40 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:69
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:75
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.8ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/services/companies/departments_service.rb:81:in `validate_company'
app/services/companies/departments_service.rb:65:in `validate_data!'
app/services/companies/departments_service.rb:30:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:56:11 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
Completed 500 Internal Server Error in 12306ms (ActiveRecord: 20.4ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/services/companies/departments_service.rb:82:in `validate_company'
app/services/companies/departments_service.rb:66:in `validate_data!'
app/services/companies/departments_service.rb:31:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:56:57 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
Completed 500 Internal Server Error in 3746ms (ActiveRecord: 19.8ms)


  
ArgumentError (Unsupported argument type: 10 (Integer)):
  
app/services/companies/departments_service.rb:82:in `validate_company'
app/services/companies/departments_service.rb:66:in `validate_data!'
app/services/companies/departments_service.rb:31:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:57:18 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
Completed 500 Internal Server Error in 37221ms (ActiveRecord: 1.4ms)


  
ArgumentError (Unsupported argument type: 10 (Integer)):
  
app/services/companies/departments_service.rb:82:in `validate_company'
app/services/companies/departments_service.rb:66:in `validate_data!'
app/services/companies/departments_service.rb:31:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:57:58 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" ASC LIMIT $3[0m  [["id", 10], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:82
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mDepartment Create (5.3ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "address", "phone_number", "country_id", "city_id", "company_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test"], ["description", "test"], ["address", "test"], ["phone_number", "test"], ["country_id", 4], ["city_id", 9], ["company_id", 10]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mDepartmentLogo Load (1.4ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."department_id" = $1 LIMIT $2[0m  [["department_id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:14
Completed 201 Created in 2346ms (Views: 0.2ms | ActiveRecord: 40.4ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 15:46:18 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 15:46:18 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 15:46:29 +0400
Started GET "/favicon.ico" for 127.0.0.1 at 2020-10-14 15:46:29 +0400
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mRoleGroup Load (1.2ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-14 15:49:53 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"new_role", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"new_role", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mRoleGroup Create (1.4ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "new_role"], ["id_name", "new_role"], ["created_at", "2020-10-14 11:49:53.611191"], ["updated_at", "2020-10-14 11:49:53.611191"]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductGroupPermission Create (1.4ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductTypePermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductImportPermission Create (0.9ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductCatalogPermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mSuppliersPermission Create (0.7ms)[0m  [1m[32mINSERT INTO "suppliers_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mCompanyPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "company_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mSystemDataPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "system_data_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mRoleManagementPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "role_management_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:24
Completed 201 Created in 352ms (Views: 0.3ms | ActiveRecord: 58.6ms)


  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
Started PUT "/en/role_groups?id=5" for 127.0.0.1 at 2020-10-14 15:51:30 +0400
Processing by RoleGroupsController#update as JSON
  Parameters: {"name"=>"new role", "product_group_permission_attributes"=>{"id"=>4, "show_data"=>false, "read_data"=>false, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "id"=>"5", "locale"=>"en", "role_group"=>{"name"=>"new role", "product_group_permission_attributes"=>{"id"=>4, "show_data"=>false, "read_data"=>false, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mProductGroupPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:35
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mRoleGroup Update (0.3ms)[0m  [1m[33mUPDATE "role_groups" SET "name" = $1, "updated_at" = $2 WHERE "role_groups"."id" = $3[0m  [["name", "new role"], ["updated_at", "2020-10-14 11:51:30.886709"], ["id", 5]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mProductGroupPermission Update (0.4ms)[0m  [1m[33mUPDATE "product_group_permissions" SET "show_data" = $1, "read_data" = $2, "create_data" = $3, "edit_data" = $4, "activate_data" = $5, "delete_record" = $6 WHERE "product_group_permissions"."id" = $7[0m  [["show_data", false], ["read_data", false], ["create_data", false], ["edit_data", false], ["activate_data", false], ["delete_record", false], ["id", 4]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:36
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 37.4ms)


  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductTypePermission Load (0.8ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-14 15:52:13 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/user_roles?user_account_id=51&role_group_id=5" for 127.0.0.1 at 2020-10-14 15:52:58 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:49
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:55
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 51], ["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 5]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:62
Completed 201 Created in 74ms (Views: 0.2ms | ActiveRecord: 13.8ms)


Started DELETE "/en/role_groups?id=5" for 127.0.0.1 at 2020-10-14 15:53:07 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 5]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-14 16:44:47 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started DELETE "/en/role_groups?id=5" for 127.0.0.1 at 2020-10-14 16:44:52 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 5]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started POST "/en/user_roles?user_account_id=51&role_group_id=5" for 127.0.0.1 at 2020-10-14 16:45:03 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:49
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:55
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 51], ["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:62
Completed 201 Created in 9ms (Views: 0.2ms | ActiveRecord: 2.1ms)


  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mCustomer Load (1.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id"[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (2.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (1.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (2.2ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (2.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (2.1ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:46:54 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (1.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 71ms (Views: 0.4ms | ActiveRecord: 13.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:55:30 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:55:30 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:55:54 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (1.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 35ms (Views: 0.3ms | ActiveRecord: 10.8ms)


  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (36.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_riles.id as user_role_id, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_riles.id as user_role_id, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCustomer Load (1.1ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.id as user_role_id, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:58:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:58:35 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:58:46 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 26ms (ActiveRecord: 8.4ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "user_accounts"
LINE 2:                             user_accounts.email, user_accoun...
                                    ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:11:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:59:01 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 9.1ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:59:21 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started DELETE "/en/user_roles?id=3" for 127.0.0.1 at 2020-10-14 17:59:45 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"3", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 8ms (ActiveRecord: 5.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:32:in `find_user_role'
app/services/account/user_role_management_service.rb:24:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:11 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:32:in `find_user_role'
app/services/account/user_role_management_service.rb:24:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:32 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 7ms (ActiveRecord: 3.1ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:33:in `find_user_role'
app/services/account/user_role_management_service.rb:25:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:34 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:33:in `find_user_role'
app/services/account/user_role_management_service.rb:25:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:50 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 10763ms (ActiveRecord: 12.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:34:in `find_user_role'
app/services/account/user_role_management_service.rb:26:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:01:20 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.6ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[36mUserRole Destroy (0.9ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 4]]
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:45
Completed 404 Not Found in 2771ms (Views: 0.5ms | ActiveRecord: 51.9ms)


Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:01:26 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
Completed 404 Not Found in 5600ms (ActiveRecord: 0.8ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole with 'id'=4):
  
app/services/account/user_role_management_service.rb:34:in `find_user_role'
app/services/account/user_role_management_service.rb:26:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
  [1m[36mUserRole Load (0.6ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:03:20 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.5ms)


  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUserRole Create (1.0ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 4]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:04:33 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started DELETE "/en/user_roles?id=5" for 127.0.0.1 at 2020-10-14 18:04:48 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (1.0ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[36mCACHE UserRole Load (0.0ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[36mUserRole Destroy (0.7ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 5]]
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:45
Completed 404 Not Found in 23945ms (Views: 0.5ms | ActiveRecord: 5.6ms)


  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUserRole Create (1.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 4]]
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
Started DELETE "/en/user_roles?id=6" for 127.0.0.1 at 2020-10-14 18:05:48 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"6", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
Completed 404 Not Found in 3080ms (Views: 0.8ms | ActiveRecord: 14.2ms)


  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 5]]
  [1m[35m (34.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:07:21 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 9.2ms)


  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (0.8ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 7]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:10:21 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 8.2ms)


Started POST "/en/user_roles?user_account_id=51&role_group_id=4" for 127.0.0.1 at 2020-10-14 18:10:34 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:51
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:57
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 ORDER BY "user_roles"."id" ASC LIMIT $2[0m  [["user_account_id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:63
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:65
Completed 201 Created in 3390ms (Views: 0.2ms | ActiveRecord: 11.9ms)


Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:10:42 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started POST "/en/user_roles?user_account_id=51&role_group_id=5" for 127.0.0.1 at 2020-10-14 18:10:57 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:51
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:57
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 ORDER BY "user_roles"."id" ASC LIMIT $2[0m  [["user_account_id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:63
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserRole Update (1.3ms)[0m  [1m[33mUPDATE "user_roles" SET "role_group_id" = $1 WHERE "user_roles"."id" = $2[0m  [["role_group_id", 5], ["id", 6]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:65
Completed 201 Created in 2205ms (Views: 0.5ms | ActiveRecord: 42.7ms)


Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:11:09 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-14 18:13:04 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 21ms (Views: 0.2ms | ActiveRecord: 6.9ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 18:17:10 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 18:17:10 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 18:25:41 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 18:25:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 18:25:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 18:25:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 18:25:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 18:25:41 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:29:06 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (2.0ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 30ms (Views: 0.3ms | ActiveRecord: 9.9ms)


  [1m[36mRoleGroup Load (3.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (1.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-15 19:21:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-15 19:21:48 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-15 19:21:48 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-15 19:21:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-15 19:21:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-15 19:21:48 +0400
Started GET "/en/role_groups/get_role?id=1" for 127.0.0.1 at 2020-10-15 19:22:03 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:80
Completed 404 Not Found in 4560ms (ActiveRecord: 13.1ms)


  
ActiveRecord::RecordNotFound (Couldn't find RoleGroup with 'id'=1):
  
app/services/roles/role_management_service.rb:80:in `find_role'
app/services/roles/role_management_service.rb:46:in `get_role'
app/controllers/role_groups_controller.rb:23:in `get_role'
Started GET "/en/role_groups/get_role?id=1" for 127.0.0.1 at 2020-10-15 19:22:38 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (1.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:80
Completed 404 Not Found in 1992ms (Views: 0.5ms | ActiveRecord: 10.3ms)


Started GET "/en/role_groups/get_role?id=4" for 127.0.0.1 at 2020-10-15 19:22:45 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:80
Completed 200 OK in 2805ms (Views: 0.6ms | ActiveRecord: 12.5ms)


Started GET "/en/role_groups/get_role?id=4" for 127.0.0.1 at 2020-10-15 19:23:18 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:80
  [1m[36mProductGroupPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (0.4ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (0.4ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (0.4ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 2768ms (Views: 0.5ms | ActiveRecord: 45.6ms)


Started GET "/en/role_groups/get_role?id=4" for 127.0.0.1 at 2020-10-15 19:45:24 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:80
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (0.3ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (0.4ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (0.4ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (0.5ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 130ms (Views: 0.6ms | ActiveRecord: 36.5ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-15 19:46:18 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-15 19:46:18 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-15 19:46:18 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-15 19:46:18 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-15 19:46:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-15 19:46:19 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-16 16:37:19 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-16 16:37:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-16 16:37:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-16 16:37:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-16 16:37:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-16 16:37:20 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-16 17:11:24 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-16 17:12:00 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 22233ms (Views: 0.2ms | ActiveRecord: 4.3ms)


  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts"[0m
Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:13:18 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (2.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 116ms (Views: 0.2ms | ActiveRecord: 10.4ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:13:28 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.4ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 1.5ms)


  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (35.8ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "LB5y7mABpyJ6Bvnz7qgs"], ["crypted_password", "$2a$10$PVAxXAlEWId1FFX0WipLjuFWBhQSzP.1ODkbTupnF8EUHLRUsoySa"], ["updated_at", "2020-10-16 13:14:02.018338"], ["id", 9]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "1fKUX6a9zxUJPfTGHTHZ"], ["crypted_password", "$2a$10$FJgLecPsNcrZpPUlQMIxLu6n8JvQX3p3rZGckYH/.7Cl958ewOrsm"], ["updated_at", "2020-10-16 13:14:02.125944"], ["id", 16]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "SQa8F8e5RzEdgLtzu5Nx"], ["crypted_password", "$2a$10$XiaGWuVHWJ/N2MnzXyGY5.6XXY.1QL/40o8ura1P1kD2RGetf7COC"], ["updated_at", "2020-10-16 13:14:02.188552"], ["id", 52]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "N9zc_2HVC1ADaNQdjvN_"], ["crypted_password", "$2a$10$/fU5xNxvWg7DpCu9.HjSru6Wjz8/mvL.92QXtCYevRH5aGv0JpD3K"], ["updated_at", "2020-10-16 13:14:02.242446"], ["id", 33]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "xBRCd-oHwXd6ehBcsnxf"], ["crypted_password", "$2a$10$KIlVr6ImIAFPR/0fRAriye8fUGNRi0BSsElzuQO9ITg7puPIMpdhi"], ["updated_at", "2020-10-16 13:14:02.295692"], ["id", 38]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "zUNdBNxHyQPTGVuEBpe6"], ["crypted_password", "$2a$10$/QAqsIC5O24jyRkvVlH.cOtdgJZsAc7z7uEin0rq8jeBAkT9YQ6OC"], ["updated_at", "2020-10-16 13:14:02.349776"], ["id", 40]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "pEZ7DhscV6gC2zsjGbTs"], ["crypted_password", "$2a$10$jO6uiuHVrlc0SIdLo8I6furOMguFInRq3kMB.1aI28i7EVLUWXkqy"], ["updated_at", "2020-10-16 13:14:02.403257"], ["id", 39]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "7s_5xb_NexmWg79fhT9n"], ["crypted_password", "$2a$10$POCifZqYeyoZJQTApYp5T.XhzDx9Oplz2C1gJm7ebTKh.mWYOQtk2"], ["updated_at", "2020-10-16 13:14:02.457652"], ["id", 41]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "EXyhxq_YE8JyaTAyjsB6"], ["crypted_password", "$2a$10$YAZCaP3VKcrxR33pY6SojeXW6J5PFVMojETVwzWat34UwnrpVt1r2"], ["updated_at", "2020-10-16 13:14:02.511504"], ["id", 43]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.6ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "a9yjtraaVsnLLWDzCc4z"], ["crypted_password", "$2a$10$NiM3AMz2kCM9GW5Hb7ZMieXQzdYnnBWYY0CucNNvNhMeqA0JG/aMS"], ["updated_at", "2020-10-16 13:14:02.565024"], ["id", 44]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "aXmzxxPUMJg2ZvTv5sqY"], ["crypted_password", "$2a$10$Zi8jJ4ckcCQAEpRuc0QviOqukD4yZPhVgiHVLeAzdo7Ho/cziA.QS"], ["updated_at", "2020-10-16 13:14:02.618153"], ["id", 45]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "Yf2p-Dma6X2E1L2cs33L"], ["crypted_password", "$2a$10$evNVXPY4rfjuHAtwAIDs3e1tfi.hGaQwMHsEPIZ1mMDb8mHVwqy5S"], ["updated_at", "2020-10-16 13:14:02.673205"], ["id", 46]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "y48ScEpBWurD6yYtdkKo"], ["crypted_password", "$2a$10$JT6H8xJ0naMFRzgB4kwDGOB/ByPoq7Rkq9UmV9Zc/zHuNtVmeWBAi"], ["updated_at", "2020-10-16 13:14:02.726211"], ["id", 47]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "Ki78SmJeepCyT8aeGsC-"], ["crypted_password", "$2a$10$fHkwbP6nk5FaC2OG6exmX.fgnS7F.HJkzZ8f2oOqVNaoTrlPReSN."], ["updated_at", "2020-10-16 13:14:02.779195"], ["id", 48]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "Fz47dMChdj-BZLsb5AUt"], ["crypted_password", "$2a$10$gFor7jdqIfEaa/a6suHyaeZBWEE0Pmyc4tiCPp5FykcGycozJxtEq"], ["updated_at", "2020-10-16 13:14:02.832581"], ["id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "1r7wb26zAWvFUAoayLe9"], ["crypted_password", "$2a$10$aJm9E6NVcmvw1tFZRH2gguDmUxwSkjDN3qN4ieegi5FCQ4WPDx8hi"], ["updated_at", "2020-10-16 13:14:02.885460"], ["id", 50]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "FnFM9zhvvrM8SzARXopj"], ["crypted_password", "$2a$10$vxPhhHXeszr94j0MZLwqcO7DsNf007e5dnvWnJgEJC/bmu1aA1UC."], ["updated_at", "2020-10-16 13:14:02.938526"], ["id", 51]]
  [1m[35m (152.3ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:14:21 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.2ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:14:23 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.3ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:14:23 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.3ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 6ms (Views: 0.3ms | ActiveRecord: 1.2ms)


  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "tbBQ-5Qxgc-AKDC-Wksz"], ["crypted_password", "$2a$10$SVTsgyzAAXvKWbYZBTmire3OZsgZJo2zEHAmXTpjiJ7kqxElfsAKe"], ["updated_at", "2020-10-16 13:15:11.702878"], ["id", 9]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "SiwViHE5EKss-TsY-A-z"], ["crypted_password", "$2a$10$euEiauZMSVIcd.OmNDdBzeJRsgZDrhIvpgYwoa1A6HxgUPcGzJrvO"], ["updated_at", "2020-10-16 13:15:11.761252"], ["id", 16]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "fwy3WwRQeNFow_ByESy2"], ["crypted_password", "$2a$10$PYI7zV6.hKvHeo3eqzdIP.hBXC9K5RZYH/.QTg/MmzXpNiWAP4/Oa"], ["updated_at", "2020-10-16 13:15:11.815045"], ["id", 52]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "5KzWaiysdwdhPN_4vcTT"], ["crypted_password", "$2a$10$S/aNg4SsT3WIo43MUan.X.6BR2KppSoiCEqxByXVZblAxSJs2QQXS"], ["updated_at", "2020-10-16 13:15:11.868545"], ["id", 33]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "uCM7dPmhTLsYv5T4g6G4"], ["crypted_password", "$2a$10$56nq/WrLlUfXtGbaA2LvP.5ZABtJK4ASPT0OGejOp/i2Vuj.jwcfa"], ["updated_at", "2020-10-16 13:15:11.921866"], ["id", 38]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "3hm-Aw25W-Sz2RAvip-H"], ["crypted_password", "$2a$10$IwhDV0dQVRDyZf47XdTiZ.voMrQs4oG0HQ/piQk7uNzpEEjBBWEna"], ["updated_at", "2020-10-16 13:15:11.974750"], ["id", 40]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "FZ7RJ4m3ApeodJCTGyRJ"], ["crypted_password", "$2a$10$uRwtqTLN8VAcZcfwZOCCvOY/BTIoT0LRxvIeLFKC86VAOs9ZZP9p."], ["updated_at", "2020-10-16 13:15:12.028750"], ["id", 39]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "pCswhzWBcpobZugrYpDS"], ["crypted_password", "$2a$10$QfST3poKhTcC3TKUOB1Mqufr8qVYuwMSG9hY1Q5EvDdIOufcm/2.C"], ["updated_at", "2020-10-16 13:15:12.081535"], ["id", 41]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "UiPRKUeCKXhtYytEmoX1"], ["crypted_password", "$2a$10$XM.ODvLpWFSB1auEW/wHI.kNNK1a9REkCORHZAA4T5jzvR9Vq9AAK"], ["updated_at", "2020-10-16 13:15:12.134603"], ["id", 43]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "KWx7XgQjDxe7PsmXXJWC"], ["crypted_password", "$2a$10$k8YNHHHezMSdt/uoH3KxZOfVHf9hZELguUzGFE1RD7GwtfX6zKSJ6"], ["updated_at", "2020-10-16 13:15:12.187414"], ["id", 44]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "1RM5pWqqzz9qgHhsegBZ"], ["crypted_password", "$2a$10$u5nWSobh02L1QCzwCfkdq.boeu6P7GrsVneSsIhJMQzE/MffcOY32"], ["updated_at", "2020-10-16 13:15:12.240435"], ["id", 45]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "5yFQmiShx69pGj9Fjyqz"], ["crypted_password", "$2a$10$tMBGy5xTF3I9QoC27GtcX.5.VU.Ny1aAgq9Xd4WN4.8Gg5noxSIGO"], ["updated_at", "2020-10-16 13:15:12.293305"], ["id", 46]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "TGMdg9aw25s59w-VaVN3"], ["crypted_password", "$2a$10$Eyj93J6ijvoPbx9XtFjCp.tXpaKLjGK3uzCUrawsuJ5gDlmN9vQBG"], ["updated_at", "2020-10-16 13:15:12.346360"], ["id", 47]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "pGoQ6kisniWoRj-9Bj-7"], ["crypted_password", "$2a$10$1zaUdGbr3YOlzKNHOkf69u0cYhYswsGXRg3EF0dJfuM33yBI6F81."], ["updated_at", "2020-10-16 13:15:12.399189"], ["id", 48]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "yzr3-EGyxx-mhdYQ6kzs"], ["crypted_password", "$2a$10$qmkSawcH2ZnxP5LhGhzWMO1SMMtWLN/Fd5wEF78jV2f0YlA2dDsEu"], ["updated_at", "2020-10-16 13:15:12.452005"], ["id", 49]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "KL_M8nhDN3jSqt-zGznK"], ["crypted_password", "$2a$10$iEjPkJCcGx1iLz2dzbxEAe.mlj/Vgrpxa1/MOO.BubTZ7SlPx8pOi"], ["updated_at", "2020-10-16 13:15:12.504761"], ["id", 50]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "A38RizyD1znM8eWxvPv8"], ["crypted_password", "$2a$10$tgmNafyTL5p6bddJyXeEtuR0o4BsfLqFxDrpQG1dPGCQccraRLXvi"], ["updated_at", "2020-10-16 13:15:12.557692"], ["id", 51]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:16:14 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.2ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 77163ms (Views: 0.2ms | ActiveRecord: 8.7ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:18:44 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.4ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):9
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ (pry):10
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1[0m  [["username", "bukabuka"]]
  â†³ app/services/auth/service.rb:125
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):12
  [1m[36mCACHE UserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):13
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):14
  [1m[36mUserAccount Update (37.1ms)[0m  [1m[33mUPDATE "user_accounts" SET "password" = $1 WHERE "user_accounts"."id" = $2[0m  [["password", "Qwerty12"], ["id", 16]]
  â†³ (pry):14
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):15
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):15
  [1m[36mUserAccount Update (0.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "qNzLijzJxJDaxRDKRexZ"], ["crypted_password", "$2a$10$qlNC1KSwNzpGB0VztN50ruVCusQbwePok10K3DiqyUpipZgZLpOEK"], ["updated_at", "2020-10-16 13:21:39.367468"], ["id", 16]]
  â†³ (pry):15
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):15
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.2ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 179114ms (Views: 0.2ms | ActiveRecord: 48.4ms)


  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1[0m  [["username", "bukabuka"]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "salt" = $1, "crypted_password" = $2, "updated_at" = $3 WHERE "user_accounts"."id" = $4[0m  [["salt", "m-xq8a8VzVQhP8xGVUVC"], ["crypted_password", "$2a$10$rNl.o80cEisLwKkibRchCuCFJAdk5o4QN4rGxfvzu/hilgE88IA7u"], ["updated_at", "2020-10-16 13:22:05.715067"], ["id", 16]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:22:14 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.1ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 8041ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:22:38 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):17
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.7ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 150047ms (Views: 0.3ms | ActiveRecord: 20.6ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:25:14 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
Completed 401 Unauthorized in 7705ms (Views: 0.2ms | ActiveRecord: 7.2ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:26:40 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
Completed 401 Unauthorized in 29610ms (Views: 0.5ms | ActiveRecord: 7.6ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:27:50 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "blabla"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:162
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
Completed 401 Unauthorized in 11833ms (Views: 0.6ms | ActiveRecord: 7.2ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:28:14 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "blabla"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:162
Completed 401 Unauthorized in 10220ms (Views: 0.2ms | ActiveRecord: 5.3ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:28:37 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "blabla"], ["LIMIT", 1]]
  â†³ (pry):25
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "blabla"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:163
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "blabla"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:163
Completed 401 Unauthorized in 42684ms (Views: 0.2ms | ActiveRecord: 6.5ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:29:24 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:163
Completed 200 OK in 19227ms (Views: 0.2ms | ActiveRecord: 4.8ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 17:41:12 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:163
Completed 200 OK in 10555ms (Views: 0.1ms | ActiveRecord: 1.1ms)


Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-16 17:41:44 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 16]]
  â†³ app/controllers/role_groups_controller.rb:15
  [1m[36mRoleGroup Load (1.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):41
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):43
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ (pry):43
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):43
  [1m[36mUserRole Create (2.7ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 16], ["role_group_id", 5]]
  â†³ (pry):43
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):43
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 477765ms (Views: 0.3ms | ActiveRecord: 28.5ms)


Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-16 17:49:46 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 16]]
  â†³ app/controllers/role_groups_controller.rb:15
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):49
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ (pry):50
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (1.2ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 361783ms (Views: 0.7ms | ActiveRecord: 21.5ms)


Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-16 17:55:51 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ (pry):72
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):75
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ (pry):84
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (1.0ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 688879ms (Views: 0.7ms | ActiveRecord: 22.6ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-16 18:18:20 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-16 18:18:20 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-16 18:18:20 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-16 18:18:20 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-16 18:18:21 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-16 18:18:21 +0400
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:18:31 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `current_account' for #<Account::CurrentUserService:0x00007f0220166448 @errors=[]>
Did you mean?  current_user):
  
app/services/account/current_user_service.rb:33:in `current_user'
app/controllers/users_controller.rb:10:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:19:10 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 6110ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `bunding' for #<Account::CurrentUserService:0x00007f022c1b94c0 @errors=[]>
Did you mean?  binding):
  
app/services/account/current_user_service.rb:33:in `current_user'
app/controllers/users_controller.rb:11:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:19:31 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 9401ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `current_account' for #<Account::CurrentUserService:0x0000562f48ba5e78 @errors=[]>
Did you mean?  current_user):
  
app/services/account/current_user_service.rb:34:in `current_user'
app/controllers/users_controller.rb:11:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:19:48 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 14872ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `current_account' for #<Account::CurrentUserService:0x00007f02205b3460 @errors=[]>
Did you mean?  current_user):
  
app/services/account/current_user_service.rb:34:in `current_user'
app/controllers/users_controller.rb:11:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:20:05 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 17761ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `current_account' for #<Account::CurrentUserService:0x00007f022c1cb1c0 @errors=[]>
Did you mean?  current_user):
  
app/services/account/current_user_service.rb:34:in `current_user'
app/controllers/users_controller.rb:11:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:20:35 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
Completed 500 Internal Server Error in 93998ms (ActiveRecord: 7.2ms)


  
NoMethodError (undefined method `current_account' for #<Account::CurrentUserService:0x0000562f472a6aa8 @errors=[]>
Did you mean?  current_user):
  
app/services/account/current_user_service.rb:34:in `current_user'
app/controllers/users_controller.rb:11:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:22:11 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 18:22:28 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"sdcsdc", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"sdcsdc", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:163
Completed 200 OK in 9983ms (Views: 0.2ms | ActiveRecord: 4.3ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:22:59 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductTypePermission Load (0.5ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductImportPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
Completed 500 Internal Server Error in 6163ms (ActiveRecord: 25.9ms)


  
NoMethodError (undefined method `supplier_permission' for #<RoleGroup:0x00007f022c6f9fe8>
Did you mean?  suppliers_permission
               suppliers_permission=):
  
app/services/account/current_user_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:12:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:23:15 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductGroupPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductTypePermission Load (0.2ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mProductCatalogPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
  [1m[36mSystemDataPermission Load (0.4ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:14
Completed 200 OK in 3574ms (Views: 0.4ms | ActiveRecord: 36.9ms)


  [1m[36mUserAccount Load (37.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1[0m  [["user_account_id", 52]]
  [1m[36mCustomer Load (1.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 ORDER BY "customers"."id" ASC LIMIT $2[0m  [["user_account_id", 52], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 ORDER BY "customers"."id" ASC LIMIT $2[0m  [["user_account_id", 52], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 52], ["LIMIT", 1]]
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:30:41 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductTypePermission Load (0.4ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mSuppliersPermission Load (0.3ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
Completed 200 OK in 5192ms (Views: 0.5ms | ActiveRecord: 43.3ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:31:06 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductTypePermission Load (0.5ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductImportPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductCatalogPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
Completed 200 OK in 10130ms (Views: 0.5ms | ActiveRecord: 6.5ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:32:40 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mSuppliersPermission Load (0.3ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:16
Completed 200 OK in 24203ms (Views: 0.4ms | ActiveRecord: 37.0ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:34:01 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductGroupPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductTypePermission Load (0.2ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductCatalogPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSuppliersPermission Load (0.2ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSystemDataPermission Load (0.4ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 4632ms (Views: 0.3ms | ActiveRecord: 38.3ms)


  [1m[36mCompanyPermission Load (0.4ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" ORDER BY "company_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleManagementPermission Load (0.6ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" ORDER BY "role_management_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:36:59 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductCatalogPermission Load (1.1ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mCompanyPermission Load (0.3ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleManagementPermission Load (0.4ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 5635ms (Views: 0.4ms | ActiveRecord: 45.3ms)


  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-16 18:47:37 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-16 18:47:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-16 18:47:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-16 18:47:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-16 18:47:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-16 18:47:37 +0400
Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 18:47:49 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"sdcsdc", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"sdcsdc", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:163
Completed 200 OK in 11473ms (Views: 0.2ms | ActiveRecord: 7.7ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 18:48:23 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductTypePermission Load (0.5ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductImportPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductCatalogPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mCompanyPermission Load (0.5ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleManagementPermission Load (0.4ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 5334ms (Views: 0.4ms | ActiveRecord: 39.1ms)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUserManagementPermissions (20201016192055)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "user_management_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "manage_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_a18522f10d"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201016192055_create_user_management_permissions.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_user_management_permissions_on_role_group_id" ON "user_management_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201016192055_create_user_management_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201016192055"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserManagementPermission Load (1.4ms)[0m  [1m[34mSELECT "user_management_permissions".* FROM "user_management_permissions"[0m
  [1m[36mRoleGroup Load (2.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserManagementPermission Create (2.4ms)[0m  [1m[32mINSERT INTO "user_management_permissions" ("role_group_id") VALUES ($1) RETURNING "id"[0m  [["role_group_id", 5]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 16], ["role_group_id", 5]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-16 23:44:34 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-16 23:44:34 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-16 23:44:34 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-16 23:44:34 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-16 23:44:34 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-16 23:44:34 +0400
Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 23:46:20 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"sdcsd", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"sdcsd", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Method: auth_current_user!, Error: undefined method `id' for #<UserAccount::ActiveRecord_Relation:0x0000562399155eb0>
Did you mean?  ids
Completed 500 Internal Server Error in 141ms (Views: 0.2ms | ActiveRecord: 7.1ms)


Started POST "/en/auth" for 127.0.0.1 at 2020-10-16 23:46:47 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"sdcsd", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"sdcsd", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:158
Completed 200 OK in 103ms (Views: 0.2ms | ActiveRecord: 6.1ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 23:47:06 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductGroupPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductTypePermission Load (0.7ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductImportPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSuppliersPermission Load (0.3ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSystemDataPermission Load (0.4ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mCompanyPermission Load (0.3ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleManagementPermission Load (0.3ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 5144ms (Views: 0.3ms | ActiveRecord: 37.5ms)


  [1m[36mUserRole Load (1.5ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1[0m  [["username", "bukabuka"]]
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserManagementPermission Load (4.6ms)[0m  [1m[34mSELECT "user_management_permissions".* FROM "user_management_permissions"[0m
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (38.8ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 9]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserRole Load (1.0ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserManagementPermission Load (0.9ms)[0m  [1m[34mSELECT "user_management_permissions".* FROM "user_management_permissions"[0m
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 23:55:03 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductTypePermission Load (0.4ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductCatalogPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSystemDataPermission Load (0.4ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mCompanyPermission Load (0.4ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleManagementPermission Load (0.3ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mUserManagementPermission Load (0.2ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 3363ms (Views: 0.5ms | ActiveRecord: 46.7ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-16 23:58:11 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-16 23:58:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-16 23:58:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-16 23:58:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-16 23:58:12 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-16 23:58:12 +0400
Started GET "/en/users/current_user" for 127.0.0.1 at 2020-10-16 23:58:31 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductTypePermission Load (0.6ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSuppliersPermission Load (0.5ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mSystemDataPermission Load (0.5ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mCompanyPermission Load (0.6ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleManagementPermission Load (0.3ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mUserManagementPermission Load (0.3ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 197ms (Views: 0.5ms | ActiveRecord: 51.3ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 00:01:35 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 00:01:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 00:01:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 00:01:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 00:01:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 00:01:36 +0400
Started GET "/en/role_groups/get_role?id=5" for 127.0.0.1 at 2020-10-17 00:02:05 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/role_groups/get_role?id=5" for 127.0.0.1 at 2020-10-17 00:02:27 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:81
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (0.4ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (0.4ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (0.4ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (0.4ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mUserManagementPermission Load (0.4ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 165ms (Views: 0.4ms | ActiveRecord: 43.1ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 00:07:04 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 00:07:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 00:07:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 00:07:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 00:07:05 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 00:07:05 +0400
Started GET "/en/role_groups/get_role?id=5" for 127.0.0.1 at 2020-10-17 00:07:17 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:81
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (0.3ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (0.3ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (0.2ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (0.2ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mUserManagementPermission Load (0.2ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 3.1ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 00:12:37 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 00:12:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 00:12:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 00:12:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 00:12:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 00:12:37 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-17 00:18:52 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/users/list" for 127.0.0.1 at 2020-10-17 00:19:17 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms)


  
ActiveRecord::ConfigurationError (Can't join 'UserAccount' to association named 'user_roles'; perhaps you misspelled it?):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-17 00:21:51 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (1.2ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 52ms (Views: 0.3ms | ActiveRecord: 9.4ms)


  [1m[36mUserManagementPermission Load (1.0ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" ORDER BY "user_management_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 18:32:48 +0400
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 18:32:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 18:32:48 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 18:32:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 18:32:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 18:32:49 +0400
Started GET "/en/role_groups/get_role?id=5" for 127.0.0.1 at 2020-10-17 18:34:46 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (1.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:81
  [1m[36mProductGroupPermission Load (2.1ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (2.5ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (2.2ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (2.3ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (2.2ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (2.0ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (2.0ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (1.7ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mUserManagementPermission Load (0.4ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 386ms (Views: 0.6ms | ActiveRecord: 104.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 18:36:22 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 18:36:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 18:36:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 18:36:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 18:36:23 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 18:36:23 +0400
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeColumnInSeveralTable (20201017144231)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (9.3ms)[0m  [1m[35mALTER TABLE "product_group_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "product_type_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:4
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "product_import_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:5
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "product_catalog_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:6
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "suppliers_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:7
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "company_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:8
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "system_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeColumnInSeveralTable (20201017144231)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "product_group_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "product_type_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:4
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "product_import_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:5
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "product_catalog_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:6
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "suppliers_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:7
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "company_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:8
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "system_data_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:9
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "user_management_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:10
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "role_management_permissions" ADD "no_access" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:11
  [1m[35m (28.3ms)[0m  [1m[35mALTER TABLE "product_group_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:14
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "product_type_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:15
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_import_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:16
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_catalog_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:17
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "suppliers_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:18
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "company_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:19
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "system_data_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:20
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "user_management_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:21
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "role_management_permissions" DROP COLUMN "show_data"[0m
  â†³ db/migrate/20201017144231_change_column_in_several_table.rb:22
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201017144231"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUserManagementPermission Load (0.8ms)[0m  [1m[34mSELECT "user_management_permissions".* FROM "user_management_permissions"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 19:18:23 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 19:18:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 19:18:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 19:18:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 19:18:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 19:18:24 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 19:21:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 19:21:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 19:21:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 19:21:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 19:21:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 19:21:15 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-17 19:21:55 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-17 19:21:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-17 19:21:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-17 19:21:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-17 19:21:56 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-17 19:21:56 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-17 19:22:12 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"new_test", "product_group_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"no_access"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "user_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "manage_data"=>true, "activate_data"=>true}, "locale"=>"en", "role_group"=>{"name"=>"new_test", "product_group_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"no_access"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "user_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "manage_data"=>true, "activate_data"=>true}}}
Unpermitted parameters: :user_management_permission_attributes, :format, :locale, :role_group
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mRoleGroup Create (2.8ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "new_test"], ["id_name", "new_test"], ["created_at", "2020-10-17 15:22:13.358369"], ["updated_at", "2020-10-17 15:22:13.358369"]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductGroupPermission Create (2.2ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductTypePermission Create (1.7ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductImportPermission Create (4.2ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "import") VALUES ($1, $2) RETURNING "id"[0m  [["role_group_id", 6], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductCatalogPermission Create (2.5ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mSuppliersPermission Create (2.1ms)[0m  [1m[32mINSERT INTO "suppliers_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mCompanyPermission Create (2.7ms)[0m  [1m[32mINSERT INTO "company_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mSystemDataPermission Create (1.5ms)[0m  [1m[32mINSERT INTO "system_data_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mRoleManagementPermission Create (1.3ms)[0m  [1m[32mINSERT INTO "role_management_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 6], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[35m (38.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:38
Completed 201 Created in 977ms (Views: 1.7ms | ActiveRecord: 91.0ms)


Started GET "/en/role_groups/get_role?id=6" for 127.0.0.1 at 2020-10-17 19:22:29 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"6", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:81
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (0.3ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (0.2ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (0.3ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (0.3ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mUserManagementPermission Load (0.6ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 6], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 5.4ms)


Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-17 19:24:13 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"new_test111", "product_group_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"no_access"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "user_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "manage_data"=>true, "activate_data"=>true}, "locale"=>"en", "role_group"=>{"name"=>"new_test111", "product_group_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"no_access"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "user_management_permission_attributes"=>{"no_access"=>true, "read_data"=>true, "manage_data"=>true, "activate_data"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mRoleGroup Create (0.5ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "new_test111"], ["id_name", "new_test111"], ["created_at", "2020-10-17 15:24:14.087051"], ["updated_at", "2020-10-17 15:24:14.087051"]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductGroupPermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductTypePermission Create (0.5ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductImportPermission Create (0.4ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "import") VALUES ($1, $2) RETURNING "id"[0m  [["role_group_id", 7], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mProductCatalogPermission Create (0.4ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mSuppliersPermission Create (0.4ms)[0m  [1m[32mINSERT INTO "suppliers_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mCompanyPermission Create (0.4ms)[0m  [1m[32mINSERT INTO "company_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mSystemDataPermission Create (0.4ms)[0m  [1m[32mINSERT INTO "system_data_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mRoleManagementPermission Create (0.4ms)[0m  [1m[32mINSERT INTO "role_management_permissions" ("role_group_id", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[36mUserManagementPermission Create (3.0ms)[0m  [1m[32mINSERT INTO "user_management_permissions" ("role_group_id", "read_data", "manage_data", "activate_data") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["role_group_id", 7], ["read_data", true], ["manage_data", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:38
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:38
Completed 201 Created in 147ms (Views: 15.0ms | ActiveRecord: 45.4ms)


Started GET "/en/role_groups/get_role?id=7" for 127.0.0.1 at 2020-10-17 19:24:19 +0400
Processing by RoleGroupsController#get_role as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:81
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductImportPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mProductCatalogPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSuppliersPermission Load (0.2ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mCompanyPermission Load (0.2ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mSystemDataPermission Load (0.2ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mRoleManagementPermission Load (0.2ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
  [1m[36mUserManagementPermission Load (0.3ms)[0m  [1m[34mSELECT  "user_management_permissions".* FROM "user_management_permissions" WHERE "user_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 7], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:22
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 2.5ms)


  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-17 19:46:14 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.4ms | ActiveRecord: 0.0ms)


  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-19 18:06:36 +0400
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-19 18:06:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-19 18:06:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-19 18:06:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-19 18:06:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-19 18:06:37 +0400
  [1m[36mTermsAndCondition Load (37.2ms)[0m  [1m[34mSELECT "terms_and_conditions".* FROM "terms_and_conditions"[0m
  [1m[36mCustomerType Load (1.6ms)[0m  [1m[34mSELECT "customer_types".* FROM "customer_types"[0m
Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-19 18:09:03 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"newtestuser", "delivery_address"=>"test address", "invoice_address"=>"test address", "username"=>"buka0101", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"newtestuser", "delivery_address"=>"test address", "invoice_address"=>"test address", "username"=>"buka0101", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (3.4ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (2.5ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (4.6ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$/7tNVpkhWc5QNaEQxzpl8ucQ9ogJY4p2Bv7lHbvZOAF8hs3egc4ta"], ["created_at", "2020-10-19 14:09:31.442727"], ["updated_at", "2020-10-19 14:09:31.442727"], ["salt", "Wo8sTw4rU7AxWvoxBhju"], ["username", "buka0101"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCustomerType Load (0.9ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (0.3ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 53], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (2.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "newtestuser"], ["delivery_address", "test address"], ["user_account_id", 53], ["customer_type_id", 1], ["created_at", "2020-10-19 14:10:23.643953"], ["updated_at", "2020-10-19 14:10:23.643953"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Load (1.1ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.6ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (5.5ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 53], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-19 14:10:37.049090"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (1.8ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (1.9ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 53], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.9ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "KBx4dqnshb9qArf27VcqyGkk"], ["sms_code", "pending"], ["generation_time", "2020-10-19 14:11:10.766155"], ["failed_attempts_count", 0], ["user_account_id", 53], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationType Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (1.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 53], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:67
  [1m[36mConfirmationCode Update (1.2ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "confirmation_token" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["id", 36]]
  â†³ app/services/account/verification_service.rb:67
  [1m[36mConfirmationCode Update (1.5ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "generation_time" = $1, "retry_count" = $2 WHERE "confirmation_codes"."id" = $3[0m  [["generation_time", "2020-10-19 14:11:39.016446"], ["retry_count", 0], ["id", 36]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.9ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:81
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 206807ms (Views: 0.5ms | ActiveRecord: 118.7ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-19 18:15:20 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw", "locale"=>"en", "registration"=>{"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.8ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.1ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
Completed 400 Bad Request in 100212ms (Views: 0.2ms | ActiveRecord: 17.4ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-19 18:17:05 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw", "locale"=>"en", "registration"=>{"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.8ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
Completed 400 Bad Request in 6529ms (Views: 0.8ms | ActiveRecord: 0.9ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-19 18:17:45 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw", "locale"=>"en", "registration"=>{"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.9ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-19 18:19:13 +0400
Completed 400 Bad Request in 93592ms (Views: 0.4ms | ActiveRecord: 0.9ms)


Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw", "locale"=>"en", "registration"=>{"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:133
Completed 400 Bad Request in 85614ms (Views: 0.9ms | ActiveRecord: 7.7ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-19 18:20:56 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw", "locale"=>"en", "registration"=>{"sms_code"=>"015493", "token"=>"RcGEJXRGjNTZ3EVxGhWEM9zw"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RcGEJXRGjNTZ3EVxGhWEM9zw"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:133
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:145
  [1m[36mCountryPhoneIndex Load (0.4ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:155
  [1m[36mConfirmationCode Update (1.2ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 36]]
  â†³ app/services/account/confirmation_service.rb:155
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:155
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:35
  [1m[36mUserAccount Update (3.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2020-10-19 14:21:24.290249"], ["id", 53]]
  â†³ app/services/account/confirmation_service.rb:118
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 36]]
  â†³ app/services/account/confirmation_service.rb:128
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:35
Completed 200 OK in 96845ms (Views: 0.3ms | ActiveRecord: 62.1ms)


  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (38.6ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Update (3.1ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 53]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-21 12:07:25 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-21 12:07:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-21 12:07:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-21 12:07:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-21 12:07:27 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-21 12:07:27 +0400
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1[0m  [["active", false]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" DESC LIMIT $2[0m  [["active", false], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (2.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/users/approve_registration?id=45&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:08:45 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"45", "role_group_id"=>"7", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/users/approve_registration?id=45&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:08:59 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"45", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:61
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:67
Completed 500 Internal Server Error in 43ms (ActiveRecord: 9.3ms)


  
NoMethodError (undefined method `id' for #<Account::UsersService:0x00007efd68033880>):
  
app/services/account/users_service.rb:36:in `approve_registration'
app/services/account/users_service.rb:30:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=45&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:09:19 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"45", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mCACHE UserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:62
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
Completed 500 Internal Server Error in 39403ms (ActiveRecord: 25.9ms)


  
NoMethodError (undefined method `id' for #<Account::UsersService:0x00007efd744737b8>):
  
app/services/account/users_service.rb:37:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=45&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:10:34 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"45", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:63
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:69
Completed 500 Internal Server Error in 3284ms (ActiveRecord: 11.7ms)


  
NoMethodError (undefined method `id' for #<Account::UsersService:0x00007efd740ef880>):
  
app/services/account/users_service.rb:37:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=45&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:11:09 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"45", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:65
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:72
Completed 500 Internal Server Error in 9631ms (ActiveRecord: 10.9ms)


  
NoMethodError (undefined method `id' for #<Account::UsersService:0x0000555ff8822fc8>):
  
app/services/account/users_service.rb:38:in `approve_registration'
app/services/account/users_service.rb:32:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=45&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:11:50 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"45", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:65
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:72
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.0ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 45]]
  â†³ app/services/account/users_service.rb:47
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserRole Create (7.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 45], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:52
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 3959ms (Views: 0.2ms | ActiveRecord: 34.7ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" DESC LIMIT $2[0m  [["active", false], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" DESC LIMIT $2[0m  [["active", false], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" DESC LIMIT $2[0m  [["active", false], ["LIMIT", 1]]
Started POST "/en/users/approve_registration?id=44&role_group_id=7" for 127.0.0.1 at 2020-10-21 12:12:27 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"44", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:65
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:72
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 44]]
  â†³ app/services/account/users_service.rb:47
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 44], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:52
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 10676ms (Views: 0.2ms | ActiveRecord: 40.9ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" DESC LIMIT $2[0m  [["active", false], ["LIMIT", 1]]
Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 12:30:49 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>5, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>5, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (2.5ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
Completed 400 Bad Request in 9226ms (Views: 0.5ms | ActiveRecord: 20.0ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTermsAndCondition Load (1.0ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY "terms_and_conditions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 12:31:37 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (1.0ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (1.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (0.6ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$PFxRszlTgspRxcgIPeIVhu2FK/sWu7S3sW/IXz1TxIYeLpiITFtYe"], ["created_at", "2020-10-21 08:31:42.767226"], ["updated_at", "2020-10-21 08:31:42.767226"], ["salt", "hbJSH7T_fHs8j6bbKTH1"], ["username", "zxcv"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.9ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (0.3ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 54], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "string_test"], ["delivery_address", "string_test"], ["user_account_id", 54], ["customer_type_id", 1], ["created_at", "2020-10-21 08:31:43.360043"], ["updated_at", "2020-10-21 08:31:43.360043"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.3ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (0.9ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 54], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 08:31:43.973683"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (1.1ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.8ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 54], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.7ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "kat4c44UWmabw59pAY2zBZXk"], ["sms_code", "pending"], ["generation_time", "2020-10-21 08:31:45.768212"], ["failed_attempts_count", 0], ["user_account_id", 54], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.8ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:97
  [1m[35m (37.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 18418ms (Views: 0.5ms | ActiveRecord: 98.8ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 12:32:26 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"240656", "token"=>"kat4c44UWmabw59pAY2zBZXk", "locale"=>"en", "registration"=>{"sms_code"=>"240656", "token"=>"kat4c44UWmabw59pAY2zBZXk"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (1.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "kat4c44UWmabw59pAY2zBZXk"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.1ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "kat4c44UWmabw59pAY2zBZXk"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:138
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:150
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:151
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:160
  [1m[36mConfirmationCode Update (0.9ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 37]]
  â†³ app/services/account/confirmation_service.rb:160
  [1m[35m (37.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:160
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:35
  [1m[36mUserAccount Update (0.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2020-10-21 08:33:01.093066"], ["id", 54]]
  â†³ app/services/account/confirmation_service.rb:123
  [1m[36mConfirmationCode Destroy (1.0ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 37]]
  â†³ app/services/account/confirmation_service.rb:133
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:35
Completed 200 OK in 182741ms (Views: 0.4ms | ActiveRecord: 46.9ms)


  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 14:55:46 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (3.1ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (2.1ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (0.7ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$yp7gJ2c5E24AUqbtbo7lsuIJ4Yrpo1c0AzrpcHf49dleIbmv5sgmW"], ["created_at", "2020-10-21 10:55:55.398175"], ["updated_at", "2020-10-21 10:55:55.398175"], ["salt", "Cs6BijFMTZDZz_bXGwd8"], ["username", "zxcv"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (1.1ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (1.0ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 55], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (1.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "string_test"], ["delivery_address", "string_test"], ["user_account_id", 55], ["customer_type_id", 1], ["created_at", "2020-10-21 10:55:55.842257"], ["updated_at", "2020-10-21 10:55:55.842257"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.7ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (3.2ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 55], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 10:55:56.271483"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (1.0ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (2.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 55], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (2.3ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "nfPksiKQAhDWQMsPXU9vQhBK"], ["sms_code", "pending"], ["generation_time", "2020-10-21 10:55:57.746633"], ["failed_attempts_count", 0], ["user_account_id", 55], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.8ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:97
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 14799ms (Views: 0.4ms | ActiveRecord: 62.3ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 14:56:25 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"497897", "token"=>"nfPksiKQAhDWQMsPXU9vQhBK", "locale"=>"en", "registration"=>{"sms_code"=>"497897", "token"=>"nfPksiKQAhDWQMsPXU9vQhBK"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.8ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "nfPksiKQAhDWQMsPXU9vQhBK"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "nfPksiKQAhDWQMsPXU9vQhBK"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:138
  [1m[36mCountryPhoneIndex Load (0.9ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:151
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:160
  [1m[36mConfirmationCode Update (1.2ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 38]]
  â†³ app/services/account/confirmation_service.rb:160
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:160
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:35
  [1m[36mUserAccount Update (1.1ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2020-10-21 10:57:30.642584"], ["id", 55]]
  â†³ app/services/account/confirmation_service.rb:123
  [1m[36mConfirmationCode Destroy (1.1ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 38]]
  â†³ app/services/account/confirmation_service.rb:133
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:35
Completed 200 OK in 77116ms (Views: 0.3ms | ActiveRecord: 45.7ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 14:59:24 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"string_test", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"zxcv", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (1.0ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$UbVFE15moIpeE.0YCtbg.OmveD6b5DjCgetSvgSUeKVK5W4Dc.wGW"], ["created_at", "2020-10-21 10:59:29.042707"], ["updated_at", "2020-10-21 10:59:29.042707"], ["salt", "YnVeAQyLHQZgYP-x7_oc"], ["username", "zxcv"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.8ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 56], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "string_test"], ["delivery_address", "string_test"], ["user_account_id", 56], ["customer_type_id", 1], ["created_at", "2020-10-21 10:59:29.496737"], ["updated_at", "2020-10-21 10:59:29.496737"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.5ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (0.7ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 56], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 10:59:29.874358"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (1.0ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.4ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 56], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.8ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "Pkv4Y2hgHGKwEvuJFAUEfkR9"], ["sms_code", "pending"], ["generation_time", "2020-10-21 10:59:31.065576"], ["failed_attempts_count", 0], ["user_account_id", 56], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:87
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 8606ms (Views: 0.4ms | ActiveRecord: 86.6ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 14:59:55 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"544448", "token"=>"Pkv4Y2hgHGKwEvuJFAUEfkR9", "locale"=>"en", "registration"=>{"sms_code"=>"544448", "token"=>"Pkv4Y2hgHGKwEvuJFAUEfkR9"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.6ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Pkv4Y2hgHGKwEvuJFAUEfkR9"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Pkv4Y2hgHGKwEvuJFAUEfkR9"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:129
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:141
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:142
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:151
  [1m[36mConfirmationCode Update (0.9ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 39]]
  â†³ app/services/account/confirmation_service.rb:151
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:151
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2020-10-21 11:00:44.469323"], ["id", 56]]
  â†³ app/services/account/confirmation_service.rb:114
  [1m[36mConfirmationCode Destroy (0.9ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 52852ms (Views: 0.1ms | ActiveRecord: 42.8ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:01:52 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (1.0ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$frhgpPJZf2kRL7dpoV4imO8W41wMY6i/tayz7xyyyi30Fgwf.hNem"], ["created_at", "2020-10-21 11:01:58.166269"], ["updated_at", "2020-10-21 11:01:58.166269"], ["salt", "MYUgznDSVj7kdQ4J25c-"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.5ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (0.3ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 57], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 57], ["customer_type_id", 1], ["created_at", "2020-10-21 11:01:58.769414"], ["updated_at", "2020-10-21 11:01:58.769414"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.4ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (0.4ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 57], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 11:01:59.285965"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (0.9ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 57], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "2GShfr5TsYGgABUFQeU6emQL"], ["sms_code", "pending"], ["generation_time", "2020-10-21 11:02:00.485678"], ["failed_attempts_count", 0], ["user_account_id", 57], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:88
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 9488ms (Views: 0.5ms | ActiveRecord: 71.2ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:02:28 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"617546", "token"=>"2GShfr5TsYGgABUFQeU6emQL", "locale"=>"en", "registration"=>{"sms_code"=>"617546", "token"=>"2GShfr5TsYGgABUFQeU6emQL"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "2GShfr5TsYGgABUFQeU6emQL"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "2GShfr5TsYGgABUFQeU6emQL"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:130
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:142
  [1m[36mCountryPhoneIndex Load (0.9ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:143
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:152
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 40]]
  â†³ app/services/account/confirmation_service.rb:152
  [1m[35m (36.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:152
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (0.9ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 40]]
  â†³ app/services/account/confirmation_service.rb:125
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 13565ms (Views: 0.2ms | ActiveRecord: 43.0ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:24:58 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (2.1ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (1.1ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.1ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$lMpErCGYK8GCftte3k4Ho.VtEmizYsXN.Iuf8f.ROmGbpJmYoHqVm"], ["created_at", "2020-10-21 11:25:03.799355"], ["updated_at", "2020-10-21 11:25:03.799355"], ["salt", "ykwSEz3wmbt3iZyHRJb7"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (1.0ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 58], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 58], ["customer_type_id", 1], ["created_at", "2020-10-21 11:25:04.207817"], ["updated_at", "2020-10-21 11:25:04.207817"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.4ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (1.5ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 58], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 11:25:04.682884"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (0.8ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.8ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 58], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.8ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "6puwncrTSwiusBTSK4bEfHZK"], ["sms_code", "pending"], ["generation_time", "2020-10-21 11:25:05.699788"], ["failed_attempts_count", 0], ["user_account_id", 58], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.8ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:90
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 14826ms (Views: 3.9ms | ActiveRecord: 142.7ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:25:40 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"414135", "token"=>"6puwncrTSwiusBTSK4bEfHZK", "locale"=>"en", "registration"=>{"sms_code"=>"414135", "token"=>"6puwncrTSwiusBTSK4bEfHZK"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.9ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6puwncrTSwiusBTSK4bEfHZK"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6puwncrTSwiusBTSK4bEfHZK"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:144
  [1m[36mCountryPhoneIndex Load (0.9ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:145
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:154
  [1m[36mConfirmationCode Update (1.2ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 41]]
  â†³ app/services/account/confirmation_service.rb:154
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:154
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (1.1ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 41]]
  â†³ app/services/account/confirmation_service.rb:127
  [1m[35m (38.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 157330ms (Views: 0.4ms | ActiveRecord: 48.0ms)


  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:31:14 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"414135", "token"=>"6puwncrTSwiusBTSK4bEfHZK", "locale"=>"en", "registration"=>{"sms_code"=>"414135", "token"=>"6puwncrTSwiusBTSK4bEfHZK"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (1.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6puwncrTSwiusBTSK4bEfHZK"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mConfirmationCode Load (1.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
Completed 400 Bad Request in 6496ms (Views: 0.5ms | ActiveRecord: 6.2ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:31:26 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (1.0ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:84
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:36
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$nqIaQa6T.YppJUqZvN6Yau1a1XGT/CuLEHtnI/U4yA8sROwiG/YIm"], ["created_at", "2020-10-21 11:31:30.400700"], ["updated_at", "2020-10-21 11:31:30.400700"], ["salt", "xGFssTCcJZkARshsDxXb"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.9ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:139
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomerType Load (0.4ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 59], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 59], ["customer_type_id", 1], ["created_at", "2020-10-21 11:31:30.796603"], ["updated_at", "2020-10-21 11:31:30.796603"]]
  â†³ app/services/account/registration_service.rb:114
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndCondition Load (0.4ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mTermsAndConditionAgreement Create (0.6ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 59], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 11:31:31.327584"]]
  â†³ app/services/account/registration_service.rb:120
  [1m[36mConfirmationType Load (0.6ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 59], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "EFfUQtLcwWwUaUJctM9V1eQA"], ["sms_code", "pending"], ["generation_time", "2020-10-21 11:31:32.591705"], ["failed_attempts_count", 0], ["user_account_id", 59], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.7ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:90
  [1m[35m (36.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:36
Completed 200 OK in 14984ms (Views: 0.5ms | ActiveRecord: 108.2ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 15:32:04 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"356898", "token"=>"EFfUQtLcwWwUaUJctM9V1eQA", "locale"=>"en", "registration"=>{"sms_code"=>"356898", "token"=>"EFfUQtLcwWwUaUJctM9V1eQA"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.9ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "EFfUQtLcwWwUaUJctM9V1eQA"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "EFfUQtLcwWwUaUJctM9V1eQA"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:132
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:144
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:145
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:154
  [1m[36mConfirmationCode Update (0.9ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 42]]
  â†³ app/services/account/confirmation_service.rb:154
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:154
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (1.0ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 42]]
  â†³ app/services/account/confirmation_service.rb:127
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 101062ms (Views: 0.4ms | ActiveRecord: 44.3ms)


  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:34:02 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:62
  [1m[36mRoleGroup Load (1.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:37
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:46
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mUserRole Create (0.9ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:50
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:37
Completed 200 OK in 57ms (Views: 0.1ms | ActiveRecord: 18.4ms)


  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:37:21 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:62
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:37
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:46
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mUserRole Create (0.7ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:50
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:37
Completed 500 Internal Server Error in 51ms (ActiveRecord: 12.4ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:75:in `[]'
app/services/account/users_service.rb:75:in `block in update_redis'
app/services/account/users_service.rb:75:in `reject!'
app/services/account/users_service.rb:75:in `update_redis'
app/services/account/users_service.rb:40:in `block in approve_registration'
app/services/account/users_service.rb:37:in `approve_registration'
app/services/account/users_service.rb:30:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:37:44 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:62
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:37
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:46
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:37
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.7ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:75:in `[]'
app/services/account/users_service.rb:75:in `block in update_redis'
app/services/account/users_service.rb:75:in `reject!'
app/services/account/users_service.rb:75:in `update_redis'
app/services/account/users_service.rb:40:in `block in approve_registration'
app/services/account/users_service.rb:37:in `approve_registration'
app/services/account/users_service.rb:30:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:39:04 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:62
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:37
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:46
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mUserRole Create (0.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:37
Completed 500 Internal Server Error in 46ms (ActiveRecord: 11.7ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:76:in `[]'
app/services/account/users_service.rb:76:in `block in update_redis'
app/services/account/users_service.rb:76:in `reject!'
app/services/account/users_service.rb:76:in `update_redis'
app/services/account/users_service.rb:40:in `block in approve_registration'
app/services/account/users_service.rb:37:in `approve_registration'
app/services/account/users_service.rb:30:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:39:08 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:62
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:37
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:46
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:50
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:50
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:37
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.8ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:76:in `[]'
app/services/account/users_service.rb:76:in `block in update_redis'
app/services/account/users_service.rb:76:in `reject!'
app/services/account/users_service.rb:76:in `update_redis'
app/services/account/users_service.rb:40:in `block in approve_registration'
app/services/account/users_service.rb:37:in `approve_registration'
app/services/account/users_service.rb:30:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:39:47 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:64
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:70
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:48
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:52
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 5135ms (ActiveRecord: 15.2ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:78:in `[]'
app/services/account/users_service.rb:78:in `block in update_redis'
app/services/account/users_service.rb:78:in `reject!'
app/services/account/users_service.rb:78:in `update_redis'
app/services/account/users_service.rb:42:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:40:58 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.2ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 87652ms (ActiveRecord: 24.8ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:83:in `[]'
app/services/account/users_service.rb:83:in `block in update_redis'
app/services/account/users_service.rb:83:in `reject!'
app/services/account/users_service.rb:83:in `update_redis'
app/services/account/users_service.rb:45:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:44:09 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.0ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.1ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 135918ms (ActiveRecord: 6.4ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/account/users_service.rb:83:in `[]'
app/services/account/users_service.rb:83:in `block in update_redis'
app/services/account/users_service.rb:83:in `reject!'
app/services/account/users_service.rb:83:in `update_redis'
app/services/account/users_service.rb:45:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:46:28 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (0.9ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.0ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (36.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 129253ms (Views: 0.3ms | ActiveRecord: 59.8ms)


Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 17:48:41 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 935792ms (ActiveRecord: 6.4ms)


  
Redis::CommandError (ERR wrong number of arguments for 'sadd' command):
  
app/services/account/confirmation_storage_service.rb:14:in `store_user_in_redis'
app/services/account/users_service.rb:85:in `update_redis'
app/services/account/users_service.rb:45:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=59&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:04:21 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"59", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.0ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 59]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 59], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 10237ms (Views: 0.4ms | ActiveRecord: 52.3ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:04:45 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (0.8ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:76
  [1m[36mCountryPhoneIndex Load (0.5ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:32
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$Al58DuMESEKVju6mfhMw0OjrJh/j6OTNfEIy0RSzaxxrs2gH6PM96"], ["created_at", "2020-10-21 14:04:45.259171"], ["updated_at", "2020-10-21 14:04:45.259171"], ["salt", "xHiQPxTPEYyWWxxC-S-X"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:98
  [1m[36mCustomerType Load (0.3ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:131
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.3ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 60], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 60], ["customer_type_id", 1], ["created_at", "2020-10-21 14:04:45.304492"], ["updated_at", "2020-10-21 14:04:45.304492"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndCondition Load (0.3ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndConditionAgreement Create (0.7ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 60], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 14:04:45.307690"]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 60], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.8ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "Hn8cREkCP8fxaA51ei3ufQkR"], ["sms_code", "pending"], ["generation_time", "2020-10-21 14:04:45.347309"], ["failed_attempts_count", 0], ["user_account_id", 60], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
  [1m[35m (36.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:32
Completed 200 OK in 7975ms (Views: 0.5ms | ActiveRecord: 67.9ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:05:48 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"414029", "token"=>"Hn8cREkCP8fxaA51ei3ufQkR", "locale"=>"en", "registration"=>{"sms_code"=>"414029", "token"=>"Hn8cREkCP8fxaA51ei3ufQkR"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Hn8cREkCP8fxaA51ei3ufQkR"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Hn8cREkCP8fxaA51ei3ufQkR"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:136
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:137
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[36mConfirmationCode Update (0.9ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 43]]
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (0.9ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 43]]
  â†³ app/services/account/confirmation_service.rb:119
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 32643ms (Views: 0.4ms | ActiveRecord: 41.3ms)


Started POST "/en/users/approve_registration?id=60&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:06:31 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"60", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (0.9ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 60]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 60], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 66955ms (Views: 0.5ms | ActiveRecord: 41.9ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/users/approve_registration?id=60&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:08:03 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"60", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (0.7ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 60]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 60], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 25507ms (ActiveRecord: 25.1ms)


  
Redis::CommandError (ERR wrong number of arguments for 'sadd' command):
  
app/services/account/confirmation_storage_service.rb:15:in `store_user_in_redis'
app/services/account/users_service.rb:85:in `update_redis'
app/services/account/users_service.rb:45:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=60&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:08:42 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"60", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.0ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 60]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (0.8ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 60], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 7534ms (ActiveRecord: 4.7ms)


  
Redis::CommandError (ERR wrong number of arguments for 'sadd' command):
  
app/services/account/confirmation_storage_service.rb:15:in `store_user_in_redis'
app/services/account/users_service.rb:85:in `update_redis'
app/services/account/users_service.rb:45:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=60&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:09:04 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"60", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.1ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 60]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 60], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 161114ms (ActiveRecord: 5.9ms)


  
Redis::CommandError (ERR wrong number of arguments for 'sadd' command):
  
app/services/account/confirmation_storage_service.rb:15:in `store_user_in_redis'
app/services/account/users_service.rb:85:in `update_redis'
app/services/account/users_service.rb:45:in `block in approve_registration'
app/services/account/users_service.rb:39:in `approve_registration'
app/services/account/users_service.rb:31:in `approve_user_registration'
app/controllers/users_controller.rb:22:in `approve_registration'
Started POST "/en/users/approve_registration?id=60&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:11:49 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"60", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.0ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 60]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 60], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 13390ms (Views: 0.7ms | ActiveRecord: 73.2ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:12:10 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (0.3ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:76
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:32
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$QgYGPHGuMfqkDhPrIVjYCOQ6Xe53t9R.xthC9e6/A8BwLTjBw2VW6"], ["created_at", "2020-10-21 14:12:10.179714"], ["updated_at", "2020-10-21 14:12:10.179714"], ["salt", "yEXfxHzHkWDEbPWhEnwh"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:98
  [1m[36mCustomerType Load (0.3ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:131
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.4ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 61], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 61], ["customer_type_id", 1], ["created_at", "2020-10-21 14:12:10.206588"], ["updated_at", "2020-10-21 14:12:10.206588"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndCondition Load (0.3ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndConditionAgreement Create (0.5ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 61], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 14:12:10.209594"]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mConfirmationType Load (0.4ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 61], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "XfbAYz2meJQBSsGs3vHnNWCW"], ["sms_code", "pending"], ["generation_time", "2020-10-21 14:12:10.244392"], ["failed_attempts_count", 0], ["user_account_id", 61], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:32
Completed 200 OK in 8656ms (Views: 0.5ms | ActiveRecord: 28.9ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:12:36 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"353019", "token"=>"XfbAYz2meJQBSsGs3vHnNWCW", "locale"=>"en", "registration"=>{"sms_code"=>"353019", "token"=>"XfbAYz2meJQBSsGs3vHnNWCW"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "XfbAYz2meJQBSsGs3vHnNWCW"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "XfbAYz2meJQBSsGs3vHnNWCW"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:136
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:137
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 44]]
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 44]]
  â†³ app/services/account/confirmation_service.rb:119
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 4801ms (Views: 0.6ms | ActiveRecord: 6.0ms)


Started POST "/en/users/approve_registration?id=61&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:12:54 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"61", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.1ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 61]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.0ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 61], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 60775ms (Views: 0.4ms | ActiveRecord: 10.4ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:14:08 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (0.3ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:76
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:32
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$K.ZHvgODqebv/Kh5o48UCuBPRtCWS0chqhqzAAkS0/qf4yZWSQP4O"], ["created_at", "2020-10-21 14:14:08.927967"], ["updated_at", "2020-10-21 14:14:08.927967"], ["salt", "jyLh4mcmsdqYDieybCfo"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:98
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:131
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 62], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 62], ["customer_type_id", 1], ["created_at", "2020-10-21 14:14:08.932026"], ["updated_at", "2020-10-21 14:14:08.932026"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndCondition Load (0.1ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndConditionAgreement Create (0.5ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 62], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 14:14:08.932808"]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.4ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 62], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "yXHXTaDYN8FBXiwZsi6b2K9i"], ["sms_code", "pending"], ["generation_time", "2020-10-21 14:14:08.938125"], ["failed_attempts_count", 0], ["user_account_id", 62], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:32
Completed 200 OK in 5942ms (Views: 0.5ms | ActiveRecord: 7.9ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:14:46 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"970391", "token"=>"yXHXTaDYN8FBXiwZsi6b2K9i", "locale"=>"en", "registration"=>{"sms_code"=>"970391", "token"=>"yXHXTaDYN8FBXiwZsi6b2K9i"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "yXHXTaDYN8FBXiwZsi6b2K9i"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "yXHXTaDYN8FBXiwZsi6b2K9i"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:136
  [1m[36mCountryPhoneIndex Load (0.1ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:137
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 45]]
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 45]]
  â†³ app/services/account/confirmation_service.rb:119
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 14527ms (Views: 0.3ms | ActiveRecord: 4.3ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:15:29 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"bukaurdiabuka", "delivery_address"=>"string_test", "invoice_address"=>"string_test", "username"=>"bukaurdiabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (0.3ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:76
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:32
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$S2ijZQ3.Ihw5xrlJyHd0aOWFpv4FSyqwd2PqHUtTjArhurESU/RAC"], ["created_at", "2020-10-21 14:15:29.496781"], ["updated_at", "2020-10-21 14:15:29.496781"], ["salt", "X9tDNAC2ExXmuqNk-m_a"], ["username", "bukaurdiabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:98
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:131
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 63], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "bukaurdiabuka"], ["delivery_address", "string_test"], ["user_account_id", 63], ["customer_type_id", 1], ["created_at", "2020-10-21 14:15:29.501602"], ["updated_at", "2020-10-21 14:15:29.501602"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndCondition Load (0.2ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndConditionAgreement Create (0.3ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 63], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 14:15:29.502503"]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 63], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.6ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "RhtmHk3exSwYhx9xyYdvWinj"], ["sms_code", "pending"], ["generation_time", "2020-10-21 14:15:29.506570"], ["failed_attempts_count", 0], ["user_account_id", 63], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:32
Completed 200 OK in 5738ms (Views: 0.2ms | ActiveRecord: 8.3ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:15:52 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"993861", "token"=>"RhtmHk3exSwYhx9xyYdvWinj", "locale"=>"en", "registration"=>{"sms_code"=>"993861", "token"=>"RhtmHk3exSwYhx9xyYdvWinj"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RhtmHk3exSwYhx9xyYdvWinj"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "RhtmHk3exSwYhx9xyYdvWinj"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:136
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:137
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 46]]
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 46]]
  â†³ app/services/account/confirmation_service.rb:119
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 16123ms (Views: 0.3ms | ActiveRecord: 5.8ms)


Started POST "/en/users/approve_registration?id=63&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:16:17 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"63", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:68
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Update (1.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 63]]
  â†³ app/services/account/users_service.rb:52
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:56
  [1m[36mUserRole Create (1.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 63], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:56
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:39
Completed 200 OK in 31518ms (Views: 0.4ms | ActiveRecord: 9.3ms)


  [1m[36mCustomer Load (4.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "customers"."active" = $1 ORDER BY "customers"."id" DESC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-21 18:33:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-21 18:33:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-21 18:33:56 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-21 18:33:56 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-21 18:33:56 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-21 18:33:56 +0400
Started GET "/en/users/unconfirmed_list" for 127.0.0.1 at 2020-10-21 18:34:09 +0400
Processing by UsersController#unconfirmed_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "customers"."active" = $1[0m  [["active", false]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 8.9ms)


  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."active" = $1[0m  [["active", false]]
Started GET "/en/users/unconfirmed_list" for 127.0.0.1 at 2020-10-21 18:35:25 +0400
Processing by UsersController#unconfirmed_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "customers"."active" = $1[0m  [["active", false]]
  â†³ app/services/account/users_service.rb:30
  [1m[36mCustomer Load (1.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id"[0m
  â†³ app/services/account/users_service.rb:30
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", false]]
  â†³ app/services/account/users_service.rb:30
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "customers"."active" = $1[0m  [["active", false]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 75739ms (Views: 0.2ms | ActiveRecord: 20.2ms)


Started GET "/en/users/unconfirmed_list" for 127.0.0.1 at 2020-10-21 18:36:58 +0400
Processing by UsersController#unconfirmed_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", false]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2349ms (Views: 0.5ms | ActiveRecord: 12.1ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-21 18:49:31 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-21 18:49:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-21 18:49:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-21 18:49:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-21 18:49:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-21 18:49:35 +0400
Started GET "/en/users/listen_to_unconfirmed_users" for 127.0.0.1 at 2020-10-21 18:49:46 +0400
Processing by UsersController#listen_to_unconfirmed_users as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:50:44 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"plplpl", "delivery_address"=>"plplpl", "invoice_address"=>"plplpl", "username"=>"plplpl", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer", "locale"=>"en", "registration"=>{"name"=>"plplpl", "delivery_address"=>"plplpl", "invoice_address"=>"plplpl", "username"=>"plplpl", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"private_customer"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (0.9ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:76
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:32
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "string@gmail.com"], ["crypted_password", "$2a$10$oNcmcwX847n2qDG3jU3jb.QoPl5whKdd3oVrWsv/mbp87hxYb5Gca"], ["created_at", "2020-10-21 14:50:44.840766"], ["updated_at", "2020-10-21 14:50:44.840766"], ["salt", "gdnsnmzPuvGSc3CMFWRy"], ["username", "plplpl"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:98
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "private_customer"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:131
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomerType Load (0.2ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "customers" WHERE "customers"."customer_type_id" = $1 AND "customers"."user_account_id" = $2 AND "customers"."active" = $3 LIMIT $4[0m  [["customer_type_id", 1], ["user_account_id", 64], ["active", true], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mCustomer Create (0.7ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "customer_type_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "plplpl"], ["delivery_address", "plplpl"], ["user_account_id", 64], ["customer_type_id", 1], ["created_at", "2020-10-21 14:50:44.884500"], ["updated_at", "2020-10-21 14:50:44.884500"]]
  â†³ app/services/account/registration_service.rb:106
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndCondition Load (0.2ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" WHERE "terms_and_conditions"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mTermsAndConditionAgreement Create (0.7ms)[0m  [1m[32mINSERT INTO "terms_and_condition_agreements" ("user_account_id", "terms_and_condition_id", "agreed_date") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 64], ["terms_and_condition_id", 4], ["agreed_date", "2020-10-21 14:50:44.888456"]]
  â†³ app/services/account/registration_service.rb:112
  [1m[36mConfirmationType Load (0.4ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.9ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 64], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.8ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "KkAppFVKa5726pnvTET5Vt97"], ["sms_code", "pending"], ["generation_time", "2020-10-21 14:50:44.927161"], ["failed_attempts_count", 0], ["user_account_id", 64], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:32
Completed 200 OK in 5580ms (Views: 0.4ms | ActiveRecord: 72.5ms)


Started POST "/ka/account/registration/sms_code" for 127.0.0.1 at 2020-10-21 18:51:51 +0400
Processing by Account::RegistrationController#sms_code as JSON
  Parameters: {"token"=>"KkAppFVKa5726pnvTET5Vt97", "locale"=>"ka", "registration"=>{"token"=>"KkAppFVKa5726pnvTET5Vt97"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("ka" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started POST "/en/account/registration/sms_code" for 127.0.0.1 at 2020-10-21 18:51:58 +0400
Processing by Account::RegistrationController#sms_code as JSON
  Parameters: {"token"=>"KkAppFVKa5726pnvTET5Vt97", "locale"=>"en", "registration"=>{"token"=>"KkAppFVKa5726pnvTET5Vt97"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "KkAppFVKa5726pnvTET5Vt97"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "KkAppFVKa5726pnvTET5Vt97"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/verification_service.rb:57
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "generation_time" = $1, "retry_count" = $2 WHERE "confirmation_codes"."id" = $3[0m  [["generation_time", "2020-10-21 14:51:58.802650"], ["retry_count", 1], ["id", 47]]
  â†³ app/services/account/verification_service.rb:57
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.7ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
Completed 204 No Content in 8948ms (Views: 0.2ms | ActiveRecord: 37.8ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2020-10-21 18:52:22 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"903448", "token"=>"KkAppFVKa5726pnvTET5Vt97", "locale"=>"en", "registration"=>{"sms_code"=>"903448", "token"=>"KkAppFVKa5726pnvTET5Vt97"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "KkAppFVKa5726pnvTET5Vt97"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "KkAppFVKa5726pnvTET5Vt97"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:124
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:136
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:137
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[36mConfirmationCode Update (1.1ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 47]]
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:146
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:26
  [1m[36mConfirmationCode Destroy (0.8ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 47]]
  â†³ app/services/account/confirmation_service.rb:119
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:26
Completed 200 OK in 3641ms (Views: 0.2ms | ActiveRecord: 41.6ms)


Started GET "/en/users/listen_to_unconfirmed_users" for 127.0.0.1 at 2020-10-21 18:52:35 +0400
Processing by UsersController#listen_to_unconfirmed_users as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/en/users/approve_registration?id=62&role_group_id=7" for 127.0.0.1 at 2020-10-21 18:52:56 +0400
Processing by UsersController#approve_registration as JSON
  Parameters: {"id"=>"62", "role_group_id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:79
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:85
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/users_service.rb:54
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", true], ["id", 62]]
  â†³ app/services/account/users_service.rb:63
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:67
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:67
  [1m[36mUserRole Create (0.8ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 62], ["role_group_id", 7]]
  â†³ app/services/account/users_service.rb:67
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/users_service.rb:54
Completed 200 OK in 49ms (Views: 0.1ms | ActiveRecord: 13.9ms)


Started GET "/en/users/listen_to_unconfirmed_users" for 127.0.0.1 at 2020-10-21 18:53:00 +0400
Processing by UsersController#listen_to_unconfirmed_users as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-20 01:21:13 +0400
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-20 01:21:13 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-20 01:21:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-20 01:21:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-20 01:21:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-20 01:21:14 +0400
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (3.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateClientsGroups (20201119215831)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (26.3ms)[0m  [1m[35mCREATE TABLE "clients_groups" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50))[0m
  â†³ db/migrate/20201119215831_create_clients_groups.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201119215831"]]
  â†³ bin/rails:9
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateClientsTypes (20201119215850)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "clients_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50))[0m
  â†³ db/migrate/20201119215850_create_clients_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201119215850"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillClientsGroup (20201119215950)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mClientsGroup Create (3.5ms)[0m  [1m[32mINSERT INTO "clients_groups" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "\"Naeringskunde\""], ["id_name", "naeringskunde"]]
  â†³ db/migrate/20201119215950_fill_clients_group.rb:3
  [1m[36mClientsGroup Create (0.5ms)[0m  [1m[32mINSERT INTO "clients_groups" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "\"Privat kunde\""], ["id_name", "privat_kunde"]]
  â†³ db/migrate/20201119215950_fill_clients_group.rb:4
  [1m[36mClientsGroup Create (0.5ms)[0m  [1m[32mINSERT INTO "clients_groups" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "\"Offentlig\""], ["id_name", "offentlig"]]
  â†³ db/migrate/20201119215950_fill_clients_group.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201119215950"]]
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to FillClientsType (20201119220002)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mClientsType Create (0.9ms)[0m  [1m[32mINSERT INTO "clients_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "\"Sikkerhet\""], ["id_name", "sikkerhet"]]
  â†³ db/migrate/20201119220002_fill_clients_type.rb:3
  [1m[36mClientsType Create (0.5ms)[0m  [1m[32mINSERT INTO "clients_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "\"Elektro\""], ["id_name", "elektro"]]
  â†³ db/migrate/20201119220002_fill_clients_type.rb:4
  [1m[36mClientsType Create (0.4ms)[0m  [1m[32mINSERT INTO "clients_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "\"Bugg\""], ["id_name", "bugg"]]
  â†³ db/migrate/20201119220002_fill_clients_type.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201119220002"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mClientsType Load (0.7ms)[0m  [1m[34mSELECT "clients_types".* FROM "clients_types"[0m
  [1m[36mClientsGroup Load (1.3ms)[0m  [1m[34mSELECT "clients_groups".* FROM "clients_groups"[0m
  [1m[36mCompany Load (39.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateClients (20201119220938)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (20.9ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "name" character varying(50) NOT NULL, "address" character varying, "vat_number" character varying(50), "active" boolean DEFAULT TRUE NOT NULL, "user_account_id" bigint NOT NULL, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "clients_group_id" bigint NOT NULL, "clients_type_id" bigint NOT NULL, "currency_id" bigint NOT NULL, "phone" character varying, "web_address" character varying, "kunde_nr" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_f4e629f5e5"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
, CONSTRAINT "fk_rails_b48dd4d0f7"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_6b5e4c0738"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_215a109696"
FOREIGN KEY ("clients_group_id")
  REFERENCES "clients_groups" ("id")
, CONSTRAINT "fk_rails_067b041d8b"
FOREIGN KEY ("clients_type_id")
  REFERENCES "clients_types" ("id")
, CONSTRAINT "fk_rails_b431e95a8a"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
)[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_user_account_id" ON "clients"  ("user_account_id")[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_country_id" ON "clients"  ("country_id")[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_city_id" ON "clients"  ("city_id")[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_clients_group_id" ON "clients"  ("clients_group_id")[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_clients_type_id" ON "clients"  ("clients_type_id")[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_currency_id" ON "clients"  ("currency_id")[0m
  â†³ db/migrate/20201119220938_create_clients.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201119220938"]]
  â†³ bin/rails:9
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (39.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (3.5ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 64], ["LIMIT", 1]]
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-20 03:56:50 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-20 03:56:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-20 03:56:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-20 03:56:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-20 03:56:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-20 03:56:50 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-20 04:00:29 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-20 04:00:29 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-20 04:00:29 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-20 04:00:29 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-20 04:00:30 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-20 04:00:30 +0400
  [1m[36mCountry Load (1.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (4.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1[0m  [["country_id", 4]]
  [1m[36mUserAccount Load (6.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/clients" for 127.0.0.1 at 2020-11-20 04:03:18 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "phone_number"=>"589655236", "web_address"=>"www.buka.ge", "kunde_nr"=>"23", "country_id"=>4, "city_id"=>9, "user_account_id"=>64, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>2, "locale"=>"en", "client"=>{"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "user_account_id"=>64, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>2, "web_address"=>"www.buka.ge", "kunde_nr"=>"23"}}
Completed 500 Internal Server Error in 4050ms (ActiveRecord: 3.4ms)


  
NameError (undefined local variable or method `company_params' for #<ClientsController:0x00007f79107480c0>
Did you mean?  company_logos_path):
  
app/controllers/clients_controller.rb:10:in `create'
Started POST "/en/clients" for 127.0.0.1 at 2020-11-20 04:03:46 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "phone_number"=>"589655236", "web_address"=>"www.buka.ge", "kunde_nr"=>"23", "country_id"=>4, "city_id"=>9, "user_account_id"=>64, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>2, "locale"=>"en", "client"=>{"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "user_account_id"=>64, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>2, "web_address"=>"www.buka.ge", "kunde_nr"=>"23"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:77
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:83
  [1m[36mCurrency Load (3.5ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:89
Completed 500 Internal Server Error in 15754ms (ActiveRecord: 39.7ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'phone_number' for Client.):
  
app/services/clients/service.rb:113:in `create_city_obj'
app/services/clients/service.rb:32:in `create_client'
app/controllers/clients_controller.rb:11:in `create'
  [1m[36mClient Load (5.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-20 04:07:22 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-20 04:07:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-20 04:07:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-20 04:07:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-20 04:07:22 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-20 04:07:22 +0400
Started POST "/en/clients" for 127.0.0.1 at 2020-11-20 04:07:42 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "phone"=>"589655236", "web_address"=>"www.buka.ge", "kunde_nr"=>"23", "country_id"=>4, "city_id"=>9, "user_account_id"=>64, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>2, "locale"=>"en", "client"=>{"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "user_account_id"=>64, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>2, "phone"=>"589655236", "web_address"=>"www.buka.ge", "kunde_nr"=>"23"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (1.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:77
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:83
  [1m[36mCurrency Load (0.5ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:89
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:115
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:115
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:115
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:115
  [1m[36mClientsGroup Load (3.7ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:115
  [1m[36mClientsType Load (1.9ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:115
  [1m[36mCACHE Currency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:115
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/clients/service.rb:115
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[36mCurrency Load (0.9ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
  â†³ app/services/clients/service.rb:116
Completed 400 Bad Request in 46919ms (Views: 0.2ms | ActiveRecord: 71.9ms)


Started POST "/en/clients" for 127.0.0.1 at 2020-11-20 04:08:57 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "phone"=>"589655236", "web_address"=>"www.buka.ge", "kunde_nr"=>"23", "country_id"=>4, "city_id"=>9, "user_account_id"=>64, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"name"=>"kaia kata", "address"=>"tartu streat", "vat_number"=>"0102030506", "user_account_id"=>64, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"589655236", "web_address"=>"www.buka.ge", "kunde_nr"=>"23"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:77
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:83
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:89
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:95
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:101
  [1m[36mClientsType Load (0.4ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:107
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:116
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:116
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:116
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:116
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:116
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:116
  [1m[36mCACHE Currency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:116
  [1m[36mClient Create (45.7ms)[0m  [1m[32mINSERT INTO "clients" ("name", "address", "vat_number", "user_account_id", "country_id", "city_id", "clients_group_id", "clients_type_id", "currency_id", "phone", "web_address", "kunde_nr", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["name", "kaia kata"], ["address", "tartu streat"], ["vat_number", "0102030506"], ["user_account_id", 64], ["country_id", 4], ["city_id", 9], ["clients_group_id", 2], ["clients_type_id", 2], ["currency_id", 5], ["phone", "589655236"], ["web_address", "www.buka.ge"], ["kunde_nr", "23"], ["created_at", "2020-11-20 00:09:04.826907"], ["updated_at", "2020-11-20 00:09:04.826907"]]
  â†³ app/services/clients/service.rb:116
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/service.rb:116
Completed 500 Internal Server Error in 266425ms (ActiveRecord: 88.5ms)


  
NoMethodError (undefined method `company_logo' for #<Client:0x00007f4a7ce33c58>):
  
app/services/clients/service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/clients_controller.rb:12:in `create'
  [1m[36mClient Load (4.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Load (1.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClientsGroup Load (2.7ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mClientsType Load (3.8ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (39.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/clients" for 127.0.0.1 at 2020-11-20 17:20:56 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"sdcsdc", "address"=>"sdcsc", "vat_number"=>"sdcsd", "phone"=>"sdcsdc", "web_address"=>"sdcsd", "kunde_nr"=>"sdcsc", "country_id"=>4, "city_id"=>9, "user_account_id"=>56, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"name"=>"sdcsdc", "address"=>"sdcsc", "vat_number"=>"sdcsd", "user_account_id"=>56, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"sdcsdc", "web_address"=>"sdcsd", "kunde_nr"=>"sdcsc"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (5.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:78
  [1m[36mCity Load (1.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:84
  [1m[36mCurrency Load (1.6ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:90
  [1m[36mUserAccount Load (1.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:96
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:102
  [1m[36mClientsType Load (0.3ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:108
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:117
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:117
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:117
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:117
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:117
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:117
  [1m[36mCACHE Currency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:117
  [1m[36mClient Create (10.1ms)[0m  [1m[32mINSERT INTO "clients" ("name", "address", "vat_number", "user_account_id", "country_id", "city_id", "clients_group_id", "clients_type_id", "currency_id", "phone", "web_address", "kunde_nr", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["name", "sdcsdc"], ["address", "sdcsc"], ["vat_number", "sdcsd"], ["user_account_id", 56], ["country_id", 4], ["city_id", 9], ["clients_group_id", 2], ["clients_type_id", 2], ["currency_id", 5], ["phone", "sdcsdc"], ["web_address", "sdcsd"], ["kunde_nr", "sdcsc"], ["created_at", "2020-11-20 13:21:02.555853"], ["updated_at", "2020-11-20 13:21:02.555853"]]
  â†³ app/services/clients/service.rb:117
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/service.rb:117
Completed 201 Created in 7265ms (Views: 0.6ms | ActiveRecord: 70.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 16:34:39 +0400
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 16:34:39 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 16:34:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 16:34:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 16:34:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 16:34:40 +0400
  [1m[36mClientsGroup Load (6.1ms)[0m  [1m[34mSELECT "clients_groups".* FROM "clients_groups"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 17:11:48 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 17:11:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 17:11:48 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 17:11:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 17:11:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 17:11:49 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 17:12:46 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 17:12:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 17:12:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 17:12:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 17:12:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 17:12:47 +0400
Started GET "/en/clients/client_type" for 127.0.0.1 at 2020-11-21 17:13:50 +0400
Processing by ClientsController#client_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/en/clients/client_group" for 127.0.0.1 at 2020-11-21 17:14:02 +0400
Processing by ClientsController#client_group as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/clients/client_type" for 127.0.0.1 at 2020-11-21 17:15:10 +0400
Processing by ClientsController#client_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClientsType Load (5.1ms)[0m  [1m[34mSELECT "clients_types".* FROM "clients_types"[0m
  â†³ app/services/clients/service.rb:45
Completed 200 OK in 14517ms (Views: 0.7ms | ActiveRecord: 30.3ms)


Started GET "/en/clients/client_type" for 127.0.0.1 at 2020-11-21 17:15:43 +0400
Processing by ClientsController#client_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 4444ms (Views: 0.5ms | ActiveRecord: 0.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 17:17:08 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 17:17:08 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 17:17:08 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 17:17:08 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 17:17:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 17:17:09 +0400
Started GET "/en/clients/client_type" for 127.0.0.1 at 2020-11-21 17:17:22 +0400
Processing by ClientsController#client_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 6994ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/en/clients/client_type" for 127.0.0.1 at 2020-11-21 17:18:32 +0400
Processing by ClientsController#client_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClientsType Load (0.7ms)[0m  [1m[34mSELECT "clients_types".* FROM "clients_types"[0m
  â†³ app/services/clients/service.rb:18
Completed 200 OK in 3302ms (Views: 0.9ms | ActiveRecord: 12.3ms)


Started GET "/en/clients/client_group" for 127.0.0.1 at 2020-11-21 17:18:49 +0400
Processing by ClientsController#client_group as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClientsGroup Load (0.6ms)[0m  [1m[34mSELECT "clients_groups".* FROM "clients_groups"[0m
  â†³ app/services/clients/service.rb:22
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 6.7ms)


  [1m[36mClient Load (8.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 17:47:04 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 17:47:04 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 17:47:04 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 17:47:04 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 17:47:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 17:47:04 +0400
Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-21 17:47:16 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 57ms (Views: 0.2ms | ActiveRecord: 10.3ms)


Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-21 17:47:16 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (1.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.3ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-21 17:47:48 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsGroup Load (0.4ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 45ms (Views: 0.2ms | ActiveRecord: 13.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 18:11:03 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 18:11:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 18:11:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 18:11:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 18:11:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 18:11:04 +0400
Started GET "/en/clients/%7Bcompany_id%7D" for 127.0.0.1 at 2020-11-21 18:11:14 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{company_id}"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (1.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 0], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:145
Completed 200 OK in 23348ms (Views: 0.3ms | ActiveRecord: 8.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-21 18:13:04 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-21 18:13:04 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-21 18:13:04 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-21 18:13:04 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-21 18:13:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-21 18:13:04 +0400
Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-21 18:13:13 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (3.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:145
  [1m[36mClientsGroup Load (0.5ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:14
  [1m[36mClientsType Load (0.4ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:14
Completed 200 OK in 6442ms (Views: 0.2ms | ActiveRecord: 18.9ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 04:01:58 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 04:01:59 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 04:01:59 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 04:01:59 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 04:01:59 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 04:01:59 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 04:14:32 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 04:14:32 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 04:14:32 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 04:14:32 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 04:14:32 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 04:14:32 +0400
Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-22 04:20:51 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 9.8ms)


Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-22 04:21:12 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (1.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:135
  [1m[36mClientsGroup Load (0.6ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:14
  [1m[36mClientsType Load (0.5ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:14
Completed 200 OK in 8728ms (Views: 0.6ms | ActiveRecord: 2.9ms)


Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-22 04:22:26 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Completed 500 Internal Server Error in 3161ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/buka/always24/app/services/clients/service.rb:30: syntax error, unexpected '}', expecting ')'
...ents_type: { only: [:name]} } }
...                              ^
/home/buka/always24/app/services/clients/service.rb:142: syntax error, unexpected end-of-input, expecting end):
  
app/services/clients/service.rb:30: syntax error, unexpected '}', expecting ')'
app/services/clients/service.rb:142: syntax error, unexpected end-of-input, expecting end
app/controllers/clients_controller.rb:34:in `show'
Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-22 04:23:02 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:139
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.4ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 4117ms (Views: 0.4ms | ActiveRecord: 16.5ms)


Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-22 04:23:38 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:139
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.4ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 3359ms (Views: 0.3ms | ActiveRecord: 20.6ms)


Started PUT "/en/clients" for 127.0.0.1 at 2020-11-22 04:25:26 +0400
Processing by ClientsController#update as JSON
  Parameters: {"id"=>2, "name"=>"buka", "address"=>"buka", "vat_number"=>"buka", "phone"=>"buka", "web_address"=>"buka", "kunde_nr"=>"buka", "country_id"=>4, "city_id"=>9, "user_account_id"=>56, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"id"=>2, "name"=>"buka", "address"=>"buka", "vat_number"=>"buka", "user_account_id"=>56, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"buka", "web_address"=>"buka", "kunde_nr"=>"buka"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (2.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:88
  [1m[36mCity Load (1.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:94
  [1m[36mCurrency Load (2.3ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:100
  [1m[36mUserAccount Load (2.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:106
  [1m[36mClientsGroup Load (0.5ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:112
  [1m[36mClientsType Load (0.5ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:118
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:139
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:134
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:134
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:134
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:134
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:134
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:134
  [1m[36mCACHE Currency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:134
  [1m[36mClient Update (2.3ms)[0m  [1m[33mUPDATE "clients" SET "name" = $1, "address" = $2, "vat_number" = $3, "phone" = $4, "web_address" = $5, "kunde_nr" = $6, "updated_at" = $7 WHERE "clients"."id" = $8[0m  [["name", "buka"], ["address", "buka"], ["vat_number", "buka"], ["phone", "buka"], ["web_address", "buka"], ["kunde_nr", "buka"], ["updated_at", "2020-11-22 00:25:31.518006"], ["id", 2]]
  â†³ app/services/clients/service.rb:134
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/service.rb:134
Completed 200 OK in 5488ms (Views: 0.2ms | ActiveRecord: 43.2ms)


Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-22 04:25:37 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (1.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:139
  [1m[36mClientsGroup Load (0.8ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.9ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 2450ms (Views: 1.1ms | ActiveRecord: 3.3ms)


Started GET "/en/clients/2" for 127.0.0.1 at 2020-11-22 04:29:10 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:143
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCurrency Load (0.3ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 3458ms (Views: 0.3ms | ActiveRecord: 20.3ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 04:43:16 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 04:43:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 04:43:16 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 04:43:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 04:43:17 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 04:43:17 +0400
Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-22 04:43:26 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsType Load (0.4ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 12.7ms)


Started DELETE "/en/clients?id=1" for 127.0.0.1 at 2020-11-22 04:43:42 +0400
Processing by ClientsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 1], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:138
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:71
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mClientsType Load (0.3ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mCurrency Load (0.3ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mClient Update (0.4ms)[0m  [1m[33mUPDATE "clients" SET "active" = $1, "updated_at" = $2 WHERE "clients"."id" = $3[0m  [["active", false], ["updated_at", "2020-11-22 00:43:42.774657"], ["id", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/service.rb:71
Completed 200 OK in 88ms (Views: 0.3ms | ActiveRecord: 51.3ms)


  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT "clients".* FROM "clients"[0m
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Load (1.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Update (36.7ms)[0m  [1m[33mUPDATE "clients" SET "active" = $1 WHERE "clients"."id" = $2[0m  [["active", true], ["id", 1]]
Started DELETE "/en/clients?id=1" for 127.0.0.1 at 2020-11-22 04:44:47 +0400
Processing by ClientsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 1], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:138
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:71
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mClientsType Load (0.3ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mCurrency Load (0.3ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[36mClient Update (0.5ms)[0m  [1m[33mUPDATE "clients" SET "active" = $1, "updated_at" = $2 WHERE "clients"."id" = $3[0m  [["active", false], ["updated_at", "2020-11-22 00:44:47.374196"], ["id", 1]]
  â†³ app/services/clients/service.rb:71
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/service.rb:71
Completed 200 OK in 117ms (Views: 0.2ms | ActiveRecord: 31.0ms)


  [1m[36mClient Load (1.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Update (5.3ms)[0m  [1m[33mUPDATE "clients" SET "active" = $1 WHERE "clients"."id" = $2[0m  [["active", true], ["id", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 04:46:34 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 04:46:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 04:46:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 04:46:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 04:46:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 04:46:35 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateClientContacts (20201122005617)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateClientContacts (20201122005617)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateClientContacts (20201122005617)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (29.5ms)[0m  [1m[35mCREATE TABLE "client_contacts" ("id" bigserial primary key, "first_name" character varying(50) NOT NULL, "last_name" character varying, "email" character varying(50), "phone" character varying NOT NULL, "position" character varying, "client_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_766917a6b6"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  â†³ db/migrate/20201122005617_create_client_contacts.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_client_contacts_on_client_id" ON "client_contacts"  ("client_id")[0m
  â†³ db/migrate/20201122005617_create_client_contacts.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201122005617"]]
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (2.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mClientContact Load (0.7ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" ORDER BY "client_contacts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 19:22:06 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 19:22:07 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 19:22:07 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 19:22:07 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 19:22:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 19:22:07 +0400
  [1m[36mClientContact Load (0.6ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" ORDER BY "client_contacts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 20:23:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 20:23:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 20:23:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 20:23:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 20:23:53 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 20:23:53 +0400
Started POST "/en/client_contacts" for 127.0.0.1 at 2020-11-22 20:24:35 +0400
Processing by ClientContactsController#create as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "email"=>"bukabuka@gmail.com", "phone"=>"856932698", "position"=>"Manager", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"first_name"=>"buka", "last_name"=>"urdia", "email"=>"bukabuka@gmail.com", "phone"=>"856932698", "position"=>"Manager", "client_id"=>"2"}}
Unpermitted parameters: :first_name, :last_name, :email, :position, :client_id, :format, :locale, :client_contact
Completed 500 Internal Server Error in 5ms (ActiveRecord: 5.1ms)


  
NoMethodError (undefined method `create_client' for #<Clients::ContactsService:0x00007fd020315130>
Did you mean?  create_contact):
  
app/controllers/client_contacts_controller.rb:10:in `create'
Started POST "/en/client_contacts" for 127.0.0.1 at 2020-11-22 20:25:06 +0400
Processing by ClientContactsController#create as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "email"=>"bukabuka@gmail.com", "phone"=>"856932698", "position"=>"Manager", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"first_name"=>"buka", "last_name"=>"urdia", "email"=>"bukabuka@gmail.com", "phone"=>"856932698", "position"=>"Manager", "client_id"=>"2"}}
Unpermitted parameters: :first_name, :last_name, :email, :position, :client_id, :format, :locale, :client_contact
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" IS NULL AND "clients"."active" = $1 ORDER BY "clients"."id" DESC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:87
Completed 400 Bad Request in 95ms (Views: 0.6ms | ActiveRecord: 6.4ms)


  [1m[36mClientContact Load (0.8ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" ORDER BY "client_contacts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClientContact Load (1.1ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts"[0m
  [1m[36mClient Load (1.8ms)[0m  [1m[34mSELECT "clients".* FROM "clients"[0m
Started POST "/en/client_contacts" for 127.0.0.1 at 2020-11-22 20:26:42 +0400
Processing by ClientContactsController#create as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "email"=>"bukabuka@gmail.com", "phone"=>"856932698", "position"=>"Manager", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"first_name"=>"buka", "last_name"=>"urdia", "email"=>"bukabuka@gmail.com", "phone"=>"856932698", "position"=>"Manager", "client_id"=>"2"}}
Unpermitted parameters: :format, :locale, :client_contact
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:88
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/contacts_service.rb:76
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:76
  [1m[36mClientContact Create (4.4ms)[0m  [1m[32mINSERT INTO "client_contacts" ("first_name", "last_name", "email", "phone", "position", "client_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["first_name", "buka"], ["last_name", "urdia"], ["email", "bukabuka@gmail.com"], ["phone", "856932698"], ["position", "Manager"], ["client_id", 2], ["created_at", "2020-11-22 16:26:47.992489"], ["updated_at", "2020-11-22 16:26:47.992489"]]
  â†³ app/services/clients/contacts_service.rb:76
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/contacts_service.rb:76
Completed 201 Created in 5822ms (Views: 0.2ms | ActiveRecord: 23.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 20:28:06 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 20:28:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 20:28:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 20:28:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 20:28:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 20:28:07 +0400
Started POST "/en/client_contacts" for 127.0.0.1 at 2020-11-22 20:28:28 +0400
Processing by ClientContactsController#create as JSON
  Parameters: {"first_name"=>"bukaaa", "last_name"=>"urdiaaa", "email"=>"bukabukabuka@gmail.com", "phone"=>"856932698", "position"=>"Managera", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"first_name"=>"bukaaa", "last_name"=>"urdiaaa", "email"=>"bukabukabuka@gmail.com", "phone"=>"856932698", "position"=>"Managera", "client_id"=>"2"}}
Unpermitted parameters: :format, :locale, :client_contact
  [1m[36mClient Load (1.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:88
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/contacts_service.rb:76
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:76
  [1m[36mClientContact Create (1.4ms)[0m  [1m[32mINSERT INTO "client_contacts" ("first_name", "last_name", "email", "phone", "position", "client_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["first_name", "bukaaa"], ["last_name", "urdiaaa"], ["email", "bukabukabuka@gmail.com"], ["phone", "856932698"], ["position", "Managera"], ["client_id", 2], ["created_at", "2020-11-22 16:28:31.986528"], ["updated_at", "2020-11-22 16:28:31.986528"]]
  â†³ app/services/clients/contacts_service.rb:76
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/contacts_service.rb:76
Completed 201 Created in 3626ms (Views: 45.0ms | ActiveRecord: 55.2ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-22 20:38:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-22 20:38:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-22 20:38:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-22 20:38:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-22 20:38:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-22 20:38:44 +0400
Started GET "/en/client_contacts/contacts_list?client_id=2" for 127.0.0.1 at 2020-11-22 20:39:01 +0400
Processing by ClientContactsController#contacts_list as JSON
  Parameters: {"client_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 3.4ms)


Started GET "/en/client_contacts/contacts_list?client_id=2" for 127.0.0.1 at 2020-11-22 20:39:57 +0400
Processing by ClientContactsController#contacts_list as JSON
  Parameters: {"client_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms)


Started GET "/en/client_contacts/contacts_list?client_id=1" for 127.0.0.1 at 2020-11-22 20:40:07 +0400
Processing by ClientContactsController#contacts_list as JSON
  Parameters: {"client_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/client_contacts/contacts_list?client_id=2" for 127.0.0.1 at 2020-11-22 20:40:13 +0400
Processing by ClientContactsController#contacts_list as JSON
  Parameters: {"client_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/client_contacts/contacts_list?client_id=2" for 127.0.0.1 at 2020-11-22 20:40:33 +0400
Processing by ClientContactsController#contacts_list as JSON
  Parameters: {"client_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClientContact Load (1.5ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 2]]
  â†³ app/services/clients/contacts_service.rb:38
Completed 200 OK in 4505ms (Views: 0.9ms | ActiveRecord: 16.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-23 03:42:18 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-23 03:42:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-23 03:42:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-23 03:42:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-23 03:42:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-23 03:42:19 +0400
Started GET "/en/client_contacts/contacts_list?client_id=2" for 127.0.0.1 at 2020-11-23 03:42:33 +0400
Processing by ClientContactsController#contacts_list as JSON
  Parameters: {"client_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClientContact Load (0.5ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 2]]
  â†³ app/services/clients/contacts_service.rb:18
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 6.6ms)


  [1m[36mClientContact Load (1.4ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts"[0m
Started PUT "/en/client_contacts" for 127.0.0.1 at 2020-11-23 03:43:32 +0400
Processing by ClientContactsController#update as JSON
  Parameters: {"id"=>2, "first_name"=>"bukaaaq", "last_name"=>"bukaaaq", "email"=>"bukaaaq", "phone"=>"bukaaaq", "position"=>"bukaaaq", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"id"=>2, "first_name"=>"bukaaaq", "last_name"=>"bukaaaq", "email"=>"bukaaaq", "phone"=>"bukaaaq", "position"=>"bukaaaq", "client_id"=>"2"}}
Unpermitted parameters: :format, :locale, :client_contact
  [1m[36mClient Load (1.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE Client Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:82
  [1m[36mClientContact Load (1.0ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mClientContact Load (1.1ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts"[0m
  â†³ app/services/clients/contacts_service.rb:87
  [1m[36mClientContact Load (0.7ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):7
  [1m[36mCACHE ClientContact Load (0.0ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:88
Completed 500 Internal Server Error in 52774ms (ActiveRecord: 11.0ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/clients/contacts_service.rb:76:in `update_contact_obj'
app/services/clients/contacts_service.rb:46:in `update_client'
app/controllers/client_contacts_controller.rb:29:in `update'
Started PUT "/en/client_contacts" for 127.0.0.1 at 2020-11-23 03:45:06 +0400
Processing by ClientContactsController#update as JSON
  Parameters: {"id"=>2, "first_name"=>"bukaaaq", "last_name"=>"bukaaaq", "email"=>"bukaaaq", "phone"=>"bukaaaq", "position"=>"bukaaaq", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"id"=>2, "first_name"=>"bukaaaq", "last_name"=>"bukaaaq", "email"=>"bukaaaq", "phone"=>"bukaaaq", "position"=>"bukaaaq", "client_id"=>"2"}}
Unpermitted parameters: :format, :locale, :client_contact
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:83
  [1m[36mClientContact Load (0.9ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:89
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/contacts_service.rb:77
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:77
  [1m[36mClientContact Update (0.6ms)[0m  [1m[33mUPDATE "client_contacts" SET "first_name" = $1, "last_name" = $2, "email" = $3, "phone" = $4, "position" = $5, "updated_at" = $6 WHERE "client_contacts"."id" = $7[0m  [["first_name", "bukaaaq"], ["last_name", "bukaaaq"], ["email", "bukaaaq"], ["phone", "bukaaaq"], ["position", "bukaaaq"], ["updated_at", "2020-11-22 23:45:10.092270"], ["id", 2]]
  â†³ app/services/clients/contacts_service.rb:77
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/contacts_service.rb:77
Completed 200 OK in 3231ms (Views: 0.2ms | ActiveRecord: 23.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-23 03:55:40 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-23 03:55:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-23 03:55:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-23 03:55:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-23 03:55:40 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-23 03:55:40 +0400
  [1m[36mClientContact Load (0.4ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts"[0m
Started GET "/en/client_contacts/1" for 127.0.0.1 at 2020-11-23 03:56:04 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/client_contacts/1"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/client_contacts/1" for 127.0.0.1 at 2020-11-23 03:56:34 +0400
Processing by ClientContactsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mClientContact Load (0.4ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:86
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 5.9ms)


Started DELETE "/en/client_contacts?id=1" for 127.0.0.1 at 2020-11-23 03:56:53 +0400
Processing by ClientContactsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClientContact Load (0.3ms)[0m  [1m[34mSELECT  "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:86
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/contacts_service.rb:56
  [1m[36mClientContact Destroy (0.2ms)[0m  [1m[31mDELETE FROM "client_contacts" WHERE "client_contacts"."id" = $1[0m  [["id", 1]]
  â†³ app/services/clients/contacts_service.rb:56
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/contacts_service.rb:56
Completed 200 OK in 40ms (Views: 0.4ms | ActiveRecord: 37.0ms)


  [1m[36mClientContact Load (1.0ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-23 04:41:49 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-23 04:41:49 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-23 04:41:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-23 04:41:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-23 04:41:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-23 04:41:50 +0400
Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-23 04:42:05 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:38
Completed 500 Internal Server Error in 44ms (ActiveRecord: 6.3ms)


  
NoMethodError (undefined method `client_contact' for #<Client:0x000055b8831f8790>
Did you mean?  client_contacts
               client_contacts=
               client_contact_ids):
  
app/services/clients/service.rb:38:in `clients_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/clients_controller.rb:29:in `clients_list'
Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-23 04:42:23 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientContact Load (0.4ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 2]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsType Load (0.3ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientContact Load (0.4ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
Completed 200 OK in 73ms (Views: 0.2ms | ActiveRecord: 16.5ms)


Started POST "/en/client_contacts" for 127.0.0.1 at 2020-11-23 04:43:27 +0400
Processing by ClientContactsController#create as JSON
  Parameters: {"first_name"=>"kaiakaia", "last_name"=>"kaiakaia", "email"=>"kaiakaia", "phone"=>"kaiakaia", "position"=>"kaiakaia", "client_id"=>"2", "locale"=>"en", "client_contact"=>{"first_name"=>"kaiakaia", "last_name"=>"kaiakaia", "email"=>"kaiakaia", "phone"=>"kaiakaia", "position"=>"kaiakaia", "client_id"=>"2"}}
Unpermitted parameters: :format, :locale, :client_contact
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:81
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/contacts_service.rb:69
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:69
  [1m[36mClientContact Create (0.6ms)[0m  [1m[32mINSERT INTO "client_contacts" ("first_name", "last_name", "email", "phone", "position", "client_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["first_name", "kaiakaia"], ["last_name", "kaiakaia"], ["email", "kaiakaia"], ["phone", "kaiakaia"], ["position", "kaiakaia"], ["client_id", 2], ["created_at", "2020-11-23 00:43:27.944065"], ["updated_at", "2020-11-23 00:43:27.944065"]]
  â†³ app/services/clients/contacts_service.rb:69
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/contacts_service.rb:69
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 4.1ms)


Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-23 04:43:32 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientContact Load (0.2ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 2]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientContact Load (0.2ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-23 04:45:53 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-23 04:45:53 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-23 04:45:53 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-23 04:45:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-23 04:45:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-23 04:45:54 +0400
Started GET "/en/clients/clients_list" for 127.0.0.1 at 2020-11-23 04:46:07 +0400
Processing by ClientsController#clients_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."active" = $1[0m  [["active", true]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientContact Load (0.3ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 2]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mClientContact Load (0.3ms)[0m  [1m[34mSELECT "client_contacts".* FROM "client_contacts" WHERE "client_contacts"."client_id" = $1[0m  [["client_id", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:38
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.5ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/users/list" for 127.0.0.1 at 2020-11-23 05:06:02 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (5.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "customers"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 73ms (Views: 0.8ms | ActiveRecord: 16.8ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mUserAccount Update (1.8ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1 WHERE "user_accounts"."id" = $2[0m  [["active", false], ["id", 44]]
Started GET "/en/users/list" for 127.0.0.1 at 2020-11-23 05:06:50 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "customers"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms)


  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 44], ["LIMIT", 1]]
Started GET "/en/users/list" for 127.0.0.1 at 2020-11-23 05:11:48 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 52ms (Views: 0.7ms | ActiveRecord: 10.0ms)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateOrderStatuses (20201124011057)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "order_statuses" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/migrate/20201124011057_create_order_statuses.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124011057"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateOrderTypes (20201124011106)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "order_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/migrate/20201124011106_create_order_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124011106"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to FillOrderStatus (20201124011239)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mOrderStatus Create (0.7ms)[0m  [1m[32mINSERT INTO "order_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Open\",\"no\":\"Ã…pen\"}"], ["id_name", "open"]]
  â†³ db/migrate/20201124011239_fill_order_status.rb:3
  [1m[36mOrderStatus Create (0.2ms)[0m  [1m[32mINSERT INTO "order_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Booked\",\"no\":\"Bestilt\"}"], ["id_name", "booked"]]
  â†³ db/migrate/20201124011239_fill_order_status.rb:4
  [1m[36mOrderStatus Create (0.4ms)[0m  [1m[32mINSERT INTO "order_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"In progress\",\"no\":\"I prosess\"}"], ["id_name", "in_progress"]]
  â†³ db/migrate/20201124011239_fill_order_status.rb:5
  [1m[36mOrderStatus Create (0.2ms)[0m  [1m[32mINSERT INTO "order_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Done\",\"no\":\"Ferdig\"}"], ["id_name", "done"]]
  â†³ db/migrate/20201124011239_fill_order_status.rb:6
  [1m[36mOrderStatus Create (0.4ms)[0m  [1m[32mINSERT INTO "order_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Canceled\",\"no\":\"avbrutt\"}"], ["id_name", "canceled"]]
  â†³ db/migrate/20201124011239_fill_order_status.rb:7
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124011239"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to FillOrderType (20201124011243)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mOrderType Create (0.6ms)[0m  [1m[32mINSERT INTO "order_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Hourly based\",\"no\":\"Timebasert\"}"], ["id_name", "hourly_based"]]
  â†³ db/migrate/20201124011243_fill_order_type.rb:3
  [1m[36mOrderType Create (0.3ms)[0m  [1m[32mINSERT INTO "order_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Fixed price\",\"no\":\"Fast pris\"}"], ["id_name", "fixed_price"]]
  â†³ db/migrate/20201124011243_fill_order_type.rb:4
  [1m[36mOrderType Create (0.2ms)[0m  [1m[32mINSERT INTO "order_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Internal based\",\"no\":\"Intern basert\"}"], ["id_name", "internal_based"]]
  â†³ db/migrate/20201124011243_fill_order_type.rb:5
  [1m[36mOrderType Create (0.2ms)[0m  [1m[32mINSERT INTO "order_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Repetitive\",\"no\":\"Repeterende\"}"], ["id_name", "repetitive"]]
  â†³ db/migrate/20201124011243_fill_order_type.rb:6
  [1m[36mOrderType Create (0.2ms)[0m  [1m[32mINSERT INTO "order_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Reclamation\",\"no\":\"gjenvinning\"}"], ["id_name", "reclamation"]]
  â†³ db/migrate/20201124011243_fill_order_type.rb:7
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124011243"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateOrders (20201124012638)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (15.8ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "title" character varying(50) NOT NULL, "description" character varying, "client_id" bigint NOT NULL, "order_type_id" bigint NOT NULL, "order_status_id" bigint NOT NULL, "user_account_id" bigint, "start_time" timestamp NOT NULL, "deadline" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_5c8e53c896"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
, CONSTRAINT "fk_rails_aea2044a0b"
FOREIGN KEY ("order_type_id")
  REFERENCES "order_types" ("id")
, CONSTRAINT "fk_rails_7a22cf8b0e"
FOREIGN KEY ("order_status_id")
  REFERENCES "order_statuses" ("id")
, CONSTRAINT "fk_rails_57bb407dbc"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
)[0m
  â†³ db/migrate/20201124012638_create_orders.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_orders_on_client_id" ON "orders"  ("client_id")[0m
  â†³ db/migrate/20201124012638_create_orders.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_orders_on_order_type_id" ON "orders"  ("order_type_id")[0m
  â†³ db/migrate/20201124012638_create_orders.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_orders_on_order_status_id" ON "orders"  ("order_status_id")[0m
  â†³ db/migrate/20201124012638_create_orders.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_orders_on_user_account_id" ON "orders"  ("user_account_id")[0m
  â†³ db/migrate/20201124012638_create_orders.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124012638"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProduct Load (5.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-24 18:33:50 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-24 18:33:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-24 18:33:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-24 18:33:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-24 18:33:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-24 18:33:50 +0400
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:43:32 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Completed 500 Internal Server Error in 6135ms (ActiveRecord: 2.9ms)


  
NameError (uninitialized constant Orders::OrdersService):
  
app/controllers/orders_controller.rb:10:in `create'
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:44:51 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Completed 500 Internal Server Error in 2066ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant Orders::OrdersService):
  
app/controllers/orders_controller.rb:10:in `create'
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:45:11 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Completed 500 Internal Server Error in 1962ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant Orders::OrdersService):
  
app/controllers/orders_controller.rb:10:in `create'
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:45:21 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Completed 500 Internal Server Error in 2455ms (ActiveRecord: 1.9ms)


  
NameError (uninitialized constant Orders::OrdersService):
  
app/controllers/orders_controller.rb:10:in `create'
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:46:09 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (2.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:96
  [1m[36mOrderType Load (2.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:102
Completed 500 Internal Server Error in 14815ms (ActiveRecord: 42.8ms)


  
NoMethodError (undefined method `active=' for #<Order:0x00007f16982f7f00>):
  
app/services/orders/orders_services.rb:110:in `create_order_obj'
app/services/orders/orders_services.rb:44:in `create_order'
app/controllers/orders_controller.rb:11:in `create'
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:46:39 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (1.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:96
  [1m[36mOrderType Load (0.6ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:102
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:110
  [1m[36mCACHE UserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:110
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:110
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:110
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/orders/orders_services.rb:110
Completed 400 Bad Request in 7365ms (Views: 0.2ms | ActiveRecord: 39.5ms)


Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:46:55 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:96
  [1m[36mOrderType Load (1.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:102
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):5
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mClient Load (1.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):5
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):6
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):6
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):10
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):10
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:110
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:110
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:110
  [1m[36mOrderType Load (0.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:110
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/orders/orders_services.rb:110
Completed 400 Bad Request in 54483ms (Views: 0.3ms | ActiveRecord: 9.9ms)


  [1m[36mOrderStatus Load (3.7ms)[0m  [1m[34mSELECT "order_statuses".* FROM "order_statuses"[0m
  [1m[36mOrderStatus Load (0.9ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:50:35 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:96
  [1m[36mOrderType Load (0.7ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:102
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/orders/orders_services.rb:111
Completed 400 Bad Request in 10424ms (Views: 0.2ms | ActiveRecord: 32.1ms)


Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:50:56 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:96
  [1m[36mOrderType Load (0.8ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:102
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/orders/orders_services.rb:111
Completed 400 Bad Request in 26118ms (Views: 0.7ms | ActiveRecord: 4.9ms)


Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:51:47 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (1.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:90
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:97
  [1m[36mOrderType Load (0.5ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:103
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:117
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mOrder Create (42.4ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "buka"], ["description", "aba description"], ["client_id", 2], ["order_type_id", 2], ["order_status_id", 1], ["user_account_id", 64], ["start_time", "2020-09-05 00:00:00"], ["deadline", "12-12-2020"], ["created_at", "2020-11-24 14:52:25.428007"], ["updated_at", "2020-11-24 14:52:25.428007"]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:112
Completed 204 No Content in 37875ms (Views: 0.6ms | ActiveRecord: 82.4ms)


  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mOrderStatus Load (0.5ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:57:48 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"bukaaa", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"bukaaa", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:90
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:97
  [1m[36mOrderType Load (0.6ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:103
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:117
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "bukaaa"], ["description", "aba description"], ["client_id", 2], ["order_type_id", 2], ["order_status_id", 1], ["user_account_id", 64], ["start_time", "2020-09-05 00:00:00"], ["deadline", "12-12-2020"], ["created_at", "2020-11-24 14:57:55.518394"], ["updated_at", "2020-11-24 14:57:55.518394"]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:112
Completed 201 Created in 6797ms (Views: 0.2ms | ActiveRecord: 43.0ms)


Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 18:59:04 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka123a", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka123a", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:90
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:97
  [1m[36mOrderType Load (0.7ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:103
  [1m[36mOrderStatus Load (0.6ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:117
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "buka123a"], ["description", "aba description"], ["client_id", 2], ["order_type_id", 2], ["order_status_id", 1], ["user_account_id", 64], ["start_time", "2020-09-05 00:00:00"], ["deadline", "12-12-2020"], ["created_at", "2020-11-24 14:59:09.430385"], ["updated_at", "2020-11-24 14:59:09.430385"]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:112
Completed 201 Created in 4539ms (Views: 0.3ms | ActiveRecord: 55.1ms)


  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" WHERE "customers"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 64], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-24 19:03:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-24 19:03:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-24 19:03:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-24 19:03:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-24 19:03:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-24 19:03:41 +0400
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 19:04:33 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"buka12wedwd3a", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"buka12wedwd3a", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:90
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:97
  [1m[36mOrderType Load (0.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:103
  [1m[36mOrderStatus Load (0.6ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mOrderStatus Load (0.2ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mOrder Create (1.0ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "buka12wedwd3a"], ["description", "aba description"], ["client_id", 2], ["order_type_id", 2], ["order_status_id", 1], ["user_account_id", 64], ["start_time", "2020-09-05 00:00:00"], ["deadline", "12-12-2020"], ["created_at", "2020-11-24 15:04:33.334264"], ["updated_at", "2020-11-24 15:04:33.334264"]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:111
Completed 201 Created in 185ms (Views: 0.4ms | ActiveRecord: 29.6ms)


  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-24 19:12:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-24 19:12:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-24 19:12:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-24 19:12:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-24 19:12:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-24 19:12:41 +0400
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 19:12:57 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"sdf", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"sdf", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (1.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:90
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:97
  [1m[36mOrderType Load (0.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:103
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mOrderStatus Load (0.2ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mOrder Create (1.3ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "sdf"], ["description", "aba description"], ["client_id", 2], ["order_type_id", 2], ["order_status_id", 1], ["user_account_id", 64], ["start_time", "2020-09-05 00:00:00"], ["deadline", "12-12-2020"], ["created_at", "2020-11-24 15:12:57.332072"], ["updated_at", "2020-11-24 15:12:57.332072"]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[35m (38.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:111
Completed 201 Created in 59ms (Views: 0.5ms | ActiveRecord: 42.6ms)


  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
Started POST "/en/orders" for 127.0.0.1 at 2020-11-24 19:14:19 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"sdf", "description"=>"aba description", "start_time"=>"05-09-2020", "deadline"=>"12-12-2020", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "locale"=>"en", "order"=>{"title"=>"sdf", "description"=>"aba description", "client_id"=>2, "order_type_id"=>2, "user_account_id"=>64, "start_time"=>"05-09-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:90
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:97
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:103
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "sdf"], ["description", "aba description"], ["client_id", 2], ["order_type_id", 2], ["order_status_id", 1], ["user_account_id", 64], ["start_time", "2020-09-05 00:00:00"], ["deadline", "12-12-2020"], ["created_at", "2020-11-24 15:14:19.219167"], ["updated_at", "2020-11-24 15:14:19.219167"]]
  â†³ app/services/orders/orders_services.rb:111
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:111
Completed 201 Created in 81ms (Views: 0.5ms | ActiveRecord: 23.6ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-24 19:22:33 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-24 19:22:33 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-24 19:22:33 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-24 19:22:33 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-24 19:22:34 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-24 19:22:34 +0400
Started GET "/en/orders/order_type" for 127.0.0.1 at 2020-11-24 19:22:47 +0400
Processing by OrdersController#order_type as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 227ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `clients_params' for #<OrdersController:0x00007f169c2e6850>
Did you mean?  clients_path):
  
app/controllers/orders_controller.rb:15:in `order_type'
Started GET "/en/orders/order_type" for 127.0.0.1 at 2020-11-24 19:23:02 +0400
Processing by OrdersController#order_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/order_type" for 127.0.0.1 at 2020-11-24 19:23:27 +0400
Processing by OrdersController#order_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/order_type" for 127.0.0.1 at 2020-11-24 19:23:44 +0400
Processing by OrdersController#order_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderType Load (0.5ms)[0m  [1m[34mSELECT "order_types".* FROM "order_types"[0m
  â†³ app/services/orders/orders_services.rb:22
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 5.6ms)


Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:23:53 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `client_list' for #<Orders::OrdersServices:0x00007f169c3a7438>):
  
app/controllers/orders_controller.rb:22:in `orders_list'
Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:24:10 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:24:31 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:24:41 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:25:58 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
Completed 500 Internal Server Error in 30ms (ActiveRecord: 4.3ms)


  
NoMethodError (undefined method `client_contacts' for #<Order:0x00007f169c7d5460>
Did you mean?  client_id_was):
  
app/services/orders/orders_services.rb:38:in `orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:23:in `orders_list'
Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:26:37 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-11-24 19:26:52 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.2ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 130ms (Views: 0.9ms | ActiveRecord: 22.8ms)


  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-24 19:37:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-24 19:37:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-24 19:37:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-24 19:37:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-24 19:37:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-24 19:37:09 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-24 19:39:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-24 19:39:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-24 19:39:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-24 19:39:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-24 19:39:05 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-24 19:39:05 +0400
Started GET "/en/orders/1" for 127.0.0.1 at 2020-11-24 19:39:15 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:122
  [1m[36mClient Load (0.8ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
Completed 200 OK in 100ms (Views: 0.3ms | ActiveRecord: 20.7ms)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateOrderProducts (20201126174739)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (57.3ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" bigserial primary key, "product_id" bigint NOT NULL, "count" integer NOT NULL, CONSTRAINT "fk_rails_96c0709f78"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  â†³ db/migrate/20201126174739_create_order_products.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_order_products_on_product_id" ON "order_products"  ("product_id")[0m
  â†³ db/migrate/20201126174739_create_order_products.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201126174739"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateOrderProducts (20201126174739)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.7ms)[0m  [1m[35mDROP TABLE "order_products"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201126174739"]]
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateOrderProducts (20201126174739)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (41.9ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" bigserial primary key, "product_id" bigint NOT NULL, "order_id" bigint NOT NULL, "count" integer NOT NULL, CONSTRAINT "fk_rails_96c0709f78"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_f40b8ccee4"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
)[0m
  â†³ db/migrate/20201126174739_create_order_products.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_order_products_on_product_id" ON "order_products"  ("product_id")[0m
  â†³ db/migrate/20201126174739_create_order_products.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_order_products_on_order_id" ON "order_products"  ("order_id")[0m
  â†³ db/migrate/20201126174739_create_order_products.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201126174739"]]
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 22:24:48 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 22:24:49 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 22:24:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 22:24:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 22:24:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 22:24:49 +0400
  [1m[36mOrder Load (2.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (4.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/order_products" for 127.0.0.1 at 2020-11-26 22:27:17 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"order_id"=>6, "product_id"=>15, "count"=>23, "locale"=>"en", "order_product"=>{"product_id"=>15, "order_id"=>6, "count"=>23}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 5.3ms)


  
NameError (uninitialized constant Orders::OrderProductsServices):
  
app/controllers/order_products_controller.rb:9:in `create'
Started POST "/en/order_products" for 127.0.0.1 at 2020-11-26 22:28:15 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"order_id"=>6, "product_id"=>15, "count"=>23, "locale"=>"en", "order_product"=>{"product_id"=>15, "order_id"=>6, "count"=>23}}
Unpermitted parameters: :format, :locale, :order_product
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:88
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:83
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:95
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:95
  [1m[36mOrderProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 6], ["count", 23]]
  â†³ app/services/orders/order_products_services.rb:95
  [1m[35m (67.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:95
Completed 500 Internal Server Error in 208ms (ActiveRecord: 86.6ms)


  
NoMethodError (undefined method `client' for #<OrderProduct id: 1, product_id: 15, order_id: 6, count: 23>):
  
app/services/orders/order_products_services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/order_products_controller.rb:11:in `create'
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.5ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.8ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mOrderProduct Load (1.0ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
Started POST "/en/order_products" for 127.0.0.1 at 2020-11-26 22:41:39 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"order_id"=>5, "product_id"=>15, "count"=>23, "locale"=>"en", "order_product"=>{"product_id"=>15, "order_id"=>5, "count"=>23}}
Unpermitted parameters: :format, :locale, :order_product
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:84
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:79
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:91
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:91
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:91
  [1m[36mOrderProduct Create (3.5ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 5], ["count", 23]]
  â†³ app/services/orders/order_products_services.rb:91
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:91
Completed 201 Created in 78ms (Views: 0.3ms | ActiveRecord: 30.0ms)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 22:46:51 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 22:46:51 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 22:46:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 22:46:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 22:46:52 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 22:46:52 +0400
Started POST "/en/order_products" for 127.0.0.1 at 2020-11-26 22:47:10 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"order_id"=>4, "product_id"=>15, "count"=>23, "locale"=>"en", "order_product"=>{"product_id"=>15, "order_id"=>4, "count"=>23}}
Unpermitted parameters: :format, :locale, :order_product
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:84
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:79
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:91
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:91
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:91
  [1m[36mOrderProduct Create (1.5ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 4], ["count", 23]]
  â†³ app/services/orders/order_products_services.rb:91
  [1m[35m (36.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:91
Completed 201 Created in 50ms (Views: 0.3ms | ActiveRecord: 40.5ms)


  [1m[36mProductType Load (3.2ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:31:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:31:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:31:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:31:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:31:53 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:31:53 +0400
Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:32:15 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 4.5ms)


Started GET "/en/order_products/order_product_list5" for 127.0.0.1 at 2020-11-26 23:32:27 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list5"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:33:19 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:33:57 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:33:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:33:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:33:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:33:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:33:58 +0400
Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:34:09 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:34:50 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:34:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:34:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:34:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:34:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:34:50 +0400
Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:35:06 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/orders/order_products_services.rb:18
Completed 200 OK in 59ms (Views: 0.4ms | ActiveRecord: 12.9ms)


Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:36:22 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/orders/order_products_services.rb:18
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 7.8ms)


Started GET "/no/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:36:47 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/orders/order_products_services.rb:18
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)


  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
Started GET "/en/order_products/order_product_list5" for 127.0.0.1 at 2020-11-26 23:37:53 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list5"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/order_products/order_product_list5" for 127.0.0.1 at 2020-11-26 23:38:53 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list5"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:38:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:38:56 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:38:56 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:38:56 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:38:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:38:57 +0400
Started GET "/en/order_products/order_product_list/5" for 127.0.0.1 at 2020-11-26 23:39:07 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list/5"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/order_products/order_product_list/5" for 127.0.0.1 at 2020-11-26 23:40:00 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list/5"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:40:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:40:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:40:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:40:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:40:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:40:03 +0400
Started GET "/en/order_products/order_product_list" for 127.0.0.1 at 2020-11-26 23:40:20 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/order_products/order_product_list" for 127.0.0.1 at 2020-11-26 23:41:05 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:42:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:42:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:42:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:42:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:42:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:42:14 +0400
Started GET "/en/order_products/order_product_list" for 127.0.0.1 at 2020-11-26 23:42:28 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/order_products/order_product_list"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:43:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:43:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:43:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:43:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:43:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:43:19 +0400
Started GET "/en/order_products/order_products_list" for 127.0.0.1 at 2020-11-26 23:43:30 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (1.8ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 27143ms (Views: 0.3ms | ActiveRecord: 3.9ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:45:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:45:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:45:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:45:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:45:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:45:06 +0400
Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-26 23:45:18 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.7ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 6461ms (Views: 0.5ms | ActiveRecord: 4.4ms)


Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-26 23:45:54 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 3150ms (Views: 0.2ms | ActiveRecord: 1.9ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-26 23:46:39 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-26 23:46:39 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-26 23:46:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-26 23:46:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-26 23:46:40 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-26 23:46:40 +0400
Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-26 23:46:54 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.8ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 2570ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-26 23:47:44 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 2803ms (Views: 0.3ms | ActiveRecord: 2.0ms)


  [1m[36mOrderProduct Load (0.8ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products"[0m
Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-26 23:48:33 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.7ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:47
  [1m[36mCACHE OrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" IS NULL[0m
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 26675ms (Views: 0.2ms | ActiveRecord: 4.2ms)


Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-26 23:49:14 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 5]]
  â†³ app/services/orders/order_products_services.rb:34
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 2566ms (Views: 0.4ms | ActiveRecord: 19.1ms)


Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:52:05 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/orders/order_products_services.rb:18
Completed 200 OK in 37ms (Views: 0.6ms | ActiveRecord: 7.0ms)


Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-26 23:52:05 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/orders/order_products_services.rb:18
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.5ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-27 01:53:04 +0400
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-27 01:53:04 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-27 01:53:04 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-27 01:53:04 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-27 01:53:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-27 01:53:04 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-27 03:35:18 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-27 03:35:18 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-27 03:35:18 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-27 03:35:18 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-27 03:35:18 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-27 03:35:18 +0400
Started GET "/en/order_products/product_order_list" for 127.0.0.1 at 2020-11-27 03:35:33 +0400
Processing by OrderProductsController#product_order_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (2.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/orders/order_products_services.rb:18
Completed 200 OK in 48ms (Views: 0.4ms | ActiveRecord: 24.8ms)


Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-27 03:35:53 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (4.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 5]]
  â†³ app/services/orders/order_products_services.rb:34
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 9.7ms)


Started GET "/en/order_products/order_products_list/5" for 127.0.0.1 at 2020-11-27 03:36:40 +0400
Processing by OrderProductsController#order_products_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 5]]
  â†³ app/services/orders/order_products_services.rb:34
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:34
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 8.8ms)


Started GET "/en/order_products/%7B:id%7D" for 127.0.0.1 at 2020-11-27 03:36:57 +0400
Processing by OrderProductsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{:id}"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" WHERE "order_products"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:101
Completed 404 Not Found in 764ms (Views: 0.6ms | ActiveRecord: 0.3ms)


Started GET "/en/order_products/%7B:id%7D" for 127.0.0.1 at 2020-11-27 03:37:27 +0400
Processing by OrderProductsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{:id}"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" WHERE "order_products"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:102
Completed 404 Not Found in 7255ms (Views: 0.6ms | ActiveRecord: 4.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-27 03:37:54 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-27 03:37:54 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-27 03:37:54 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-27 03:37:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-27 03:37:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-27 03:37:55 +0400
Started GET "/en/order_products/2" for 127.0.0.1 at 2020-11-27 03:38:11 +0400
Processing by OrderProductsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (1.2ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" WHERE "order_products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:102
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
Completed 200 OK in 4908ms (Views: 0.2ms | ActiveRecord: 12.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-27 03:43:10 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-27 03:43:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-27 03:43:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-27 03:43:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-27 03:43:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-27 03:43:11 +0400
Started PUT "/en/order_products" for 127.0.0.1 at 2020-11-27 03:43:29 +0400
Processing by OrderProductsController#update as JSON
  Parameters: {"id"=>2, "count"=>"99", "locale"=>"en", "order_product"=>{"id"=>2, "count"=>"99"}}
Unpermitted parameters: :format, :locale, :order_product
  [1m[36mOrderProduct Load (1.4ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" WHERE "order_products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:101
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:95
  [1m[36mOrder Load (4.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:95
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:95
  [1m[36mOrderProduct Update (2.7ms)[0m  [1m[33mUPDATE "order_products" SET "count" = $1 WHERE "order_products"."id" = $2[0m  [["count", 99], ["id", 2]]
  â†³ app/services/orders/order_products_services.rb:95
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:95
Completed 200 OK in 5981ms (Views: 0.2ms | ActiveRecord: 39.2ms)


Started DELETE "/en/order_products?id=2" for 127.0.0.1 at 2020-11-27 03:43:51 +0400
Processing by OrderProductsController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderProduct Load (0.8ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" WHERE "order_products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:101
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:61
  [1m[36mOrderProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = $1[0m  [["id", 2]]
  â†³ app/services/orders/order_products_services.rb:61
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:61
Completed 200 OK in 2974ms (Views: 0.4ms | ActiveRecord: 5.4ms)


  [1m[36mOrderProduct Load (0.7ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products"[0m
Started GET "/funds" for 127.0.0.1 at 2020-11-27 14:43:36 +0400
  
ActionController::RoutingError (No route matches [GET] "/funds"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2020-11-27 14:43:37 +0400
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTaskStatuses (20201128115709)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (244.3ms)[0m  [1m[35mCREATE TABLE "task_statuses" ("id" bigserial primary key)[0m
  â†³ db/migrate/20201128115709_create_task_statuses.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201128115709"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mTaskStatus Load (1.1ms)[0m  [1m[34mSELECT "task_statuses".* FROM "task_statuses"[0m
  [1m[36mTaskStatus Load (0.8ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" ORDER BY "task_statuses"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTaskStatuses (20201128115709)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE "task_statuses"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201128115709"]]
  â†³ bin/rails:9
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTaskStatuses (20201128115709)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "task_statuses" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/migrate/20201128115709_create_task_statuses.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201128115709"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to FillTaskStatuses (20201128120440)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mTaskStatus Create (2.8ms)[0m  [1m[32mINSERT INTO "task_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Open\",\"no\":\"Ã…pen\"}"], ["id_name", "open"]]
  â†³ db/migrate/20201128120440_fill_task_statuses.rb:3
  [1m[36mTaskStatus Create (0.2ms)[0m  [1m[32mINSERT INTO "task_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"In progress\",\"no\":\"I prosess\"}"], ["id_name", "in_progress"]]
  â†³ db/migrate/20201128120440_fill_task_statuses.rb:4
  [1m[36mTaskStatus Create (0.2ms)[0m  [1m[32mINSERT INTO "task_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Done\",\"no\":\"Ferdig\"}"], ["id_name", "done"]]
  â†³ db/migrate/20201128120440_fill_task_statuses.rb:5
  [1m[36mTaskStatus Create (0.2ms)[0m  [1m[32mINSERT INTO "task_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"Canceled\",\"no\":\"avbrutt\"}"], ["id_name", "canceled"]]
  â†³ db/migrate/20201128120440_fill_task_statuses.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201128120440"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" ORDER BY "task_statuses"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTasks (20201128120551)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (23.0ms)[0m  [1m[35mCREATE TABLE "tasks" ("id" bigserial primary key, "title" character varying(50) NOT NULL, "description" character varying, "task_status_id" bigint NOT NULL, "product_id" bigint NOT NULL, "order_id" bigint NOT NULL, "user_account_id" bigint, "start_time" timestamp NOT NULL, "deadline" timestamp, "tracked_time" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_77b32e5fe2"
FOREIGN KEY ("task_status_id")
  REFERENCES "task_statuses" ("id")
, CONSTRAINT "fk_rails_2a2c748098"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
, CONSTRAINT "fk_rails_60fd1557f7"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_7649fc1981"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
)[0m
  â†³ db/migrate/20201128120551_create_tasks.rb:3
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_task_status_id" ON "tasks"  ("task_status_id")[0m
  â†³ db/migrate/20201128120551_create_tasks.rb:3
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_product_id" ON "tasks"  ("product_id")[0m
  â†³ db/migrate/20201128120551_create_tasks.rb:3
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_order_id" ON "tasks"  ("order_id")[0m
  â†³ db/migrate/20201128120551_create_tasks.rb:3
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_user_account_id" ON "tasks"  ("user_account_id")[0m
  â†³ db/migrate/20201128120551_create_tasks.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201128120551"]]
  â†³ bin/rails:9
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-28 17:10:26 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-28 17:10:26 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-28 17:10:26 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-28 17:10:26 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-28 17:10:27 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-28 17:10:27 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-28 17:19:33 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-28 17:19:33 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-28 17:19:33 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-28 17:19:33 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-28 17:19:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-28 17:19:33 +0400
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/tasks" for 127.0.0.1 at 2020-11-28 17:20:47 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"new task", "description"=>"again new task", "start_time"=>"05-12-2020", "deadline"=>"12-12-2020", "order_id"=>6, "product_id"=>15, "user_account_id"=>64, "locale"=>"en", "task"=>{"title"=>"new task", "description"=>"again new task", "product_id"=>15, "order_id"=>6, "user_account_id"=>64, "start_time"=>"05-12-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:83
  [1m[36mUserAccount Load (4.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:90
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:96
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:109
Completed 500 Internal Server Error in 112ms (ActiveRecord: 30.7ms)


  
NoMethodError (undefined method `order_status_id=' for #<Task:0x0000557d472cb590>
Did you mean?  order_id=):
  
app/services/tasks/services.rb:103:in `create_task_obj'
app/services/tasks/services.rb:46:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2020-11-28 17:21:12 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"new task", "description"=>"again new task", "start_time"=>"05-12-2020", "deadline"=>"12-12-2020", "order_id"=>6, "product_id"=>15, "user_account_id"=>64, "locale"=>"en", "task"=>{"title"=>"new task", "description"=>"again new task", "product_id"=>15, "order_id"=>6, "user_account_id"=>64, "start_time"=>"05-12-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:83
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:90
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:96
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:109
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:104
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mTask Create (1.2ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "product_id", "order_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "new task"], ["description", "again new task"], ["task_status_id", 1], ["product_id", 15], ["order_id", 6], ["user_account_id", 64], ["start_time", "2020-12-05 00:00:00"], ["deadline", "2020-12-12 00:00:00"], ["created_at", "2020-11-28 13:21:12.386248"], ["updated_at", "2020-11-28 13:21:12.386248"]]
  â†³ app/services/tasks/services.rb:104
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:104
Completed 500 Internal Server Error in 175ms (ActiveRecord: 20.8ms)


  
NoMethodError (undefined method `order_status' for #<Task:0x00007f835c1e3b60>
Did you mean?  order_id):
  
app/services/tasks/services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/tasks_controller.rb:11:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2020-11-28 17:21:38 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"new task", "description"=>"again new task", "start_time"=>"05-12-2020", "deadline"=>"12-12-2020", "order_id"=>6, "product_id"=>15, "user_account_id"=>64, "locale"=>"en", "task"=>{"title"=>"new task", "description"=>"again new task", "product_id"=>15, "order_id"=>6, "user_account_id"=>64, "start_time"=>"05-12-2020", "deadline"=>"12-12-2020"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:83
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:90
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:96
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:109
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:104
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:104
  [1m[36mTask Create (0.6ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "product_id", "order_id", "user_account_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["title", "new task"], ["description", "again new task"], ["task_status_id", 1], ["product_id", 15], ["order_id", 6], ["user_account_id", 64], ["start_time", "2020-12-05 00:00:00"], ["deadline", "2020-12-12 00:00:00"], ["created_at", "2020-11-28 13:21:38.289398"], ["updated_at", "2020-11-28 13:21:38.289398"]]
  â†³ app/services/tasks/services.rb:104
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:104
Completed 201 Created in 80ms (Views: 0.2ms | ActiveRecord: 20.0ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 00:03:03 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 00:03:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 00:03:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 00:03:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 00:03:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 00:03:03 +0400
Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2020-11-29 00:03:23 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 4.5ms)


  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/tasks/tasks_list/6" for 127.0.0.1 at 2020-11-29 00:04:06 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" IS NULL[0m
  â†³ app/services/tasks/services.rb:36
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 3.4ms)


Started GET "/en/tasks/tasks_list/6" for 127.0.0.1 at 2020-11-29 00:04:31 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/tasks/services.rb:36
  [1m[36mTaskStatus Load (0.9ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:36
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:36
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:36
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:36
Completed 200 OK in 69ms (Views: 0.6ms | ActiveRecord: 16.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:27:46 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:27:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:27:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:27:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:27:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:27:47 +0400
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTaskStatus Load (1.3ms)[0m  [1m[34mSELECT "task_statuses".* FROM "task_statuses"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:28:50 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:28:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:28:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:28:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:28:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:28:50 +0400
Started GET "/en/tasks/status_progress/2" for 127.0.0.1 at 2020-11-29 03:29:04 +0400
Processing by TasksController#status_progress as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:83
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:88
Completed 500 Internal Server Error in 25ms (ActiveRecord: 8.2ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/tasks/services.rb:59:in `progress'
app/controllers/tasks_controller.rb:28:in `status_progress'
Started GET "/en/tasks/status_progress/2" for 127.0.0.1 at 2020-11-29 03:29:34 +0400
Processing by TasksController#status_progress as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mTaskStatus Load (0.7ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:84
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:90
Completed 500 Internal Server Error in 26544ms (ActiveRecord: 15.5ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/tasks/services.rb:59:in `progress'
app/controllers/tasks_controller.rb:29:in `status_progress'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:30:28 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:30:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:30:28 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:30:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:30:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:30:28 +0400
Started GET "/en/tasks/status_progress/2?id_name=in_progress" for 127.0.0.1 at 2020-11-29 03:30:42 +0400
Processing by TasksController#status_progress as JSON
  Parameters: {"id_name"=>"in_progress", "locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mTaskStatus Load (0.8ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "in_progress"], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mCACHE TaskStatus Load (0.1ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "in_progress"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:84
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:90
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:59
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:59
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:59
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:59
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:59
  [1m[36mTask Update (0.5ms)[0m  [1m[33mUPDATE "tasks" SET "task_status_id" = $1, "updated_at" = $2 WHERE "tasks"."id" = $3[0m  [["task_status_id", 2], ["updated_at", "2020-11-28 23:31:06.772843"], ["id", 2]]
  â†³ app/services/tasks/services.rb:59
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:59
Completed 200 OK in 24108ms (Views: 0.8ms | ActiveRecord: 59.2ms)


  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:42:16 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:42:17 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:42:17 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:42:17 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:42:17 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:42:17 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:43:46 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:43:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:43:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:43:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:43:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:43:47 +0400
Started GET "/en/tasks/2" for 127.0.0.1 at 2020-11-29 03:43:56 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/tasks/2"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/tasks/2" for 127.0.0.1 at 2020-11-29 03:44:12 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:84
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:28
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:28
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:28
Completed 200 OK in 71ms (Views: 0.3ms | ActiveRecord: 18.6ms)


  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:46:38 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:46:38 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:46:38 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:46:38 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:46:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:46:39 +0400
Started GET "/en/tasks/2" for 127.0.0.1 at 2020-11-29 03:46:50 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:84
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:28
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:28
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:28
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 03:54:31 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 03:54:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 03:54:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 03:54:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 03:54:32 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 03:54:32 +0400
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:55:10 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :title, :tracked_time, :format, :locale, :task
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:95
Completed 500 Internal Server Error in 102ms (ActiveRecord: 6.6ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/tasks/services.rb:126:in `update_task_obj'
app/services/tasks/services.rb:60:in `update_task'
app/controllers/tasks_controller.rb:34:in `update'
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:56:08 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :title, :tracked_time, :format, :locale, :task
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:96
  [1m[36mTask Load (1.7ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):8
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:128
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:128
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:128
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:128
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:128
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:128
Completed 400 Bad Request in 23162ms (Views: 0.2ms | ActiveRecord: 29.4ms)


Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:56:52 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :title, :tracked_time, :format, :locale, :task
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:95
Completed 500 Internal Server Error in 18625ms (ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/tasks/services.rb:128:in `update_task_obj'
app/services/tasks/services.rb:60:in `update_task'
app/controllers/tasks_controller.rb:34:in `update'
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:57:47 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:95
Completed 500 Internal Server Error in 21127ms (ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/tasks/services.rb:128:in `update_task_obj'
app/services/tasks/services.rb:60:in `update_task'
app/controllers/tasks_controller.rb:34:in `update'
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:58:30 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:96
Completed 500 Internal Server Error in 8209ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/tasks/services.rb:129:in `update_task_obj'
app/services/tasks/services.rb:60:in `update_task'
app/controllers/tasks_controller.rb:34:in `update'
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:58:41 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:96
Completed 500 Internal Server Error in 4054ms (ActiveRecord: 0.4ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/tasks/services.rb:129:in `update_task_obj'
app/services/tasks/services.rb:60:in `update_task'
app/controllers/tasks_controller.rb:34:in `update'
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 03:58:55 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:97
Completed 500 Internal Server Error in 19377ms (ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/tasks/services.rb:130:in `update_task_obj'
app/services/tasks/services.rb:60:in `update_task'
app/controllers/tasks_controller.rb:34:in `update'
Started PUT "/en/tasks" for 127.0.0.1 at 2020-11-29 04:00:21 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>2, "title"=>"updated name", "tracked_time"=>"8", "locale"=>"en", "task"=>{"id"=>2, "title"=>"updated name", "tracked_time"=>"8"}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:86
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:127
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:127
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:127
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:127
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:127
  [1m[36mTask Update (0.5ms)[0m  [1m[33mUPDATE "tasks" SET "title" = $1, "tracked_time" = $2, "updated_at" = $3 WHERE "tasks"."id" = $4[0m  [["title", "updated name"], ["tracked_time", "8"], ["updated_at", "2020-11-29 00:00:26.607046"], ["id", 2]]
  â†³ app/services/tasks/services.rb:127
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:127
Completed 200 OK in 5284ms (Views: 0.2ms | ActiveRecord: 60.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-11-29 04:03:28 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-11-29 04:03:29 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-11-29 04:03:29 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-11-29 04:03:29 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-11-29 04:03:29 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-11-29 04:03:29 +0400
Started DELETE "/en/tasks?id=2" for 127.0.0.1 at 2020-11-29 04:03:40 +0400
Processing by TasksController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:81
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:66
  [1m[36mTask Destroy (0.4ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 2]]
  â†³ app/services/tasks/services.rb:66
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:66
Completed 200 OK in 5662ms (Views: 0.2ms | ActiveRecord: 20.2ms)


  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks"[0m
  [1m[36mProductVatType Load (41.0ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" ORDER BY "product_vat_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT "product_vat_types".* FROM "product_vat_types"[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddVatTypeIntoClients (20201205142003)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "clients" ADD "product_vat_types_id" bigint[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:3
  [1m[35m (5.3ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_product_vat_types_id" ON "clients"  ("product_vat_types_id")[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:3
  [1m[35m (5.0ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2ea73ee213"
FOREIGN KEY ("product_vat_types_id")
  REFERENCES "product_vat_types" ("id")
[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201205142003"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/" for 127.0.0.1 at 2020-12-05 18:39:17 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mProductVatType Load (0.8ms)[0m  [1m[34mSELECT "product_vat_types".* FROM "product_vat_types"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-05 18:39:54 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-05 18:39:54 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-05 18:39:54 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-05 18:39:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-05 18:39:56 +0400
Started GET "/en/clients/3" for 127.0.0.1 at 2020-12-05 18:40:42 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (1.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 3], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:137
Completed 404 Not Found in 94ms (Views: 0.2ms | ActiveRecord: 6.9ms)


Started GET "/en/clients/2" for 127.0.0.1 at 2020-12-05 18:40:46 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 2], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:137
  [1m[36mClientsGroup Load (3.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (2.1ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCurrency Load (2.4ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCountry Load (1.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCity Load (1.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 140ms (Views: 0.5ms | ActiveRecord: 39.8ms)


  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT "countries".* FROM "countries"[0m
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities"[0m
Started POST "/en/clients" for 127.0.0.1 at 2020-12-05 18:42:32 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"dcdcdcdc", "address"=>"dcdcdc", "product_vat_type_id"=>3, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd", "country_id"=>4, "city_id"=>9, "user_account_id"=>0, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"name"=>"dcdcdcdc", "address"=>"dcdcdc", "user_account_id"=>0, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:88
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:94
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:100
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:106
Completed 400 Bad Request in 65ms (Views: 0.2ms | ActiveRecord: 3.5ms)


Started POST "/en/clients" for 127.0.0.1 at 2020-12-05 18:42:47 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"dcdcdcdc", "address"=>"dcdcdc", "product_vat_type_id"=>3, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd", "country_id"=>4, "city_id"=>9, "user_account_id"=>3, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"name"=>"dcdcdcdc", "address"=>"dcdcdc", "user_account_id"=>3, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:88
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:94
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:100
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:106
Completed 400 Bad Request in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)


  [1m[36mUserAccount Load (2.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/clients" for 127.0.0.1 at 2020-12-05 18:43:06 +0400
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"dcdcdcdc", "address"=>"dcdcdc", "product_vat_type_id"=>3, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd", "country_id"=>4, "city_id"=>9, "user_account_id"=>64, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"name"=>"dcdcdcdc", "address"=>"dcdcdc", "user_account_id"=>64, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd"}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:88
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:94
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:100
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:106
  [1m[36mClientsGroup Load (0.4ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:112
  [1m[36mClientsType Load (0.3ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:118
Completed 500 Internal Server Error in 25ms (ActiveRecord: 3.4ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'product_vat_type_id' for Client.):
  
app/services/clients/service.rb:124:in `create_client_obj'
app/services/clients/service.rb:44:in `create_client'
app/controllers/clients_controller.rb:10:in `create'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddVatTypeIntoClients (20201205142003)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "clients" DROP COLUMN "product_vat_types_id"[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:7
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201205142003"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddVatTypeIntoClients (20201205142003)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (23.8ms)[0m  [1m[35mALTER TABLE "clients" ADD "product_vat_type_id" bigint[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:3
  [1m[35m (5.6ms)[0m  [1m[35mCREATE  INDEX  "index_clients_on_product_vat_type_id" ON "clients"  ("product_vat_type_id")[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:3
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_429068f528"
FOREIGN KEY ("product_vat_type_id")
  REFERENCES "product_vat_types" ("id")
[0m
  â†³ db/migrate/20201205142003_add_vat_type_into_clients.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201205142003"]]
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/clients" for 127.0.0.1 at 2020-12-05 18:45:05 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ClientsController#create as JSON
  Parameters: {"name"=>"dcdcdcdc", "address"=>"dcdcdc", "product_vat_type_id"=>3, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd", "country_id"=>4, "city_id"=>9, "user_account_id"=>64, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "locale"=>"en", "client"=>{"name"=>"dcdcdcdc", "address"=>"dcdcdc", "user_account_id"=>64, "country_id"=>4, "city_id"=>9, "clients_group_id"=>2, "clients_type_id"=>2, "currency_id"=>5, "phone"=>"dcdcdc", "web_address"=>"dcdcdcd", "kunde_nr"=>"dcdcdcdcd", "product_vat_type_id"=>3}}
Unpermitted parameters: :format, :locale, :client
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:88
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:94
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:100
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:106
  [1m[36mClientsGroup Load (0.3ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:112
  [1m[36mClientsType Load (0.4ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:118
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/clients/service.rb:126
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mCACHE ClientsGroup Load (0.0ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mCACHE ClientsType Load (0.0ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mCACHE Currency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:126
  [1m[36mClient Create (8.4ms)[0m  [1m[32mINSERT INTO "clients" ("name", "address", "user_account_id", "country_id", "city_id", "clients_group_id", "clients_type_id", "currency_id", "phone", "web_address", "kunde_nr", "created_at", "updated_at", "product_vat_type_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["name", "dcdcdcdc"], ["address", "dcdcdc"], ["user_account_id", 64], ["country_id", 4], ["city_id", 9], ["clients_group_id", 2], ["clients_type_id", 2], ["currency_id", 5], ["phone", "dcdcdc"], ["web_address", "dcdcdcd"], ["kunde_nr", "dcdcdcdcd"], ["created_at", "2020-12-05 14:45:05.851688"], ["updated_at", "2020-12-05 14:45:05.851688"], ["product_vat_type_id", 3]]
  â†³ app/services/clients/service.rb:126
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/clients/service.rb:126
Completed 201 Created in 126ms (Views: 0.2ms | ActiveRecord: 37.3ms)


  [1m[36mClient Load (1.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/clients/3" for 127.0.0.1 at 2020-12-05 18:45:27 +0400
Processing by ClientsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 3], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:137
  [1m[36mClientsGroup Load (0.2ms)[0m  [1m[34mSELECT  "clients_groups".* FROM "clients_groups" WHERE "clients_groups"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mClientsType Load (0.2ms)[0m  [1m[34mSELECT  "clients_types".* FROM "clients_types" WHERE "clients_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mProductVatType Load (0.1ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/clients/service.rb:30
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 1.4ms)


Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-05 23:37:32 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6024.30870397", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTask Load (3.8ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTaskStatus Load (36.9ms)[0m  [1m[34mSELECT "task_statuses".* FROM "task_statuses"[0m
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 5]]
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 4]]
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 2]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 1]]
  [1m[35m (10.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."order_status_id" = $2[0m  [["order_id", 6], ["order_status_id", 1]]
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."order_status_id" = $2[0m  [["order_id", 6], ["order_status_id", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  [1m[36mTaskStatus Load (0.8ms)[0m  [1m[34mSELECT "task_statuses".* FROM "task_statuses"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_is" = $1[0m  [["order_is", 6]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks"[0m
  [1m[36mClient Load (1.8ms)[0m  [1m[34mSELECT "clients".* FROM "clients"[0m
  [1m[36mClient Load (37.9ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."created_at" ASC[0m
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTask Load (37.3ms)[0m  [1m[34mSELECT SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT  SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.4ms)[0m  [1m[34mSELECT  SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 ORDER BY "tasks"."id" DESC LIMIT $2[0m  [["order_id", 6], ["LIMIT", 1]]
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time[0m  [["order_id", 6]]
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT  SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time[0m  [["order_id", 6]]
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT  SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY "tasks"."tracked_time"[0m  [["order_id", 6]]
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  SUM(tracked_time) FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY "tasks"."tracked_time" LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT SUM(tracked_time) as sum_tacked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY "tasks"."tracked_time"[0m  [["order_id", 6]]
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT  SUM(tracked_time) as sum_tacked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY "tasks"."tracked_time" LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.2ms)[0m  [1m[34mSELECT SUM(tasks.tracked_time) as sum_tacked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time[0m  [["order_id", 6]]
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT  SUM(tasks.tracked_time) as sum_tacked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time[0m  [["order_id", 6]]
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.tracked_time LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY "tasks"."id"[0m  [["order_id", 6]]
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (1.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (1.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT taks.order_id, tasks.tracked_amount FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  taks.order_id, tasks.tracked_amount FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT taks.order_id, tasks.tracked_amount FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (1.4ms)[0m  [1m[34mSELECT tasks.order_id, tasks.tracked_amount FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT  tasks.order_id, tasks.tracked_amount FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.4ms)[0m  [1m[34mSELECT tasks.order_id, tasks.tracked_amount FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (1.9ms)[0m  [1m[34mSELECT tasks.order_id, tasks.tracked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (1.6ms)[0m  [1m[34mSELECT  tasks.order_id, tasks.tracked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mTask Load (1.2ms)[0m  [1m[34mSELECT tasks.order_id, tasks.tracked_time FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT tasks.order_id FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[35m (2.4ms)[0m  [1m[34mSELECT SUM("tasks"."tracked_time") AS sum_tracked_time, tasks.order_id AS tasks_order_id FROM "tasks" WHERE "tasks"."order_id" = $1 GROUP BY tasks.order_id[0m  [["order_id", 6]]
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProductPrice Load (2.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderProduct Load (0.7ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1 LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mOrderProduct Load (0.7ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderProduct Load (0.8ms)[0m  [1m[34mSELECT  "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1 LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT  "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1 LIMIT $2[0m  [["order_id", 6], ["LIMIT", 11]]
  [1m[36mOrderProduct Load (0.9ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (39.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (5.9ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-06 04:34:05 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6024.30936366", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-06 13:01:19 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6013.31328003", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-06 17:50:17 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6038.31624669", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 18:00:58 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 18:00:58 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 18:00:58 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 18:00:58 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 18:00:59 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 18:00:59 +0400
Started GET "/en/orders/overview6" for 127.0.0.1 at 2020-12-06 18:01:10 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"overview6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:156
Completed 404 Not Found in 99ms (Views: 0.2ms | ActiveRecord: 3.5ms)


Started GET "/en/orders/overview6" for 127.0.0.1 at 2020-12-06 18:01:48 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"overview6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:157
Completed 404 Not Found in 19ms (Views: 0.2ms | ActiveRecord: 4.0ms)


Started GET "/en/orders/overview6" for 127.0.0.1 at 2020-12-06 18:01:50 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"overview6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:157
Completed 404 Not Found in 6ms (Views: 2.3ms | ActiveRecord: 0.3ms)


Started GET "/en/orders/overview6" for 127.0.0.1 at 2020-12-06 18:01:51 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"overview6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:157
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 18:01:53 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 18:01:53 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 18:01:53 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 18:01:53 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 18:01:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 18:01:54 +0400
Started GET "/en/orders/overview6" for 127.0.0.1 at 2020-12-06 18:02:05 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"overview6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:157
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 18:03:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 18:03:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 18:03:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 18:03:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 18:03:02 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 18:03:02 +0400
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-06 18:03:13 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:106
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:107
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:108
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:109
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:100
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:84
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:85
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:87
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:88
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:76
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:77
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT "user_accounts"."username" FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ app/services/orders/orders_services.rb:60
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:106
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:107
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:108
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:109
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:100
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:84
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:85
  [1m[36mCACHE ProductPrice Load (0.1ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:87
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:88
Completed 500 Internal Server Error in 70115ms (ActiveRecord: 46.5ms)


  
TypeError (nil can't be coerced into BigDecimal):
  
app/services/orders/orders_services.rb:88:in `+'
app/services/orders/orders_services.rb:88:in `block in order_price'
app/services/orders/orders_services.rb:87:in `order_price'
app/services/orders/orders_services.rb:64:in `overview'
app/controllers/orders_controller.rb:35:in `overview'
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-06 18:04:26 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:84
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:85
  [1m[36mProductPrice Load (0.7ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:87
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:88
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:106
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:107
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:108
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:109
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:100
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:84
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:85
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:87
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:88
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:76
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:77
Completed 200 OK in 14229ms (Views: 0.2ms | ActiveRecord: 30.9ms)


Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-06 18:06:38 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:113
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:114
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:115
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[36mTask Load (1.2ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:107
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:91
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:92
  [1m[36mProductPrice Load (0.4ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:94
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:95
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:83
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:84
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT "user_accounts"."username" FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 3607ms (Views: 9.8ms | ActiveRecord: 30.5ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 18:12:35 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 18:12:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 18:12:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 18:12:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 18:12:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 18:12:35 +0400
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-06 18:12:45 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:113
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:114
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:115
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:107
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:91
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:92
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:94
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:95
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:83
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:84
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 78ms (Views: 11.1ms | ActiveRecord: 22.5ms)


  [1m[36mOrderStatus Load (4.0ms)[0m  [1m[34mSELECT "order_statuses".* FROM "order_statuses"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 18:42:50 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 18:42:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 18:42:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 18:42:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 18:42:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 18:42:50 +0400
Started GET "/en/orders/orders_list?type=all" for 127.0.0.1 at 2020-12-06 18:43:10 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"all", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (2.6ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 129ms (Views: 0.6ms | ActiveRecord: 27.1ms)


Started GET "/en/orders/orders_list?type=open_order" for 127.0.0.1 at 2020-12-06 18:43:35 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_order", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<Orders::OrdersServices:0x00007f1dfc4a0288>):
  
app/services/orders/orders_services.rb:65:in `order_list'
app/controllers/orders_controller.rb:22:in `orders_list'
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:43:50 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (35.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.2ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 59ms (Views: 0.5ms | ActiveRecord: 37.2ms)


  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:45:03 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT id, title as name, start_time, deadline as end_time FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 500 Internal Server Error in 47ms (ActiveRecord: 4.6ms)


  
ActiveModel::MissingAttributeError (missing attribute: client_id):
  
app/services/orders/orders_services.rb:38:in `orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:23:in `orders_list'
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:45:14 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT id, title as name, start_time, deadline as end_time FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)


  
ActiveModel::MissingAttributeError (missing attribute: client_id):
  
app/services/orders/orders_services.rb:38:in `orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:23:in `orders_list'
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:45:34 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT id, title as name, start_time, deadline as end_time, client_id FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 500 Internal Server Error in 41ms (ActiveRecord: 7.5ms)


  
ActiveModel::MissingAttributeError (missing attribute: order_status_id):
  
app/services/orders/orders_services.rb:38:in `orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:23:in `orders_list'
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:45:57 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (34.9ms)[0m  [1m[34mSELECT id, title as name, start_time, deadline as end_time, client_id, order_status_id, order_type_id: FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 500 Internal Server Error in 43ms (ActiveRecord: 35.9ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near ":"
LINE 1: ...nd_time, client_id, order_status_id, order_type_id: FROM "or...
                                                             ^
: SELECT id, title as name, start_time, deadline as end_time, client_id, order_status_id, order_type_id: FROM "orders" WHERE "orders"."order_status_id" = $1):
  
app/services/orders/orders_services.rb:38:in `orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:23:in `orders_list'
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:46:05 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT id, title as name, start_time, deadline as end_time, client_id, order_status_id, order_type_id FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.2ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 500 Internal Server Error in 61ms (ActiveRecord: 13.3ms)


  
ActiveModel::MissingAttributeError (missing attribute: user_account_id):
  
app/services/orders/orders_services.rb:38:in `orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:23:in `orders_list'
Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:46:40 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT id, title as name, start_time,
                                deadline as end_time, client_id,
                                order_status_id, order_type_id, user_account_id FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.2ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 118ms (Views: 0.5ms | ActiveRecord: 17.6ms)


Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:48:13 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT id, title as name, start_time,
                                deadline as end_time, client_id,
                                order_status_id, order_type_id, user_account_id FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.2ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 89ms (Views: 0.5ms | ActiveRecord: 17.7ms)


Started GET "/en/orders/orders_list?type=open_orders" for 127.0.0.1 at 2020-12-06 18:48:37 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"open_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT id, title as name, start_time,
                                deadline as end_time, client_id,
                                order_status_id, order_type_id, user_account_id FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 109ms (Views: 0.6ms | ActiveRecord: 18.4ms)


  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/orders/orders_list?type=all" for 127.0.0.1 at 2020-12-06 18:49:16 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"all", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.1ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.1ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 1.1ms)


Started GET "/en/orders/orders_list?type=my_orders" for 127.0.0.1 at 2020-12-06 18:49:59 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"my_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<Orders::OrdersServices:0x00007f1dec274f28>):
  
app/services/orders/orders_services.rb:67:in `order_list'
app/controllers/orders_controller.rb:22:in `orders_list'
Started GET "/en/orders/orders_list?type=my_orders" for 127.0.0.1 at 2020-12-06 18:50:42 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"my_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 55460ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<Orders::OrdersServices:0x00007f1dfc2d7578>):
  
app/services/orders/orders_services.rb:69:in `order_list'
app/controllers/orders_controller.rb:22:in `orders_list'
Started GET "/en/orders/orders_list?type=my_orders" for 127.0.0.1 at 2020-12-06 18:51:55 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"my_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 38217ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<Orders::OrdersServices:0x000055f22859add8>):
  
app/services/orders/orders_services.rb:69:in `order_list'
app/controllers/orders_controller.rb:23:in `orders_list'
  [1m[36mOrderStatus Load (1.2ms)[0m  [1m[34mSELECT "order_statuses".* FROM "order_statuses"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Update (44.0ms)[0m  [1m[33mUPDATE "orders" SET "user_account_id" = $1 WHERE "orders"."id" = $2[0m  [["user_account_id", nil], ["id", 6]]
Started GET "/en/orders/orders_list?type=my_orders" for 127.0.0.1 at 2020-12-06 19:02:08 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"my_orders", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 135ms (Views: 1.0ms | ActiveRecord: 24.1ms)


Started GET "/en/orders/orders_list?type=all" for 127.0.0.1 at 2020-12-06 19:02:12 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"type"=>"all", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.2ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.2ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 1.3ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 19:06:23 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 19:06:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 19:06:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 19:06:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 19:06:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 19:06:24 +0400
Started GET "/en/orders/open_orders_list?type=sdc" for 127.0.0.1 at 2020-12-06 19:06:40 +0400
Processing by OrdersController#open_orders_list as JSON
  Parameters: {"type"=>"sdc", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT id, title as name, start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:54
Completed 500 Internal Server Error in 11ms (ActiveRecord: 3.9ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column "start" does not exist
LINE 1: SELECT id, title as name, start, deadline as end FROM "order...
                                  ^
: SELECT id, title as name, start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1):
  
app/services/orders/orders_services.rb:54:in `open_orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:29:in `open_orders_list'
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT id, title as name, start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  id, title as name, start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1 LIMIT $2[0m  [["order_status_id", 1], ["LIMIT", 11]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  id, title as name, start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1 ORDER BY "orders"."id" DESC LIMIT $2[0m  [["order_status_id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (2.4ms)[0m  [1m[34mSELECT  id, title as name, start_time as start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1 ORDER BY "orders"."id" DESC LIMIT $2[0m  [["order_status_id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT id, title as name, start_time as start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 19:08:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 19:08:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 19:08:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 19:08:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 19:08:45 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 19:08:45 +0400
Started GET "/en/orders/orders_list" for 127.0.0.1 at 2020-12-06 19:09:04 +0400
Processing by OrdersController#orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:38
Completed 200 OK in 94ms (Views: 0.8ms | ActiveRecord: 20.3ms)


Started GET "/en/orders/open_orders_list" for 127.0.0.1 at 2020-12-06 19:09:14 +0400
Processing by OrdersController#open_orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT id, title as name, start_time as start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:54
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)


  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/orders/my_orders_list/%7Buser_account_id%7D?user_account_id=64" for 127.0.0.1 at 2020-12-06 19:09:37 +0400
Processing by OrdersController#my_orders_list as JSON
  Parameters: {"user_account_id"=>"{user_account_id}", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" IS NULL[0m
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started GET "/en/orders/my_orders_list/%7Buser_account_id%7D?user_account_id=64" for 127.0.0.1 at 2020-12-06 19:09:55 +0400
Processing by OrdersController#my_orders_list as JSON
  Parameters: {"user_account_id"=>"{user_account_id}", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" IS NULL[0m
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderStatus Load (0.2ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
Completed 200 OK in 13513ms (Views: 0.2ms | ActiveRecord: 21.3ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/orders/my_orders_list/%7Buser_account_id%7D?user_account_id=64" for 127.0.0.1 at 2020-12-06 19:11:11 +0400
Processing by OrdersController#my_orders_list as JSON
  Parameters: {"user_account_id"=>"{user_account_id}", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" IS NULL[0m
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderStatus Load (0.8ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderType Load (0.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
Completed 200 OK in 27683ms (Views: 0.2ms | ActiveRecord: 3.0ms)


Started GET "/en/orders/my_orders_list/%7Buser_account_id%7D?user_account_id=64" for 127.0.0.1 at 2020-12-06 19:11:41 +0400
Processing by OrdersController#my_orders_list as JSON
  Parameters: {"user_account_id"=>"{user_account_id}", "locale"=>"en"}
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" IS NULL[0m
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderStatus Load (0.2ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
Completed 200 OK in 109812ms (Views: 0.2ms | ActiveRecord: 17.6ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 19:13:33 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 19:13:33 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 19:13:33 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 19:13:33 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 19:13:34 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 19:13:34 +0400
Started GET "/en/orders/my_orders_list/64" for 127.0.0.1 at 2020-12-06 19:13:45 +0400
Processing by OrdersController#my_orders_list as JSON
  Parameters: {"locale"=>"en", "user_account_id"=>"64"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (2.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" IS NULL[0m
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mClient Load (1.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderStatus Load (0.9ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderType Load (1.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
Completed 200 OK in 20789ms (Views: 0.8ms | ActiveRecord: 7.1ms)


Started GET "/en/orders/my_orders_list/64" for 127.0.0.1 at 2020-12-06 19:15:17 +0400
Processing by OrdersController#my_orders_list as JSON
  Parameters: {"locale"=>"en", "user_account_id"=>"64"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" = $1[0m  [["user_account_id", 64]]
  â†³ app/services/orders/orders_services.rb:80
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_account_id" = $1[0m  [["user_account_id", 64]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mClient Load (0.4ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderStatus Load (0.4ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mOrderType Load (0.3ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderStatus Load (0.0ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:46
Completed 200 OK in 13580ms (Views: 0.5ms | ActiveRecord: 35.6ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-06 19:30:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-06 19:30:23 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-06 19:30:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-06 19:30:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-06 19:30:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-06 19:30:24 +0400
Started POST "/en/orders/claim_order" for 127.0.0.1 at 2020-12-06 19:30:41 +0400
Processing by OrdersController#claim_order as JSON
  Parameters: {"order_id"=>6, "user_account_id"=>64, "locale"=>"en", "order"=>{"user_account_id"=>64}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:88
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mOrderType Load (0.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[36mOrder Update (3.3ms)[0m  [1m[33mUPDATE "orders" SET "user_account_id" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["user_account_id", 64], ["updated_at", "2020-12-06 15:30:42.070002"], ["id", 6]]
  â†³ app/services/orders/orders_services.rb:89
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:89
Completed 200 OK in 65ms (Views: 0.2ms | ActiveRecord: 24.8ms)


  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-06 22:12:30 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6042.31853882", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[36mOrder Load (1.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders"."start_time" FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders"."start_time" FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (6.9ms)[0m  [1m[34mSELECT  dd/MM/yyyy, hh:mm:ss start_time FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders"."start_time" FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  FORMAT (start_time, 'dd/MM/yyyy, hh:mm:ss ') FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  CAST (start_time, 'dd/MM/yyyy, hh:mm:ss ') FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  CAST(start_time, 'dd/MM/yyyy, hh:mm:ss ') FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  CAST(start_time, dd/MM/yyyy, hh:mm:ss) FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (9.4ms)[0m  [1m[34mSELECT  to_char(start_time, 'dd/MM/yyyy, hh:mm:ss ') FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  to_char(orders.start_time, 'dd/MM/yyyy, hh:mm:ss ') FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  (orders.start_time, 'dd/MM/yyyy, hh:mm:ss ') FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  (orders.start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.4ms)[0m  [1m[34mSELECT  FORMAT(orders.start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT  TO_CHAR(orders.start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (36.3ms)[0m  [1m[34mSELECT  TO_CHAR(orders.start_date, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  TO_CHAR(orders.start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  TO_CHAR(start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy, hh:mm:ss') as bb FROM "orders"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy, hh:mm:ss') as start FROM "orders"[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start FROM "orders"[0m
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(deadline, 'dd/MM/yyyy hh:mm:ss') FROM "orders"[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(deadline, 'dd/MM/yyyy hh:mm:ss') as end FROM "orders"[0m
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(deadline, 'ddTO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as end') as end FROM "orders"[0m
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(deadline, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as end') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(deadline, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as end) as end FROM "orders"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start FROM "orders"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start FROM "orders"[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as end FROM "orders"[0m
  [1m[36mOrder Load (1.7ms)[0m  [1m[34mSELECT TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, TO_CHAR(deadline, 'dd/MM/yyyy hh:mm:ss') as end FROM "orders"[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (2.0ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd/MM/yyyy hh:mm:ss') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd-MM-yyyy hh:mm:ss') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd-MM-yyyy hh:mm:ss') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  id, TO_CHAR(start_time, 'dd-MM-yyyy hh:mm') as start, deadline as end FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, TO_CHAR(start_time, 'dd-MM-yyyy hh:mm') as start, deadline as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, TO_CHAR(start_time, 'dd-MM-yyyy hh:mm') as start, deadline as end FROM "orders"[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT id, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders"[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders"[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders"[0m
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-07 02:07:09 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6015.31927017", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started POST "/en/orders" for 127.0.0.1 at 2020-12-07 02:10:53 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"bukaa", "description"=>"asasxasxasx", "start_time"=>"05-12-2020", "deadline"=>"2020-12-09", "client_id"=>1, "order_type_id"=>2, "locale"=>"en", "order"=>{"title"=>"bukaa", "description"=>"asasxasxasx", "client_id"=>1, "order_type_id"=>2, "start_time"=>"05-12-2020", "deadline"=>"2020-12-09"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 1], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:160
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[36mOrderStatus Load (1.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:186
Completed 400 Bad Request in 68ms (Views: 0.3ms | ActiveRecord: 21.9ms)


Started POST "/en/orders" for 127.0.0.1 at 2020-12-07 02:11:19 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"bukaa", "description"=>"asasxasxasx", "start_time"=>"05-12-2020", "deadline"=>"2020-12-09", "client_id"=>1, "order_type_id"=>2, "locale"=>"en", "order"=>{"title"=>"bukaa", "description"=>"asasxasxasx", "client_id"=>1, "order_type_id"=>2, "start_time"=>"05-12-2020", "deadline"=>"2020-12-09"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 1], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:160
  [1m[36mOrderType Load (0.4ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:173
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:186
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mOrder Create (3.4ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["title", "bukaa"], ["description", "asasxasxasx"], ["client_id", 1], ["order_type_id", 2], ["order_status_id", 1], ["start_time", "2020-12-05 00:00:00"], ["deadline", "2020-12-09"], ["created_at", "2020-12-06 22:11:19.344240"], ["updated_at", "2020-12-06 22:11:19.344240"]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:181
Completed 201 Created in 94ms (Views: 0.4ms | ActiveRecord: 27.7ms)


  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1 AND "orders"."user_account_id" IS NULL[0m  [["order_status_id", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders" WHERE "orders"."order_status_id" = $1 AND "orders"."user_account_id" IS NULL[0m  [["order_status_id", 1]]
Started POST "/en/orders" for 127.0.0.1 at 2020-12-07 02:21:00 +0400
Error occurred while parsing request parameters.
Contents:

{
  "title": "bukaa",
  "description": "asasxasxasx",
  "start_time": "05-12-2020",
  "deadline": "2020-12-09",
  "client_id": 1,
  "order_type_id": 2,
  "user_account_id": nil
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "title": "bukaa",
  "description": "asasxasxasx",
  "start_time": "05-12-2020",
  "deadline": "2020-12-09",
  "client_id": 1,
  "order_type_id": 2,
  "user_account_id": nil
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/orders" for 127.0.0.1 at 2020-12-07 02:21:15 +0400
Error occurred while parsing request parameters.
Contents:

{
  "title": "bukaaaaa",
  "description": "asasxasxasx",
  "start_time": "05-12-2020",
  "deadline": "2020-12-09",
  "client_id": 1,
  "order_type_id": 2,
  "user_account_id": nil
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "title": "bukaaaaa",
  "description": "asasxasxasx",
  "start_time": "05-12-2020",
  "deadline": "2020-12-09",
  "client_id": 1,
  "order_type_id": 2,
  "user_account_id": nil
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/orders" for 127.0.0.1 at 2020-12-07 02:21:29 +0400
Error occurred while parsing request parameters.
Contents:

{
  "title": "bukaaaaa",
  "description": "asasxasxasx",
  "start_time": "05-12-2020",
  "deadline": "2020-12-09",
  "client_id": 1,
  "order_type_id": 2,
  "user_account_id": ''
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "title": "bukaaaaa",
  "description": "asasxasxasx",
  "start_time": "05-12-2020",
  "deadline": "2020-12-09",
  "client_id": 1,
  "order_type_id": 2,
  "user_account_id": ''
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/orders" for 127.0.0.1 at 2020-12-07 02:21:47 +0400
Processing by OrdersController#create as JSON
  Parameters: {"title"=>"bukaaaaa", "description"=>"asasxasxasx", "start_time"=>"05-12-2020", "deadline"=>"2020-12-09", "client_id"=>1, "order_type_id"=>2, "locale"=>"en", "order"=>{"title"=>"bukaaaaa", "description"=>"asasxasxasx", "client_id"=>1, "order_type_id"=>2, "start_time"=>"05-12-2020", "deadline"=>"2020-12-09"}}
Unpermitted parameters: :format, :locale, :order
  [1m[36mClient Load (1.3ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 1], ["active", true], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:160
  [1m[36mOrderType Load (0.9ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:173
  [1m[36mOrderStatus Load (0.5ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:186
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mCACHE OrderType Load (0.0ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[36mOrder Create (1.2ms)[0m  [1m[32mINSERT INTO "orders" ("title", "description", "client_id", "order_type_id", "order_status_id", "start_time", "deadline", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["title", "bukaaaaa"], ["description", "asasxasxasx"], ["client_id", 1], ["order_type_id", 2], ["order_status_id", 1], ["start_time", "2020-12-05 00:00:00"], ["deadline", "2020-12-09"], ["created_at", "2020-12-06 22:21:47.512408"], ["updated_at", "2020-12-06 22:21:47.512408"]]
  â†³ app/services/orders/orders_services.rb:181
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/orders_services.rb:181
Completed 201 Created in 130ms (Views: 0.6ms | ActiveRecord: 35.5ms)


  [1m[36mOrder Load (34.5ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, deadline as end FROM "orders"[0m
  [1m[36mOrder Load (3.7ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + 15, 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (2.3ms)[0m  [1m[34mSELECT  id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + 15, 'yyyy-mm-dd hh:mm') as end FROM "orders" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + 15, 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (39.4ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (15 * interval '1 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.4ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (15 * interval '2 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (20 * interval '2 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (20 * interval '2 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (20 * interval '1 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (15 * interval '5 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (15 * interval '10 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '5 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (5 * interval '5 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '5 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '15 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders"[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders" WHERE "orders"."order_status_id" = $1 AND "orders"."user_account_id" IS NULL[0m  [["order_status_id", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders" WHERE "orders"."order_status_id" = $1 AND "orders"."user_account_id" IS NULL[0m  [["order_status_id", 1]]
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-07 11:38:46 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6043.32281335", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started POST "/pusher/auth" for 127.0.0.1 at 2020-12-07 15:39:51 +0400
Processing by AuthController#login as JSON
  Parameters: {"socket_id"=>"6063.35514", "channel_name"=>"private-KRYPYGWETRCJTOX", "locale"=>"pusher"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("pusher" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started GET "/" for 127.0.0.1 at 2020-12-12 21:01:45 +0400
  [1m[35m (70.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 21:01:50 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 21:01:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 21:01:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 21:01:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 21:01:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 21:01:51 +0400
  [1m[35m (4.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 7]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 7]]
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
Started GET "/en/orders/overview/3" for 127.0.0.1 at 2020-12-12 21:11:25 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:145
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:146
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:147
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:148
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:139
Completed 500 Internal Server Error in 5465ms (ActiveRecord: 10.7ms)


  
TypeError (nil can't be coerced into Integer):
  
app/services/orders/orders_services.rb:139:in `+'
app/services/orders/orders_services.rb:139:in `block in worked_hours'
app/services/orders/orders_services.rb:139:in `worked_hours'
app/services/orders/orders_services.rb:102:in `overview_json'
app/services/orders/orders_services.rb:58:in `overview_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:47:in `overview'
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
Started GET "/en/orders/overview/3" for 127.0.0.1 at 2020-12-12 21:15:46 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 3], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:148
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 3], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:149
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 3], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:150
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  â†³ app/services/orders/orders_services.rb:151
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  â†³ app/services/orders/orders_services.rb:139
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:123
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:124
  [1m[36mProductPrice Load (2.7ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:126
  [1m[36mSupplierProduct Load (5.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:127
  [1m[35m (3.4ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 3]]
  â†³ app/services/orders/orders_services.rb:115
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[36mUserAccount Load (2.7ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" = $1[0m  [["id", 64]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 3685ms (Views: 10.9ms | ActiveRecord: 52.9ms)


Started GET "/en/orders/overview/3" for 127.0.0.1 at 2020-12-12 21:17:04 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 3], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:153
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 3], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:154
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 3], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:155
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:128
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[36mProductPrice Load (0.3ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:131
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:132
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 3]]
  â†³ app/services/orders/orders_services.rb:120
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 3]]
  â†³ app/services/orders/orders_services.rb:121
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" = $1[0m  [["id", 64]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 2601ms (Views: 9.5ms | ActiveRecord: 31.2ms)


Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-12 21:21:59 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:115
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:152
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:153
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:154
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:155
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:143
Completed 500 Internal Server Error in 35ms (ActiveRecord: 7.3ms)


  
TypeError (nil can't be coerced into Integer):
  
app/services/orders/orders_services.rb:145:in `+'
app/services/orders/orders_services.rb:145:in `block in worked_hours'
app/services/orders/orders_services.rb:143:in `worked_hours'
app/services/orders/orders_services.rb:102:in `overview_json'
app/services/orders/orders_services.rb:58:in `overview_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:47:in `overview'
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-12 21:22:23 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:153
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:154
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:155
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:153
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:154
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:155
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:144
Completed 500 Internal Server Error in 41928ms (ActiveRecord: 20.5ms)


  
TypeError (nil can't be coerced into Integer):
  
app/services/orders/orders_services.rb:146:in `+'
app/services/orders/orders_services.rb:146:in `block in worked_hours'
app/services/orders/orders_services.rb:144:in `worked_hours'
app/services/orders/orders_services.rb:103:in `overview_json'
app/services/orders/orders_services.rb:58:in `overview_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:47:in `overview'
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-12 21:23:08 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:154
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:155
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:144
Completed 500 Internal Server Error in 24218ms (ActiveRecord: 19.7ms)


  
TypeError (nil can't be coerced into Integer):
  
app/services/orders/orders_services.rb:147:in `+'
app/services/orders/orders_services.rb:147:in `block in worked_hours'
app/services/orders/orders_services.rb:144:in `worked_hours'
app/services/orders/orders_services.rb:103:in `overview_json'
app/services/orders/orders_services.rb:58:in `overview_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:47:in `overview'
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-12 21:23:43 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:116
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:154
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:155
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:128
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2)[0m  [["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:131
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:132
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:120
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:121
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 3755ms (Views: 11.0ms | ActiveRecord: 43.9ms)


  [1m[36mOrderStatus Load (4.4ms)[0m  [1m[34mSELECT "order_statuses".* FROM "order_statuses"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddNewStatusToOrders (20201212172906)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mOrderStatus Create (5.3ms)[0m  [1m[32mINSERT INTO "order_statuses" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"claimed\",\"no\":\"kreve\"}"], ["id_name", "claimed"]]
  â†³ db/migrate/20201212172906_add_new_status_to_orders.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201212172906"]]
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderStatus Load (0.6ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "claimed"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:27:22 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:27:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:27:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:27:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:27:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:27:25 +0400
  [1m[36mProduct Load (3.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mProduct Load (36.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:29:39 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Unpermitted parameters: :_json, :format, :locale, :order_product
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:70
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:65
Completed 400 Bad Request in 757ms (Views: 0.3ms | ActiveRecord: 9.2ms)


Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:30:03 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Unpermitted parameters: :_json, :format, :locale, :order_product
Unpermitted parameters: :_json, :format, :locale, :order_product
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:70
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:65
Completed 400 Bad Request in 42617ms (Views: 0.2ms | ActiveRecord: 6.1ms)


Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:30:59 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Unpermitted parameters: :_json, :format, :locale, :order_product
Unpermitted parameters: :_json, :format, :locale, :order_product
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:70
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:65
Completed 400 Bad Request in 11954ms (Views: 1.0ms | ActiveRecord: 7.6ms)


Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:31:21 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Unpermitted parameters: :_json, :format, :locale, :order_product
Unpermitted parameters: :_json, :format, :locale, :order_product
Unpermitted parameters: :_json, :format, :locale, :order_product
Unpermitted parameters: :_json, :format, :locale, :order_product
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:70
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:65
Completed 400 Bad Request in 35123ms (Views: 0.4ms | ActiveRecord: 2.0ms)


Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:32:14 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Completed 500 Internal Server Error in 6032ms (ActiveRecord: 1.6ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/orders/order_products_services.rb:71:in `validate_order'
app/services/orders/order_products_services.rb:61:in `validate_data!'
app/services/orders/order_products_services.rb:31:in `create_order_product'
app/controllers/order_products_controller.rb:11:in `create'
Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:33:57 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Completed 500 Internal Server Error in 25264ms (ActiveRecord: 1.8ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/orders/order_products_services.rb:74:in `validate_order'
app/services/orders/order_products_services.rb:64:in `validate_data!'
app/services/orders/order_products_services.rb:32:in `block in create_order_product'
app/services/orders/order_products_services.rb:31:in `each'
app/services/orders/order_products_services.rb:31:in `create_order_product'
app/controllers/order_products_controller.rb:11:in `create'
Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:34:44 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Completed 500 Internal Server Error in 20626ms (ActiveRecord: 11.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/orders/order_products_services.rb:75:in `validate_order'
app/services/orders/order_products_services.rb:65:in `validate_data!'
app/services/orders/order_products_services.rb:33:in `block in create_order_product'
app/services/orders/order_products_services.rb:31:in `each'
app/services/orders/order_products_services.rb:31:in `create_order_product'
app/controllers/order_products_controller.rb:11:in `create'
Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:36:00 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
Completed 500 Internal Server Error in 10370ms (ActiveRecord: 2.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/orders/order_products_services.rb:75:in `validate_order'
app/services/orders/order_products_services.rb:65:in `validate_data!'
app/services/orders/order_products_services.rb:33:in `block in create_order_product'
app/services/orders/order_products_services.rb:31:in `each'
app/services/orders/order_products_services.rb:31:in `create_order_product'
app/controllers/order_products_controller.rb:11:in `create'
Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:36:24 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):26
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mOrderProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 13], ["order_id", 6], ["count", 2]]
  â†³ (pry):26
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):26
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mOrderProduct Create (1.7ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 13], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:85
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mOrderProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 14], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:85
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[36mOrderProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:85
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:85
Completed 201 Created in 34687ms (Views: 0.8ms | ActiveRecord: 48.7ms)


Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:37:54 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>2}, {"order_id"=>6, "product_id"=>15, "count"=>2}], "locale"=>"en", "order_product"=>{}}
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 13], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 14], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
Completed 201 Created in 2492ms (Views: 0.4ms | ActiveRecord: 29.3ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:39:08 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:39:08 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:39:08 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:39:08 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:39:12 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:39:12 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:39:49 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:39:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:39:49 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:39:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:39:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:39:51 +0400
Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:40:36 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>3}, {"order_id"=>6, "product_id"=>15, "count"=>5}], "locale"=>"en", "order_product"=>{}}
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 13], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 14], ["order_id", 6], ["count", 3]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 6], ["count", 5]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Load (0.5ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
Completed 201 Created in 3553ms (Views: 0.5ms | ActiveRecord: 11.3ms)


Started POST "/en/order_products" for 127.0.0.1 at 2020-12-12 22:41:02 +0400
Processing by OrderProductsController#create as JSON
  Parameters: {"_json"=>[{"order_id"=>6, "product_id"=>13, "count"=>2}, {"order_id"=>6, "product_id"=>14, "count"=>3}, {"order_id"=>6, "product_id"=>15, "count"=>5}], "locale"=>"en", "order_product"=>{}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 13], ["order_id", 6], ["count", 2]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 14], ["order_id", 6], ["count", 3]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "order_products" ("product_id", "order_id", "count") VALUES ($1, $2, $3) RETURNING "id"[0m  [["product_id", 15], ["order_id", 6], ["count", 5]]
  â†³ app/services/orders/order_products_services.rb:82
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/order_products_services.rb:82
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/order_products_services.rb:14
Completed 201 Created in 57ms (Views: 0.8ms | ActiveRecord: 17.0ms)


  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:53:30 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:53:30 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:53:30 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:53:30 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:53:31 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:53:31 +0400
Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 22:53:39 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:215
Completed 404 Not Found in 13ms (Views: 0.3ms | ActiveRecord: 3.9ms)


Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 22:54:12 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 10ms (Views: 0.3ms | ActiveRecord: 1.8ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:54:16 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:54:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:54:16 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:54:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:54:18 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:54:18 +0400
Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 22:54:26 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:55:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:55:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:55:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:55:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:55:22 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:55:22 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:55:34 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:55:34 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:55:34 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:55:34 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:55:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:55:35 +0400
Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 22:55:43 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 22:57:17 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 9642ms (Views: 0.5ms | ActiveRecord: 4.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 22:58:30 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 6829ms (Views: 0.5ms | ActiveRecord: 0.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:59:20 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:59:20 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:59:20 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:59:20 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:59:23 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:59:23 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 22:59:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 22:59:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 22:59:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 22:59:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 22:59:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 22:59:26 +0400
Started GET "/en/orders/open_orders_list" for 127.0.0.1 at 2020-12-12 22:59:43 +0400
Processing by OrdersController#open_orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (38.3ms)[0m  [1m[34mSELECT id, title as name, TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start, TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end FROM "orders" WHERE "orders"."order_status_id" = $1 AND "orders"."user_account_id" IS NULL[0m  [["order_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:54
Completed 200 OK in 6083ms (Views: 0.2ms | ActiveRecord: 42.4ms)


Started GET "/en/orders/admin_orders_list" for 127.0.0.1 at 2020-12-12 23:00:04 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"admin_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 7662ms (Views: 0.4ms | ActiveRecord: 1.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 23:01:26 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 23:01:26 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 23:01:26 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 23:01:26 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 23:01:29 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 23:01:29 +0400
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:01:39 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 8ms (Views: 0.3ms | ActiveRecord: 0.4ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 23:02:46 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 23:02:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 23:02:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 23:02:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 23:02:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 23:02:49 +0400
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:03:04 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:03:19 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 5619ms (Views: 0.7ms | ActiveRecord: 3.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 23:04:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 23:04:03 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 23:04:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 23:04:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 23:04:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 23:04:03 +0400
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:04:17 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 10384ms (Views: 0.3ms | ActiveRecord: 10.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 23:06:20 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 23:06:20 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 23:06:20 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 23:06:20 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 23:06:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 23:06:20 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-12 23:06:24 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-12 23:06:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-12 23:06:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-12 23:06:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-12 23:06:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-12 23:06:24 +0400
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:06:37 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:216
Completed 404 Not Found in 13755ms (Views: 0.2ms | ActiveRecord: 9.5ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:07:53 +0400
Processing by OrdersController#all_orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 6561ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:08:49 +0400
Processing by OrdersController#all_orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             order_statuses.name AS status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"[0m
  â†³ app/services/orders/orders_services.rb:58
Completed 500 Internal Server Error in 3580ms (ActiveRecord: 9.8ms)


  
ActiveRecord::StatementInvalid (PG::AmbiguousColumn: ERROR:  column reference "id" is ambiguous
LINE 1: SELECT id,
               ^
: SELECT id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             order_statuses.name AS status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"):
  
app/services/orders/orders_services.rb:58:in `all_orders_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:61:in `all_orders_list'
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:09:18 +0400
Processing by OrdersController#all_orders_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT orders.id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             order_statuses.name AS status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"[0m
  â†³ app/services/orders/orders_services.rb:58
Completed 200 OK in 3576ms (Views: 0.4ms | ActiveRecord: 10.6ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:11:44 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:220
Completed 404 Not Found in 8324ms (Views: 0.4ms | ActiveRecord: 4.2ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:11:58 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:220
Completed 404 Not Found in 115395ms (Views: 0.5ms | ActiveRecord: 0.9ms)


Started GET "/en/orders/2" for 127.0.0.1 at 2020-12-12 23:14:06 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:220
  [1m[36mClient Load (6.9ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
  [1m[36mOrderStatus Load (0.3ms)[0m  [1m[34mSELECT  "order_statuses".* FROM "order_statuses" WHERE "order_statuses"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
  [1m[36mOrderType Load (2.7ms)[0m  [1m[34mSELECT  "order_types".* FROM "order_types" WHERE "order_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:30
Completed 200 OK in 5527ms (Views: 0.3ms | ActiveRecord: 42.9ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:14:18 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:220
Completed 404 Not Found in 2429ms (Views: 0.4ms | ActiveRecord: 1.1ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:24:07 +0400
  
AbstractController::ActionNotFound (The action 'show' could not be found for OrdersController):
  
actionpack (5.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:25:44 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.4ms)[0m  [1m[34mSELECT orders.id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             order_statuses.name AS status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"[0m
  â†³ app/services/orders/orders_services.rb:30
Completed 200 OK in 31ms (Views: 0.4ms | ActiveRecord: 10.3ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-12 23:29:33 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT orders.id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             json_language(order_statuses.name) as status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"[0m
  â†³ app/services/orders/orders_services.rb:30
Completed 500 Internal Server Error in 21ms (ActiveRecord: 5.6ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedFunction: ERROR:  function json_language(json) does not exist
LINE 5:                              json_language(order_statuses.na...
                                     ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: SELECT orders.id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             json_language(order_statuses.name) as status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"):
  
app/services/orders/orders_services.rb:30:in `show_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/orders_controller.rb:41:in `show'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 02:04:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 02:04:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 02:04:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 02:04:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 02:04:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 02:04:26 +0400
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-13 02:04:35 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/orders/overview/6"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 02:05:13 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 02:05:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 02:05:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 02:05:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 02:05:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 02:05:14 +0400
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-13 02:05:25 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:128
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:165
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:140
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)[0m  [["product_id", 15], ["product_id", 13], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:143
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:132
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 110ms (Views: 10.4ms | ActiveRecord: 24.8ms)


Started GET "/en/orders/all_orders_list" for 127.0.0.1 at 2020-12-13 02:05:36 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"all_orders_list"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.4ms)[0m  [1m[34mSELECT orders.id,
                             title as name,
                             TO_CHAR(start_time, 'yyyy-mm-dd hh:mm') as start,
                             TO_CHAR(start_time + (3 * interval '20 minute'), 'yyyy-mm-dd hh:mm') as end,
                             order_statuses.name AS status,
                             user_accounts.username AS employ FROM "orders" INNER JOIN "order_statuses" ON "order_statuses"."id" = "orders"."order_status_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "orders"."user_account_id"[0m
  â†³ app/services/orders/orders_services.rb:30
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 3.4ms)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateOrderComments (20201213121958)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (34.7ms)[0m  [1m[35mCREATE TABLE "order_comments" ("id" bigserial primary key, "order_id" bigint NOT NULL, "user_account_id" bigint NOT NULL, "comment" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_887770e183"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_9e0f3b8d95"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
)[0m
  â†³ db/migrate/20201213121958_create_order_comments.rb:3
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_order_comments_on_order_id" ON "order_comments"  ("order_id")[0m
  â†³ db/migrate/20201213121958_create_order_comments.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_order_comments_on_user_account_id" ON "order_comments"  ("user_account_id")[0m
  â†³ db/migrate/20201213121958_create_order_comments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201213121958"]]
  â†³ bin/rails:9
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mOrderComment Load (0.7ms)[0m  [1m[34mSELECT  "order_comments".* FROM "order_comments" ORDER BY "order_comments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:09:30 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:09:30 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:09:30 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:09:30 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:09:31 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:09:31 +0400
Started POST "/en/order_comments" for 127.0.0.1 at 2020-12-13 18:10:18 +0400
Processing by OrderCommentsController#create as JSON
  Parameters: {"comment"=>"yleo shena", "user_account_id"=>64, "order_id"=>6, "locale"=>"en", "order_comment"=>{"order_id"=>6, "user_account_id"=>64, "comment"=>"yleo shena"}}
Unpermitted parameters: :format, :locale, :order_comment
Unpermitted parameters: :format, :locale, :order_comment
Completed 500 Internal Server Error in 13458ms (ActiveRecord: 11.8ms)


  
NoMethodError (undefined method `order_status_id=' for #<OrderComment:0x00007f6a981620d8>
Did you mean?  order_id=):
  
app/services/orders/comments_service.rb:20:in `create_comment'
app/controllers/order_comments_controller.rb:11:in `create'
Started POST "/en/order_comments" for 127.0.0.1 at 2020-12-13 18:10:52 +0400
Processing by OrderCommentsController#create as JSON
  Parameters: {"comment"=>"yleo shena", "user_account_id"=>64, "order_id"=>6, "locale"=>"en", "order_comment"=>{"order_id"=>6, "user_account_id"=>64, "comment"=>"yleo shena"}}
Unpermitted parameters: :format, :locale, :order_comment
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/comments_service.rb:20
  [1m[36mOrderComment Create (3.3ms)[0m  [1m[32mINSERT INTO "order_comments" ("order_id", "user_account_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["order_id", 6], ["user_account_id", 64], ["comment", "yleo shena"], ["created_at", "2020-12-13 14:10:55.115653"], ["updated_at", "2020-12-13 14:10:55.115653"]]
  â†³ app/services/orders/comments_service.rb:20
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/comments_service.rb:20
  [1m[36mOrderComment Load (0.6ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/comments_service.rb:14
Completed 201 Created in 3026ms (Views: 0.3ms | ActiveRecord: 13.0ms)


  [1m[36mOrderComment Load (0.5ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderComment Load (0.4ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderComment Load (0.8ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderComment Load (0.4ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderComment Load (0.3ms)[0m  [1m[34mSELECT  "order_comments".* FROM "order_comments" ORDER BY "order_comments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrderComment Load (0.7ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderComment Load (0.9ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mOrderComment Load (0.4ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mOrderComment Load (1.0ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
Started POST "/en/order_comments" for 127.0.0.1 at 2020-12-13 18:17:01 +0400
Processing by OrderCommentsController#create as JSON
  Parameters: {"comment"=>"yleo shena", "user_account_id"=>64, "order_id"=>6, "locale"=>"en", "order_comment"=>{"order_id"=>6, "user_account_id"=>64, "comment"=>"yleo shena"}}
Unpermitted parameters: :format, :locale, :order_comment
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/orders/comments_service.rb:21
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:21
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:21
  [1m[36mOrderComment Create (0.8ms)[0m  [1m[32mINSERT INTO "order_comments" ("order_id", "user_account_id", "comment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["order_id", 6], ["user_account_id", 64], ["comment", "yleo shena"], ["created_at", "2020-12-13 14:17:01.952059"], ["updated_at", "2020-12-13 14:17:01.952059"]]
  â†³ app/services/orders/comments_service.rb:21
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/orders/comments_service.rb:21
  [1m[36mOrderComment Load (0.4ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/comments_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:16
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:16
Completed 201 Created in 73ms (Views: 0.3ms | ActiveRecord: 16.9ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:17:41 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:17:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:17:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:17:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:17:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:17:41 +0400
Started GET "/en/orders_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:18:05 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/orders_comments/comments_list/6"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/orders_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:18:26 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/orders_comments/comments_list/6"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:18:29 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:18:29 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:18:29 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:18:29 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:18:32 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:18:32 +0400
Started GET "/en/orders_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:18:46 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/orders_comments/comments_list/6"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:19:05 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:19:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:19:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:19:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:19:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:19:06 +0400
Started GET "/en/orders_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:19:15 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/orders_comments/comments_list/6"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:20:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:20:13 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:20:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:20:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:20:13 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:20:13 +0400
Started GET "/en/order_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:20:22 +0400
Processing by OrderCommentsController#comments_list as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale, :id
  [1m[36mOrderComment Load (0.4ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" IS NULL[0m
  â†³ app/services/orders/comments_service.rb:16
Completed 200 OK in 2753ms (Views: 0.2ms | ActiveRecord: 3.0ms)


Started GET "/en/order_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:20:30 +0400
Processing by OrderCommentsController#comments_list as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale, :id
Unpermitted parameters: :format, :locale, :id
  [1m[36mOrderComment Load (0.9ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" IS NULL[0m
  â†³ app/services/orders/comments_service.rb:16
Completed 200 OK in 8168ms (Views: 0.5ms | ActiveRecord: 0.9ms)


Started GET "/en/order_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:20:49 +0400
Processing by OrderCommentsController#comments_list as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mOrderComment Load (0.6ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" IS NULL[0m
  â†³ app/services/orders/comments_service.rb:16
Completed 200 OK in 6181ms (Views: 0.2ms | ActiveRecord: 2.3ms)


Started GET "/en/order_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:21:33 +0400
Processing by OrderCommentsController#comments_list as JSON
  Parameters: {"locale"=>"en", "order_id"=>"6"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mOrderComment Load (1.4ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/comments_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:16
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:16
Completed 200 OK in 5816ms (Views: 0.5ms | ActiveRecord: 15.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:22:01 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:22:01 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:22:01 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:22:01 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:22:01 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:22:01 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-12-13 18:22:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-12-13 18:22:03 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-12-13 18:22:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-12-13 18:22:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-12-13 18:22:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-12-13 18:22:03 +0400
Started GET "/en/order_comments/comments_list/6" for 127.0.0.1 at 2020-12-13 18:22:14 +0400
Processing by OrderCommentsController#comments_list as JSON
  Parameters: {"locale"=>"en", "order_id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrderComment Load (1.6ms)[0m  [1m[34mSELECT "order_comments".* FROM "order_comments" WHERE "order_comments"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/comments_service.rb:16
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:16
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  â†³ app/services/orders/comments_service.rb:16
Completed 200 OK in 2510ms (Views: 1.0ms | ActiveRecord: 2.6ms)


Started POST "/en/orders/claim_order" for 127.0.0.1 at 2020-12-13 18:29:20 +0400
Processing by OrdersController#claim_order as JSON
  Parameters: {"order_id"=>6, "user_account_id"=>64, "locale"=>"en", "order"=>{"user_account_id"=>64}}
Unpermitted parameters: :format, :locale, :order
Completed 500 Internal Server Error in 39ms (ActiveRecord: 3.7ms)


  
NameError (undefined local variable or method `claimed' for #<Orders::OrdersServices:0x00007ff1782c6a20>
Did you mean?  claim_order):
  
app/services/orders/orders_services.rb:102:in `claim_order'
app/controllers/orders_controller.rb:52:in `claim_order'
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-13 21:52:05 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:128
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:165
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:156
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:140
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)[0m  [["product_id", 15], ["product_id", 13], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:143
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:132
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 89ms (Views: 11.8ms | ActiveRecord: 22.8ms)


  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IS NULL[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 8]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE 1=0[0m
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE 1=0[0m
Started GET "/en/orders/overview/6" for 127.0.0.1 at 2020-12-13 22:02:11 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"6"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:169
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:142
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)[0m  [["product_id", 15], ["product_id", 13], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:145
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:134
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 6], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:169
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:142
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)[0m  [["product_id", 15], ["product_id", 13], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 13], ["product_id", 14], ["product_id", 15], ["product_id", 15]]
  â†³ app/services/orders/orders_services.rb:144
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:145
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 6]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 6]]
  â†³ app/services/orders/orders_services.rb:134
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IN ($1, $2)[0m  [["id", 64], ["id", 15]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 29489ms (Views: 1.6ms | ActiveRecord: 59.1ms)


Started GET "/en/orders/overview/8" for 127.0.0.1 at 2020-12-13 22:02:53 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"8"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 8], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 8], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 8], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:169
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:142
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE 1=0[0m
  â†³ app/services/orders/orders_services.rb:144
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 8]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:134
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IS NULL[0m
  â†³ app/services/orders/orders_services.rb:112
  [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 8], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 8], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 8], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:169
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:142
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE 1=0[0m
  â†³ app/services/orders/orders_services.rb:144
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 8]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 8]]
  â†³ app/services/orders/orders_services.rb:134
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" IS NULL[0m
  â†³ lib/controller_response.rb:26
Completed 200 OK in 31538ms (Views: 1.2ms | ActiveRecord: 12.1ms)


  [1m[36mSupplierProduct Load (14.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (6.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
Started GET "/en/orders/overview/1" for 127.0.0.1 at 2020-12-13 22:21:26 +0400
Processing by OrdersController#overview as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/orders/orders_services.rb:129
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 1], ["task_status_id", 1]]
  â†³ app/services/orders/orders_services.rb:166
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 1], ["task_status_id", 2]]
  â†³ app/services/orders/orders_services.rb:167
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1 AND "tasks"."task_status_id" = $2[0m  [["order_id", 1], ["task_status_id", 3]]
  â†³ app/services/orders/orders_services.rb:168
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 1]]
  â†³ app/services/orders/orders_services.rb:169
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 1]]
  â†³ app/services/orders/orders_services.rb:157
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "order_products"."product_id" FROM "order_products" WHERE "order_products"."order_id" = $1[0m  [["order_id", 1]]
  â†³ app/services/orders/orders_services.rb:141
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 1]]
  â†³ app/services/orders/orders_services.rb:142
  [1m[36mProductPrice Load (0.4ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" WHERE 1=0[0m
  â†³ app/services/orders/orders_services.rb:144
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "orders"."user_account_id" FROM "orders" WHERE "orders"."id" = $1[0m  [["id", 1]]
  â†³ app/services/orders/orders_services.rb:133
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "tasks"."product_id" FROM "tasks" WHERE "tasks"."order_id" = $1[0m  [["order_id", 1]]
  â†³ app/services/orders/orders_services.rb:134
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT username, email, phone_number FROM "user_accounts" WHERE "user_accounts"."id" = $1[0m  [["id", 64]]
  â†³ lib/controller_response.rb:26
Completed 200 OK in 93876ms (Views: 11.2ms | ActiveRecord: 21.6ms)


Started GET "/" for 127.0.0.1 at 2021-03-20 20:24:28 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-20 20:24:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-20 20:24:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-20 20:24:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-20 20:24:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-20 20:24:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-20 20:24:37 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-03-20 20:25:52 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (5.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (1.8ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 924ms (Views: 0.2ms | ActiveRecord: 38.9ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-20 20:26:13 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.1ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 15:49:50 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mTermsAndCondition Load (4.5ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY active_from DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:78
Completed 400 Bad Request in 26489ms (Views: 0.2ms | ActiveRecord: 13.7ms)


  [1m[36mTermsAndCondition Load (0.8ms)[0m  [1m[34mSELECT  "terms_and_conditions".* FROM "terms_and_conditions" ORDER BY "terms_and_conditions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 15:51:57 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (4.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (4.8ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$1p/rt0FDLFDRgMe5MKRPe.RfT/dlz8gc7tjP7dPDRbU2U0DI7TJ1."], ["created_at", "2021-03-21 11:52:03.309452"], ["updated_at", "2021-03-21 11:52:03.309452"], ["salt", "qxoxPzPGWPzKcn31JKHG"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:100
  [1m[36mCustomerType Load (1.4ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "business"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:133
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 500 Internal Server Error in 5486ms (ActiveRecord: 32.7ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/account/registration_service.rb:133:in `customer_object'
app/services/account/registration_service.rb:108:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 15:52:33 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$8wzSpXskb936rLZj7l/hXurYWnDX.vL0RbW8nB4VO8IMPkiXAklG6"], ["created_at", "2021-03-21 11:52:53.765729"], ["updated_at", "2021-03-21 11:52:53.765729"], ["salt", "wPicDk3_A_QhqfUYz2C6"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ (pry):2
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$MK0g08PMUAV0nQ3lC1exMOvAaJkCHKh5GXVGSsidx0byssDMq1aNy"], ["created_at", "2021-03-21 11:52:56.733267"], ["updated_at", "2021-03-21 11:52:56.733267"], ["salt", "P1L_P9xJBJSq6f_38bpq"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mCustomerType Load (0.4ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "business"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:136
  [1m[36mCACHE CustomerType Load (0.0ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" WHERE "customer_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "business"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:136
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 500 Internal Server Error in 55591ms (ActiveRecord: 12.6ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/account/registration_service.rb:136:in `customer_object'
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 15:53:31 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$0Me6EpafSzMokEmnqvdNueL2oqrovpWrGwd48XXOyaY1c4RKUlbF2"], ["created_at", "2021-03-21 11:53:41.714014"], ["updated_at", "2021-03-21 11:53:41.714014"], ["salt", "F_ihP34FaZWifQgXdx9D"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 500 Internal Server Error in 18368ms (ActiveRecord: 19.9ms)


  
NoMethodError (undefined method `id_name' for nil:NilClass):
  
app/models/customer.rb:12:in `block in <class:Customer>'
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 15:53:56 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.5ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$zy2tMZHhUDX9Jo9f7U4/EeztYXbsRzm4sSwqtQH7ZQdj9H9frh1xu"], ["created_at", "2021-03-21 11:54:01.554228"], ["updated_at", "2021-03-21 11:54:01.554228"], ["salt", "jsR6zZcmL9ZRoxfxdRTy"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  â†³ (pry):7
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 500 Internal Server Error in 67957ms (ActiveRecord: 2.3ms)


  
NoMethodError (undefined method `id_name' for nil:NilClass):
  
app/models/customer.rb:12:in `block in <class:Customer>'
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
  [1m[36mCustomer Load (36.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCustomerType (20210321115553)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (13.7ms)[0m  [1m[35mALTER TABLE "customers" DROP COLUMN "customer_type_id"[0m
  â†³ db/migrate/20210321115553_remove_customer_type.rb:3
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCustomerType (20210321115553)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCustomerType (20210321115553)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "customers" DROP CONSTRAINT "fk_rails_9e248b531a"[0m
  â†³ db/migrate/20210321115553_remove_customer_type.rb:3
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCustomerType (20210321115553)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "customers" DROP CONSTRAINT "fk_rails_9e248b531a"[0m
  â†³ db/migrate/20210321115553_remove_customer_type.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210321115553"]]
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveNullFalse (20210321120008)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveNullFalse (20210321120008)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (39.9ms)[0m  [1m[35mALTER TABLE "customers" ALTER COLUMN "customer_type_id" TYPE integer, ALTER "customer_type_id" DROP NOT NULL[0m
  â†³ db/migrate/20210321120008_remove_null_false.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210321120008"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:01:46 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$UjTgpBAX9tCB10XBqbluMe8nYy41hXTe4jK8C6nIveIf2RfJye81W"], ["created_at", "2021-03-21 12:01:53.080703"], ["updated_at", "2021-03-21 12:01:53.080703"], ["salt", "CP8TPfq4y9qvqGKr5zoe"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE UserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 422 Unprocessable Entity in 34729ms (ActiveRecord: 21.1ms)


  
ActiveRecord::RecordInvalid (Validation failed: Customer type must exist):
  
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:02:35 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$/oTRBkLQGx2YlS13dDs52eq4BqFYKO2hxTDqvcccwji96ZtyCPVzy"], ["created_at", "2021-03-21 12:02:40.579312"], ["updated_at", "2021-03-21 12:02:40.579312"], ["salt", "dgsXcQxmVKSTKg9R4Tct"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 422 Unprocessable Entity in 5190ms (ActiveRecord: 14.2ms)


  
ActiveRecord::RecordInvalid (Validation failed: Customer type must exist):
  
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers"[0m
  [1m[36mCustomer Update All (37.2ms)[0m  [1m[33mUPDATE "customers" SET "customer_type_id" = NULL[0m
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."customer_type_id" IS NOT NULL[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemovecustomerTypeId (20210321120354)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" DROP COLUMN "customer_type_id"[0m
  â†³ db/migrate/20210321120354_removecustomer_type_id.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210321120354"]]
  â†³ bin/rails:9
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:04:31 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.4ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$DL/JYPzEcEKM.mKvs6sYi.h4w0lkNi87Bdi1g8blrdr6MPuuSp2cu"], ["created_at", "2021-03-21 12:04:36.467605"], ["updated_at", "2021-03-21 12:04:36.467605"], ["salt", "TLdpmowr7bB9ZDB5b3qp"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 422 Unprocessable Entity in 5507ms (ActiveRecord: 13.9ms)


  
ActiveRecord::RecordInvalid (Validation failed: Customer type must exist):
  
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:04:56 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$R40HtWZeCEUZdxplk34wA.0jpE8SbWWsqR7s4u3V1VDypCNP4LiNe"], ["created_at", "2021-03-21 12:05:01.402030"], ["updated_at", "2021-03-21 12:05:01.402030"], ["salt", "kUzAhr-dx_CuCKXT5Nm1"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCustomer Load (2.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 422 Unprocessable Entity in 27076ms (ActiveRecord: 16.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Customer type must exist):
  
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-21 16:07:15 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-21 16:07:15 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-21 16:07:15 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-21 16:07:15 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-21 16:07:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-21 16:07:15 +0400
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:07:30 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$e2ou8/ldk.Pgl492ohw3c.3Sr5zCpeIC9BUyPjBkSnyJIl8726ho2"], ["created_at", "2021-03-21 12:07:34.851448"], ["updated_at", "2021-03-21 12:07:34.851448"], ["salt", "6J8EB8zgZYQW-defrHMd"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 422 Unprocessable Entity in 30892ms (ActiveRecord: 18.1ms)


  
ActiveRecord::RecordInvalid (Validation failed: Customer type must exist):
  
app/services/account/registration_service.rb:110:in `create_customer!'
app/services/account/registration_service.rb:36:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:08:32 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:34
Completed 500 Internal Server Error in 3851ms (ActiveRecord: 9.4ms)


  
NoMethodError (undefined method `valid_password_format?' for #<UserAccount:0x000055ce19e178e0>):
  
app/services/validations/model_validation.rb:15:in `block in options'
app/services/account/registration_service.rb:101:in `register_user!'
app/services/account/registration_service.rb:35:in `block in call'
app/services/account/registration_service.rb:34:in `call'
app/controllers/account/registration_controller.rb:11:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:08:56 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$GcmH7vUspurxAbsFt8Y2CeY2QylAEz2/pv5nMJQjKBhmoyT/Hakb2"], ["created_at", "2021-03-21 12:09:01.348826"], ["updated_at", "2021-03-21 12:09:01.348826"], ["salt", "wgVkKf5xXjmr7zP2fzFE"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:101
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:110
  [1m[36mCustomer Create (1.9ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukako"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 75], ["created_at", "2021-03-21 12:09:02.174706"], ["updated_at", "2021-03-21 12:09:02.174706"]]
  â†³ app/services/account/registration_service.rb:110
  [1m[36mConfirmationType Load (2.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (2.6ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 75], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (1.2ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:09:03.873473"], ["failed_attempts_count", 0], ["user_account_id", 75], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:84
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:34
Completed 200 OK in 7953ms (Views: 0.6ms | ActiveRecord: 32.8ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:10:58 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v", "locale"=>"en", "registration"=>{"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.1ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:137
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:138
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/confirmation_service.rb:120
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 48]]
  â†³ app/services/account/confirmation_service.rb:120
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/confirmation_service.rb:120
  [1m[36mConfirmationCode Load (1.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
Completed 400 Bad Request in 154794ms (Views: 0.8ms | ActiveRecord: 21.1ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:13:41 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v", "locale"=>"en", "registration"=>{"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:125
Completed 400 Bad Request in 3857ms (Views: 0.2ms | ActiveRecord: 2.3ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:14:05 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v", "locale"=>"en", "registration"=>{"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:125
Completed 400 Bad Request in 18389ms (Views: 0.2ms | ActiveRecord: 2.3ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:14:54 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v", "locale"=>"en", "registration"=>{"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v"}}
Unpermitted parameters: :format, :locale, :registration
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:126
Completed 400 Bad Request in 130797ms (Views: 0.2ms | ActiveRecord: 2.3ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:17:07 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v", "locale"=>"en", "registration"=>{"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:126
Completed 400 Bad Request in 327873ms (Views: 0.2ms | ActiveRecord: 1.9ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:23:06 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$mXPSNulxDnnYBWwhW/FzOOwSokNA948.wqdGumcT5VSckKeql3B8a"], ["created_at", "2021-03-21 12:23:11.574481"], ["updated_at", "2021-03-21 12:23:11.574481"], ["salt", "nG782N85nRH6wpdiFYmF"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:173
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:182
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukako"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 76], ["created_at", "2021-03-21 12:23:12.328298"], ["updated_at", "2021-03-21 12:23:12.328298"]]
  â†³ app/services/account/registration_service.rb:182
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 76], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.4ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "Xp1YBf5hbwBGPA5pA2NjSB8o"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:23:17.758852"], ["failed_attempts_count", 0], ["user_account_id", 76], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:86
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Xp1YBf5hbwBGPA5pA2NjSB8o"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Xp1YBf5hbwBGPA5pA2NjSB8o"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.1ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Xp1YBf5hbwBGPA5pA2NjSB8o"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:78
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:73
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:73
  [1m[36mConfirmationCode Update (1.0ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 49]]
  â†³ app/services/account/registration_service.rb:73
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:73
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Xp1YBf5hbwBGPA5pA2NjSB8o"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "Xp1YBf5hbwBGPA5pA2NjSB8o"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:78
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:73
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:73
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:73
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:54
  [1m[36mUserAccount Update (0.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:24:09.507722"], ["id", 76]]
  â†³ app/services/account/registration_service.rb:67
  [1m[36mConfirmationCode Destroy (0.2ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 49]]
  â†³ app/services/account/registration_service.rb:61
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:54
Completed 500 Internal Server Error in 72301ms (ActiveRecord: 32.3ms)


  
NoMethodError (undefined method `authorization_token' for #<Account::RegistrationService:0x00007f8330c46d40>):
  
app/controllers/account/registration_controller.rb:19:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:25:06 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$xlsJ2VEkpRf3GeDjbE8V9OMONsQKfiglMhiCyzyLalFRHzNHsOKy2"], ["created_at", "2021-03-21 12:25:10.073013"], ["updated_at", "2021-03-21 12:25:10.073013"], ["salt", "UjbXQPNUj_rqnpiEk9mT"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:177
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:186
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukako"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 77], ["created_at", "2021-03-21 12:25:10.553670"], ["updated_at", "2021-03-21 12:25:10.553670"]]
  â†³ app/services/account/registration_service.rb:186
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 77], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.4ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "eUpyzVynnTXuP4BHFjN6CoCy"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:25:11.589483"], ["failed_attempts_count", 0], ["user_account_id", 77], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:86
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "eUpyzVynnTXuP4BHFjN6CoCy"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "eUpyzVynnTXuP4BHFjN6CoCy"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:82
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:77
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:77
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 50]]
  â†³ app/services/account/registration_service.rb:77
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:77
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:54
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:25:16.039255"], ["id", 77]]
  â†³ app/services/account/registration_service.rb:71
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 50]]
  â†³ app/services/account/registration_service.rb:65
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:54
Completed 200 OK in 12101ms (Views: 0.2ms | ActiveRecord: 66.1ms)


Started PUT "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:27:11 +0400
Processing by Account::RegistrationController#confirm_registration as JSON
  Parameters: {"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v", "locale"=>"en", "registration"=>{"sms_code"=>"23232323", "token"=>"hYgqwTXkud3gwuReSjyYf28v"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mConfirmationCode Load (0.1ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hYgqwTXkud3gwuReSjyYf28v"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:126
Completed 400 Bad Request in 4305ms (Views: 0.3ms | ActiveRecord: 1.8ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:27:26 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$SDNVtj9.LWT9V0pasj2qh.A2B6mWZ3Ny.E5/yypFzWZ5Co/xCSkG."], ["created_at", "2021-03-21 12:27:32.039642"], ["updated_at", "2021-03-21 12:27:32.039642"], ["salt", "z8sR4HYDysknfv_NfaW4"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:177
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:186
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukako"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 78], ["created_at", "2021-03-21 12:27:32.548519"], ["updated_at", "2021-03-21 12:27:32.548519"]]
  â†³ app/services/account/registration_service.rb:186
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 78], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "6dzryy2vPxUh1vdbBbiPduD1"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:27:33.727730"], ["failed_attempts_count", 0], ["user_account_id", 78], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:86
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:34
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6dzryy2vPxUh1vdbBbiPduD1"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6dzryy2vPxUh1vdbBbiPduD1"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:82
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:77
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:77
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 51]]
  â†³ app/services/account/registration_service.rb:77
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:77
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:54
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:27:50.057765"], ["id", 78]]
  â†³ app/services/account/registration_service.rb:71
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 51]]
  â†³ app/services/account/registration_service.rb:65
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:54
Completed 200 OK in 25937ms (Views: 0.2ms | ActiveRecord: 36.0ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:32:03 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$KgP6yTG2//6SV1JOFm2/o.lei0bJMH2WArjNwyDsYwUS2B5YklPni"], ["created_at", "2021-03-21 12:32:03.302259"], ["updated_at", "2021-03-21 12:32:03.302259"], ["salt", "qj7oDT4ZnLUv2sBm7xpf"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukako"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 79], ["created_at", "2021-03-21 12:32:03.320991"], ["updated_at", "2021-03-21 12:32:03.320991"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 79], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.7ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "KeHSP933f8msL6pHVgcfq1He"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:32:03.344617"], ["failed_attempts_count", 0], ["user_account_id", 79], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/account/confirmation_service.rb:83
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mConfirmationCode Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "KeHSP933f8msL6pHVgcfq1He"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.1ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "KeHSP933f8msL6pHVgcfq1He"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (1.2ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 52]]
  â†³ app/services/account/registration_service.rb:69
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:69
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:46
  [1m[36mUserAccount Update (0.7ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:32:13.166178"], ["id", 79]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 52]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:46
Completed 200 OK in 9971ms (Views: 0.2ms | ActiveRecord: 31.4ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:32:49 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukako", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$r0VD4X6D22Sdz0J/10GXbu9LfKbPXGQz9a71aiD6vLldpMXLSMc42"], ["created_at", "2021-03-21 12:32:49.861709"], ["updated_at", "2021-03-21 12:32:49.861709"], ["salt", "-86UjNhqxN6jEnEDishr"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukako"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 80], ["created_at", "2021-03-21 12:32:49.874859"], ["updated_at", "2021-03-21 12:32:49.874859"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 80], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.4ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "XVbGjLogByE8LPSrd2wdByZd"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:32:49.899867"], ["failed_attempts_count", 0], ["user_account_id", 80], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "XVbGjLogByE8LPSrd2wdByZd"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "XVbGjLogByE8LPSrd2wdByZd"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 53]]
  â†³ app/services/account/registration_service.rb:69
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:69
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:46
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:32:49.910316"], ["id", 80]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.2ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 53]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:46
Completed 200 OK in 158ms (Views: 0.1ms | ActiveRecord: 25.5ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:33:16 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"bukakoka", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business", "locale"=>"en", "registration"=>{"name"=>"bukakoka", "delivery_address"=>"gogebashvili streat", "invoice_address"=>"csdfvdfvdfv", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>1, "customer_type"=>"business"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.4ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$EmoxZGOBKIZFBhDePVzofuSz3nE/qb6Bm67nRN3rqOG6bSPdA24ei"], ["created_at", "2021-03-21 12:33:16.777535"], ["updated_at", "2021-03-21 12:33:16.777535"], ["salt", "HAPrQ2SMhfNvw-myheMm"], ["username", "bukabuka"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "bukakoka"], ["delivery_address", "gogebashvili streat"], ["user_account_id", 81], ["created_at", "2021-03-21 12:33:16.795584"], ["updated_at", "2021-03-21 12:33:16.795584"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 81], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.8ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "8XasSf8RCoL8mcFmUad64fJL"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:33:16.818719"], ["failed_attempts_count", 0], ["user_account_id", 81], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "8XasSf8RCoL8mcFmUad64fJL"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "8XasSf8RCoL8mcFmUad64fJL"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 54]]
  â†³ app/services/account/registration_service.rb:69
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:69
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:46
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:33:16.834705"], ["id", 81]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 54]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:46
Completed 200 OK in 159ms (Views: 0.3ms | ActiveRecord: 29.7ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 16:33:37 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukakoka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukakoka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukakoka' OR "user_accounts"."phone_number" = 'bukakoka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukakoka"], ["phone_number", "bukakoka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.3ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 64ms (Views: 0.2ms | ActiveRecord: 6.1ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 16:33:50 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukakoka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukakoka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukakoka' OR "user_accounts"."phone_number" = 'bukakoka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukakoka"], ["phone_number", "bukakoka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.2ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 16:33:54 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukako", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukako", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukako' OR "user_accounts"."phone_number" = 'bukako') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukako"], ["phone_number", "bukako"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.3ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-21 16:35:43 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-21 16:35:44 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-21 16:35:44 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-21 16:35:44 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-21 16:35:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-21 16:35:44 +0400
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:36:43 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"name"=>"anzori", "delivery_address"=>"sdcsdc", "invoice_address"=>"sdcsdcsdc", "username"=>"anzor100", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"buka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"string", "locale"=>"en", "registration"=>{"name"=>"anzori", "delivery_address"=>"sdcsdc", "invoice_address"=>"sdcsdcsdc", "username"=>"anzor100", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"buka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"string"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.7ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "buka@gmail.com"], ["crypted_password", "$2a$10$B4C.1XZVIu5m7Zc6Wbcf.eSikTFAHmFYvfcR0WjuCuFXR05mBAlRu"], ["created_at", "2021-03-21 12:36:44.041344"], ["updated_at", "2021-03-21 12:36:44.041344"], ["salt", "gJUyFZrM6TVrnpR1ucYo"], ["username", "anzor100"], ["phone_number_iso", "GE"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("name", "delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "anzori"], ["delivery_address", "sdcsdc"], ["user_account_id", 82], ["created_at", "2021-03-21 12:36:44.064845"], ["updated_at", "2021-03-21 12:36:44.064845"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.5ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 82], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.6ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "HJaBwt64FusxmaUzX3smgxiw"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:36:44.091357"], ["failed_attempts_count", 0], ["user_account_id", 82], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "HJaBwt64FusxmaUzX3smgxiw"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "HJaBwt64FusxmaUzX3smgxiw"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 55]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:36:44.099900"], ["id", 82]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.2ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 55]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 213ms (Views: 0.2ms | ActiveRecord: 29.0ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 16:37:08 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"anzor100", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"anzor100", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'anzor100' OR "user_accounts"."phone_number" = 'anzor100') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "anzor100"], ["phone_number", "anzor100"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "failed_logins_count" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["failed_logins_count", 0], ["updated_at", "2021-03-21 12:37:09.014295"], ["id", 82]]
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/auth/locking_management_service.rb:91
Completed 200 OK in 273ms (Views: 0.1ms | ActiveRecord: 3.4ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to Addcolumnstocustomer (20210321123908)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (42.1ms)[0m  [1m[35mALTER TABLE "user_accounts" ADD "first_name" character varying[0m
  â†³ db/migrate/20210321123908_addcolumnstocustomer.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "user_accounts" ADD "last_name" character varying[0m
  â†³ db/migrate/20210321123908_addcolumnstocustomer.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "user_accounts" ADD "birth_date" timestamp[0m
  â†³ db/migrate/20210321123908_addcolumnstocustomer.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210321123908"]]
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-21 16:46:03 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-21 16:46:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-21 16:46:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-21 16:46:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-21 16:46:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-21 16:46:03 +0400
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:46:57 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"anzori", "last_name"=>"urdia", "delivery_address"=>"sdcsadvadf", "invoice_address"=>"asdasdvsdfvs", "username"=>"kako", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"string", "locale"=>"en", "registration"=>{"first_name"=>"anzori", "last_name"=>"urdia", "delivery_address"=>"sdcsadvadf", "invoice_address"=>"asdasdvsdfvs", "username"=>"kako", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"string"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.6ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$afWk5szs0RQlYt0U5NZyauThIw91uNf27pfJF/6Mkx75qPd8Z9ota"], ["created_at", "2021-03-21 12:46:57.982397"], ["updated_at", "2021-03-21 12:46:57.982397"], ["salt", "9FjcVUVzvP89Q4osBF4a"], ["username", "kako"], ["phone_number_iso", "GE"], ["first_name", "anzori"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:30
Completed 422 Unprocessable Entity in 169ms (ActiveRecord: 16.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Name can't be blank):
  
app/services/account/registration_service.rb:176:in `create_customer!'
app/services/account/registration_service.rb:32:in `block in call'
app/services/account/registration_service.rb:30:in `call'
app/controllers/account/registration_controller.rb:10:in `sign_up'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to Removecolumnfromcustomerandaccount (20210321124749)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" ALTER COLUMN "name" TYPE character varying, ALTER "name" DROP NOT NULL[0m
  â†³ db/migrate/20210321124749_removecolumnfromcustomerandaccount.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "user_accounts" ALTER COLUMN "name" TYPE character varying, ALTER "name" DROP NOT NULL[0m
  â†³ db/migrate/20210321124749_removecolumnfromcustomerandaccount.rb:4
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to Removecolumnfromcustomerandaccount (20210321124749)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" ALTER COLUMN "name" TYPE character varying, ALTER "name" DROP NOT NULL[0m
  â†³ db/migrate/20210321124749_removecolumnfromcustomerandaccount.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210321124749"]]
  â†³ bin/rails:9
  [1m[35m (34.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 16:48:51 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"anzori", "last_name"=>"urdia", "delivery_address"=>"sdcsadvadf", "invoice_address"=>"asdasdvsdfvs", "username"=>"kako", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"string", "locale"=>"en", "registration"=>{"first_name"=>"anzori", "last_name"=>"urdia", "delivery_address"=>"sdcsadvadf", "invoice_address"=>"asdasdvsdfvs", "username"=>"kako", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"anzorurdia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "customer_type"=>"string"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.4ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "anzorurdia@gmail.com"], ["crypted_password", "$2a$10$T.5wdDAkCpj9K/TTLtXwcOaiHY36XLMqhP493/BIFHchH4Ha7IjPS"], ["created_at", "2021-03-21 12:48:51.208647"], ["updated_at", "2021-03-21 12:48:51.208647"], ["salt", "E5opegkU7XKJDgmdbfVd"], ["username", "kako"], ["phone_number_iso", "GE"], ["first_name", "anzori"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("delivery_address", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["delivery_address", "sdcsadvadf"], ["user_account_id", 84], ["created_at", "2021-03-21 12:48:51.227873"], ["updated_at", "2021-03-21 12:48:51.227873"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 84], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.6ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "iGQp76S86QVPEXy71BFiuMmZ"], ["sms_code", "pending"], ["generation_time", "2021-03-21 12:48:51.250274"], ["failed_attempts_count", 0], ["user_account_id", 84], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "iGQp76S86QVPEXy71BFiuMmZ"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "iGQp76S86QVPEXy71BFiuMmZ"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 56]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 12:48:51.257605"], ["id", 84]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 56]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 153ms (Views: 0.2ms | ActiveRecord: 22.9ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 16:49:13 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"kako", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"kako", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kako' OR "user_accounts"."phone_number" = 'kako') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "kako"], ["phone_number", "kako"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "failed_logins_count" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["failed_logins_count", 0], ["updated_at", "2021-03-21 12:49:13.750805"], ["id", 84]]
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/auth/locking_management_service.rb:91
Completed 200 OK in 182ms (Views: 0.2ms | ActiveRecord: 3.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-21 22:43:47 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-21 22:43:47 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-21 22:43:47 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-21 22:43:47 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-21 22:43:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-21 22:43:47 +0400
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:44:40 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.6ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "bukabuka@gmail.com"], ["crypted_password", "$2a$10$TYF.w8S1Fss/VtN9mE0xNu02TVrqjeSiQ0Xn6xZD03h1VbB5Z.pXC"], ["created_at", "2021-03-21 18:44:40.333513"], ["updated_at", "2021-03-21 18:44:40.333513"], ["salt", "sLb4pbj2TqugFErLPJkp"], ["username", "urdia"], ["phone_number_iso", "GE"], ["first_name", "buka"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:30
Completed 422 Unprocessable Entity in 182ms (ActiveRecord: 12.7ms)


  
ActiveRecord::RecordInvalid (Validation failed: Delivery address can't be blank):
  
app/services/account/registration_service.rb:176:in `create_customer!'
app/services/account/registration_service.rb:32:in `block in call'
app/services/account/registration_service.rb:30:in `call'
app/controllers/account/registration_controller.rb:10:in `sign_up'
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemovenotColumnsFromAccount (20210321184536)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "customers" ALTER COLUMN "delivery_address" TYPE character varying, ALTER "delivery_address" DROP NOT NULL[0m
  â†³ db/migrate/20210321184536_removenot_columns_from_account.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210321184536"]]
  â†³ bin/rails:9
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:47:19 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "bukabuka@gmail.com"], ["crypted_password", "$2a$10$.GrpNYb6Xh8ok/9Bx62Tme46fGjp8ACE6.CaSwsOskl689d2HzPWu"], ["created_at", "2021-03-21 18:47:19.806225"], ["updated_at", "2021-03-21 18:47:19.806225"], ["salt", "TtJW5dVnp4ZLhw8DQxNR"], ["username", "urdia"], ["phone_number_iso", "GE"], ["first_name", "buka"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:30
Completed 422 Unprocessable Entity in 133ms (ActiveRecord: 10.9ms)


  
ActiveRecord::RecordInvalid (Validation failed: Delivery address can't be blank):
  
app/services/account/registration_service.rb:176:in `create_customer!'
app/services/account/registration_service.rb:32:in `block in call'
app/services/account/registration_service.rb:30:in `call'
app/controllers/account/registration_controller.rb:10:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:47:55 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4, "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "terms_and_conditions_id"=>4}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "bukabuka@gmail.com"], ["crypted_password", "$2a$10$TDPwMPK23Z766TgWAhxD..WQ6LC1wi.v4HhbGu/wKD4Ozqw4pkZXW"], ["created_at", "2021-03-21 18:47:56.164923"], ["updated_at", "2021-03-21 18:47:56.164923"], ["salt", "Z6sSVuWuAse6_gH2xdc_"], ["username", "urdia"], ["phone_number_iso", "GE"], ["first_name", "buka"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 87], ["created_at", "2021-03-21 18:47:56.183061"], ["updated_at", "2021-03-21 18:47:56.183061"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.6ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 87], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.7ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "AryT3nczZToFMzWS18D3rbtE"], ["sms_code", "pending"], ["generation_time", "2021-03-21 18:47:56.206032"], ["failed_attempts_count", 0], ["user_account_id", 87], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "AryT3nczZToFMzWS18D3rbtE"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "AryT3nczZToFMzWS18D3rbtE"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 57]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 18:47:56.214231"], ["id", 87]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.2ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 57]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 148ms (Views: 0.2ms | ActiveRecord: 22.9ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 22:49:00 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"urdia", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"urdia", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'urdia' OR "user_accounts"."phone_number" = 'urdia') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "urdia"], ["phone_number", "urdia"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "failed_logins_count" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["failed_logins_count", 0], ["updated_at", "2021-03-21 18:49:00.557531"], ["id", 87]]
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/auth/locking_management_service.rb:91
Completed 200 OK in 218ms (Views: 0.2ms | ActiveRecord: 4.1ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:50:29 +0400
Error occurred while parsing request parameters.
Contents:

{
  "first_name": "buka",
  "last_name": "urdia",
  "username": "urdia",
  "phone_number": "577520250",
  "phone_number_iso": "GE",
  "email": "bukabuka@gmail.com",
  "password": "Buk@1234",
  "password_confirmation": "Buk@1234",
  "agreed_terms_and_conditions": true,
  "terms_and_conditions_id": nil
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "first_name": "buka",
  "last_name": "urdia",
  "username": "urdia",
  "phone_number": "577520250",
  "phone_number_iso": "GE",
  "email": "bukabuka@gmail.com",
  "password": "Buk@1234",
  "password_confirmation": "Buk@1234",
  "agreed_terms_and_conditions": true,
  "terms_and_conditions_id": nil
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:50:42 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true, "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "agreed_terms_and_conditions"=>true}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "bukabuka@gmail.com"], ["crypted_password", "$2a$10$Eu//cBAfM5mdpxXgKSHKEO2yOnNSmVEDvLjZPjUfscrSPimnCOOCq"], ["created_at", "2021-03-21 18:50:42.134869"], ["updated_at", "2021-03-21 18:50:42.134869"], ["salt", "txBrVcFNN3wQtQq5i856"], ["username", "urdia"], ["phone_number_iso", "GE"], ["first_name", "buka"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 88], ["created_at", "2021-03-21 18:50:42.137130"], ["updated_at", "2021-03-21 18:50:42.137130"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 88], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.3ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "6PS6DohEWcp1mM5UYueunPrH"], ["sms_code", "pending"], ["generation_time", "2021-03-21 18:50:42.139370"], ["failed_attempts_count", 0], ["user_account_id", 88], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6PS6DohEWcp1mM5UYueunPrH"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6PS6DohEWcp1mM5UYueunPrH"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.3ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 58]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 18:50:42.143642"], ["id", 88]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 58]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (36.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 115ms (Views: 0.6ms | ActiveRecord: 39.9ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:50:49 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"urdia", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"bukabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "bukabuka@gmail.com"], ["crypted_password", "$2a$10$vAFMHhrK7IrQncGsJA4NrOdPrIMaeBfi1kjPfOQoVqZuFY.Odj6pC"], ["created_at", "2021-03-21 18:50:49.984271"], ["updated_at", "2021-03-21 18:50:49.984271"], ["salt", "VqLLk5EyFzaF7jPqPMcp"], ["username", "urdia"], ["phone_number_iso", "GE"], ["first_name", "buka"], ["last_name", "urdia"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 89], ["created_at", "2021-03-21 18:50:49.986609"], ["updated_at", "2021-03-21 18:50:49.986609"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 89], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.4ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "hFseyMhXuEY2S63KxB4zEJfd"], ["sms_code", "pending"], ["generation_time", "2021-03-21 18:50:49.989077"], ["failed_attempts_count", 0], ["user_account_id", 89], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hFseyMhXuEY2S63KxB4zEJfd"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "hFseyMhXuEY2S63KxB4zEJfd"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 59]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 18:50:49.994833"], ["id", 89]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 59]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 85ms (Views: 0.1ms | ActiveRecord: 6.9ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-21 22:51:55 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-21 22:51:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-21 22:51:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-21 22:51:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-21 22:51:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-21 22:51:55 +0400
Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-21 22:52:42 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"nino", "last_name"=>"jamera", "username"=>"jamera", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"buka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"nino", "last_name"=>"jamera", "username"=>"jamera", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"buka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "buka@gmail.com"], ["crypted_password", "$2a$10$uQavzY5YBGryCHs2DfMLJeeOTjS2rmJXw.FYT9tGL8h5pzl/W2DHC"], ["created_at", "2021-03-21 18:52:43.029364"], ["updated_at", "2021-03-21 18:52:43.029364"], ["salt", "3DAgrsxRckzcorxoTPva"], ["username", "jamera"], ["phone_number_iso", "GE"], ["first_name", "nino"], ["last_name", "jamera"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.3ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 90], ["created_at", "2021-03-21 18:52:43.045812"], ["updated_at", "2021-03-21 18:52:43.045812"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.6ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 90], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "CjD32xz3xrtweo4Xnag5jVcF"], ["sms_code", "pending"], ["generation_time", "2021-03-21 18:52:43.066786"], ["failed_attempts_count", 0], ["user_account_id", 90], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "CjD32xz3xrtweo4Xnag5jVcF"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "CjD32xz3xrtweo4Xnag5jVcF"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.5ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 60]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-21 18:52:43.075073"], ["id", 90]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 60]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 186ms (Views: 0.2ms | ActiveRecord: 58.6ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 22:53:09 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"jamera", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"jamera", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'jamera' OR "user_accounts"."phone_number" = 'jamera') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "jamera"], ["phone_number", "jamera"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "failed_logins_count" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["failed_logins_count", 0], ["updated_at", "2021-03-21 18:53:09.731732"], ["id", 90]]
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/auth/locking_management_service.rb:91
Started POST "/en/auth" for 127.0.0.1 at 2021-03-21 22:53:09 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"jamera", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"jamera", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'jamera' OR "user_accounts"."phone_number" = 'jamera') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 200 OK in 377ms (Views: 0.2ms | ActiveRecord: 37.6ms)


  [1m[36mUserAccount Load (1.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "jamera"], ["phone_number", "jamera"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/auth/locking_management_service.rb:91
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/auth/locking_management_service.rb:91
Completed 200 OK in 125ms (Views: 0.2ms | ActiveRecord: 4.3ms)


  [1m[36mUserRole Load (6.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (36.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (3.9ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-22 14:16:19 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-22 14:16:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-22 14:16:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-22 14:16:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-22 14:16:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-22 14:16:19 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:16:31 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = $1 OR "user_accounts"."phone_number" = $2) AND "user_accounts"."active" = $3 ORDER BY "user_accounts"."id" ASC LIMIT $4[0m  [["username", "bukabuka"], ["phone_number", "bukabuka"], ["active", true], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:9
  [1m[36mLockingType Load (0.3ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:38
  [1m[36mCACHE LockingType Load (0.0ms)[0m  [1m[34mSELECT  "locking_types".* FROM "locking_types" WHERE "locking_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "password_error_limited"], ["LIMIT", 1]]
  â†³ app/services/auth/locking_management_service.rb:152
Method: has_failed_attempts?, Error: undefined method `+' for nil:NilClass
Method: auth_current_user!, Error: undefined method `>' for true:TrueClass
Completed 500 Internal Server Error in 767ms (Views: 0.6ms | ActiveRecord: 9.8ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:20:32 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 401 Unauthorized in 8011ms (Views: 0.1ms | ActiveRecord: 4.0ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-22 14:21:34 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"kaia", "last_name"=>"kata", "username"=>"kaiakata", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"kaia", "last_name"=>"kata", "username"=>"kaiakata", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (1.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "string@gmail.com"], ["crypted_password", "$2a$10$d8XqAzTifYceh6CTsxMX6.Ac4siFfzqUoAOIENULAnGN4muRtvROq"], ["created_at", "2021-03-22 10:21:34.593020"], ["updated_at", "2021-03-22 10:21:34.593020"], ["salt", "2iCBQLqtDMEVRsyJSpif"], ["username", "kaiakata"], ["phone_number_iso", "GE"], ["first_name", "kaia"], ["last_name", "kata"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.5ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 91], ["created_at", "2021-03-22 10:21:34.638818"], ["updated_at", "2021-03-22 10:21:34.638818"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 91], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.7ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "eSujDCxdacnukc5ygaS7pJAD"], ["sms_code", "pending"], ["generation_time", "2021-03-22 10:21:34.690660"], ["failed_attempts_count", 0], ["user_account_id", 91], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.7ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "eSujDCxdacnukc5ygaS7pJAD"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "eSujDCxdacnukc5ygaS7pJAD"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 61]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.4ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-22 10:21:34.725944"], ["id", 91]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 61]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 264ms (Views: 0.2ms | ActiveRecord: 58.3ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:21:48 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"kaiakata", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"kaiakata", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 401 Unauthorized in 4049ms (Views: 0.1ms | ActiveRecord: 0.5ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:21:59 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"kaiakata", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"kaiakata", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 401 Unauthorized in 64906ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:23:06 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"kaiakata", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"kaiakata", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1[0m  [["username", "kaiakata"]]
  â†³ app/services/auth/service.rb:158
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'kaiakata' OR "user_accounts"."phone_number" = 'kaiakata') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 401 Unauthorized in 207637ms (Views: 0.1ms | ActiveRecord: 4.5ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-22 14:27:00 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"kaia", "last_name"=>"kata", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"kaia", "last_name"=>"kata", "username"=>"bukabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.5ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "string@gmail.com"], ["crypted_password", "$2a$10$l14dV0TTDcXGwvonlagC7eBKvQFRRD.vSXEwrODhppkG5R1q2ZBea"], ["created_at", "2021-03-22 10:27:00.615800"], ["updated_at", "2021-03-22 10:27:00.615800"], ["salt", "AnckPUUVtkWPusMktQx9"], ["username", "bukabuka"], ["phone_number_iso", "GE"], ["first_name", "kaia"], ["last_name", "kata"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.4ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 92], ["created_at", "2021-03-22 10:27:00.630178"], ["updated_at", "2021-03-22 10:27:00.630178"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.4ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 92], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.5ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "6GFcuY59EgdTUhCRUbJuA4CC"], ["sms_code", "pending"], ["generation_time", "2021-03-22 10:27:00.652733"], ["failed_attempts_count", 0], ["user_account_id", 92], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6GFcuY59EgdTUhCRUbJuA4CC"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "6GFcuY59EgdTUhCRUbJuA4CC"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.5ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 62]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.6ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-22 10:27:00.661106"], ["id", 92]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 62]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 169ms (Views: 0.4ms | ActiveRecord: 55.8ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:27:30 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 401 Unauthorized in 5194ms (Views: 0.1ms | ActiveRecord: 0.5ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:31:38 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE ("user_accounts"."username" = 'bukabuka' OR "user_accounts"."phone_number" = 'bukabuka') AND "user_accounts"."active" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["active", true], ["LIMIT", 1]]
  â†³ config/initializers/active_record_adapter.rb:23
Completed 200 OK in 32569ms (Views: 0.2ms | ActiveRecord: 6.2ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:33:04 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1[0m  [["username", "bukabuka"]]
  â†³ app/services/auth/service.rb:158
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ (pry):4
Method: auth_current_user!, Error: at least 2 arguments required
Completed 500 Internal Server Error in 66188ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:34:12 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:161
Completed 200 OK in 4094ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:35:05 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"kaiakata", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"kaiakata", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "kaiakata"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 64ms (Views: 0.2ms | ActiveRecord: 8.9ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-03-22 14:40:59 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"kaia", "last_name"=>"kata", "username"=>"meraba", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"kaia", "last_name"=>"kata", "username"=>"meraba", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"string@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[36mCountryPhoneIndex Load (0.2ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation_service.rb:21
  [1m[36mCACHE CountryPhoneIndex Load (0.0ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" WHERE "country_phone_indices"."iso_code" = $1 LIMIT $2[0m  [["iso_code", "GE"], ["LIMIT", 1]]
  â†³ app/services/validations/phone_number_validation.rb:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Create (0.6ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "string@gmail.com"], ["crypted_password", "$2a$10$bodZqLSMVea2LWGowZyOee47tNJ2llr/JXm70fwELhE4pIOp/Giky"], ["created_at", "2021-03-22 10:40:59.786963"], ["updated_at", "2021-03-22 10:40:59.786963"], ["salt", "n_5y2kvUixPWDkFBEYXf"], ["username", "meraba"], ["phone_number_iso", "GE"], ["first_name", "kaia"], ["last_name", "kata"]]
  â†³ app/services/account/registration_service.rb:168
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mCustomer Create (0.6ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 93], ["created_at", "2021-03-22 10:40:59.804889"], ["updated_at", "2021-03-22 10:40:59.804889"]]
  â†³ app/services/account/registration_service.rb:176
  [1m[36mConfirmationType Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (0.9ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 93], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (0.6ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "jG1EV5tLxKcZ1YmSXZ7BUs1u"], ["sms_code", "pending"], ["generation_time", "2021-03-22 10:40:59.828917"], ["failed_attempts_count", 0], ["user_account_id", 93], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.2ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "jG1EV5tLxKcZ1YmSXZ7BUs1u"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "jG1EV5tLxKcZ1YmSXZ7BUs1u"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:74
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 63]]
  â†³ app/services/account/registration_service.rb:69
  [1m[36mUserAccount Update (0.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-03-22 10:40:59.836492"], ["id", 93]]
  â†³ app/services/account/registration_service.rb:63
  [1m[36mConfirmationCode Destroy (0.4ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 63]]
  â†³ app/services/account/registration_service.rb:57
  [1m[35m (36.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 200 OK in 189ms (Views: 0.4ms | ActiveRecord: 58.8ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:41:25 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 72ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-03-22 14:49:02 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 74ms (Views: 0.1ms | ActiveRecord: 4.8ms)


Started GET "/" for 127.0.0.1 at 2021-03-23 00:41:40 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-23 00:41:47 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-23 00:41:47 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-23 00:41:47 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-23 00:41:47 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-23 00:41:48 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:44:09 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:44:59 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:45:00 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-23 00:45:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-23 00:45:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-23 00:45:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-23 00:45:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-23 00:45:02 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-23 00:45:02 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:45:12 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:45:25 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCustomer Load (1.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 114618ms (Views: 0.6ms | ActiveRecord: 19.8ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-23 00:52:22 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-23 00:52:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-23 00:52:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-23 00:52:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-23 00:52:22 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-23 00:52:22 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-23 00:52:41 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-23 00:52:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-23 00:52:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-23 00:52:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-23 00:52:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-23 00:52:43 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:53:37 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 24775ms (ActiveRecord: 6.5ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "user_accounts"
LINE 1: SELECT user_accounts.id, customers.name, user_accounts.activ...
               ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:18:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:54:18 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.1ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "user_accounts"
LINE 1: SELECT user_accounts.id, customers.name, user_accounts.activ...
               ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:54:49 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.8ms)


  
ActiveRecord::ConfigurationError (Can't join 'Customer' to association named 'user_accounts'; perhaps you misspelled it?):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:54:59 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 16ms (ActiveRecord: 6.2ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "user_roles"
LINE 1: ...ser_accounts.active, user_accounts.phone_number,  user_roles...
                                                             ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:55:13 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 14ms (ActiveRecord: 3.1ms)


  
ActiveRecord::ConfigurationError (Can't join 'Customer' to association named 'user_accounts'; perhaps you misspelled it?):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:56:07 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 22ms (ActiveRecord: 6.8ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "user_roles"
LINE 1: ...ser_accounts.active, user_accounts.phone_number,  user_roles...
                                                             ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:56:51 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 16ms (ActiveRecord: 5.2ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "."
LINE 2:                             user_accounts.email, user_accoun...
                                                 ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:57:06 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "."
LINE 2:                             user_accounts.email, user_accoun...
                                                 ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:57:07 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.4ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "."
LINE 2:                             user_accounts.email, user_accoun...
                                                 ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:57:08 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "."
LINE 2:                             user_accounts.email, user_accoun...
                                                 ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:57:09 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "."
LINE 2:                             user_accounts.email, user_accoun...
                                                 ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:17:in `list'
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:57:57 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 39ms (Views: 1.2ms | ActiveRecord: 8.4ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 00:58:04 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 5ms (Views: 1.2ms | ActiveRecord: 0.5ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateMachineModels (20210322210527)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (28.1ms)[0m  [1m[35mCREATE TABLE "machine_models" ("id" bigserial primary key, "name" character varying(150), "id_name" character varying(150))[0m
  â†³ db/migrate/20210322210527_create_machine_models.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210322210527"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateToolModels (20210322210542)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "tool_models" ("id" bigserial primary key, "name" character varying(150), "id_name" character varying(150))[0m
  â†³ db/migrate/20210322210542_create_tool_models.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210322210542"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateExternalResourceTypes (20210322210612)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "external_resource_types" ("id" bigserial primary key, "name" character varying(150), "id_name" character varying(150))[0m
  â†³ db/migrate/20210322210612_create_external_resource_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210322210612"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" ORDER BY "machine_models"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-23 02:00:13 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-23 02:00:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-23 02:00:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-23 02:00:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-23 02:00:13 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-23 02:00:13 +0400
Started POST "/en/settings/machine_model" for 127.0.0.1 at 2021-03-23 02:00:54 +0400
Processing by SettingsController#machine_model as JSON
  Parameters: {"name"=>"BMW", "locale"=>"en", "setting"=>{"name"=>"BMW"}}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/settings/machine_model" for 127.0.0.1 at 2021-03-23 02:01:11 +0400
Processing by SettingsController#machine_model as JSON
  Parameters: {"name"=>"BMW", "locale"=>"en", "setting"=>{"name"=>"BMW"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mMachineModel Load (0.5ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id_name" = $1 ORDER BY "machine_models"."id" ASC LIMIT $2[0m  [["id_name", "bmw"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:51
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:52
  [1m[36mMachineModel Create (0.5ms)[0m  [1m[32mINSERT INTO "machine_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "BMW"], ["id_name", "bmw"]]
  â†³ app/services/settings/models_service.rb:52
  [1m[35m (23.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:52
Completed 200 OK in 38ms (Views: 0.5ms | ActiveRecord: 28.3ms)


Started POST "/en/settings/machine_model" for 127.0.0.1 at 2021-03-23 02:01:28 +0400
Processing by SettingsController#machine_model as JSON
  Parameters: {"name"=>"Opel", "locale"=>"en", "setting"=>{"name"=>"Opel"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id_name" = $1 ORDER BY "machine_models"."id" ASC LIMIT $2[0m  [["id_name", "opel"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:51
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:52
  [1m[36mMachineModel Create (0.2ms)[0m  [1m[32mINSERT INTO "machine_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Opel"], ["id_name", "opel"]]
  â†³ app/services/settings/models_service.rb:52
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:52
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 36.7ms)


Started POST "/en/settings/tool_model" for 127.0.0.1 at 2021-03-23 02:01:41 +0400
Processing by SettingsController#tool_model as JSON
  Parameters: {"name"=>"Cat", "locale"=>"en", "setting"=>{"name"=>"Cat"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mToolModel Load (0.5ms)[0m  [1m[34mSELECT  "tool_models".* FROM "tool_models" WHERE "tool_models"."id_name" = $1 ORDER BY "tool_models"."id" ASC LIMIT $2[0m  [["id_name", "cat"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:57
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:58
  [1m[36mToolModel Create (0.6ms)[0m  [1m[32mINSERT INTO "tool_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Cat"], ["id_name", "cat"]]
  â†³ app/services/settings/models_service.rb:58
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:58
Completed 200 OK in 43ms (Views: 0.4ms | ActiveRecord: 23.5ms)


Started POST "/en/settings/tool_model" for 127.0.0.1 at 2021-03-23 02:01:47 +0400
Processing by SettingsController#tool_model as JSON
  Parameters: {"name"=>"Man", "locale"=>"en", "setting"=>{"name"=>"Man"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mToolModel Load (0.4ms)[0m  [1m[34mSELECT  "tool_models".* FROM "tool_models" WHERE "tool_models"."id_name" = $1 ORDER BY "tool_models"."id" ASC LIMIT $2[0m  [["id_name", "man"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:57
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:58
  [1m[36mToolModel Create (0.3ms)[0m  [1m[32mINSERT INTO "tool_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Man"], ["id_name", "man"]]
  â†³ app/services/settings/models_service.rb:58
  [1m[35m (36.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:58
Completed 200 OK in 42ms (Views: 0.6ms | ActiveRecord: 37.3ms)


Started POST "/en/settings/external_source_type" for 127.0.0.1 at 2021-03-23 02:01:59 +0400
Processing by SettingsController#external_source_type as JSON
  Parameters: {"name"=>"Bosh", "locale"=>"en", "setting"=>{"name"=>"Bosh"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mExternalResourceType Load (1.2ms)[0m  [1m[34mSELECT  "external_resource_types".* FROM "external_resource_types" WHERE "external_resource_types"."id_name" = $1 ORDER BY "external_resource_types"."id" ASC LIMIT $2[0m  [["id_name", "bosh"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:63
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:64
  [1m[36mExternalResourceType Create (1.1ms)[0m  [1m[32mINSERT INTO "external_resource_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Bosh"], ["id_name", "bosh"]]
  â†³ app/services/settings/models_service.rb:64
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:64
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 15.6ms)


Started GET "/en/settings/machine_models" for 127.0.0.1 at 2021-03-23 02:02:07 +0400
Processing by SettingsController#machine_models as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `gsub' for nil:NilClass):
  
app/services/settings/models_service.rb:11:in `initialize'
app/controllers/settings_controller.rb:45:in `new'
app/controllers/settings_controller.rb:45:in `machine_models'
Started GET "/en/settings/machine_models" for 127.0.0.1 at 2021-03-23 02:02:33 +0400
Processing by SettingsController#machine_models as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT "machine_models".* FROM "machine_models"[0m
  â†³ app/services/settings/models_service.rb:39
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.5ms)


Started GET "/en/settings/tool_models" for 127.0.0.1 at 2021-03-23 02:02:46 +0400
Processing by SettingsController#tool_models as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mToolModel Load (0.5ms)[0m  [1m[34mSELECT "tool_models".* FROM "tool_models"[0m
  â†³ app/services/settings/models_service.rb:43
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 5.1ms)


Started GET "/en/settings/external_source_types" for 127.0.0.1 at 2021-03-23 02:02:56 +0400
Processing by SettingsController#external_source_types as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `external_source_types' for #<Settings::ModelsService:0x00007f444824c190>):
  
app/controllers/settings_controller.rb:52:in `external_source_types'
Started GET "/en/settings/external_source_types" for 127.0.0.1 at 2021-03-23 02:03:26 +0400
Processing by SettingsController#external_source_types as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mExternalResourceType Load (0.3ms)[0m  [1m[34mSELECT "external_resource_types".* FROM "external_resource_types"[0m
  â†³ app/services/settings/models_service.rb:47
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 3.1ms)


Started DELETE "/en/settings/destroy_machine_model?id=1" for 127.0.0.1 at 2021-03-23 02:03:35 +0400
Processing by SettingsController#destroy_machine_model as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mMachineModel Load (0.2ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:81
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:82
  [1m[36mMachineModel Destroy (0.3ms)[0m  [1m[31mDELETE FROM "machine_models" WHERE "machine_models"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/models_service.rb:82
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:82
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 8.0ms)


Started DELETE "/en/settings/destroy_tool_model?id=2" for 127.0.0.1 at 2021-03-23 02:03:44 +0400
Processing by SettingsController#destroy_tool_model as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mToolModel Load (0.2ms)[0m  [1m[34mSELECT  "tool_models".* FROM "tool_models" WHERE "tool_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:93
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:94
  [1m[36mToolModel Destroy (0.4ms)[0m  [1m[31mDELETE FROM "tool_models" WHERE "tool_models"."id" = $1[0m  [["id", 2]]
  â†³ app/services/settings/models_service.rb:94
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:94
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 40.3ms)


Started DELETE "/en/settings/destroy_external_source_type?id=1" for 127.0.0.1 at 2021-03-23 02:03:52 +0400
Processing by SettingsController#destroy_external_source_type as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mExternalResourceType Load (0.2ms)[0m  [1m[34mSELECT  "external_resource_types".* FROM "external_resource_types" WHERE "external_resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:87
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:88
  [1m[36mExternalResourceType Destroy (0.3ms)[0m  [1m[31mDELETE FROM "external_resource_types" WHERE "external_resource_types"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/models_service.rb:88
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:88
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 37.0ms)


Started GET "/en/settings/machine_models" for 127.0.0.1 at 2021-03-23 02:04:00 +0400
Processing by SettingsController#machine_models as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT "machine_models".* FROM "machine_models"[0m
  â†³ app/services/settings/models_service.rb:39
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/en/settings/tool_models" for 127.0.0.1 at 2021-03-23 02:04:06 +0400
Processing by SettingsController#tool_models as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mToolModel Load (0.2ms)[0m  [1m[34mSELECT "tool_models".* FROM "tool_models"[0m
  â†³ app/services/settings/models_service.rb:43
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started GET "/en/settings/external_source_types" for 127.0.0.1 at 2021-03-23 02:04:10 +0400
Processing by SettingsController#external_source_types as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mExternalResourceType Load (0.3ms)[0m  [1m[34mSELECT "external_resource_types".* FROM "external_resource_types"[0m
  â†³ app/services/settings/models_service.rb:47
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-03-23 02:15:33 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 33ms (Views: 1.3ms | ActiveRecord: 8.5ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-27 22:47:01 +0400
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-27 22:47:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-27 22:47:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-27 22:47:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-27 22:47:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-27 22:47:04 +0400
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateResourceTypes (20210327191601)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (28.5ms)[0m  [1m[35mCREATE TABLE "resource_types" ("id" bigserial primary key, "name" character varying, "id_name" character varying)[0m
  â†³ db/migrate/20210327191601_create_resource_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210327191601"]]
  â†³ bin/rails:9
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (3.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillResourceTypes (20210327191821)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mResourceType Create (0.6ms)[0m  [1m[32mINSERT INTO "resource_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Machine"], ["id_name", "machine"]]
  â†³ db/migrate/20210327191821_fill_resource_types.rb:3
  [1m[36mResourceType Create (0.3ms)[0m  [1m[32mINSERT INTO "resource_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tool"], ["id_name", "tool"]]
  â†³ db/migrate/20210327191821_fill_resource_types.rb:4
  [1m[36mResourceType Create (0.3ms)[0m  [1m[32mINSERT INTO "resource_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "External Resource"], ["id_name", "external_resource"]]
  â†³ db/migrate/20210327191821_fill_resource_types.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210327191821"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateResources (20210327192543)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (20.1ms)[0m  [1m[35mCREATE TABLE "resources" ("id" bigserial primary key, "resource_type_id" bigint NOT NULL, "models_type" character varying, "models_id" bigint, "name" character varying, "description" character varying, CONSTRAINT "fk_rails_c69d2ac9ba"
FOREIGN KEY ("resource_type_id")
  REFERENCES "resource_types" ("id")
)[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_resources_on_resource_type_id" ON "resources"  ("resource_type_id")[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_resources_on_models_type_and_models_id" ON "resources"  ("models_type", "models_id")[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210327192543"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" ORDER BY "resource_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 00:02:39 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 00:02:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 00:02:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 00:02:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 00:02:40 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 00:02:40 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 00:03:10 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 00:03:10 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 00:03:10 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 00:03:10 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 00:03:10 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 00:03:10 +0400
  [1m[36mMachineModel Load (37.8ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" ORDER BY "machine_models"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMachineModel Load (0.8ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" ORDER BY "machine_models"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:04:58 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (4.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
Completed 500 Internal Server Error in 15954ms (ActiveRecord: 15.3ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'resource_type_id' for Company.):
  
app/services/resources/resources_service.rb:77:in `create_resource_obj'
app/services/resources/resources_service.rb:31:in `create_resource'
app/controllers/resources_controller.rb:10:in `create'
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:05:59 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mMachineModel Load (1.0ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 118618ms (Views: 0.2ms | ActiveRecord: 38.5ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:08:00 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):5
  [1m[36mMachineModel Load (0.7ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mResourceType Load (0.7ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):5
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):6
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):6
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.9ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.7ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 181361ms (Views: 0.9ms | ActiveRecord: 38.6ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:11:05 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):8
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):8
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):8
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 364415ms (Views: 0.2ms | ActiveRecord: 22.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateResources (20210327192543)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.8ms)[0m  [1m[35mDROP TABLE "resources"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210327192543"]]
  â†³ bin/rails:9
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateResources (20210327192543)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "resources" ("id" bigserial primary key, "resource_type_id" bigint NOT NULL, "model_type" character varying, "model_id" bigint, "name" character varying, "description" character varying, CONSTRAINT "fk_rails_c69d2ac9ba"
FOREIGN KEY ("resource_type_id")
  REFERENCES "resource_types" ("id")
)[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_resources_on_resource_type_id" ON "resources"  ("resource_type_id")[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_resources_on_model_type_and_model_id" ON "resources"  ("model_type", "model_id")[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210327192543"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:20:51 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
Completed 500 Internal Server Error in 31480ms (ActiveRecord: 11.3ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'models_type' for Resource.):
  
app/services/resources/resources_service.rb:77:in `create_resource_obj'
app/services/resources/resources_service.rb:31:in `create_resource'
app/controllers/resources_controller.rb:10:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:21:38 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "models_type"=>"MachineModel", "models_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :models_type, :models_id, :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 17493ms (Views: 0.4ms | ActiveRecord: 17.1ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:22:05 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "model_type"=>"MachineModel", "model_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_type"=>"MachineModel", "model_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[36mMachineModel Load (0.4ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):3
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):4
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):4
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.4ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 33737ms (Views: 0.2ms | ActiveRecord: 6.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateResources (20210327192543)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE "resources"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210327192543"]]
  â†³ bin/rails:9
  [1m[35m (36.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateResources (20210327192543)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "resources" ("id" bigserial primary key, "resource_type_id" bigint NOT NULL, "model_on_type" character varying, "model_on_id" bigint, "name" character varying, "description" character varying, CONSTRAINT "fk_rails_c69d2ac9ba"
FOREIGN KEY ("resource_type_id")
  REFERENCES "resource_types" ("id")
)[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_resources_on_resource_type_id" ON "resources"  ("resource_type_id")[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_resources_on_model_on_type_and_model_on_id" ON "resources"  ("model_on_type", "model_on_id")[0m
  â†³ db/migrate/20210327192543_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210327192543"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:24:54 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>1, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mResourceType Load (0.5ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[36mMachineModel Load (1.7ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" ORDER BY "machine_models"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):6
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.2ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 75291ms (Views: 0.2ms | ActiveRecord: 19.9ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:26:16 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"new pipia", "description"=>"this is Fluggengegenxolen", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"new pipia", "description"=>"this is Fluggengegenxolen"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):8
  [1m[36mMachineModel Load (0.8ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):8
  [1m[36mResourceType Load (0.8ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):8
  [1m[36mResource Create (2.4ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "new pipia"], ["description", "this is Fluggengegenxolen"]]
  â†³ (pry):8
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):8
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.2ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.2ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResource Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "new pipia"], ["description", "this is Fluggengegenxolen"]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 406546ms (Views: 0.2ms | ActiveRecord: 22.9ms)


  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 00:34:46 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 00:34:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 00:34:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 00:34:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 00:34:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 00:34:48 +0400
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:35:20 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"kaia kata", "description"=>"maaagari asworebs kata", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"kaia kata", "description"=>"maaagari asworebs kata"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.4ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResource Create (1.1ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "kaia kata"], ["description", "maaagari asworebs kata"]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 5015ms (Views: 0.3ms | ActiveRecord: 24.9ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:35:42 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"kaia kata", "description"=>"maaagari asworebs kata", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"kaia kata", "description"=>"maaagari asworebs kata"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mMachineModel Load (0.9ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mResourceType Load (0.8ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mResource Create (1.1ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "kaia kata"], ["description", "maaagari asworebs kata"]]
  â†³ (pry):2
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):2
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.2ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResource Create (0.5ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "kaia kata"], ["description", "maaagari asworebs kata"]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 19956ms (Views: 0.3ms | ActiveRecord: 43.8ms)


  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:36:48 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"kaia kata", "description"=>"maaagari asworebs kata", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"kaia kata", "description"=>"maaagari asworebs kata"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.4ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResource Create (0.6ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "kaia kata"], ["description", "maaagari asworebs kata"]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 9335ms (Views: 0.3ms | ActiveRecord: 19.2ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:37:23 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"kaia kata", "description"=>"maaagari asworebs kata", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"kaia kata", "description"=>"maaagari asworebs kata"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mMachineModel Load (0.2ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResourceType Load (0.2ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResource Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "kaia kata"], ["description", "maaagari asworebs kata"]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 400 Bad Request in 57010ms (Views: 0.2ms | ActiveRecord: 11.1ms)


Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:38:37 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"kaia kata", "description"=>"maaagari asworebs kata", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"kaia kata", "description"=>"maaagari asworebs kata"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:79
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:79
  [1m[36mCACHE ResourceType Load (0.0ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:79
  [1m[36mResource Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 1], ["model_on_type", "MachineModel"], ["model_on_id", 2], ["name", "kaia kata"], ["description", "maaagari asworebs kata"]]
  â†³ app/services/resources/resources_service.rb:79
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:79
Completed 201 Created in 5473ms (Views: 0.1ms | ActiveRecord: 46.2ms)


  [1m[36mToolModel Load (36.6ms)[0m  [1m[34mSELECT  "tool_models".* FROM "tool_models" ORDER BY "tool_models"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/resources" for 127.0.0.1 at 2021-03-28 00:42:13 +0400
Processing by ResourcesController#create as JSON
  Parameters: {"name"=>"kaia", "description"=>"maaagari  kata", "resource_type_id"=>2, "model_on_type"=>"ToolModel", "model_on_id"=>1, "locale"=>"en", "resource"=>{"resource_type_id"=>2, "model_on_type"=>"ToolModel", "model_on_id"=>1, "name"=>"kaia", "description"=>"maaagari  kata"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mResourceType Load (0.2ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:71
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mToolModel Load (0.3ms)[0m  [1m[34mSELECT  "tool_models".* FROM "tool_models" WHERE "tool_models"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mCACHE ResourceType Load (0.0ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[36mResource Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("resource_type_id", "model_on_type", "model_on_id", "name", "description") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_type_id", 2], ["model_on_type", "ToolModel"], ["model_on_id", 1], ["name", "kaia"], ["description", "maaagari  kata"]]
  â†³ app/services/resources/resources_service.rb:78
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:78
Completed 201 Created in 5836ms (Views: 0.1ms | ActiveRecord: 13.9ms)


  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id"[0m
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = 1[0m
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = 2[0m
  [1m[36mResource Load (1.6ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id[0m
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1[0m  [["model_on_type", "MachibeModel"]]
  [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1[0m  [["model_on_type", "MachineModel"]]
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_type"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_type"."id_name" = $2 LIMIT $3[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["LIMIT", 11]]
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_type"."id_name" = $2 ORDER BY "resources"."id" DESC LIMIT $3[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["LIMIT", 1]]
  [1m[36mResource Load (2.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 ORDER BY "resources"."id" DESC LIMIT $3[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1[0m  [["model_on_type", "MachineModel"]]
  [1m[36mResourceType Load (0.8ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 ORDER BY "resources"."id" DESC LIMIT $3[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["LIMIT", 1]]
  [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.5ms)[0m  [1m[34mSELECT name, description, machine_models.name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  name, description, machine_models.name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 LIMIT $3[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["LIMIT", 11]]
  [1m[36mResource Load (1.5ms)[0m  [1m[34mSELECT name, description, machine_models.name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT name, description FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.6ms)[0m  [1m[34mSELECT name as resource_name, description FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT "resources"."description" FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT resources.name, description FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT id, resources.name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  id, resources.name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 LIMIT $3[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["LIMIT", 11]]
  [1m[36mResource Load (1.6ms)[0m  [1m[34mSELECT id, resources.name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (2.3ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as model_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as machine_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.9ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  [1m[36mResource Load (2.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "machine"]]
  [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  [1m[36mExternalResourceType Load (3.8ms)[0m  [1m[34mSELECT "external_resource_types".* FROM "external_resource_types"[0m
  [1m[36mResourceType Load (1.0ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  [1m[36mResource Load (1.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  [1m[36mResource Load (1.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 01:22:07 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 01:22:07 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 01:22:07 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 01:22:07 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 01:22:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 01:22:07 +0400
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 01:22:20 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:48
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:56
Completed 500 Internal Server Error in 28ms (ActiveRecord: 9.6ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "tool_models"
LINE 1: SELECT resources.id, resources.name, description, tool_model...
                                                          ^
: SELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2):
  
app/services/resources/resources_service.rb:56:in `get_tools'
app/services/resources/resources_service.rb:38:in `resource_list'
app/controllers/resources_controller.rb:16:in `resource_list'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 01:22:38 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:49
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:57
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:66
  [1m[36mResource Load (1.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:35
  [1m[36mResource Load (1.9ms)[0m  [1m[34mSELECT  resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 LIMIT $3[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"], ["LIMIT", 11]]
  â†³ app/services/resources/resources_service.rb:35
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 ORDER BY "resources"."id" DESC LIMIT $3[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:57
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:35
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:49
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:57
Completed 500 Internal Server Error in 119003ms (ActiveRecord: 13.5ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  missing FROM-clause entry for table "tool_models"
LINE 1: SELECT resources.id, resources.name, description, tool_model...
                                                          ^
: SELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2):
  
app/services/resources/resources_service.rb:57:in `get_tools'
app/services/resources/resources_service.rb:39:in `resource_list'
app/controllers/resources_controller.rb:16:in `resource_list'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 01:24:42 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:49
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:57
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:66
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:49
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:57
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:66
Completed 200 OK in 12823ms (Views: 0.3ms | ActiveRecord: 8.6ms)


  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 01:29:49 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 01:29:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 01:29:49 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 01:29:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 01:29:50 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 01:29:50 +0400
Started GET "/en/resources/resource_type_list" for 127.0.0.1 at 2021-03-28 01:30:01 +0400
Processing by ResourcesController#resource_type_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.7ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  â†³ app/services/resources/resources_service.rb:26
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 4.6ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 01:30:23 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 01:30:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 01:30:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 01:30:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 01:30:23 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 01:30:23 +0400
Started GET "/en/resources/resource_type_list" for 127.0.0.1 at 2021-03-28 01:30:35 +0400
Processing by ResourcesController#resource_type_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.9ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  â†³ app/services/resources/resources_service.rb:26
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 7.8ms)


Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 01:30:41 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:56
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:64
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:73
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 5.9ms)


  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 983], ["LIMIT", 1]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 983], ["LIMIT", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 02:48:35 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 02:48:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 02:48:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 02:48:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 02:48:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 02:48:36 +0400
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 02:48:45 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:56
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:64
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:73
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 11.3ms)


Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 02:48:45 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:56
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:64
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:73
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.7ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 02:49:48 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 02:49:48 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 02:49:48 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 02:49:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 02:49:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 02:49:48 +0400
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-28 02:49:57 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:56
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:64
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:73
Completed 200 OK in 31ms (Views: 0.5ms | ActiveRecord: 13.9ms)


Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:50:39 +0400
Processing by ResourcesController#update as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:131
Completed 500 Internal Server Error in 58ms (ActiveRecord: 0.7ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/resources/resources_service.rb:126:in `update_resource_obj'
app/services/resources/resources_service.rb:78:in `update_resource'
app/controllers/resources_controller.rb:28:in `update'
Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:51:04 +0400
Processing by ResourcesController#update as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.2ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:132
Completed 500 Internal Server Error in 24649ms (ActiveRecord: 6.0ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/resources/resources_service.rb:127:in `update_resource_obj'
app/services/resources/resources_service.rb:78:in `update_resource'
app/controllers/resources_controller.rb:29:in `update'
Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:51:42 +0400
Processing by ResourcesController#update as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:132
Completed 500 Internal Server Error in 23508ms (ActiveRecord: 1.4ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/resources/resources_service.rb:127:in `update_resource_obj'
app/services/resources/resources_service.rb:78:in `update_resource'
app/controllers/resources_controller.rb:29:in `update'
Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:53:13 +0400
Processing by ResourcesController#update as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.4ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:132
Completed 500 Internal Server Error in 18631ms (ActiveRecord: 0.8ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/resources/resources_service.rb:127:in `update_resource_obj'
app/services/resources/resources_service.rb:78:in `update_resource'
app/controllers/resources_controller.rb:29:in `update'
Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:53:53 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#update as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.8ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:132
Completed 500 Internal Server Error in 26162ms (ActiveRecord: 5.0ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/resources/resources_service.rb:127:in `update_resource_obj'
app/services/resources/resources_service.rb:78:in `update_resource'
app/controllers/resources_controller.rb:29:in `update'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 02:56:04 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 02:56:04 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 02:56:04 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 02:56:04 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 02:56:05 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 02:56:05 +0400
Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:56:18 +0400
Processing by ResourcesController#update as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (0.6ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:132
Completed 500 Internal Server Error in 24676ms (ActiveRecord: 5.9ms)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/services/resources/resources_service.rb:127:in `update_resource_obj'
app/services/resources/resources_service.rb:78:in `update_resource'
app/controllers/resources_controller.rb:29:in `update'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 02:57:47 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 02:57:47 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 02:57:47 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 02:57:47 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 02:57:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 02:57:49 +0400
Started PUT "/en/resources" for 127.0.0.1 at 2021-03-28 02:57:59 +0400
Processing by ResourcesController#update as JSON
  Parameters: {"id"=>1, "name"=>"kaia chnageebiii", "description"=>"aba description", "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "locale"=>"en", "resource"=>{"id"=>1, "resource_type_id"=>1, "model_on_type"=>"MachineModel", "model_on_id"=>2, "name"=>"kaia chnageebiii", "description"=>"aba description"}}
Unpermitted parameters: :format, :locale, :resource
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:113
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:132
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:127
  [1m[36mMachineModel Load (0.6ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:127
  [1m[36mCACHE ResourceType Load (0.0ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:127
  [1m[36mResource Update (0.5ms)[0m  [1m[33mUPDATE "resources" SET "name" = $1, "description" = $2 WHERE "resources"."id" = $3[0m  [["name", "kaia chnageebiii"], ["description", "aba description"], ["id", 1]]
  â†³ app/services/resources/resources_service.rb:127
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/resources_service.rb:127
Completed 200 OK in 6672ms (Views: 0.2ms | ActiveRecord: 58.5ms)


  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Destroy (36.6ms)[0m  [1m[31mDELETE FROM "resources" WHERE "resources"."id" = $1[0m  [["id", 1]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-28 03:41:27 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-28 03:41:27 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-28 03:41:27 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-28 03:41:27 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-28 03:41:27 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-28 03:41:27 +0400
Started DELETE "/en/resources?id=2" for 127.0.0.1 at 2021-03-28 03:41:39 +0400
Processing by ResourcesController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:130
  [1m[36mResource Destroy (14.0ms)[0m  [1m[31mDELETE FROM "resources" WHERE "resources"."id" = $1[0m  [["id", 2]]
  â†³ app/services/resources/resources_service.rb:88
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/resources_service.rb:89
  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:89
  [1m[36mResourceType Load (0.3ms)[0m  [1m[34mSELECT  "resource_types".* FROM "resource_types" WHERE "resource_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/resources/resources_service.rb:89
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/resources_service.rb:89
Completed 200 OK in 54ms (Views: 0.2ms | ActiveRecord: 26.3ms)


  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-29 22:03:35 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-29 22:03:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-29 22:03:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-29 22:03:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-29 22:03:35 +0400
Started POST "/en/settings/tool_model" for 127.0.0.1 at 2021-03-29 22:04:46 +0400
Processing by SettingsController#tool_model as JSON
  Parameters: {"name"=>"string", "locale"=>"en", "setting"=>{"name"=>"string"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mToolModel Load (2.3ms)[0m  [1m[34mSELECT  "tool_models".* FROM "tool_models" WHERE "tool_models"."id_name" = $1 ORDER BY "tool_models"."id" ASC LIMIT $2[0m  [["id_name", "string"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:57
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:58
  [1m[36mToolModel Create (2.6ms)[0m  [1m[32mINSERT INTO "tool_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "string"], ["id_name", "string"]]
  â†³ app/services/settings/models_service.rb:58
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:58
Completed 200 OK in 38ms (Views: 0.4ms | ActiveRecord: 23.2ms)


Started POST "/en/settings/machine_model" for 127.0.0.1 at 2021-03-29 22:05:19 +0400
Processing by SettingsController#machine_model as JSON
  Parameters: {"name"=>"string", "locale"=>"en", "setting"=>{"name"=>"string"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mMachineModel Load (1.9ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id_name" = $1 ORDER BY "machine_models"."id" ASC LIMIT $2[0m  [["id_name", "string"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:51
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:52
  [1m[36mMachineModel Create (1.0ms)[0m  [1m[32mINSERT INTO "machine_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "string"], ["id_name", "string"]]
  â†³ app/services/settings/models_service.rb:52
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:52
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 8.6ms)


  [1m[36mMachineModel Load (0.3ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" ORDER BY "machine_models"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/resources/resource_type_list" for 127.0.0.1 at 2021-03-29 22:06:20 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#resource_type_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResourceType Load (3.6ms)[0m  [1m[34mSELECT "resource_types".* FROM "resource_types"[0m
  â†³ app/services/resources/resources_service.rb:26
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 7.7ms)


Started GET "/en/settings/machine_models" for 127.0.0.1 at 2021-03-29 22:08:13 +0400
Processing by SettingsController#machine_models as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mMachineModel Load (0.5ms)[0m  [1m[34mSELECT "machine_models".* FROM "machine_models"[0m
  â†³ app/services/settings/models_service.rb:39
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 7.0ms)


Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-29 22:10:25 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (5.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:52
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:60
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:69
Completed 200 OK in 38ms (Views: 0.4ms | ActiveRecord: 11.2ms)


Started GET "/history/orders" for 127.0.0.1 at 2021-03-29 23:39:31 +0400
Processing by OrdersController#show as JSON
  Parameters: {"locale"=>"history"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("history" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
Started GET "/markets/ethbtc" for 127.0.0.1 at 2021-03-30 01:48:50 +0400
  
ActionController::RoutingError (No route matches [GET] "/markets/ethbtc"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2021-03-30 01:48:50 +0400
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[36mProductImage Load (3.5ms)[0m  [1m[34mSELECT  "product_images".* FROM "product_images" ORDER BY "product_images"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateAttachments (20210329215315)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE "attachments" ("id" bigserial primary key, "attached_on_type" character varying, "attached_on_id" bigint, "file" character varying(50), "uuid" uuid NOT NULL, "exp_date" timestamp, "is_active" boolean DEFAULT TRUE NOT NULL)[0m
  â†³ db/migrate/20210329215315_create_attachments.rb:3
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_attachments_on_attached_on_type_and_attached_on_id" ON "attachments"  ("attached_on_type", "attached_on_id")[0m
  â†³ db/migrate/20210329215315_create_attachments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210329215315"]]
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 02:18:44 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 02:18:44 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 02:18:44 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 02:18:44 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 02:18:44 +0400
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-30 02:21:46 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)


  
ArgumentError (Unknown key: :polymorphic. Valid keys are: :class_name, :anonymous_class, :foreign_key, :validate, :autosave, :table_name, :before_add, :after_add, :before_remove, :after_remove, :extend, :primary_key, :dependent, :as, :through, :source, :source_type, :inverse_of, :counter_cache, :join_table, :foreign_type, :index_errors):
  
app/models/resource.rb:9:in `<class:Resource>'
app/models/resource.rb:1:in `<main>'
app/services/resources/resources_service.rb:48:in `get_models'
app/services/resources/resources_service.rb:37:in `resource_list'
app/controllers/resources_controller.rb:16:in `resource_list'
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-03-30 02:24:35 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:52
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:60
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:69
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 12.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 02:26:28 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 02:26:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 02:26:28 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 02:26:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 02:26:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 02:26:33 +0400
Started POST "/en/attachment" for 127.0.0.1 at 2021-03-30 02:26:53 +0400
  
ActionController::RoutingError (No route matches [POST] "/en/attachment"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 02:27:51 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 02:27:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 02:27:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 02:27:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 02:27:52 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 02:27:52 +0400
Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:28:17 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x000055d8c4ef54a0 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-14582-1gzehuw.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 73865ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant Resources::AttachmentsService):
  
app/controllers/attachments_controller.rb:10:in `create'
Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:30:02 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff2040516a0 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-14582-r262fa.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "locale"=>"en"}
Completed 500 Internal Server Error in 154104ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant Resources::AttachmentsService):
  
app/controllers/attachments_controller.rb:10:in `create'
Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:32:40 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x000055d8c96955f8 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-14582-12xoxxy.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 201 Created in 49436ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:33:45 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff21c48e548 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-14582-1i5cdfa.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 400 Bad Request in 44105ms (Views: 0.4ms | ActiveRecord: 7.8ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:35:34 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff21c3bb120 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-14582-13noa1w.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 400 Bad Request in 10273ms (Views: 0.2ms | ActiveRecord: 0.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 02:35:55 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 02:35:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 02:35:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 02:35:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 02:35:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 02:35:55 +0400
Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:36:17 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f66940fdd98 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-16864-7iit0y.pdf>, @original_filename="Anzor Urdia CV-2.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV-2.pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 400 Bad Request in 23943ms (Views: 0.3ms | ActiveRecord: 5.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 02:37:07 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 02:37:07 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 02:37:07 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 02:37:07 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 02:37:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 02:37:07 +0400
Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:37:32 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f476c0fff68 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-17986-1i75wki.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/2/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 400 Bad Request in 71748ms (Views: 0.5ms | ActiveRecord: 11.7ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:39:04 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f47741de698 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-17986-1kg1pj9.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/2/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 400 Bad Request in 4428ms (Views: 0.3ms | ActiveRecord: 6.3ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:39:13 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f476c02e940 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-17986-xuhai.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/2/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):6
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):6
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 400 Bad Request in 38061ms (Views: 0.2ms | ActiveRecord: 1.1ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:51:59 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f0aec358240 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-25908-11y7nyn.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/2/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 500 Internal Server Error in 43525ms (ActiveRecord: 10.3ms)


  
NoMethodError (undefined method `image_changed?' for #<Attachment:0x00007f0aed11a590>):
  
app/models/attachment.rb:10:in `refresh_uuid'
app/services/resources/attachments_service.rb:16:in `create_file'
app/controllers/attachments_controller.rb:11:in `create'
Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:52:46 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f0aec82c708 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-25908-ssx5ec.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/2/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):4
  [1m[36mAttachment Create (2.0ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Resource"], ["attached_on_id", 3], ["file", "Anzor_Urdia_CV__1_.pdf"], ["uuid", "26ec2d21-8775-48c5-b1de-0e74b0f8e2db"], ["exp_date", "2021-02-23 00:00:00"]]
  â†³ (pry):4
  [1m[35m (31.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):4
  [1m[36mAttachment Load (0.8ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):5
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:16
  [1m[36mAttachment Create (0.4ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Resource"], ["attached_on_id", 3], ["file", "Anzor_Urdia_CV__1_.pdf"], ["uuid", "98738aef-6500-4925-b8e4-ad2594146f3d"], ["exp_date", "2021-02-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:16
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:16
Completed 201 Created in 44753ms (Views: 0.1ms | ActiveRecord: 44.7ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 02:54:48 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00005651e561bab0 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-25908-v0xiku.pdf>, @original_filename="Anzor Urdia CV (1).pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV (1).pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/2/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:20
  [1m[36mAttachment Create (0.3ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Resource"], ["attached_on_id", 3], ["file", "Anzor_Urdia_CV__1_.pdf"], ["uuid", "066ac5b0-ef88-45c4-a860-91847e297f17"], ["exp_date", "2021-02-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:20
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:20
Completed 201 Created in 2996ms (Views: 0.1ms | ActiveRecord: 7.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 03:02:34 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 03:02:34 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 03:02:34 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 03:02:34 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 03:02:34 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 03:02:34 +0400
  [1m[36mAttachment Load (1.2ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/attachment/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:02:56 +0400
  
ActionController::RoutingError (uninitialized constant AttachmentController):
  
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `block in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `rescue in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:56:in `load_missing_constant'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/attachment/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:03:11 +0400
  
ActionController::RoutingError (uninitialized constant AttachmentController):
  
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `block in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `rescue in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:56:in `load_missing_constant'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 03:05:05 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 03:05:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 03:05:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 03:05:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 03:05:08 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 03:05:08 +0400
Started GET "/en/attachment/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:05:15 +0400
  
ActionController::RoutingError (uninitialized constant AttachmentController):
  
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `block in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `rescue in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:56:in `load_missing_constant'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-30 03:06:16 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-30 03:06:16 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-30 03:06:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-30 03:06:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-30 03:06:16 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-30 03:06:16 +0400
Started GET "/en/attachments/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:06:22 +0400
  
AbstractController::ActionNotFound (The action 'file' could not be found for AttachmentsController):
  
actionpack (5.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/attachments/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:06:48 +0400
Processing by AttachmentsController#show_file as JSON
  Parameters: {"uuid"=>"066ac5b0-ef88-45c4-a860-91847e297f17", "locale"=>"en"}
Unpermitted parameters: :uuid, :format, :locale
  [1m[36mAttachment Load (1.2ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
  [1m[36mCACHE Attachment Load (0.1ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
Completed 400 Bad Request in 35359ms (Views: 0.2ms | ActiveRecord: 8.6ms)


Started GET "/en/attachments/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:07:26 +0400
Processing by AttachmentsController#show_file as JSON
  Parameters: {"uuid"=>"066ac5b0-ef88-45c4-a860-91847e297f17", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" = $1 LIMIT $2[0m  [["uuid", "066ac5b0-ef88-45c4-a860-91847e297f17"], ["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" = $1 LIMIT $2[0m  [["uuid", "066ac5b0-ef88-45c4-a860-91847e297f17"], ["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
Completed 500 Internal Server Error in 10726ms (ActiveRecord: 7.8ms)


  
NameError (undefined local variable or method `file' for #<Resources::AttachmentsService:0x00007fd600320950>):
  
app/services/resources/attachments_service.rb:34:in `read_file'
app/controllers/attachments_controller.rb:17:in `show_file'
Started GET "/en/attachments/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:08:17 +0400
Processing by AttachmentsController#show_file as JSON
  Parameters: {"uuid"=>"066ac5b0-ef88-45c4-a860-91847e297f17", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.2ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" = $1 LIMIT $2[0m  [["uuid", "066ac5b0-ef88-45c4-a860-91847e297f17"], ["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
Completed 500 Internal Server Error in 2627ms (ActiveRecord: 3.9ms)


  
NameError (undefined local variable or method `file' for #<Resources::AttachmentsService:0x00007fd5e403c660>):
  
app/services/resources/attachments_service.rb:34:in `read_file'
app/controllers/attachments_controller.rb:17:in `show_file'
Started GET "/en/attachments/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:08:32 +0400
Processing by AttachmentsController#show_file as JSON
  Parameters: {"uuid"=>"066ac5b0-ef88-45c4-a860-91847e297f17", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" = $1 LIMIT $2[0m  [["uuid", "066ac5b0-ef88-45c4-a860-91847e297f17"], ["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
Completed 500 Internal Server Error in 50546ms (ActiveRecord: 4.0ms)


  
NameError (undefined local variable or method `file' for #<Resources::AttachmentsService:0x00007fd5f40664a0>):
  
app/services/resources/attachments_service.rb:34:in `read_file'
app/controllers/attachments_controller.rb:17:in `show_file'
Started GET "/en/attachments/file?uuid=066ac5b0-ef88-45c4-a860-91847e297f17" for 127.0.0.1 at 2021-03-30 03:09:26 +0400
Processing by AttachmentsController#show_file as JSON
  Parameters: {"uuid"=>"066ac5b0-ef88-45c4-a860-91847e297f17", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" WHERE "attachments"."uuid" = $1 LIMIT $2[0m  [["uuid", "066ac5b0-ef88-45c4-a860-91847e297f17"], ["LIMIT", 1]]
  â†³ app/services/resources/attachments_service.rb:55
Sent data Anzor_Urdia_CV__1_.pdf (0.7ms)
Completed 200 OK in 8853ms (Views: 0.2ms | ActiveRecord: 5.7ms)


Started POST "/en/attachments" for 127.0.0.1 at 2021-03-30 03:10:50 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x000056096cc89008 @tempfile=#<Tempfile:/tmp/RackMultipart20210330-31540-z6em4t.pdf>, @original_filename="Anzor Urdia CV -1.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Anzor Urdia CV -1.pdf\"\r\nContent-Type: application/pdf\r\n">, "attached_on_id"=>"3", "attached_on_type"=>"Resource", "exp_date"=>"23/11/2025", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:20
  [1m[36mAttachment Create (0.5ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Resource"], ["attached_on_id", 3], ["file", "Anzor_Urdia_CV_-1.pdf"], ["uuid", "4d3c01aa-f81d-4776-9925-94b82b7524c5"], ["exp_date", "2025-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:20
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:20
Completed 201 Created in 5207ms (Views: 0.1ms | ActiveRecord: 5.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-03-31 14:23:44 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-03-31 14:23:44 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-03-31 14:23:44 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-03-31 14:23:44 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-03-31 14:23:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-03-31 14:23:44 +0400
Started POST "/en/settings/machine_model" for 127.0.0.1 at 2021-03-31 14:23:59 +0400
Processing by SettingsController#machine_model as JSON
  Parameters: {"name"=>"buka", "locale"=>"en", "setting"=>{"name"=>"buka"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mMachineModel Load (0.6ms)[0m  [1m[34mSELECT  "machine_models".* FROM "machine_models" WHERE "machine_models"."id_name" = $1 ORDER BY "machine_models"."id" ASC LIMIT $2[0m  [["id_name", "buka"], ["LIMIT", 1]]
  â†³ app/services/settings/models_service.rb:51
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/models_service.rb:52
  [1m[36mMachineModel Create (0.3ms)[0m  [1m[32mINSERT INTO "machine_models" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "buka"], ["id_name", "buka"]]
  â†³ app/services/settings/models_service.rb:52
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/models_service.rb:52
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 6.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 16:10:04 +0400
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 16:10:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 16:10:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 16:10:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 16:10:05 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 16:10:05 +0400
  [1m[36mResource Load (1.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAttachment Load (1.9ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments"[0m
  [1m[36mAttachment Load (0.9ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attached_on_type" = $1 AND "attachments"."attached_on_id" = $2[0m  [["attached_on_type", "Resource"], ["attached_on_id", 3]]
  [1m[36mAttachment Load (1.3ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE "attachments"."attached_on_type" = $1 AND "attachments"."attached_on_id" = $2[0m  [["attached_on_type", "Resource"], ["attached_on_id", 3]]
  [1m[36mUserAccount Load (8.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 16:45:54 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 16:45:54 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 16:45:54 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 16:45:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 16:45:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 16:45:54 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 16:46:45 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 16:46:45 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 16:46:45 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 16:46:45 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 16:46:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 16:46:48 +0400
Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 16:46:59 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (2.8ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type == :attached_type) AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:34
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT  file, uuid FROM "attachments" WHERE (attached_on_type == :attached_type) AND "attachments"."is_active" = $1 LIMIT $2[0m  [["is_active", true], ["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:34
  [1m[36mAttachment Load (0.7ms)[0m  [1m[34mSELECT  file, uuid FROM "attachments" WHERE (attached_on_type == :attached_type) AND "attachments"."is_active" = $1 ORDER BY "attachments"."id" DESC LIMIT $2[0m  [["is_active", true], ["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mAttachment Load (1.3ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type == 'Resource')[0m
  â†³ app/services/resources/attachments_service.rb:34
  [1m[36mAttachment Load (1.4ms)[0m  [1m[34mSELECT  file, uuid FROM "attachments" WHERE (attached_on_type == 'Resource') LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:34
  [1m[36mAttachment Load (1.1ms)[0m  [1m[34mSELECT  file, uuid FROM "attachments" WHERE (attached_on_type == 'Resource') ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):7
  [1m[36mAttachment Load (3.3ms)[0m  [1m[34mSELECT  file, uuid FROM "attachments" WHERE (attached_on_type = 'Resource') ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):8
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type = 'Resource')[0m
  â†³ app/services/resources/attachments_service.rb:34
Completed 200 OK in 185738ms (Views: 0.3ms | ActiveRecord: 24.0ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 16:50:08 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.9ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:34
Completed 200 OK in 43696ms (Views: 0.2ms | ActiveRecord: 16.3ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 16:52:21 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.2ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:41
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 79062ms (Views: 0.3ms | ActiveRecord: 11.0ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 16:53:44 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:38
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file, uuid FROM "attachments" WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 163711ms (Views: 0.3ms | ActiveRecord: 0.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 16:56:40 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 16:56:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 16:56:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 16:56:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 16:56:40 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 16:56:40 +0400
Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 16:56:51 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (2.1ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 3827ms (Views: 0.4ms | ActiveRecord: 13.6ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=1" for 127.0.0.1 at 2021-04-03 16:57:19 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" WHERE (attached_on_type = 'Resource' AND attached_on_id = '1') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 3211ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=3" for 127.0.0.1 at 2021-04-03 16:57:31 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 3050ms (Views: 0.3ms | ActiveRecord: 0.4ms)


  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAttachment Load (0.7ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments" LEFT JOIN resources ON attachemnts.attched_on_type = Resource[0m
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" LEFT JOIN resources ON attachemnts.attched_on_type = Resource LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mAttachment Load (1.3ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" LEFT JOIN resources ON attachemnts.attched_on_type = Resource ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT Resource as type, model_on_type as type_on, name FROM "resources"[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  Resource as type, model_on_type as type_on, name FROM "resources" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  Resource as type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "Resource" as type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "buka" as type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  'buka' as type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  'Resource' as type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  'Resource' as type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  'Resource' as pol_type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  'Resource' as pol_type, model_on_type as type_on, name FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (35.7ms)[0m  [1m[34mSELECT  first_name FROM "user_accounts"[0m
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  concat(first_name, " ", last_name) FROM "user_accounts"[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT   concat(first_name, " ", last_name) FROM "user_accounts" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  concat(first_name, " ", last_name) as name FROM "user_accounts"[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT   concat(first_name, " ", last_name) as name FROM "user_accounts" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  concat(first_name, " ", last_name) as name FROM "user_accounts"[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT concat(first_name, last_name) as name FROM "user_accounts"[0m
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT concat(first_name, , last_name) as name FROM "user_accounts"[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT concat(first_name, ' ', last_name) as name FROM "user_accounts"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 17:39:14 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 17:39:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 17:39:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 17:39:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 17:39:17 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 17:39:17 +0400
Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 17:39:29 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources"[0m
  â†³ app/services/resources/attachments_service.rb:41
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" JOIN (#<Resource::ActiveRecord_Relation:0x00007f04a0b03b68> UNION #<UserAccount::ActiveRecord_Relation:0x00007f04a0bbf1d8>) attached_obj ON attached_obj.pol_type = attachment.attached_type[0m
  â†³ app/services/resources/attachments_service.rb:41
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (#<Resource::ActiveRecord_Relation:0x00007f04a0b03b68> UNION #<UserAccount::ActiveRecord_Relation:0x00007f04a0bbf1d8>) attached_obj ON attached_obj.pol_type = attachment.attached_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:41
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (#<Resource::ActiveRecord_Relation:0x00007f04a0b03b68> UNION #<UserAccount::ActiveRecord_Relation:0x00007f04a0bbf1d8>) attached_obj ON attached_obj.pol_type = attachment.attached_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" JOIN (#<Resource::ActiveRecord_Relation:0x00007f04a0b03b68> UNION #<UserAccount::ActiveRecord_Relation:0x00007f04a0bbf1d8>) attached_obj ON attached_obj.type = attachment.attached_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 500 Internal Server Error in 105445ms (ActiveRecord: 7.8ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "#<"
LINE 1: ...ELECT file as name, uuid FROM "attachments" JOIN (#<Resource...
                                                             ^
: SELECT file as name, uuid FROM "attachments" JOIN (#<Resource::ActiveRecord_Relation:0x00007f04a0b03b68> UNION #<UserAccount::ActiveRecord_Relation:0x00007f04a0bbf1d8>) attached_obj ON attached_obj.type = attachment.attached_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1):
  
app/services/resources/attachments_service.rb:18:in `get_files_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/attachments_controller.rb:27:in `get_files'
Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 17:41:44 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachment.attached_type[0m
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachment.attached_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachment.attached_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):7
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_type_on ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):8
  [1m[36mAttachment Load (0.8ms)[0m  [1m[34mSELECT  file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):10
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):12
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT pol_type, type_on, name, file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):13
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):14
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):15
  [1m[35m (38.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "attachments"[0m
  â†³ (pry):16
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):17
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):18
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):19
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):20
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.type = attachment.attached_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 500 Internal Server Error in 426375ms (ActiveRecord: 49.5ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column attached_obj.type does not exist
LINE 1: ...me) as name FROM "user_accounts") attached_obj ON attached_o...
                                                             ^
: SELECT file as name, uuid FROM "attachments" JOIN (SELECT 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.type = attachment.attached_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1):
  
app/services/resources/attachments_service.rb:18:in `get_files_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/attachments_controller.rb:27:in `get_files'
Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 17:50:01 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):22
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):24
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:18
Completed 500 Internal Server Error in 111010ms (ActiveRecord: 7.4ms)


  
ActiveRecord::StatementInvalid (PG::AmbiguousColumn: ERROR:  column reference "id" is ambiguous
LINE 1: SELECT id, pol_type, type_on, name, file as file_name, uuid ...
               ^
: SELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type):
  
app/services/resources/attachments_service.rb:18:in `get_files_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/attachments_controller.rb:27:in `get_files'
Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 17:52:29 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):25
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):26
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):27
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):28
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pot_type[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pot_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pot_type ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):31
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):33
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):38
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type.id[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type.id LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (38.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type[0m
  â†³ (pry):42
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type, id[0m
  â†³ (pry):43
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type, id, type_on[0m
  â†³ (pry):44
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type, id, type_on, name[0m
  â†³ (pry):45
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type, id, type_on, name[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY pol_type, id, type_on, name[0m
  â†³ (pry):47
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY attached_obj.pol_type[0m
  â†³ (pry):48
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY attachments.attached_on_type[0m
  â†³ (pry):49
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type GROUP BY attached_obj.pol_type[0m
  â†³ (pry):50
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):51
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:46
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):53
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):54
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:46
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ (pry):56
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type[0m
  â†³ app/services/resources/attachments_service.rb:18
Completed 500 Internal Server Error in 886200ms (ActiveRecord: 55.2ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column attached_obj.id does not exist
LINE 1: ...me) as name FROM "user_accounts") attached_obj ON attached_o...
                                                             ^
: SELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type):
  
app/services/resources/attachments_service.rb:18:in `get_files_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/attachments_controller.rb:27:in `get_files'
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/attachments" for 127.0.0.1 at 2021-04-03 19:00:52 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb63c292508 @tempfile=#<Tempfile:/tmp/RackMultipart20210403-10932-5y96f.jpg>, @original_filename="85254223_1615584078588643_3075149785972342784_n.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"85254223_1615584078588643_3075149785972342784_n.jpg\"\r\nContent-Type: image/jpeg\r\n">, "attached_on_id"=>"9", "attached_on_type"=>"Resource", "exp_date"=>"23/11/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:23
  [1m[36mAttachment Create (0.7ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Resource"], ["attached_on_id", 9], ["file", "85254223_1615584078588643_3075149785972342784_n.jpg"], ["uuid", "06b45643-2d1b-47b2-8e33-ef6f39ea3862"], ["exp_date", "2021-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:23
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/resources/attachments_service.rb:23
Completed 500 Internal Server Error in 18ms (ActiveRecord: 4.6ms)


  
ActiveRecord::ValueTooLong (PG::StringDataRightTruncation: ERROR:  value too long for type character varying(50)
: INSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/resources/attachments_service.rb:23:in `create_file'
app/controllers/attachments_controller.rb:10:in `create'
Started POST "/en/attachments" for 127.0.0.1 at 2021-04-03 19:01:19 +0400
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb638095b00 @tempfile=#<Tempfile:/tmp/RackMultipart20210403-10932-17gkdiw.jpg>, @original_filename="snakkmed_001.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"snakkmed_001.jpg\"\r\nContent-Type: image/jpeg\r\n">, "attached_on_id"=>"9", "attached_on_type"=>"Resource", "exp_date"=>"23/11/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:23
  [1m[36mAttachment Create (41.0ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Resource"], ["attached_on_id", 9], ["file", "snakkmed_001.jpg"], ["uuid", "0188b143-c9a2-4144-a1fc-b6de37baa529"], ["exp_date", "2021-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:23
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:23
Completed 201 Created in 48ms (Views: 0.1ms | ActiveRecord: 44.1ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 19:01:30 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):2
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 79946ms (Views: 0.2ms | ActiveRecord: 3.9ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&model_on_type=ToolModel" for 127.0.0.1 at 2021-04-03 19:02:59 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "model_on_type"=>"ToolModel", "locale"=>"en"}
Unpermitted parameters: :model_on_type, :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):4
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 37080ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&model_on_type=ToolModel" for 127.0.0.1 at 2021-04-03 19:03:38 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "model_on_type"=>"ToolModel", "locale"=>"en"}
Unpermitted parameters: :model_on_type, :format, :locale
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources"[0m
  â†³ app/services/resources/attachments_service.rb:55
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 42623ms (Views: 0.3ms | ActiveRecord: 23.4ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&model_on_type=ToolModel" for 127.0.0.1 at 2021-04-03 19:04:25 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "model_on_type"=>"ToolModel", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE ("model_on_type = :model_type_on", model_type_on: @file_params[:model_on_type])[0m
  â†³ app/services/resources/attachments_service.rb:55
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE ("model_on_type = :model_type_on", model_type_on: @file_params[:model_on_type]) LIMIT $1[0m  [["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:55
  [1m[36mResource Load (30.5ms)[0m  [1m[34mSELECT  id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE ("model_on_type = :model_type_on", model_type_on: @file_params[:model_on_type]) ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):8
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE ("model_on_type = :model_type_on", model_type_on: @file_params[:model_on_type]) UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 500 Internal Server Error in 60076ms (ActiveRecord: 36.4ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near ":"
LINE 1: ...E ("model_on_type = :model_type_on", model_type_on: @file_pa...
                                                             ^
: SELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE ("model_on_type = :model_type_on", model_type_on: @file_params[:model_on_type]) UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1):
  
app/services/resources/attachments_service.rb:18:in `get_files_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/attachments_controller.rb:27:in `get_files'
Started GET "/en/attachments/get_files?attached_on_type=Resource&model_on_type=ToolModel" for 127.0.0.1 at 2021-04-03 19:05:47 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "model_on_type"=>"ToolModel", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'ToolModel')[0m
  â†³ app/services/resources/attachments_service.rb:55
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'ToolModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 18522ms (Views: 0.1ms | ActiveRecord: 6.9ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&model_on_type=ToolModel" for 127.0.0.1 at 2021-04-03 19:06:38 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "model_on_type"=>"ToolModel", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.4ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'ToolModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:45
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'ToolModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):12
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'ToolModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 44374ms (Views: 0.1ms | ActiveRecord: 5.4ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/attachments" for 127.0.0.1 at 2021-04-03 19:10:13 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f27502be750 @tempfile=#<Tempfile:/tmp/RackMultipart20210403-13145-inszqw.png>, @original_filename="Exchnage.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Exchnage.png\"\r\nContent-Type: image/png\r\n">, "attached_on_id"=>"9", "attached_on_type"=>"UserAccount", "exp_date"=>"23/11/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:23
  [1m[36mAttachment Create (0.7ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "UserAccount"], ["attached_on_id", 9], ["file", "Exchnage.png"], ["uuid", "dc1c11dc-99d4-48cf-88ef-c102f3503162"], ["exp_date", "2021-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:23
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:23
Completed 201 Created in 52ms (Views: 0.2ms | ActiveRecord: 40.6ms)


Started GET "/en/attachments/get_files?attached_on_type=UserAccount" for 127.0.0.1 at 2021-04-03 19:10:29 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"UserAccount", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'UserAccount') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:45
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'UserAccount') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):2
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'UserAccount') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 65937ms (Views: 0.1ms | ActiveRecord: 3.6ms)


  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 19:14:11 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 19:14:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 19:14:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 19:14:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 19:14:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 19:14:11 +0400
Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 19:14:28 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.1ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:45
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):2
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 139071ms (Views: 0.3ms | ActiveRecord: 8.8ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=3" for 127.0.0.1 at 2021-04-03 19:17:25 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:45
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):4
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 123114ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started GET "/en/attachments/get_files?model_on_type=MachineModel" for 127.0.0.1 at 2021-04-03 19:19:42 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"model_on_type"=>"MachineModel", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'MachineModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:45
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'MachineModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):6
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" WHERE (model_on_type = 'MachineModel') UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 122060ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:01:03 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 16412ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 23:01:59 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 9.4ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=3" for 127.0.0.1 at 2021-04-03 23:02:08 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=4" for 127.0.0.1 at 2021-04-03 23:02:13 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '4') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=3" for 127.0.0.1 at 2021-04-03 23:02:18 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:08:21 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.7ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):8
  [1m[36mAttachment Load (1.2ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1 ORDER BY "attachments"."id" DESC LIMIT $2[0m  [["is_active", true], ["LIMIT", 1]]
  â†³ (pry):9
  [1m[36mAttachment Load (0.9ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1 GROUP BY "pol_type"[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT  id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1 GROUP BY "pol_type" LIMIT $2[0m  [["is_active", true], ["LIMIT", 11]]
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1 GROUP BY "pol_type"[0m  [["is_active", true]]
  â†³ (pry):12
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):15
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):17
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):18
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):19
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):20
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):21
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):22
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):23
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):24
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):25
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:44
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):27
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):28
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):29
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):30
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):34
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):38
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):40
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):41
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):42
  [1m[36mCACHE Attachment Load (0.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:18
Completed 200 OK in 1087417ms (Views: 0.3ms | ActiveRecord: 17.4ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:26:42 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:52
Completed 500 Internal Server Error in 8305ms (ActiveRecord: 6.0ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/resources/attachments_service.rb:52:in `files'
app/controllers/attachments_controller.rb:26:in `get_files'
Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:26:57 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.8ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ (pry):57
Completed 500 Internal Server Error in 46484ms (ActiveRecord: 0.8ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/resources/attachments_service.rb:52:in `files'
app/controllers/attachments_controller.rb:26:in `get_files'
Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:27:46 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 500 Internal Server Error in 23430ms (ActiveRecord: 7.0ms)


  
NoMethodError (undefined method `type_on' for #<Array:0x000055e7713a97c0>):
  
app/services/resources/attachments_service.rb:53:in `block in files'
app/services/resources/attachments_service.rb:53:in `each'
app/services/resources/attachments_service.rb:53:in `group_by'
app/services/resources/attachments_service.rb:53:in `files'
app/controllers/attachments_controller.rb:26:in `get_files'
Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:28:18 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 598017ms (Views: 0.1ms | ActiveRecord: 0.6ms)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-03 23:38:51 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-03 23:38:51 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-03 23:38:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-03 23:38:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-03 23:38:52 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-03 23:38:52 +0400
Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-03 23:38:58 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.2ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 7780ms (Views: 0.3ms | ActiveRecord: 8.5ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=5" for 127.0.0.1 at 2021-04-03 23:39:54 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.7ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '5') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 500 Internal Server Error in 2971ms (ActiveRecord: 0.7ms)


  
NoMethodError (undefined method `group_by' for nil:NilClass):
  
app/services/resources/attachments_service.rb:53:in `files'
app/controllers/attachments_controller.rb:26:in `get_files'
Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=5" for 127.0.0.1 at 2021-04-03 23:40:29 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '5') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 3445ms (Views: 0.1ms | ActiveRecord: 3.9ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 23:40:48 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 3641ms (Views: 0.4ms | ActiveRecord: 2.4ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=5" for 127.0.0.1 at 2021-04-03 23:41:15 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '5') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 3562ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=5" for 127.0.0.1 at 2021-04-03 23:41:25 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '5') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT  "attachments".* FROM "attachments" ORDER BY "attachments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attached_on_id" = $1[0m  [["attached_on_id", 5]]
  â†³ app/services/resources/attachments_service.rb:51
Completed 200 OK in 49854ms (Views: 0.1ms | ActiveRecord: 1.2ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 23:42:21 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 4232ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=4" for 127.0.0.1 at 2021-04-03 23:43:00 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.5ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '4') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
  [1m[36mAttachment Load (0.3ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments"[0m
  â†³ app/services/resources/attachments_service.rb:56
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):6
Completed 200 OK in 45391ms (Views: 0.1ms | ActiveRecord: 2.8ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource" for 127.0.0.1 at 2021-04-03 23:43:54 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.7ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 6101ms (Views: 0.3ms | ActiveRecord: 0.7ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=3" for 127.0.0.1 at 2021-04-03 23:44:22 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.6ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '3') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 5843ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=9" for 127.0.0.1 at 2021-04-03 23:44:39 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.9ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '9') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 3318ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started GET "/en/attachments/get_files?attached_on_type=Resource&attached_on_id=9" for 127.0.0.1 at 2021-04-03 23:46:08 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"attached_on_type"=>"Resource", "attached_on_id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (0.9ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE (attached_on_type = 'Resource' AND attached_on_id = '9') AND "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:50
Completed 200 OK in 50ms (Views: 0.4ms | ActiveRecord: 11.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-06 21:41:45 +0400
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-06 21:41:45 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-06 21:41:45 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-06 21:41:45 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-06 21:41:46 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-04-06 21:41:58 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (3.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 234ms (Views: 0.2ms | ActiveRecord: 33.7ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2021-04-06 21:42:22 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/users_controller.rb:9:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2021-04-06 21:43:12 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/users_controller.rb:9:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2021-04-06 21:43:14 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/users_controller.rb:9:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2021-04-06 21:43:23 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (4.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (2.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 500 Internal Server Error in 3849ms (ActiveRecord: 25.5ms)


  
NoMethodError (undefined method `product_group_permission' for #<RoleGroup:0x00007f1ff4261c20>):
  
app/services/account/current_user_service.rb:15:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:11:in `current_user'
Started GET "/en/users/current_user" for 127.0.0.1 at 2021-04-06 21:44:35 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 16], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 3766ms (Views: 0.2ms | ActiveRecord: 20.4ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/auth" for 127.0.0.1 at 2021-04-06 21:45:32 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 78ms (Views: 0.2ms | ActiveRecord: 4.7ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2021-04-06 21:45:45 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:6
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 3657ms (Views: 0.2ms | ActiveRecord: 2.6ms)


  [1m[36mCountryPhoneIndex Load (2.8ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" ORDER BY "country_phone_indices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountryPhoneIndex Load (0.3ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" ORDER BY "country_phone_indices"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountryPhoneIndex Load (0.5ms)[0m  [1m[34mSELECT  "country_phone_indices".* FROM "country_phone_indices" ORDER BY "country_phone_indices"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/users/list" for 127.0.0.1 at 2021-04-06 22:27:31 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (6.2ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 98ms (Views: 1.7ms | ActiveRecord: 15.9ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 17:08:38 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 17:08:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 17:08:39 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 17:08:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 17:08:40 +0400
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProjects (20210410131727)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (36.6ms)[0m  [1m[35mCREATE TABLE "projects" ("id" bigserial primary key, "title" character varying, "description" character varying, "project_id" character varying, "address" character varying, "post_number" character varying, "contact_person" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20210410131727_create_projects.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210410131727"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (5.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProjects (20210410131727)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (9.5ms)[0m  [1m[35mDROP TABLE "projects"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210410131727"]]
  â†³ bin/rails:9
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateAttachments (20210329215315)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "attachments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210329215315"]]
  â†³ bin/rails:9
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateAttachments (20210329215315)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "attachments" ("id" bigserial primary key, "attached_on_type" character varying, "attached_on_id" bigint, "file" character varying(50), "uuid" uuid NOT NULL, "exp_date" timestamp, "is_active" boolean DEFAULT TRUE NOT NULL)[0m
  â†³ db/migrate/20210329215315_create_attachments.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_attachments_on_attached_on_type_and_attached_on_id" ON "attachments"  ("attached_on_type", "attached_on_id")[0m
  â†³ db/migrate/20210329215315_create_attachments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210329215315"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProjects (20210410131727)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "projects" ("id" bigserial primary key, "title" character varying, "description" character varying, "project_id" character varying, "address" character varying, "post_number" character varying, "contact_person" character varying, "user_account_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_6b507de3df"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
)[0m
  â†³ db/migrate/20210410131727_create_projects.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_projects_on_user_account_id" ON "projects"  ("user_account_id")[0m
  â†³ db/migrate/20210410131727_create_projects.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210410131727"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 18:06:34 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 18:06:35 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 18:06:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 18:06:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 18:06:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-10 18:06:35 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-04-10 18:06:44 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 121ms (Views: 0.2ms | ActiveRecord: 7.8ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-10 18:07:49 +0400
  
ActionController::RoutingError (No route matches [POST] "/en/projects"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/projects" for 127.0.0.1 at 2021-04-10 18:08:04 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"Test 1", "description"=>"test test test", "address"=>"giogebashvili sterat", "post_number"=>"079", "contact_person"=>"anzor urdia", "locale"=>"en", "project"=>{"title"=>"Test 1", "description"=>"test test test", "address"=>"giogebashvili sterat", "post_number"=>"079", "contact_person"=>"anzor urdia"}}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
Completed 500 Internal Server Error in 11374ms (ActiveRecord: 8.5ms)


  
NameError (uninitialized constant Projects::ProjectsServices):
  
app/controllers/projects_controller.rb:10:in `create'
Started POST "/en/projects" for 127.0.0.1 at 2021-04-10 18:09:09 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"Test 1", "description"=>"test test test", "address"=>"giogebashvili sterat", "post_number"=>"079", "contact_person"=>"anzor urdia", "locale"=>"en", "project"=>{"title"=>"Test 1", "description"=>"test test test", "address"=>"giogebashvili sterat", "post_number"=>"079", "contact_person"=>"anzor urdia"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:54
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:48
  [1m[36mProject Create (0.7ms)[0m  [1m[32mINSERT INTO "projects" ("title", "description", "project_id", "address", "post_number", "contact_person", "user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["title", "Test 1"], ["description", "test test test"], ["project_id", "00001"], ["address", "giogebashvili sterat"], ["post_number", "079"], ["contact_person", "anzor urdia"], ["user_account_id", 16], ["created_at", "2021-04-10 14:09:15.362401"], ["updated_at", "2021-04-10 14:09:15.362401"]]
  â†³ app/services/projects/projects_services.rb:48
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:48
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 201 Created in 6139ms (Views: 1.3ms | ActiveRecord: 14.0ms)


  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 18:24:48 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 18:24:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 18:24:48 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 18:24:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 18:24:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-10 18:24:48 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 18:24:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 18:24:56 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 18:24:56 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 18:24:56 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 18:24:59 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-10 18:24:59 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 18:25:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 18:25:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 18:25:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 18:25:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 18:25:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-10 18:25:26 +0400
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-04-10 18:25:36 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/projects_controller.rb:15:in `projects_list'
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-04-10 18:26:07 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 37ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-04-10 18:26:32 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
Completed 200 OK in 79ms (Views: 0.6ms | ActiveRecord: 15.3ms)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 23:21:09 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 23:21:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 23:21:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 23:21:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 23:21:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-10 23:21:09 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-10 23:21:42 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-10 23:21:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-10 23:21:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-10 23:21:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-10 23:21:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-10 23:21:43 +0400
Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-10 23:21:55 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/projects/1"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-10 23:22:25 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:60
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-10 23:22:56 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:60
Completed 200 OK in 4852ms (Views: 0.2ms | ActiveRecord: 5.1ms)


Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-10 23:29:20 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:61
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:19
Completed 200 OK in 3184ms (Views: 0.3ms | ActiveRecord: 11.2ms)


  [1m[36mTask Load (39.2ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "projects" ADD "{:index=>true, :foreign_key=>true}_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (4.8ms)[0m  [1m[35mCREATE  INDEX  "index_projects_on_{:index=>true, :foreign_key=>true}_id" ON "projects"  ("{:index=>true, :foreign_key=>true}_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "user_accounts" DROP COLUMN "{:index=>true, :foreign_key=>true}_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "projects" ADD "{:index=>true, :foreign_key=>true}_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_projects_on_{:index=>true, :foreign_key=>true}_id" ON "projects"  ("{:index=>true, :foreign_key=>true}_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "user_accounts" DROP COLUMN "{:foreign_key=>true}_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "projects" ADD "{:index=>true, :foreign_key=>true}_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_projects_on_{:index=>true, :foreign_key=>true}_id" ON "projects"  ("{:index=>true, :foreign_key=>true}_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "user_accounts" DROP COLUMN "{:index=>true}_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "user_accounts" DROP COLUMN "user_account_id_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "user_accounts" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210410195911"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "tasks" ADD "user_account_id" bigint[0m
  â†³ bin/rails:9
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_user_account_id" ON "tasks"  ("user_account_id")[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210410195911"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" ADD "project_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (5.4ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_project_id" ON "tasks"  ("project_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_02e851e3b7"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "order_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:5
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "product_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:6
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTaskStatus Load (37.6ms)[0m  [1m[34mSELECT "task_statuses".* FROM "task_statuses"[0m
  [1m[36mTaskStatus Destroy (1.5ms)[0m  [1m[31mDELETE FROM "task_statuses"[0m
  [1m[36mTask Destroy (3.6ms)[0m  [1m[31mDELETE FROM "tasks"[0m
  [1m[36mTaskStatus Destroy (37.8ms)[0m  [1m[31mDELETE FROM "task_statuses"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "tasks" ADD "project_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_project_id" ON "tasks"  ("project_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_02e851e3b7"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "order_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:5
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "product_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:6
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" ADD "project_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (6.6ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_project_id" ON "tasks"  ("project_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_02e851e3b7"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "order_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:5
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "product_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:6
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "tasks" ADD "project_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (7.1ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_project_id" ON "tasks"  ("project_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_02e851e3b7"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "order_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:5
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "product_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:6
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RebuildTask (20210410195911)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" ADD "project_id" bigint[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_tasks_on_project_id" ON "tasks"  ("project_id")[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "tasks" ADD CONSTRAINT "fk_rails_02e851e3b7"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "user_account_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:4
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "order_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:5
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "product_id"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:6
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "tasks" DROP COLUMN "tracked_time"[0m
  â†³ db/migrate/20210410195911_rebuild_task.rb:7
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210410195911"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to ChangeTaskStatusName (20210411150326)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210411150326"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeTaskStatusName (20210411150326)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210411150326"]]
  â†³ bin/rails:9
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeTaskStatusName (20210411150326)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (37.2ms)[0m  [1m[35mALTER TABLE "task_statuses" DROP COLUMN "name"[0m
  â†³ db/migrate/20210411150326_change_task_status_name.rb:3
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "task_statuses" ADD "name" character varying[0m
  â†³ db/migrate/20210411150326_change_task_status_name.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210411150326"]]
  â†³ bin/rails:9
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillNewTaskStatuses (20210411151144)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mTaskStatus Create (36.1ms)[0m  [1m[32mINSERT INTO "task_statuses" ("id_name", "name") VALUES ($1, $2) RETURNING "id"[0m  [["id_name", "open"], ["name", "Open"]]
  â†³ db/migrate/20210411151144_fill_new_task_statuses.rb:3
  [1m[36mTaskStatus Create (0.8ms)[0m  [1m[32mINSERT INTO "task_statuses" ("id_name", "name") VALUES ($1, $2) RETURNING "id"[0m  [["id_name", "in_progress"], ["name", "In progress"]]
  â†³ db/migrate/20210411151144_fill_new_task_statuses.rb:4
  [1m[36mTaskStatus Create (0.8ms)[0m  [1m[32mINSERT INTO "task_statuses" ("id_name", "name") VALUES ($1, $2) RETURNING "id"[0m  [["id_name", "done"], ["name", "Done"]]
  â†³ db/migrate/20210411151144_fill_new_task_statuses.rb:5
  [1m[36mTaskStatus Create (0.7ms)[0m  [1m[32mINSERT INTO "task_statuses" ("id_name", "name") VALUES ($1, $2) RETURNING "id"[0m  [["id_name", "canceled"], ["name", "Canceled"]]
  â†³ db/migrate/20210411151144_fill_new_task_statuses.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210411151144"]]
  â†³ bin/rails:9
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mOrderProduct Load (38.2ms)[0m  [1m[34mSELECT  "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUserAccountTasks (20210411151549)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "user_account_tasks" ("id" bigserial primary key, "user_account_id" bigint NOT NULL, "task_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_3eefae9405"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
, CONSTRAINT "fk_rails_cf6b2afe16"
FOREIGN KEY ("task_id")
  REFERENCES "tasks" ("id")
)[0m
  â†³ db/migrate/20210411151549_create_user_account_tasks.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_account_tasks_on_user_account_id" ON "user_account_tasks"  ("user_account_id")[0m
  â†³ db/migrate/20210411151549_create_user_account_tasks.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_account_tasks_on_task_id" ON "user_account_tasks"  ("task_id")[0m
  â†³ db/migrate/20210411151549_create_user_account_tasks.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210411151549"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateTaskResources (20210411151606)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "task_resources" ("id" bigserial primary key, "resource_id" bigint NOT NULL, "task_id" bigint NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_44df6d7e9a"
FOREIGN KEY ("resource_id")
  REFERENCES "resources" ("id")
, CONSTRAINT "fk_rails_c3e4047468"
FOREIGN KEY ("task_id")
  REFERENCES "tasks" ("id")
)[0m
  â†³ db/migrate/20210411151606_create_task_resources.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_task_resources_on_resource_id" ON "task_resources"  ("resource_id")[0m
  â†³ db/migrate/20210411151606_create_task_resources.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_task_resources_on_task_id" ON "task_resources"  ("task_id")[0m
  â†³ db/migrate/20210411151606_create_task_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210411151606"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 19:41:32 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 19:41:32 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 19:41:32 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 19:41:32 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 19:41:34 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 19:41:34 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 19:41:34 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 19:41:34 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 19:41:34 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 19:41:34 +0400
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 19:43:26 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}, "locale"=>"en", "task"=>{"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}}}
Unpermitted parameters: :format, :locale, :task
Completed 201 Created in 28304ms (Views: 0.7ms | ActiveRecord: 3.3ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 19:45:39 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by TasksController#create as JSON
  Parameters: {"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}, "locale"=>"en", "task"=>{"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
Completed 201 Created in 340537ms (Views: 0.5ms | ActiveRecord: 7.7ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 19:51:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 19:51:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 19:51:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 19:51:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 19:51:59 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 19:51:59 +0400
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 19:52:12 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}, "locale"=>"en", "task"=>{"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}}}
Unpermitted parameters: :user_accounts_attributes, :resources_attributes, :format, :locale, :task
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Completed 201 Created in 139790ms (Views: 0.1ms | ActiveRecord: 6.1ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 19:54:36 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 19:54:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 19:54:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 19:54:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 19:54:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 19:54:36 +0400
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 19:54:49 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}, "locale"=>"en", "task"=>{"title"=>"Test1", "description"=>"Test1", "start_time"=>"23/11/2018", "deadline"=>"24/11/2018", "project_id"=>1, "user_accounts_attributes"=>{"user_account_id"=>93}, "resources_attributes"=>{"resource_id"=>9}}}
Unpermitted parameters: :format, :locale, :task
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 19:59:04 +0400
Completed 201 Created in 270239ms (Views: 0.2ms | ActiveRecord: 9.6ms)


Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 19:59:20 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 19:59:20 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 19:59:20 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 19:59:23 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 19:59:23 +0400
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:00:03 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameter: :user_account_id
Unpermitted parameter: :resource_id
Unpermitted parameters: :format, :locale, :task
Completed 201 Created in 11999ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:00:33 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :user_accounts_attributes, :resources_attributes, :format, :locale, :task
Completed 201 Created in 11515ms (Views: 0.2ms | ActiveRecord: 2.8ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:00:58 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :user_accounts_attributes, :resources_attributes, :format, :locale, :task
Completed 201 Created in 84228ms (Views: 0.2ms | ActiveRecord: 14.1ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:04:17 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"test1", "description"=>"test1", "start_time"=>"23/11/2018", "deadline"=>"24/18/12", "project_id"=>1, "user_accounts_attributes"=>[{"user_account_id"=>96}], "resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :format, :locale, :task
Unpermitted parameters: :format, :locale, :task
Completed 201 Created in 88840ms (Views: 0.2ms | ActiveRecord: 12.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 20:05:57 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 20:05:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 20:05:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 20:05:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 20:06:00 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 20:06:00 +0400
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:06:31 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>96}], "task_resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>96}], "task_resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (1.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):25
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  â†³ (pry):25
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):25
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):25
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):25
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):27
Completed 500 Internal Server Error in 67022ms (ActiveRecord: 28.3ms)


  
NoMethodError (undefined method `user_account' for #<Task:0x000055d3befc2758>):
  
app/services/tasks/services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/tasks_controller.rb:12:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:07:43 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.9ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):31
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ (pry):31
  [1m[36mTaskStatus Load (0.9ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):31
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):31
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):31
Completed 500 Internal Server Error in 74865ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `user_account' for #<Task:0x00007f7f583416e0>):
  
app/services/tasks/services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/tasks_controller.rb:12:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:09:00 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :format, :locale, :task
Completed 201 Created in 2683ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:09:06 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>1}], "locale"=>"en", "task"=>{"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>1}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.8ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):37
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ (pry):37
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):37
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):37
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):37
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):37
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):39
Completed 500 Internal Server Error in 40237ms (ActiveRecord: 42.8ms)


  
NoMethodError (undefined method `user_account' for #<Task:0x00007f7f50086750>):
  
app/services/tasks/services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/tasks_controller.rb:12:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:09:51 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>3}], "locale"=>"en", "task"=>{"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>3}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):43
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ (pry):43
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):43
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):43
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):43
  [1m[36mTask Create (37.0ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "eeeed"], ["description", "eeeed"], ["task_status_id", 5], ["start_time", "2018-11-23 00:00:00"], ["created_at", "2021-04-11 16:10:06.755834"], ["updated_at", "2021-04-11 16:10:06.755834"], ["project_id", 1]]
  â†³ (pry):43
  [1m[36mUserAccountTask Create (1.1ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 3], ["created_at", "2021-04-11 16:10:06.794690"], ["updated_at", "2021-04-11 16:10:06.794690"]]
  â†³ (pry):43
  [1m[36mTaskResource Create (0.8ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 3], ["task_id", 3], ["created_at", "2021-04-11 16:10:06.796876"], ["updated_at", "2021-04-11 16:10:06.796876"]]
  â†³ (pry):43
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):43
  [1m[36mTaskResource Load (1.1ms)[0m  [1m[34mSELECT  "task_resources".* FROM "task_resources" ORDER BY "task_resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):45
  [1m[36mUserAccountTask Load (1.0ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):46
Completed 500 Internal Server Error in 31149ms (ActiveRecord: 45.7ms)


  
NoMethodError (undefined method `user_account' for #<Task:0x000055d3c2361d48>):
  
app/services/tasks/services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/tasks_controller.rb:12:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:10:42 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>3}], "locale"=>"en", "task"=>{"title"=>"eeeed", "description"=>"eeeed", "start_time"=>"23/11/2018", "deadline"=>"23/89/63", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>3}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:115
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:110
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mTaskStatus Load (0.4ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mTask Create (0.4ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["title", "eeeed"], ["description", "eeeed"], ["task_status_id", 5], ["start_time", "2018-11-23 00:00:00"], ["created_at", "2021-04-11 16:10:45.458481"], ["updated_at", "2021-04-11 16:10:45.458481"], ["project_id", 1]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mUserAccountTask Create (0.4ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 4], ["created_at", "2021-04-11 16:10:45.460302"], ["updated_at", "2021-04-11 16:10:45.460302"]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mTaskResource Create (0.3ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 3], ["task_id", 4], ["created_at", "2021-04-11 16:10:45.461475"], ["updated_at", "2021-04-11 16:10:45.461475"]]
  â†³ app/services/tasks/services.rb:110
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:110
Completed 500 Internal Server Error in 2693ms (ActiveRecord: 29.3ms)


  
NoMethodError (undefined method `user_account' for #<Task:0x00007f7f485bebf8>):
  
app/services/tasks/services.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/tasks_controller.rb:12:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 20:32:54 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 20:32:54 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 20:32:54 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 20:32:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 20:32:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 20:32:54 +0400
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 20:33:47 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"asasd", "description"=>"asd", "start_time"=>"23/11/2015", "deadline"=>"23/12/2001", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>3}], "locale"=>"en", "task"=>{"title"=>"asasd", "description"=>"asd", "start_time"=>"23/11/2015", "deadline"=>"23/12/2001", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>3}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:113
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:108
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:108
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:108
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:108
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:108
  [1m[36mTask Create (0.7ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "deadline", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "asasd"], ["description", "asd"], ["task_status_id", 5], ["start_time", "2015-11-23 00:00:00"], ["deadline", "2001-12-23 00:00:00"], ["created_at", "2021-04-11 16:33:52.886832"], ["updated_at", "2021-04-11 16:33:52.886832"], ["project_id", 1]]
  â†³ app/services/tasks/services.rb:108
  [1m[36mUserAccountTask Create (0.5ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 5], ["created_at", "2021-04-11 16:33:52.888659"], ["updated_at", "2021-04-11 16:33:52.888659"]]
  â†³ app/services/tasks/services.rb:108
  [1m[36mTaskResource Create (0.4ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 3], ["task_id", 5], ["created_at", "2021-04-11 16:33:52.889809"], ["updated_at", "2021-04-11 16:33:52.889809"]]
  â†³ app/services/tasks/services.rb:108
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:108
Completed 201 Created in 5688ms (Views: 0.2ms | ActiveRecord: 31.0ms)


  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 20:36:44 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 20:36:44 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 20:36:44 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 20:36:44 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 20:36:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 20:36:44 +0400
Started GET "/en/tasks/tasks_list/2" for 127.0.0.1 at 2021-04-11 20:36:56 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 2]]
  â†³ app/controllers/tasks_controller.rb:15
  [1m[36mTask Load (1.7ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):6
Unpermitted parameters: :format, :locale
  [1m[36mCACHE Task Load (0.1ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 2]]
  â†³ app/services/tasks/services.rb:29
Completed 200 OK in 42065ms (Views: 0.6ms | ActiveRecord: 12.8ms)


  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTaskStatus Load (0.4ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.4ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.8ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.7ms)[0m  [1m[34mSELECT "user_account_tasks".* FROM "user_account_tasks" INNER JOIN "user_accounts" ON "user_accounts"."id" = "user_account_tasks"."user_account_id"[0m
  [1m[36mUserAccountTask Load (0.5ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.3ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.8ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.9ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.9ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccountTask Load (0.8ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "user_account_tasks" ON "user_account_tasks"."task_id" = "tasks"."id"[0m
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id"[0m
  [1m[36mUserAccount Load (2.0ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id"[0m
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE (1=0)[0m
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks"[0m
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.0ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_account_id[0m  [["id", 1]]
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_account_id LIMIT $2[0m  [["id", 1], ["LIMIT", 11]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_account_id ORDER BY "user_accounts"."id" DESC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUserAccount Load (2.5ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 11]]
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT user_account.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_Accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY resources.id[0m  [["id", 1]]
Started GET "/en/tasks/tasks_list/2" for 127.0.0.1 at 2021-04-11 21:11:31 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 2]]
  â†³ app/services/tasks/services.rb:41
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 2]]
  â†³ app/services/tasks/services.rb:44
Completed 200 OK in 27840ms (Views: 0.2ms | ActiveRecord: 2.4ms)


Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-11 21:12:04 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:41
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:44
  [1m[36mTask Load (1.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:44
Completed 200 OK in 38046ms (Views: 0.2ms | ActiveRecord: 14.6ms)


Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-11 21:12:56 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:41
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:44
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:44
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):14
Completed 200 OK in 32228ms (Views: 0.2ms | ActiveRecord: 6.2ms)


Started GET "/en/tasks/tasks_list/1" for 127.0.0.1 at 2021-04-11 21:13:32 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/tasks/services.rb:41
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:69
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:69
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:69
Completed 200 OK in 31162ms (Views: 0.4ms | ActiveRecord: 18.7ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-11 21:16:09 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by TasksController#create as JSON
  Parameters: {"title"=>"wwwwwww", "description"=>"stwwwwwring", "start_time"=>"23/11/2012", "deadline"=>"23/12/23", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>92}, {"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>8}, {"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"wwwwwww", "description"=>"stwwwwwring", "start_time"=>"23/11/2012", "deadline"=>"23/12/23", "project_id"=>1, "user_account_tasks_attributes"=>[{"user_account_id"=>92}, {"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>8}, {"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:140
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:135
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mTask Create (0.8ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "deadline", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "wwwwwww"], ["description", "stwwwwwring"], ["task_status_id", 5], ["start_time", "2012-11-23 00:00:00"], ["deadline", "0023-12-23 00:00:00"], ["created_at", "2021-04-11 17:16:09.993764"], ["updated_at", "2021-04-11 17:16:09.993764"], ["project_id", 1]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mUserAccountTask Create (0.6ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 92], ["task_id", 6], ["created_at", "2021-04-11 17:16:09.996030"], ["updated_at", "2021-04-11 17:16:09.996030"]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mUserAccountTask Create (0.3ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 6], ["created_at", "2021-04-11 17:16:09.997247"], ["updated_at", "2021-04-11 17:16:09.997247"]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mTaskResource Create (0.5ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 8], ["task_id", 6], ["created_at", "2021-04-11 17:16:09.998260"], ["updated_at", "2021-04-11 17:16:09.998260"]]
  â†³ app/services/tasks/services.rb:135
  [1m[36mTaskResource Create (0.3ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 9], ["task_id", 6], ["created_at", "2021-04-11 17:16:09.999460"], ["updated_at", "2021-04-11 17:16:09.999460"]]
  â†³ app/services/tasks/services.rb:135
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:135
Completed 201 Created in 113ms (Views: 0.2ms | ActiveRecord: 32.7ms)


Started GET "/en/tasks/tasks_list/1" for 127.0.0.1 at 2021-04-11 21:16:18 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/tasks/services.rb:41
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:69
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:69
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:69
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:54
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:65
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:69
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Completed 200 OK in 206061ms (Views: 0.4ms | ActiveRecord: 6.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 21:20:11 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 21:20:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 21:20:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 21:20:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 21:20:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 21:20:11 +0400
Started GET "/en/tasks/tasks_list/1" for 127.0.0.1 at 2021-04-11 21:20:21 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/tasks/services.rb:40
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:52
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:67
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:52
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:67
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:52
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:67
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:52
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:67
Completed 200 OK in 95ms (Views: 0.5ms | ActiveRecord: 24.1ms)


  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.4ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.2ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.2ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (2.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (3.0ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 22:30:51 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 22:30:51 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 22:30:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 22:30:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 22:30:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 22:30:51 +0400
Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-11 22:31:05 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:60
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  â†³ app/services/projects/projects_services.rb:70
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:72
Completed 200 OK in 66ms (Views: 0.4ms | ActiveRecord: 12.4ms)


  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT "task_statuses".* FROM "task_statuses"[0m
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 23:39:23 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 23:39:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 23:39:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 23:39:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 23:39:27 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 23:39:27 +0400
Started GET "/en/tasks/5" for 127.0.0.1 at 2021-04-11 23:39:37 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:101
  [1m[36mTask Load (1.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):3
Started GET "/en/tasks/5" for 127.0.0.1 at 2021-04-11 23:44:37 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:102
  [1m[36mTaskStatus Load (0.4ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:46
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:64
  [1m[36mCACHE Task Load (0.0ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:102
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:46
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:64
Completed 200 OK in 112782ms (Views: 0.3ms | ActiveRecord: 29.6ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-11 23:46:59 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-11 23:46:59 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-11 23:46:59 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-11 23:46:59 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-11 23:47:00 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-11 23:47:00 +0400
Started GET "/en/tasks/5" for 127.0.0.1 at 2021-04-11 23:47:13 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:102
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:46
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:49
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:64
Completed 200 OK in 111ms (Views: 0.2ms | ActiveRecord: 27.0ms)


  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/attachments" for 127.0.0.1 at 2021-04-12 00:07:21 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f4f9c3f5fa0 @tempfile=#<Tempfile:/tmp/RackMultipart20210412-30343-tw1t0h.jpg>, @original_filename="landing.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"landing.jpg\"\r\nContent-Type: image/jpeg\r\n">, "attached_on_id"=>"1", "attached_on_type"=>"Project", "exp_date"=>"23/11/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:23
  [1m[36mAttachment Create (7.0ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Project"], ["attached_on_id", 1], ["file", "landing.jpg"], ["uuid", "8f6e8c3a-44db-428e-82f1-0653c860ba4b"], ["exp_date", "2021-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:23
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:23
Completed 201 Created in 43ms (Views: 0.3ms | ActiveRecord: 15.2ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-12 00:07:31 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (38.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts" UNION SELECT id as obj_id, 'Project' as pol_type, 'project' as type_on, title as name FROM "projects") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:51
Completed 200 OK in 82ms (Views: 0.2ms | ActiveRecord: 44.2ms)


  [1m[36mAttachment Load (0.7ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments"[0m
Started POST "/en/attachments" for 127.0.0.1 at 2021-04-12 00:10:24 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fa1303717b0 @tempfile=#<Tempfile:/tmp/RackMultipart20210412-31283-1nkzx1t.jpg>, @original_filename="piradoba.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"piradoba.jpg\"\r\nContent-Type: image/jpeg\r\n">, "attached_on_id"=>"93", "attached_on_type"=>"UserAccount", "exp_date"=>"23/11/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:23
  [1m[36mAttachment Create (1.0ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "UserAccount"], ["attached_on_id", 93], ["file", "piradoba.jpg"], ["uuid", "def71f8c-f739-49f5-a11a-f582ae5e373c"], ["exp_date", "2021-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:23
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:23
Completed 201 Created in 31ms (Views: 0.2ms | ActiveRecord: 10.7ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-12 00:10:31 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (2.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts" UNION SELECT id as obj_id, 'Project' as pol_type, 'project' as type_on, title as name FROM "projects") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:51
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 7.9ms)


  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/attachments" for 127.0.0.1 at 2021-04-12 00:12:33 +0400
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AttachmentsController#create as JSON
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f439c357f78 @tempfile=#<Tempfile:/tmp/RackMultipart20210412-32273-8uzp8d.jpg>, @original_filename="piradoba.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"piradoba.jpg\"\r\nContent-Type: image/jpeg\r\n">, "attached_on_id"=>"1", "attached_on_type"=>"Project", "exp_date"=>"23/11/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/resources/attachments_service.rb:23
  [1m[36mAttachment Create (0.9ms)[0m  [1m[32mINSERT INTO "attachments" ("attached_on_type", "attached_on_id", "file", "uuid", "exp_date") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["attached_on_type", "Project"], ["attached_on_id", 1], ["file", "piradoba.jpg"], ["uuid", "64993254-0978-4c0b-a204-edb2b5185464"], ["exp_date", "2021-11-23 00:00:00"]]
  â†³ app/services/resources/attachments_service.rb:23
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/resources/attachments_service.rb:23
Completed 201 Created in 32ms (Views: 0.3ms | ActiveRecord: 8.8ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-12 00:12:40 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (2.0ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts" UNION SELECT id as obj_id, 'Project' as pol_type, 'title' as type_on, title as name FROM "projects") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:51
Completed 200 OK in 45ms (Views: 0.3ms | ActiveRecord: 7.8ms)


Started GET "/en/attachments/get_files" for 127.0.0.1 at 2021-04-12 00:13:10 +0400
Processing by AttachmentsController#get_files as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mAttachment Load (1.3ms)[0m  [1m[34mSELECT id, pol_type, type_on, name, file as file_name, uuid FROM "attachments" JOIN (SELECT id as obj_id, 'Resource' as pol_type, model_on_type as type_on, name FROM "resources" UNION SELECT id as obj_id, 'UserAccount' as pol_type, 'customer' as type_on, concat(first_name, ' ', last_name) as name FROM "user_accounts" UNION SELECT id as obj_id, 'Project' as pol_type, title as type_on, title as name FROM "projects") attached_obj ON attached_obj.obj_id = attachments.attached_on_id AND attached_obj.pol_type = attachments.attached_on_type WHERE "attachments"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/resources/attachments_service.rb:51
Completed 200 OK in 79ms (Views: 0.4ms | ActiveRecord: 12.4ms)


Started GET "/en/projects/78" for 127.0.0.1 at 2021-04-12 23:44:40 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"78"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:60
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/projects/projects_services.rb:68:in `get_members'
app/services/projects/projects_services.rb:61:in `overview'
app/controllers/projects_controller.rb:22:in `show'
Started GET "/en/tasks/tasks_list/34" for 127.0.0.1 at 2021-04-12 23:45:27 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"34"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (2.1ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 34]]
  â†³ app/services/tasks/services.rb:37
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 4.2ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-04-12 23:45:57 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"cdd", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"cdd", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "cdd"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 401 Unauthorized in 17ms (Views: 0.2ms | ActiveRecord: 8.8ms)


Started POST "/en/client_contacts" for 127.0.0.1 at 2021-04-12 23:46:30 +0400
Processing by ClientContactsController#create as JSON
  Parameters: {"first_name"=>"string", "last_name"=>"string", "email"=>"string", "phone"=>"string", "position"=>"string", "client_id"=>"999999", "locale"=>"en", "client_contact"=>{"first_name"=>"string", "last_name"=>"string", "email"=>"string", "phone"=>"string", "position"=>"string", "client_id"=>"999999"}}
Unpermitted parameters: :format, :locale, :client_contact
  [1m[36mClient Load (9.5ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 AND "clients"."active" = $2 ORDER BY "clients"."id" DESC LIMIT $3[0m  [["id", 999999], ["active", true], ["LIMIT", 1]]
  â†³ app/services/clients/contacts_service.rb:81
Completed 400 Bad Request in 121ms (Views: 0.2ms | ActiveRecord: 14.7ms)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddNewColumnsToProject (20210412210028)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "projects" ADD "start_date" timestamp[0m
  â†³ db/migrate/20210412210028_add_new_columns_to_project.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "projects" ADD "deadline" timestamp[0m
  â†³ db/migrate/20210412210028_add_new_columns_to_project.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210412210028"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-13 01:06:31 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-13 01:06:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-13 01:06:31 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-13 01:06:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-13 01:06:32 +0400
Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-13 01:06:47 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:60
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  â†³ app/services/projects/projects_services.rb:70
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:72
Completed 200 OK in 96ms (Views: 0.7ms | ActiveRecord: 16.9ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-13 01:07:30 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-13 01:07:30 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-13 01:07:30 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-13 01:07:30 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-13 01:07:31 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-13 01:07:31 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-13 01:09:26 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-13 01:09:26 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-13 01:09:26 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-13 01:09:26 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-13 01:09:27 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-13 01:09:27 +0400
Started POST "/en/projects" for 127.0.0.1 at 2021-04-13 01:10:19 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"string11", "description"=>"string11", "address"=>"string11", "post_number"=>"string11", "contact_person"=>"string11", "start_date"=>"23/11/2021", "deadline"=>"23/11/2022", "locale"=>"en", "project"=>{"title"=>"string11", "description"=>"string11", "address"=>"string11", "post_number"=>"string11", "contact_person"=>"string11", "start_date"=>"23/11/2021", "deadline"=>"23/11/2022"}}
Unpermitted parameters: :format, :locale, :project
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/projects_controller.rb:9:in `create'
Started POST "/en/auth" for 127.0.0.1 at 2021-04-13 01:10:43 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 112ms (Views: 0.4ms | ActiveRecord: 1.3ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-13 01:11:28 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"string11", "description"=>"string11", "address"=>"string11", "post_number"=>"string11", "contact_person"=>"string11", "start_date"=>"23/11/2021", "deadline"=>"23/11/2022", "locale"=>"en", "project"=>{"title"=>"string11", "description"=>"string11", "address"=>"string11", "post_number"=>"string11", "contact_person"=>"string11", "start_date"=>"23/11/2021", "deadline"=>"23/11/2022"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:45
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:46
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:48
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:39
  [1m[36mProject Create (0.5ms)[0m  [1m[32mINSERT INTO "projects" ("title", "description", "project_id", "address", "post_number", "contact_person", "user_account_id", "created_at", "updated_at", "start_date", "deadline") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["title", "string11"], ["description", "string11"], ["project_id", "00002"], ["address", "string11"], ["post_number", "string11"], ["contact_person", "string11"], ["user_account_id", 16], ["created_at", "2021-04-12 21:11:28.400388"], ["updated_at", "2021-04-12 21:11:28.400388"], ["start_date", "2021-11-23 00:00:00"], ["deadline", "2022-11-23 00:00:00"]]
  â†³ app/services/projects/projects_services.rb:39
  [1m[35m (24.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:39
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 201 Created in 35ms (Views: 0.4ms | ActiveRecord: 26.6ms)


Started GET "/en/projects/2" for 127.0.0.1 at 2021-04-13 01:11:40 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"2"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:60
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 2]]
  â†³ app/services/projects/projects_services.rb:70
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:72
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 2.6ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 00:45:58 +0400
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 00:45:58 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 00:45:58 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 00:45:58 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 00:45:58 +0400
  [1m[36mTask Load (3.0ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 00:58:46 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 00:58:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 00:58:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 00:58:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 00:58:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 00:58:47 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 00:59:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 00:59:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 00:59:49 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 00:59:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 00:59:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 00:59:49 +0400
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:00:03 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"user_tasks_list"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:114
Completed 404 Not Found in 17ms (ActiveRecord: 6.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=user_tasks_list):
  
app/services/tasks/services.rb:114:in `find_task'
app/services/tasks/services.rb:93:in `show'
app/controllers/tasks_controller.rb:28:in `show'
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:00:40 +0400
  
AbstractController::ActionNotFound (The action 'user_tasks_list' could not be found for TasksController):
  
actionpack (5.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:01:04 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"user_tasks_list"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:114
Completed 404 Not Found in 9ms (ActiveRecord: 3.5ms)


  
ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=user_tasks_list):
  
app/services/tasks/services.rb:114:in `find_task'
app/services/tasks/services.rb:93:in `show'
app/controllers/tasks_controller.rb:28:in `show'
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:01:23 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"user_tasks_list"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:114
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=user_tasks_list):
  
app/services/tasks/services.rb:114:in `find_task'
app/services/tasks/services.rb:93:in `show'
app/controllers/tasks_controller.rb:28:in `show'
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:01:24 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"user_tasks_list"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:114
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=user_tasks_list):
  
app/services/tasks/services.rb:114:in `find_task'
app/services/tasks/services.rb:93:in `show'
app/controllers/tasks_controller.rb:28:in `show'
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:02:10 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"user_tasks_list"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:115
Completed 404 Not Found in 11ms (ActiveRecord: 4.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=user_tasks_list):
  
app/services/tasks/services.rb:115:in `find_task'
app/services/tasks/services.rb:94:in `show'
app/controllers/tasks_controller.rb:29:in `show'
Started GET "/en/tasks/user_tasks_list" for 127.0.0.1 at 2021-04-14 01:02:11 +0400
Processing by TasksController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"user_tasks_list"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:115
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find Task with 'id'=user_tasks_list):
  
app/services/tasks/services.rb:115:in `find_task'
app/services/tasks/services.rb:94:in `show'
app/controllers/tasks_controller.rb:29:in `show'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 01:02:26 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 01:02:26 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 01:02:26 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 01:02:26 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 01:02:29 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 01:02:29 +0400
Started GET "/en/tasks/user_task_list" for 127.0.0.1 at 2021-04-14 01:02:41 +0400
Processing by TasksController#user_task_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks"[0m
  â†³ app/services/tasks/services.rb:49
  [1m[36mTaskStatus Load (2.9ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:59
  [1m[36mProject Load (3.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:62
  [1m[36mUserAccount Load (8.3ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:73
  [1m[36mResource Load (3.4ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:77
Completed 500 Internal Server Error in 3323ms (ActiveRecord: 38.1ms)


  
NoMethodError (undefined method `<<' for nil:NilClass):
  
app/services/tasks/services.rb:50:in `block in user_task_list'
app/services/tasks/services.rb:49:in `user_task_list'
app/controllers/tasks_controller.rb:23:in `user_task_list'
Started GET "/en/tasks/user_task_list" for 127.0.0.1 at 2021-04-14 01:02:57 +0400
Processing by TasksController#user_task_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks"[0m
  â†³ app/services/tasks/services.rb:50
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:74
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:74
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 4]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:74
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 5]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mCACHE TaskStatus Load (0.0ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:74
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:78
Completed 200 OK in 2371ms (Views: 1.9ms | ActiveRecord: 23.3ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 01:10:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 01:10:22 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 01:10:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 01:10:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 01:10:22 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 01:10:22 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 01:11:16 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 01:11:16 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 01:11:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 01:11:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 01:11:16 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 01:11:16 +0400
Started GET "/en/tasks/status_progress/3?id_name=in_progress" for 127.0.0.1 at 2021-04-14 01:11:43 +0400
Processing by TasksController#status_progress as JSON
  Parameters: {"id_name"=>"in_progress", "locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "in_progress"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:110
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:116
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):1
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mTask Update (38.0ms)[0m  [1m[33mUPDATE "tasks" SET "task_status_id" = $1, "updated_at" = $2 WHERE "tasks"."id" = $3[0m  [["task_status_id", 6], ["updated_at", "2021-04-13 21:11:54.505517"], ["id", 3]]
  â†³ (pry):1
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):1
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:85
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:85
Completed 200 OK in 139072ms (Views: 0.2ms | ActiveRecord: 52.3ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 01:14:11 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 01:14:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 01:14:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 01:14:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 01:14:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 01:14:11 +0400
Started GET "/en/tasks/status_progress/3?id_name=done" for 127.0.0.1 at 2021-04-14 01:14:32 +0400
Processing by TasksController#status_progress as JSON
  Parameters: {"id_name"=>"done", "locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "done"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:115
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:121
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:89
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:89
  [1m[36mProject Load (0.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:89
  [1m[36mTask Update (0.5ms)[0m  [1m[33mUPDATE "tasks" SET "task_status_id" = $1, "updated_at" = $2 WHERE "tasks"."id" = $3[0m  [["task_status_id", 7], ["updated_at", "2021-04-13 21:14:35.411975"], ["id", 3]]
  â†³ app/services/tasks/services.rb:89
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:89
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:77
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:81
Completed 500 Internal Server Error in 3028ms (ActiveRecord: 28.4ms)


  
NoMethodError (undefined method `errors' for #<Hash:0x0000556060ab9ee0>):
  
app/services/tasks/services.rb:91:in `progress'
app/controllers/tasks_controller.rb:35:in `status_progress'
Started GET "/en/tasks/status_progress/3?id_name=done" for 127.0.0.1 at 2021-04-14 01:14:53 +0400
Processing by TasksController#status_progress as JSON
  Parameters: {"id_name"=>"done", "locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "done"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:114
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:120
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:89
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:89
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:89
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:89
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:77
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 3]]
  â†³ app/services/tasks/services.rb:81
Completed 200 OK in 1887ms (Views: 0.2ms | ActiveRecord: 20.9ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 01:16:17 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 01:16:17 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 01:16:17 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 01:16:17 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 01:16:17 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 01:16:18 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-14 01:18:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-14 01:18:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-14 01:18:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-14 01:18:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-14 01:18:52 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-14 01:18:52 +0400
Started POST "/en/projects" for 127.0.0.1 at 2021-04-14 01:19:30 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"string12", "description"=>"string12", "address"=>"string12", "post_number"=>"0179", "contact_person"=>"string12", "start_date"=>"23/11/23", "deadline"=>"23/11/24", "locale"=>"en", "project"=>{"title"=>"string12", "description"=>"string12", "address"=>"string12", "post_number"=>"0179", "contact_person"=>"string12", "start_date"=>"23/11/23", "deadline"=>"23/11/24"}}
Unpermitted parameters: :format, :locale, :project
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/projects_controller.rb:9:in `create'
Started POST "/en/auth" for 127.0.0.1 at 2021-04-14 01:26:39 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (4.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 91ms (Views: 0.3ms | ActiveRecord: 4.0ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-14 01:26:56 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"string12", "description"=>"string12", "address"=>"string12", "post_number"=>"0179", "contact_person"=>"string12", "start_date"=>"23/11/23", "deadline"=>"23/11/24", "locale"=>"en", "project"=>{"title"=>"string12", "description"=>"string12", "address"=>"string12", "post_number"=>"0179", "contact_person"=>"string12", "start_date"=>"23/11/23", "deadline"=>"23/11/24"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:45
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:46
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:48
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:39
  [1m[36mProject Create (5.8ms)[0m  [1m[32mINSERT INTO "projects" ("title", "description", "project_id", "address", "post_number", "contact_person", "user_account_id", "created_at", "updated_at", "start_date", "deadline") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["title", "string12"], ["description", "string12"], ["project_id", "00003"], ["address", "string12"], ["post_number", "0179"], ["contact_person", "string12"], ["user_account_id", 16], ["created_at", "2021-04-13 21:26:56.978190"], ["updated_at", "2021-04-13 21:26:56.978190"], ["start_date", "0023-11-23 00:00:00"], ["deadline", "0023-11-24 00:00:00"]]
  â†³ app/services/projects/projects_services.rb:39
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:39
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 201 Created in 19ms (Views: 0.4ms | ActiveRecord: 9.8ms)


Started GET "/" for 127.0.0.1 at 2021-04-16 01:26:41 +0400
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-16 01:27:49 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-16 01:27:49 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-16 01:27:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-16 01:27:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-16 01:27:51 +0400
  [1m[36mTaskResource Load (3.3ms)[0m  [1m[34mSELECT  "task_resources".* FROM "task_resources" ORDER BY "task_resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (11.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (3.1ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id"[0m
  [1m[36mResource Load (4.1ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id"[0m
  [1m[36mResource Load (2.7ms)[0m  [1m[34mSELECT "resources".* FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (40.7ms)[0m  [1m[34mSELECT id, tasks.name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  id, tasks.name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 11]]
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT id, tasks.name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT id, tasks.title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT id, tasks.title as task_title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id"[0m
  [1m[36mResource Load (44.0ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title, tasks.start_date FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (2.0ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title, tasks.start_date as start_date FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (2.1ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title, tasks.start_time as start_date FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title, tasks.start_time as start_date, tasks.deadline as end_date FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (2.8ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title, tasks.start_time as start_date, tasks.deadline as end_date, projects.title as project_title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (2.2ms)[0m  [1m[34mSELECT resources.id, tasks.id as task_id, tasks.title as task_title, tasks.start_time as start_date, tasks.deadline as end_date, projects.title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (2.2ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title, tasks.start_time as start, tasks.deadline as end, projects.title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-16 01:59:43 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-16 01:59:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-16 01:59:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-16 01:59:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-16 01:59:46 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-16 01:59:46 +0400
Started GET "/en/resources/resource_calendar/3" for 127.0.0.1 at 2021-04-16 02:00:02 +0400
Processing by ResourcesController#resource_calendar as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (1.5ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,
                            tasks.start_time as start, tasks.deadline as end, projects.title FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "resources"."id" = $1[0m  [["id", 3]]
  â†³ app/services/resources/resources_service.rb:30
Completed 200 OK in 72ms (Views: 0.3ms | ActiveRecord: 16.0ms)


  [1m[36mUserAccountTask Load (17.0ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (2.4ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mUserAccount Load (2.2ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-16 02:22:58 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-16 02:22:58 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-16 02:22:58 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-16 02:22:58 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-16 02:23:01 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-16 02:23:01 +0400
Started GET "/en/users/user_calendar/93" for 127.0.0.1 at 2021-04-16 02:23:14 +0400
Processing by UsersController#user_calendar as JSON
  Parameters: {"locale"=>"en", "id"=>"93"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,
                            tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:63
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 10.3ms)


Started GET "/en/users/user_calendar/93" for 127.0.0.1 at 2021-04-16 02:24:13 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#user_calendar as JSON
  Parameters: {"locale"=>"en", "id"=>"93"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ (pry):2
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,
                            tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:64
Completed 200 OK in 32989ms (Views: 0.9ms | ActiveRecord: 12.1ms)


Started GET "/en/users/user_calendar/93" for 127.0.0.1 at 2021-04-16 02:25:18 +0400
Processing by UsersController#user_calendar as JSON
  Parameters: {"locale"=>"en", "id"=>"93"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT projects.id, tasks.id as task_id, tasks.title as task_title,
                            tasks.start_time as start, tasks.deadline as end, projects.title FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:68
Completed 200 OK in 2633ms (Views: 0.2ms | ActiveRecord: 9.0ms)


  [1m[36mProject Load (1.9ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT id, title, project_id, start_date as start, deadline as end FROM "projects"[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT id, title, project_id, start_date as start, deadline as end FROM "projects"[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT id, title, project_id, start_date as start, deadline as end FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id"[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  id, title, project_id, start_date as start, deadline as end FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT id, title, project_id, start_date as start, deadline as end FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id"[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT  id, title, project_id, start_date as start, deadline as end FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  id, title, project_id, start_date as start, deadline as end FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (4.7ms)[0m  [1m[34mSELECT  projects.id, title, project_id, start_date as start, deadline as end FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  projects.id, title, project_id, start_date as start, deadline as end, user_accounts.first_name, user)accounts_last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (1.8ms)[0m  [1m[34mSELECT  projects.id, title, project_id, start_date as start, deadline as end, user_accounts.first_name, user_accounts_last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT  projects.id, title, project_id, start_date as start, deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT projects.id, title, project_id, start_date as start, deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-16 02:56:16 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-16 02:56:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-16 02:56:16 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-16 02:56:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-16 02:56:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-16 02:56:19 +0400
Started GET "/en/projects/project_calendar" for 127.0.0.1 at 2021-04-16 02:56:41 +0400
Processing by ProjectsController#project_calendar as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT projects.id, title, project_id, start_date as start,
                            deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id"[0m
  â†³ app/services/projects/projects_services.rb:35
Completed 200 OK in 38ms (Views: 0.4ms | ActiveRecord: 8.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-17 14:01:41 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-17 14:01:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-17 14:01:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-17 14:01:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-17 14:01:42 +0400
Started POST "/en/projects" for 127.0.0.1 at 2021-04-17 14:10:30 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/021", "deadline"=>"22/12/2021", "locale"=>"en", "project"=>{"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/021", "deadline"=>"22/12/2021"}}
Unpermitted parameters: :format, :locale, :project
Completed 500 Internal Server Error in 10ms (ActiveRecord: 10.7ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:66:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
app/controllers/projects_controller.rb:9:in `create'
Started POST "/en/auth" for 127.0.0.1 at 2021-04-17 14:10:52 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (4.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 252ms (Views: 0.2ms | ActiveRecord: 30.3ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-17 14:11:07 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/021", "deadline"=>"22/12/2021", "locale"=>"en", "project"=>{"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/021", "deadline"=>"22/12/2021"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (2.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:50
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:53
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:44
  [1m[36mProject Create (8.0ms)[0m  [1m[32mINSERT INTO "projects" ("title", "description", "project_id", "address", "post_number", "contact_person", "user_account_id", "created_at", "updated_at", "start_date", "deadline") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["title", "asdasdasd"], ["description", "asdasdasd"], ["project_id", "00004"], ["address", "asdasdas"], ["post_number", "asdasdasd"], ["contact_person", "asdasdasd"], ["user_account_id", 16], ["created_at", "2021-04-17 10:13:16.804541"], ["updated_at", "2021-04-17 10:13:16.804541"], ["start_date", "0021-12-23 00:00:00"], ["deadline", "2021-12-22 00:00:00"]]
  â†³ app/services/projects/projects_services.rb:44
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:44
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 201 Created in 129374ms (Views: 0.4ms | ActiveRecord: 16.4ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-17 14:14:45 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/021", "deadline"=>"22/12/2021", "locale"=>"en", "project"=>{"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/021", "deadline"=>"22/12/2021"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:51
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:52
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:54
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:45
  [1m[36mProject Create (0.5ms)[0m  [1m[32mINSERT INTO "projects" ("title", "description", "project_id", "address", "post_number", "contact_person", "user_account_id", "created_at", "updated_at", "start_date", "deadline") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["title", "asdasdasd"], ["description", "asdasdasd"], ["project_id", "00005"], ["address", "asdasdas"], ["post_number", "asdasdasd"], ["contact_person", "asdasdasd"], ["user_account_id", 16], ["created_at", "2021-04-17 10:14:45.201000"], ["updated_at", "2021-04-17 10:14:45.201000"], ["start_date", "0021-12-23 00:00:00"], ["deadline", "2021-12-22 00:00:00"]]
  â†³ app/services/projects/projects_services.rb:45
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:45
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 201 Created in 50ms (Views: 0.4ms | ActiveRecord: 10.9ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-17 14:15:03 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/2021", "deadline"=>"22/12/2021", "locale"=>"en", "project"=>{"title"=>"asdasdasd", "description"=>"asdasdasd", "address"=>"asdasdas", "post_number"=>"asdasdasd", "contact_person"=>"asdasdasd", "start_date"=>"23/12/2021", "deadline"=>"22/12/2021"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
Completed 400 Bad Request in 37ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-04-17 14:22:37 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
Completed 200 OK in 49ms (Views: 0.7ms | ActiveRecord: 11.3ms)


  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-17 14:28:11 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-17 14:28:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-17 14:28:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-17 14:28:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-17 14:28:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-17 14:28:11 +0400
Started GET "/en/projects/1" for 127.0.0.1 at 2021-04-17 14:28:21 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"1"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:66
  [1m[36mUserAccount Load (8.9ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 1]]
  â†³ app/services/projects/projects_services.rb:76
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:78
Completed 200 OK in 111ms (Views: 0.6ms | ActiveRecord: 24.7ms)


Started POST "/en/auth" for 127.0.0.1 at 2021-04-17 14:28:53 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 81ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started PUT "/en/projects" for 127.0.0.1 at 2021-04-17 14:30:21 +0400
Processing by ProjectsController#update as JSON
  Parameters: {"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"23/11/2021", "deadline"=>"23/11/2321", "locale"=>"en", "project"=>{"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"23/11/2021", "deadline"=>"23/11/2321"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:106
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:98
  [1m[36mProject Update (0.4ms)[0m  [1m[33mUPDATE "projects" SET "title" = $1, "description" = $2, "address" = $3, "post_number" = $4, "contact_person" = $5, "start_date" = $6, "deadline" = $7, "updated_at" = $8 WHERE "projects"."id" = $9[0m  [["title", "updated title"], ["description", "updated description"], ["address", "updated address"], ["post_number", "22222"], ["contact_person", "updated contact person"], ["start_date", "2021-11-23 00:00:00"], ["deadline", "2321-11-23 00:00:00"], ["updated_at", "2021-04-17 10:30:35.047781"], ["id", 1]]
  â†³ app/services/projects/projects_services.rb:98
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:98
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 200 OK in 13160ms (Views: 0.4ms | ActiveRecord: 38.4ms)


Started PUT "/en/projects" for 127.0.0.1 at 2021-04-17 14:32:48 +0400
Processing by ProjectsController#update as JSON
  Parameters: {"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"23/11/2020", "deadline"=>"23/11/2321", "locale"=>"en", "project"=>{"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"23/11/2020", "deadline"=>"23/11/2321"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:108
Completed 400 Bad Request in 2856ms (Views: 0.3ms | ActiveRecord: 11.9ms)


Started PUT "/en/projects" for 127.0.0.1 at 2021-04-17 14:33:31 +0400
Processing by ProjectsController#update as JSON
  Parameters: {"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/1990", "locale"=>"en", "project"=>{"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/1990"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:108
Completed 400 Bad Request in 3105ms (Views: 0.2ms | ActiveRecord: 1.2ms)


Started PUT "/en/projects" for 127.0.0.1 at 2021-04-17 14:34:11 +0400
Processing by ProjectsController#update as JSON
  Parameters: {"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/1990", "locale"=>"en", "project"=>{"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/1990"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:108
Completed 400 Bad Request in 114480ms (Views: 0.2ms | ActiveRecord: 7.1ms)


Started PUT "/en/projects" for 127.0.0.1 at 2021-04-17 14:36:11 +0400
Processing by ProjectsController#update as JSON
  Parameters: {"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/1990", "locale"=>"en", "project"=>{"id"=>1, "title"=>"updated title", "description"=>"updated description", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/1990"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:108
Completed 400 Bad Request in 3044ms (Views: 0.3ms | ActiveRecord: 15.1ms)


Started PUT "/en/projects" for 127.0.0.1 at 2021-04-17 14:38:09 +0400
Processing by ProjectsController#update as JSON
  Parameters: {"id"=>1, "title"=>"updated title2", "description"=>"updated description2", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/2022", "locale"=>"en", "project"=>{"id"=>1, "title"=>"updated title2", "description"=>"updated description2", "address"=>"updated address", "post_number"=>"22222", "contact_person"=>"updated contact person", "start_date"=>"17/04/2021", "deadline"=>"23/11/2022"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:106
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:98
  [1m[36mProject Update (0.4ms)[0m  [1m[33mUPDATE "projects" SET "title" = $1, "description" = $2, "start_date" = $3, "deadline" = $4, "updated_at" = $5 WHERE "projects"."id" = $6[0m  [["title", "updated title2"], ["description", "updated description2"], ["start_date", "2021-04-17 00:00:00"], ["deadline", "2022-11-23 00:00:00"], ["updated_at", "2021-04-17 10:38:12.740801"], ["id", 1]]
  â†³ app/services/projects/projects_services.rb:98
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:98
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 200 OK in 3479ms (Views: 0.3ms | ActiveRecord: 13.0ms)


  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks"[0m
  [1m[35m (39.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "tasks"[0m
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  [1m[36mAttachment Load (37.3ms)[0m  [1m[34mSELECT "attachments".* FROM "attachments" WHERE "attachments"."attached_on_type" = $1[0m  [["attached_on_type", "Project"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-17 14:52:56 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-17 14:52:56 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-17 14:52:56 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-17 14:52:56 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-17 14:52:56 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-17 14:52:56 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-04-17 14:53:07 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 106ms (Views: 0.2ms | ActiveRecord: 6.6ms)


Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 14:53:32 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:127
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mProject Destroy (3.4ms)[0m  [1m[31mDELETE FROM "projects" WHERE "projects"."id" = $1[0m  [["id", 1]]
  â†³ (pry):2
  [1m[36mTask Load (1.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:115
  [1m[36mTask Load (1.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1 LIMIT $2[0m  [["project_id", 1], ["LIMIT", 11]]
  â†³ app/services/projects/projects_services.rb:115
  [1m[36mProject Destroy (0.5ms)[0m  [1m[31mDELETE FROM "projects" WHERE "projects"."id" = $1[0m  [["id", 1]]
  â†³ app/services/projects/projects_services.rb:116
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/projects/projects_services.rb:114
Completed 500 Internal Server Error in 51483ms (ActiveRecord: 24.1ms)


  
ActiveRecord::StatementInvalid (PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "projects" WHERE "projects"."id" = $1):
  
app/services/projects/projects_services.rb:116:in `block in delete_project'
app/services/projects/projects_services.rb:114:in `delete_project'
app/controllers/projects_controller.rb:40:in `destroy'
Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 14:54:45 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:127
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Destroy (41.4ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ (pry):5
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ (pry):6
  [1m[36mTask Destroy (0.4ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:116
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/projects/projects_services.rb:114
Completed 500 Internal Server Error in 29754ms (ActiveRecord: 51.5ms)


  
ActiveRecord::StatementInvalid (PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "tasks" WHERE "tasks"."project_id" = $1):
  
app/services/projects/projects_services.rb:116:in `block in delete_project'
app/services/projects/projects_services.rb:114:in `delete_project'
app/controllers/projects_controller.rb:40:in `destroy'
Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 14:55:18 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:127
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ (pry):8
  [1m[36mTask Destroy (1.3ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 4]]
  â†³ (pry):8
  [1m[36mTask Destroy (0.7ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 4]]
  â†³ (pry):10
  [1m[36mTask Destroy (0.4ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:116
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/projects/projects_services.rb:114
Completed 500 Internal Server Error in 54924ms (ActiveRecord: 12.8ms)


  
ActiveRecord::StatementInvalid (PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "tasks" WHERE "tasks"."project_id" = $1):
  
app/services/projects/projects_services.rb:116:in `block in delete_project'
app/services/projects/projects_services.rb:114:in `delete_project'
app/controllers/projects_controller.rb:40:in `destroy'
Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 14:56:15 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:127
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ (pry):11
  [1m[36mTask Destroy (1.0ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 4]]
  â†³ (pry):11
  [1m[36mTask Destroy (0.9ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 4]]
  â†³ app/services/projects/projects_services.rb:116
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/projects/projects_services.rb:114
Completed 500 Internal Server Error in 265493ms (ActiveRecord: 23.8ms)


  
ActiveRecord::StatementInvalid (PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: DELETE FROM "tasks" WHERE "tasks"."id" = $1):
  
app/services/projects/projects_services.rb:116:in `block (2 levels) in delete_project'
app/services/projects/projects_services.rb:116:in `block in delete_project'
app/services/projects/projects_services.rb:114:in `delete_project'
app/controllers/projects_controller.rb:40:in `destroy'
Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 15:00:51 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:127
  [1m[36mUserAccountTask Load (1.2ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):15
  [1m[36mCACHE UserAccountTask Load (0.1ms)[0m  [1m[34mSELECT  "user_account_tasks".* FROM "user_account_tasks" ORDER BY "user_account_tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):16
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):16
  [1m[36mUserAccountTask Destroy (0.7ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."id" = $1[0m  [["id", 5]]
  â†³ (pry):16
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):16
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:116
  [1m[36mTask Destroy (0.9ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 4]]
  â†³ app/services/projects/projects_services.rb:116
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/projects/projects_services.rb:114
Completed 500 Internal Server Error in 42625ms (ActiveRecord: 55.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "tasks" violates foreign key constraint "fk_rails_cf6b2afe16" on table "user_account_tasks"
DETAIL:  Key (id)=(4) is still referenced from table "user_account_tasks".
: DELETE FROM "tasks" WHERE "tasks"."id" = $1):
  
app/services/projects/projects_services.rb:116:in `block (2 levels) in delete_project'
app/services/projects/projects_services.rb:116:in `block in delete_project'
app/services/projects/projects_services.rb:114:in `delete_project'
app/controllers/projects_controller.rb:40:in `destroy'
Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 15:04:12 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:140
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Load (0.8ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1 LIMIT $2[0m  [["project_id", 1], ["LIMIT", 11]]
  â†³ app/services/projects/projects_services.rb:125
  [1m[36mTask Load (0.9ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:125
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/projects/projects_services.rb:114
Completed 500 Internal Server Error in 59790ms (ActiveRecord: 25.7ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/projects/projects_services.rb:126:in `delete_tasks'
app/services/projects/projects_services.rb:116:in `block in delete_project'
app/services/projects/projects_services.rb:114:in `delete_project'
app/controllers/projects_controller.rb:40:in `destroy'
Started DELETE "/en/projects?id=1" for 127.0.0.1 at 2021-04-17 15:05:54 +0400
Processing by ProjectsController#destroy as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:142
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:126
  [1m[36mUserAccountTask Destroy (0.2ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1[0m  [["task_id", 4]]
  â†³ app/services/projects/projects_services.rb:129
  [1m[36mTaskResource Destroy (4.6ms)[0m  [1m[31mDELETE FROM "task_resources" WHERE "task_resources"."task_id" = $1[0m  [["task_id", 4]]
  â†³ app/services/projects/projects_services.rb:130
  [1m[36mUserAccountTask Destroy (0.3ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1[0m  [["task_id", 5]]
  â†³ app/services/projects/projects_services.rb:129
  [1m[36mTaskResource Destroy (0.3ms)[0m  [1m[31mDELETE FROM "task_resources" WHERE "task_resources"."task_id" = $1[0m  [["task_id", 5]]
  â†³ app/services/projects/projects_services.rb:130
  [1m[36mUserAccountTask Destroy (0.5ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1[0m  [["task_id", 6]]
  â†³ app/services/projects/projects_services.rb:129
  [1m[36mTaskResource Destroy (0.3ms)[0m  [1m[31mDELETE FROM "task_resources" WHERE "task_resources"."task_id" = $1[0m  [["task_id", 6]]
  â†³ app/services/projects/projects_services.rb:130
  [1m[36mUserAccountTask Destroy (0.3ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1[0m  [["task_id", 3]]
  â†³ app/services/projects/projects_services.rb:129
  [1m[36mTaskResource Destroy (0.3ms)[0m  [1m[31mDELETE FROM "task_resources" WHERE "task_resources"."task_id" = $1[0m  [["task_id", 3]]
  â†³ app/services/projects/projects_services.rb:130
  [1m[36mTask Destroy (0.9ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:132
  [1m[36mProject Destroy (0.6ms)[0m  [1m[31mDELETE FROM "projects" WHERE "projects"."id" = $1[0m  [["id", 1]]
  â†³ app/services/projects/projects_services.rb:118
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:114
  [1m[36mTask Load (1.0ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  â†³ app/services/projects/projects_services.rb:120
Completed 200 OK in 27294ms (Views: 0.2ms | ActiveRecord: 25.8ms)


  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 1]]
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-18 03:07:32 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-18 03:07:32 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-18 03:07:32 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-18 03:07:32 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-18 03:07:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-18 03:07:33 +0400
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (3.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-18 03:09:12 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test", "description"=>"test string", "start_time"=>"23/12/2023", "deadline"=>"23/12/2026", "project_id"=>5, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test", "description"=>"test string", "start_time"=>"23/12/2023", "deadline"=>"23/12/2026", "project_id"=>5, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (1.9ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:155
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:150
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:150
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:150
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:150
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:150
  [1m[36mTask Create (3.7ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "deadline", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "test"], ["description", "test string"], ["task_status_id", 5], ["start_time", "2023-12-23 00:00:00"], ["deadline", "2026-12-23 00:00:00"], ["created_at", "2021-04-17 23:09:12.531538"], ["updated_at", "2021-04-17 23:09:12.531538"], ["project_id", 5]]
  â†³ app/services/tasks/services.rb:150
  [1m[36mUserAccountTask Create (1.3ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 7], ["created_at", "2021-04-17 23:09:12.537331"], ["updated_at", "2021-04-17 23:09:12.537331"]]
  â†³ app/services/tasks/services.rb:150
  [1m[36mTaskResource Create (1.3ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 9], ["task_id", 7], ["created_at", "2021-04-17 23:09:12.539545"], ["updated_at", "2021-04-17 23:09:12.539545"]]
  â†³ app/services/tasks/services.rb:150
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:150
Completed 201 Created in 151ms (Views: 0.2ms | ActiveRecord: 36.1ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-18 03:13:23 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-18 03:13:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-18 03:13:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-18 03:13:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-18 03:13:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-18 03:13:24 +0400
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started PUT "/en/tasks" for 127.0.0.1 at 2021-04-18 03:15:51 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>7, "title"=>"updated string", "description"=>"updated string", "start_time"=>"11/12/2021", "deadline"=>"11/12/2023", "project_id"=>5, "user_account_tasks_attributes"=>[{"user_account_id"=>9}], "task_resources_attributes"=>[{"resource_id"=>3}], "locale"=>"en", "task"=>{"id"=>7, "title"=>"updated string", "description"=>"updated string", "start_time"=>"11/12/2021", "deadline"=>"11/12/2023", "project_id"=>5, "user_account_tasks_attributes"=>[{"user_account_id"=>9}], "task_resources_attributes"=>[{"resource_id"=>3}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTask Load (0.5ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:120
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:159
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mTask Update (0.5ms)[0m  [1m[33mUPDATE "tasks" SET "title" = $1, "description" = $2, "start_time" = $3, "deadline" = $4, "updated_at" = $5 WHERE "tasks"."id" = $6[0m  [["title", "updated string"], ["description", "updated string"], ["start_time", "2021-12-11 00:00:00"], ["deadline", "2023-12-11 00:00:00"], ["updated_at", "2021-04-17 23:15:51.946232"], ["id", 7]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mUserAccountTask Create (1.2ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 9], ["task_id", 7], ["created_at", "2021-04-17 23:15:51.948844"], ["updated_at", "2021-04-17 23:15:51.948844"]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mTaskResource Create (0.9ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 3], ["task_id", 7], ["created_at", "2021-04-17 23:15:51.951849"], ["updated_at", "2021-04-17 23:15:51.951849"]]
  â†³ app/services/tasks/services.rb:159
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:159
Completed 200 OK in 57ms (Views: 0.2ms | ActiveRecord: 41.2ms)


  [1m[36mTask Load (1.1ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:16:20 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:82
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 2.8ms)


Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:19:44 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
Completed 500 Internal Server Error in 55ms (ActiveRecord: 16.4ms)


  
ActiveRecord::StatementInvalid (PG::GroupingError: ERROR:  column "user_account_tasks.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT user_accounts.id, first_name, last_name, user_account...
                                                        ^
: SELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id):
  
app/services/tasks/services.rb:78:in `get_users'
app/services/tasks/services.rb:67:in `build_object'
app/services/tasks/services.rb:46:in `block in task_list'
app/services/tasks/services.rb:45:in `task_list'
app/controllers/tasks_controller.rb:16:in `tasks_list'
Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:20:31 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:82
Completed 200 OK in 87ms (Views: 0.3ms | ActiveRecord: 16.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-18 03:26:24 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-18 03:26:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-18 03:26:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-18 03:26:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-18 03:26:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-18 03:26:24 +0400
  [1m[36mTask Load (0.4ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:27:29 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.4ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:82
Completed 200 OK in 99ms (Views: 0.3ms | ActiveRecord: 22.9ms)


Started PUT "/en/tasks" for 127.0.0.1 at 2021-04-18 03:29:14 +0400
Processing by TasksController#update as JSON
  Parameters: {"id"=>7, "title"=>"new string", "description"=>"new string", "start_time"=>"03/03/2022", "deadline"=>"04/04/2022", "project_id"=>5, "user_account_tasks_attributes"=>[{"id"=>7, "user_account_id"=>9, "_destroy"=>false}, {"id"=>6, "user_account_id"=>93, "_destroy"=>true}], "task_resources_attributes"=>[{"resource_id"=>3}], "locale"=>"en", "task"=>{"id"=>7, "title"=>"new string", "description"=>"new string", "start_time"=>"03/03/2022", "deadline"=>"04/04/2022", "project_id"=>5, "user_account_tasks_attributes"=>[{"id"=>7, "user_account_id"=>9, "_destroy"=>false}, {"id"=>6, "user_account_id"=>93, "_destroy"=>true}], "task_resources_attributes"=>[{"resource_id"=>3}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:120
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:159
  [1m[36mUserAccountTask Load (0.3ms)[0m  [1m[34mSELECT "user_account_tasks".* FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1 AND "user_account_tasks"."id" IN ($2, $3)[0m  [["task_id", 7], ["id", 7], ["id", 6]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mResource Load (9.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mTask Update (0.3ms)[0m  [1m[33mUPDATE "tasks" SET "title" = $1, "description" = $2, "start_time" = $3, "deadline" = $4, "updated_at" = $5 WHERE "tasks"."id" = $6[0m  [["title", "new string"], ["description", "new string"], ["start_time", "2022-03-03 00:00:00"], ["deadline", "2022-04-04 00:00:00"], ["updated_at", "2021-04-17 23:29:14.339651"], ["id", 7]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mUserAccountTask Destroy (0.2ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."id" = $1[0m  [["id", 6]]
  â†³ app/services/tasks/services.rb:159
  [1m[36mTaskResource Create (0.3ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 3], ["task_id", 7], ["created_at", "2021-04-17 23:29:14.341948"], ["updated_at", "2021-04-17 23:29:14.341948"]]
  â†³ app/services/tasks/services.rb:159
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:159
Completed 200 OK in 76ms (Views: 0.3ms | ActiveRecord: 54.7ms)


Started GET "/en/projects/5" for 127.0.0.1 at 2021-04-18 03:29:26 +0400
Processing by ProjectsController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:69
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, 'employ' AS status FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" WHERE "projects"."id" = $1 GROUP BY user_accounts.id[0m  [["id", 5]]
  â†³ app/services/projects/projects_services.rb:79
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:81
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 1.6ms)


Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:29:46 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.1ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.1ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT resources.id, name FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:82
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.1ms)


Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:31:59 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT resources.id, name, task_resources.id as task_resource_id FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id, task_resources.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:82
Completed 200 OK in 105ms (Views: 0.3ms | ActiveRecord: 15.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-18 03:33:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-18 03:33:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-18 03:33:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-18 03:33:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-18 03:33:53 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-18 03:33:53 +0400
Started GET "/en/tasks/tasks_list/5" for 127.0.0.1 at 2021-04-18 03:34:47 +0400
Processing by TasksController#tasks_list as JSON
  Parameters: {"locale"=>"en", "id"=>"5"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" WHERE "tasks"."project_id" = $1[0m  [["project_id", 5]]
  â†³ app/services/tasks/services.rb:45
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:63
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:66
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT resources.id, name, task_resources.id as task_resource_id FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id, task_resources.id[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:82
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 3.8ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-18 03:36:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-18 03:36:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-18 03:36:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-18 03:36:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-18 03:36:12 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-18 03:36:12 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-18 03:37:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-18 03:37:51 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-18 03:37:51 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-18 03:37:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-18 03:37:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-18 03:37:51 +0400
Started DELETE "/en/tasks?id=7" for 127.0.0.1 at 2021-04-18 03:38:01 +0400
Processing by TasksController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:126
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:108
  [1m[36mTaskResource Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "task_resources" WHERE "task_resources"."task_id" = $1 LIMIT $2[0m  [["task_id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:109
  [1m[36mTaskResource Update All (1.0ms)[0m  [1m[33mUPDATE "task_resources" SET "task_id" = NULL WHERE "task_resources"."task_id" = $1[0m  [["task_id", 7]]
  â†³ app/services/tasks/services.rb:109
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/tasks/services.rb:108
Completed 500 Internal Server Error in 5164ms (ActiveRecord: 6.1ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "task_id" violates not-null constraint
DETAIL:  Failing row contains (6, 9, null, 2021-04-17 23:09:12.539545, 2021-04-17 23:09:12.539545).
: UPDATE "task_resources" SET "task_id" = NULL WHERE "task_resources"."task_id" = $1):
  
app/services/tasks/services.rb:109:in `block in delete_task'
app/services/tasks/services.rb:108:in `delete_task'
app/controllers/tasks_controller.rb:47:in `destroy'
Started DELETE "/en/tasks?id=7" for 127.0.0.1 at 2021-04-18 03:38:21 +0400
Processing by TasksController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.2ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:126
  [1m[36mTaskResource Load (0.4ms)[0m  [1m[34mSELECT "task_resources".* FROM "task_resources" WHERE "task_resources"."task_id" = $1[0m  [["task_id", 7]]
  â†³ app/services/tasks/services.rb:107
  [1m[36mUserAccountTask Load (0.6ms)[0m  [1m[34mSELECT "user_account_tasks".* FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1[0m  [["task_id", 7]]
  â†³ app/services/tasks/services.rb:107
  [1m[36mTaskResource Update All (1.5ms)[0m  [1m[33mUPDATE "task_resources" SET "task_id" = NULL WHERE "task_resources"."task_id" = $1[0m  [["task_id", 7]]
  â†³ (pry):3
  [1m[36mTaskResource Update All (1.4ms)[0m  [1m[33mUPDATE "task_resources" SET "task_id" = NULL WHERE "task_resources"."task_id" = $1[0m  [["task_id", 7]]
  â†³ (pry):4
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:108
  [1m[36mTaskResource Update All (0.5ms)[0m  [1m[33mUPDATE "task_resources" SET "task_id" = NULL WHERE "task_resources"."task_id" = $1[0m  [["task_id", 7]]
  â†³ app/services/tasks/services.rb:109
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/tasks/services.rb:108
Completed 500 Internal Server Error in 89013ms (ActiveRecord: 14.7ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "task_id" violates not-null constraint
DETAIL:  Failing row contains (6, 9, null, 2021-04-17 23:09:12.539545, 2021-04-17 23:09:12.539545).
: UPDATE "task_resources" SET "task_id" = NULL WHERE "task_resources"."task_id" = $1):
  
app/services/tasks/services.rb:109:in `block in delete_task'
app/services/tasks/services.rb:108:in `delete_task'
app/controllers/tasks_controller.rb:47:in `destroy'
Started DELETE "/en/tasks?id=7" for 127.0.0.1 at 2021-04-18 03:40:11 +0400
Processing by TasksController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mTask Load (0.3ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" WHERE "tasks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:128
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:108
  [1m[36mUserAccountTask Destroy (0.3ms)[0m  [1m[31mDELETE FROM "user_account_tasks" WHERE "user_account_tasks"."task_id" = $1[0m  [["task_id", 7]]
  â†³ app/services/tasks/services.rb:111
  [1m[36mTaskResource Destroy (0.4ms)[0m  [1m[31mDELETE FROM "task_resources" WHERE "task_resources"."task_id" = $1[0m  [["task_id", 7]]
  â†³ app/services/tasks/services.rb:112
  [1m[36mTask Destroy (0.6ms)[0m  [1m[31mDELETE FROM "tasks" WHERE "tasks"."id" = $1[0m  [["id", 7]]
  â†³ app/services/tasks/services.rb:113
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:108
Completed 200 OK in 2525ms (Views: 0.6ms | ActiveRecord: 45.3ms)


  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2021-04-25 19:32:40 +0400
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2021-04-25 19:32:40 +0400
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-25 19:32:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-25 19:32:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-25 19:32:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-25 19:32:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-25 19:32:53 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-25 19:32:53 +0400
  [1m[36mProject Load (2.8ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/auth" for 127.0.0.1 at 2021-04-25 19:37:17 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (7.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 307ms (Views: 0.4ms | ActiveRecord: 33.1ms)


Started POST "/en/projects" for 127.0.0.1 at 2021-04-25 19:38:15 +0400
Processing by ProjectsController#create as JSON
  Parameters: {"title"=>"test_project", "description"=>"test project description", "address"=>"gogebashvili streat 10", "post_number"=>"577520250", "contact_person"=>"anzor", "start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en", "project"=>{"title"=>"test_project", "description"=>"test project description", "address"=>"gogebashvili streat 10", "post_number"=>"577520250", "contact_person"=>"anzor", "start_date"=>"26/04/2021", "deadline"=>"30/04/2021"}}
Unpermitted parameters: :format, :locale, :project
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:54
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:55
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:57
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/projects/projects_services.rb:48
  [1m[36mProject Create (4.6ms)[0m  [1m[32mINSERT INTO "projects" ("title", "description", "project_id", "address", "post_number", "contact_person", "user_account_id", "created_at", "updated_at", "start_date", "deadline") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["title", "test_project"], ["description", "test project description"], ["project_id", "00006"], ["address", "gogebashvili streat 10"], ["post_number", "577520250"], ["contact_person", "anzor"], ["user_account_id", 16], ["created_at", "2021-04-25 15:38:15.829969"], ["updated_at", "2021-04-25 15:38:15.829969"], ["start_date", "2021-04-26 00:00:00"], ["deadline", "2021-04-30 00:00:00"]]
  â†³ app/services/projects/projects_services.rb:48
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/projects/projects_services.rb:48
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:15
Completed 201 Created in 44ms (Views: 0.3ms | ActiveRecord: 10.3ms)


  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (2.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-25 19:41:10 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test task", "description"=>"test task description", "start_time"=>"27/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test task", "description"=>"test task description", "start_time"=>"27/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ (pry):4
Completed 201 Created in 244314ms (Views: 0.1ms | ActiveRecord: 5.0ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-25 19:46:57 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test task", "description"=>"test task description", "start_time"=>"27/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test task", "description"=>"test task description", "start_time"=>"27/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:123
  [1m[36mTaskStatus Load (3.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:185
Completed 400 Bad Request in 3635ms (Views: 0.6ms | ActiveRecord: 17.8ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-25 19:47:19 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test task", "description"=>"test task description", "start_time"=>"24/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test task", "description"=>"test task description", "start_time"=>"24/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:123
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:185
Completed 400 Bad Request in 2968ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-25 19:47:57 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test task", "description"=>"test task description", "start_time"=>"25/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test task", "description"=>"test task description", "start_time"=>"25/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:124
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:186
Completed 400 Bad Request in 2529ms (Views: 0.4ms | ActiveRecord: 11.2ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-25 19:48:10 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test task", "description"=>"test task description", "start_time"=>"24/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test task", "description"=>"test task description", "start_time"=>"24/04/2021", "deadline"=>"01/05/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:186
Completed 400 Bad Request in 2514ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-04-25 19:51:38 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (5.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 65ms (Views: 1.4ms | ActiveRecord: 14.6ms)


  [1m[36mUserAccount Load (4.9ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "task_statuses" ON "task_statuses"."id" = "tasks"."task_status_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id"[0m
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-25 20:12:30 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by TasksController#create as JSON
  Parameters: {"title"=>"test task", "description"=>"test task description", "start_time"=>"26/04/2021", "deadline"=>"27/04/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"test task", "description"=>"test task description", "start_time"=>"26/04/2021", "deadline"=>"27/04/2021", "project_id"=>6, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:123
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:185
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:180
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:180
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:180
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:180
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:180
  [1m[36mTask Create (1.8ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "deadline", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "test task"], ["description", "test task description"], ["task_status_id", 5], ["start_time", "2021-04-26 00:00:00"], ["deadline", "2021-04-27 00:00:00"], ["created_at", "2021-04-25 16:12:30.490254"], ["updated_at", "2021-04-25 16:12:30.490254"], ["project_id", 6]]
  â†³ app/services/tasks/services.rb:180
  [1m[36mUserAccountTask Create (1.6ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 8], ["created_at", "2021-04-25 16:12:30.493852"], ["updated_at", "2021-04-25 16:12:30.493852"]]
  â†³ app/services/tasks/services.rb:180
  [1m[36mTaskResource Create (2.7ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 9], ["task_id", 8], ["created_at", "2021-04-25 16:12:30.496392"], ["updated_at", "2021-04-25 16:12:30.496392"]]
  â†³ app/services/tasks/services.rb:180
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:180
Completed 201 Created in 123ms (Views: 0.2ms | ActiveRecord: 32.9ms)


  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" INNER JOIN "task_statuses" ON "task_statuses"."id" = "tasks"."task_status_id" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id"[0m
  [1m[36mUserAccount Load (2.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id[0m
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (4.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.tasks_id[0m
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.tasks_id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (2.1ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id LEFT JOIN projects ON projects.id = tasks.project_id[0m
  [1m[36mUserAccount Load (1.7ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id LEFT JOIN projects ON projects.id = tasks.project_id[0m
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT tasks.start_date FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  tasks.start_date FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT tasks.start_date FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (1.7ms)[0m  [1m[34mSELECT user_accounts.id, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT user_accounts.id, user_accounts.first_name, user_accounts.last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id[0m
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", false]]
  [1m[36mCustomer Load (1.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", false]]
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."user_account_id" = $1[0m  [["user_account_id", 93]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 11]]
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."user_account_id" = $1[0m  [["user_account_id", 93]]
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT tasks.start_date FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.7ms)[0m  [1m[34mSELECT tasks.start_time FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 7]]
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  [1m[36mCustomer Load (2.2ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
Started GET "/" for 127.0.0.1 at 2021-04-29 01:15:51 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by HealthController#check_health as HTML
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2021-04-29 01:15:51 +0400
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-29 01:15:56 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-29 01:15:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-29 01:15:56 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-29 01:15:56 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-29 01:15:59 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-29 01:16:12 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-29 01:16:12 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-29 01:16:12 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-29 01:16:12 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-29 01:16:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-29 01:16:14 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-29 01:17:15 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-29 01:17:15 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-29 01:17:15 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-29 01:17:15 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-29 01:17:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-29 01:17:19 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-29 01:19:49 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-29 01:19:49 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-29 01:19:49 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-29 01:19:49 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-29 01:19:52 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-29 01:19:52 +0400
Started GET "/en/users/task_user_list" for 127.0.0.1 at 2021-04-29 01:20:23 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (2.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 19569ms (ActiveRecord: 28.8ms)


  
NoMethodError (undefined method `id' for #<Hash:0x00007fe0f435c7f8>):
  
app/services/account/users_service.rb:121:in `get_user_dates'
app/services/account/users_service.rb:84:in `block in set_dates'
app/services/account/users_service.rb:83:in `each'
app/services/account/users_service.rb:83:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-29 01:21:42 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-29 01:21:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-29 01:21:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-29 01:21:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-29 01:21:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-29 01:21:48 +0400
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:22:06 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mCACHE Customer Load (0.0ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 49202ms (ActiveRecord: 20.9ms)


  
NoMethodError (undefined method `id' for #<Hash:0x00007f63d83dc078>):
  
app/services/account/users_service.rb:121:in `get_user_dates'
app/services/account/users_service.rb:84:in `block in set_dates'
app/services/account/users_service.rb:83:in `each'
app/services/account/users_service.rb:83:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:22:59 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
Completed 500 Internal Server Error in 12928ms (ActiveRecord: 8.2ms)


  
NoMethodError (undefined method `id' for #<Hash:0x00007f63d00ce488>):
  
app/services/account/users_service.rb:124:in `get_user_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:23:41 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:125
Completed 500 Internal Server Error in 9306ms (ActiveRecord: 8.6ms)


  
TypeError (can't iterate from NilClass):
  
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `to_a'
app/services/account/users_service.rb:110:in `block in calculate_dates'
app/services/account/users_service.rb:109:in `each'
app/services/account/users_service.rb:109:in `calculate_dates'
app/services/account/users_service.rb:93:in `build_available_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:24:19 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:126
Completed 500 Internal Server Error in 63396ms (ActiveRecord: 6.7ms)


  
TypeError (can't iterate from NilClass):
  
app/services/account/users_service.rb:111:in `each'
app/services/account/users_service.rb:111:in `to_a'
app/services/account/users_service.rb:111:in `block in calculate_dates'
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `calculate_dates'
app/services/account/users_service.rb:93:in `build_available_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:25:30 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:126
Completed 500 Internal Server Error in 39304ms (ActiveRecord: 8.9ms)


  
TypeError (can't iterate from NilClass):
  
app/services/account/users_service.rb:111:in `each'
app/services/account/users_service.rb:111:in `to_a'
app/services/account/users_service.rb:111:in `block in calculate_dates'
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `calculate_dates'
app/services/account/users_service.rb:93:in `build_available_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:26:18 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:126
Completed 500 Internal Server Error in 111729ms (ActiveRecord: 1.2ms)


  
TypeError (can't iterate from NilClass):
  
app/services/account/users_service.rb:111:in `each'
app/services/account/users_service.rb:111:in `to_a'
app/services/account/users_service.rb:111:in `block in calculate_dates'
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `calculate_dates'
app/services/account/users_service.rb:93:in `build_available_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:28:12 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:85
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 40]]
  â†³ app/services/account/users_service.rb:126
Completed 500 Internal Server Error in 257973ms (ActiveRecord: 3.2ms)


  
TypeError (can't iterate from NilClass):
  
app/services/account/users_service.rb:111:in `each'
app/services/account/users_service.rb:111:in `to_a'
app/services/account/users_service.rb:111:in `block in calculate_dates'
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `calculate_dates'
app/services/account/users_service.rb:93:in `build_available_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:32:33 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 40]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 41]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 43]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 45]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 46]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 47]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 48]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 49]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 50]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 51]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 52]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 53]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 54]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 55]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 56]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 59]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 60]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 61]]
  â†³ app/services/account/users_service.rb:127
  [1m[35m (17.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_accounts"[0m
  â†³ (pry):30
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 62]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (2.0ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 63]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 76]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 77]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 78]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 79]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 80]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 81]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (2.0ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 82]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 84]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 87]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 88]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 89]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 90]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 91]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 92]]
  â†³ app/services/account/users_service.rb:127
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:127
Completed 500 Internal Server Error in 50317ms (ActiveRecord: 61.7ms)


  
TypeError (can't iterate from Time):
  
app/services/account/users_service.rb:112:in `each'
app/services/account/users_service.rb:112:in `to_a'
app/services/account/users_service.rb:112:in `block in calculate_dates'
app/services/account/users_service.rb:111:in `each'
app/services/account/users_service.rb:111:in `calculate_dates'
app/services/account/users_service.rb:94:in `build_available_dates'
app/services/account/users_service.rb:86:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:34:05 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 40]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 41]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 43]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 45]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 46]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 47]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 48]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 49]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 50]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 51]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 52]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 53]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 54]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 55]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 56]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 59]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 60]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 61]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.8ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 62]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 63]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 76]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 77]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 78]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 79]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 80]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 81]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 82]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 84]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 87]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 88]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 89]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 90]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 91]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 92]]
  â†³ app/services/account/users_service.rb:126
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:126
Completed 500 Internal Server Error in 59035ms (ActiveRecord: 36.4ms)


  
TypeError (can't iterate from Time):
  
app/services/account/users_service.rb:111:in `each'
app/services/account/users_service.rb:111:in `to_a'
app/services/account/users_service.rb:111:in `block in calculate_dates'
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `calculate_dates'
app/services/account/users_service.rb:92:in `build_available_dates'
app/services/account/users_service.rb:85:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:36:03 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 40]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 41]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 43]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 45]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 46]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 47]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 48]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 49]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 50]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 51]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 52]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 53]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 54]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 55]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 56]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 59]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 60]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 61]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 62]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 63]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 76]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 77]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 78]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 79]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 80]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 81]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 82]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 84]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 87]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 88]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 89]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 90]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 91]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 92]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:125
Completed 500 Internal Server Error in 172561ms (ActiveRecord: 22.8ms)


  
TypeError (can't iterate from Time):
  
app/services/account/users_service.rb:110:in `each'
app/services/account/users_service.rb:110:in `to_a'
app/services/account/users_service.rb:110:in `block in calculate_dates'
app/services/account/users_service.rb:109:in `each'
app/services/account/users_service.rb:109:in `calculate_dates'
app/services/account/users_service.rb:92:in `build_available_dates'
app/services/account/users_service.rb:85:in `block in set_dates'
app/services/account/users_service.rb:84:in `each'
app/services/account/users_service.rb:84:in `set_dates'
app/services/account/users_service.rb:77:in `task_user_list'
app/controllers/users_controller.rb:23:in `task_user_list'
Started GET "/en/users/task_user_list?start_date=26%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-29 01:38:59 +0400
Processing by UsersController#task_user_list as JSON
  Parameters: {"start_date"=>"26/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:39
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 39]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 40]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 41]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 43]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 45]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 46]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 47]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 48]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 49]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 50]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 51]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 52]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 53]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 54]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 55]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 56]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 59]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 60]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 61]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 62]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 63]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 76]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 77]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 78]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 79]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 80]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 81]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 82]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 84]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 87]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 88]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 89]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 90]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 91]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 92]]
  â†³ app/services/account/users_service.rb:125
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/account/users_service.rb:125
Completed 200 OK in 7348ms (Views: 3.8ms | ActiveRecord: 24.2ms)


  [1m[36mTaskResource Load (2.6ms)[0m  [1m[34mSELECT  "task_resources".* FROM "task_resources" ORDER BY "task_resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (6.8ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.user_account_id = resource.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 9]]
  [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resource.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 9]]
  [1m[36mResource Load (3.5ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-30 00:10:51 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-30 00:10:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-30 00:10:51 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-30 00:10:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-30 00:10:52 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-30 00:10:52 +0400
Started GET "/en/resources/task_resource_list?start_date=23%2F04%2F2021&deadline=30%2F04%2F2021" for 127.0.0.1 at 2021-04-30 00:11:26 +0400
Processing by ResourcesController#task_resource_list as JSON
  Parameters: {"start_date"=>"23/04/2021", "deadline"=>"30/04/2021", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (16.8ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:60
  [1m[36mResource Load (2.4ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:68
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:77
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 3]]
  â†³ app/services/resources/resources_service.rb:151
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 4]]
  â†³ app/services/resources/resources_service.rb:151
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 5]]
  â†³ app/services/resources/resources_service.rb:151
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 6]]
  â†³ app/services/resources/resources_service.rb:151
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 7]]
  â†³ app/services/resources/resources_service.rb:151
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 8]]
  â†³ app/services/resources/resources_service.rb:151
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 9]]
  â†³ app/services/resources/resources_service.rb:151
Completed 200 OK in 84ms (Views: 0.5ms | ActiveRecord: 36.2ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-04-30 00:14:01 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-04-30 00:14:01 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-04-30 00:14:01 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-04-30 00:14:01 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-04-30 00:14:01 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-04-30 00:14:01 +0400
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-04-30 00:27:37 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
Completed 200 OK in 66ms (Views: 0.8ms | ActiveRecord: 13.6ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 00:28:56 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"29/04/2021", "deadline"=>"30/04/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"29/04/2021", "deadline"=>"30/04/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:185
Completed 400 Bad Request in 15ms (Views: 0.2ms | ActiveRecord: 5.6ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 00:29:28 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:123
  [1m[36mTaskStatus Load (0.1ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:185
Completed 400 Bad Request in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 00:49:18 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):7
  [1m[36mTaskStatus Load (0.4ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:195
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/tasks/services.rb:190
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:190
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:190
  [1m[36mTaskStatus Load (0.3ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:190
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:190
  [1m[36mTask Create (1.4ms)[0m  [1m[32mINSERT INTO "tasks" ("title", "description", "task_status_id", "start_time", "deadline", "created_at", "updated_at", "project_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["title", "sdfsdfsd"], ["description", "sdfsdfsdf"], ["task_status_id", 5], ["start_time", "2021-04-30 00:00:00"], ["deadline", "2021-05-30 00:00:00"], ["created_at", "2021-04-29 21:00:25.534547"], ["updated_at", "2021-04-29 21:00:25.534547"], ["project_id", 2]]
  â†³ app/services/tasks/services.rb:190
  [1m[36mUserAccountTask Create (0.6ms)[0m  [1m[32mINSERT INTO "user_account_tasks" ("user_account_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_account_id", 93], ["task_id", 9], ["created_at", "2021-04-29 21:00:25.537169"], ["updated_at", "2021-04-29 21:00:25.537169"]]
  â†³ app/services/tasks/services.rb:190
  [1m[36mTaskResource Create (0.5ms)[0m  [1m[32mINSERT INTO "task_resources" ("resource_id", "task_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["resource_id", 9], ["task_id", 9], ["created_at", "2021-04-29 21:00:25.538584"], ["updated_at", "2021-04-29 21:00:25.538584"]]
  â†³ app/services/tasks/services.rb:190
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/tasks/services.rb:190
Completed 201 Created in 666969ms (Views: 0.2ms | ActiveRecord: 34.3ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:00:41 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 1.6ms)


  
SyntaxError (/home/buka/always24/app/services/tasks/services.rb:130: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
...loyee #{date["first_name"] date["last_name"]} is busy on thi...
...                           ^~~~):
  
app/services/tasks/services.rb:130: syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND
app/controllers/tasks_controller.rb:9:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:01:13 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.5ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/tasks/services.rb:153:in `[]'
app/services/tasks/services.rb:153:in `get_user_dates'
app/services/tasks/services.rb:125:in `block in validate_users'
app/services/tasks/services.rb:124:in `each'
app/services/tasks/services.rb:124:in `validate_users'
app/services/tasks/services.rb:40:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:01:42 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
Completed 500 Internal Server Error in 38362ms (ActiveRecord: 1.6ms)


  
TypeError (no implicit conversion of String into Integer):
  
app/services/tasks/services.rb:157:in `[]'
app/services/tasks/services.rb:157:in `get_user_dates'
app/services/tasks/services.rb:127:in `block in validate_users'
app/services/tasks/services.rb:125:in `each'
app/services/tasks/services.rb:125:in `validate_users'
app/services/tasks/services.rb:40:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:02:22 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:158
Completed 500 Internal Server Error in 106492ms (ActiveRecord: 6.4ms)


  
NoMethodError (undefined method `overlap?' for "30/04/2021".."30/05/2021":Range):
  
app/services/tasks/services.rb:133:in `block (2 levels) in validate_users'
app/services/tasks/services.rb:131:in `each'
app/services/tasks/services.rb:131:in `block in validate_users'
app/services/tasks/services.rb:125:in `each'
app/services/tasks/services.rb:125:in `validate_users'
app/services/tasks/services.rb:40:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:04:11 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:158
Completed 500 Internal Server Error in 69816ms (ActiveRecord: 6.7ms)


  
NoMethodError (undefined method `overlap?' for Fri, 30 Apr 2021 00:00:00 +0000..Sun, 30 May 2021 00:00:00 +0000:Range):
  
app/services/tasks/services.rb:133:in `block (2 levels) in validate_users'
app/services/tasks/services.rb:131:in `each'
app/services/tasks/services.rb:131:in `block in validate_users'
app/services/tasks/services.rb:125:in `each'
app/services/tasks/services.rb:125:in `validate_users'
app/services/tasks/services.rb:40:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:05:43 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:158
Completed 500 Internal Server Error in 128652ms (ActiveRecord: 5.0ms)


  
NoMethodError (undefined method `overlap?' for Fri, 30 Apr 2021 00:00:00 +0000..Sun, 30 May 2021 00:00:00 +0000:Range):
  
app/services/tasks/services.rb:133:in `block (2 levels) in validate_users'
app/services/tasks/services.rb:131:in `each'
app/services/tasks/services.rb:131:in `block in validate_users'
app/services/tasks/services.rb:125:in `each'
app/services/tasks/services.rb:125:in `validate_users'
app/services/tasks/services.rb:40:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:07:57 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:158
  [1m[36mTaskStatus Load (0.4ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:225
Completed 400 Bad Request in 40821ms (Views: 0.2ms | ActiveRecord: 11.1ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:09:28 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:162
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" ORDER BY "resources"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):30
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:162
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:229
Completed 400 Bad Request in 188459ms (Views: 0.2ms | ActiveRecord: 14.6ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:12:46 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "task_resources_attributes"=>[{"resource_id"=>9}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:170
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT name, tasks.start_time, tasks.deadline FROM "resources" LEFT JOIN task_resources ON task_resources.resource_id = resources.id LEFT JOIN tasks ON tasks.id = task_resources.task_id WHERE "resources"."id" = $1[0m  [["id", 9]]
  â†³ app/services/tasks/services.rb:153
  [1m[36mTaskStatus Load (0.2ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:237
Completed 400 Bad Request in 43ms (Views: 0.2ms | ActiveRecord: 12.0ms)


Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:14:07 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:175
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:170
Completed 500 Internal Server Error in 50ms (ActiveRecord: 10.1ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/services/tasks/services.rb:136:in `validate_resources'
app/services/tasks/services.rb:41:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:14:20 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.2ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:176
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT first_name, last_name, tasks.start_time, tasks.deadline FROM "user_accounts" LEFT JOIN user_account_tasks ON user_account_tasks.user_account_id = user_accounts.id LEFT JOIN tasks ON tasks.id = user_account_tasks.task_id WHERE "user_accounts"."id" = $1[0m  [["id", 93]]
  â†³ app/services/tasks/services.rb:171
Completed 500 Internal Server Error in 49666ms (ActiveRecord: 8.9ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/services/tasks/services.rb:137:in `validate_resources'
app/services/tasks/services.rb:41:in `create_task'
app/controllers/tasks_controller.rb:10:in `create'
Started POST "/en/tasks" for 127.0.0.1 at 2021-04-30 01:15:13 +0400
Processing by TasksController#create as JSON
  Parameters: {"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}], "locale"=>"en", "task"=>{"title"=>"sdfsdfsd", "description"=>"sdfsdfsdf", "start_time"=>"30/04/2021", "deadline"=>"30/05/2021", "project_id"=>2, "user_account_tasks_attributes"=>[{"user_account_id"=>93}]}}
Unpermitted parameters: :format, :locale, :task
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:179
  [1m[36mTaskStatus Load (0.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id_name" = $1 LIMIT $2[0m  [["id_name", "open"], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:241
Completed 400 Bad Request in 29ms (Views: 0.2ms | ActiveRecord: 9.6ms)


  [1m[35m (3.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (121.2ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (9.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  [1m[36mCompany Destroy (47.3ms)[0m  [1m[31mDELETE FROM "companies"[0m
  [1m[36mDepartment Load (0.6ms)[0m  [1m[34mSELECT "departments".* FROM "departments"[0m
  [1m[36mDepartment Destroy (8.1ms)[0m  [1m[31mDELETE FROM "departments"[0m
  [1m[36mDepartment Destroy (0.6ms)[0m  [1m[31mDELETE FROM "departments" WHERE "departments"."parrent_id" IS NULL[0m
  [1m[36mDepartment Load (0.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartment Destroy (2.1ms)[0m  [1m[31mDELETE FROM "departments" WHERE "departments"."parent_id" IS NULL[0m
  [1m[36mDepartmentLogo Destroy (36.8ms)[0m  [1m[31mDELETE FROM "department_logos"[0m
  [1m[36mDepartment Destroy (34.6ms)[0m  [1m[31mDELETE FROM "departments" WHERE "departments"."parent_id" IS NULL[0m
  [1m[36mDepartment Destroy (1.2ms)[0m  [1m[31mDELETE FROM "departments" WHERE "departments"."parrent_id" IS NULL[0m
  [1m[36mDepartment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "departments"[0m
  [1m[36mCompany Destroy (43.2ms)[0m  [1m[31mDELETE FROM "companies"[0m
  [1m[36mCompany Destroy (2.8ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[36mCompany Destroy (37.6ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[36mCompany Destroy (36.5ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."parent_id" IS NOT NULL[0m
  [1m[36mCompany Destroy (0.6ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[36mCompanyLogo Destroy (36.3ms)[0m  [1m[31mDELETE FROM "company_logos"[0m
  [1m[36mCompany Destroy (5.9ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[36mCompany Destroy (0.3ms)[0m  [1m[31mDELETE FROM "companies"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (9.4ms)[0m  [1m[35mALTER TABLE "companies" DROP CONSTRAINT "fk_rails_d0676b5972"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:4
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveCountriesAndCities (20210501164147)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.6ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "country_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:3
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "city_id"[0m
  â†³ db/migrate/20210501164147_remove_countries_and_cities.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210501164147"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (3.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-05-01 20:49:28 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-05-01 20:49:28 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-05-01 20:49:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-05-01 20:49:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-05-01 20:49:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-05-01 20:49:28 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-05-01 20:54:43 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-05-01 20:54:44 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-05-01 20:54:44 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-05-01 20:54:44 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-05-01 20:54:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-05-01 20:54:44 +0400
Started POST "/en/companies" for 127.0.0.1 at 2021-05-01 20:56:03 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250", "locale"=>"en", "company"=>{"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250"}}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started POST "/en/companies" for 127.0.0.1 at 2021-05-01 20:56:32 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250", "locale"=>"en", "company"=>{"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250"}}
Unpermitted parameters: :phone_number, :format, :locale, :company
  [1m[36mCountry Load (4.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:72
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:84
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:84
Completed 400 Bad Request in 926ms (Views: 0.8ms | ActiveRecord: 11.2ms)


Started POST "/en/companies" for 127.0.0.1 at 2021-05-01 20:56:51 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250", "locale"=>"en", "company"=>{"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250"}}
Unpermitted parameters: :phone_number, :format, :locale, :company
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:84
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:84
Completed 400 Bad Request in 12ms (Views: 0.2ms | ActiveRecord: 3.9ms)


Started POST "/en/companies" for 127.0.0.1 at 2021-05-01 20:57:11 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250", "locale"=>"en", "company"=>{"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250"}}
Unpermitted parameters: :phone_number, :format, :locale, :company
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):3
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:85
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:85
Completed 400 Bad Request in 73885ms (Views: 0.2ms | ActiveRecord: 8.0ms)


Started POST "/en/companies" for 127.0.0.1 at 2021-05-01 20:58:29 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250", "locale"=>"en", "company"=>{"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250"}}
Unpermitted parameters: :format, :locale, :company
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):6
  [1m[36mCompany Create (36.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "base company"], ["description", "hey hey"], ["address", "gogebashvili streat"], ["phone_number", "577520250"]]
  â†³ (pry):6
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):6
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:85
  [1m[36mCompany Create (0.3ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "base company"], ["description", "hey hey"], ["address", "gogebashvili streat"], ["phone_number", "577520250"]]
  â†³ app/services/companies/companies_service.rb:85
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:85
Completed 500 Internal Server Error in 15822ms (ActiveRecord: 85.1ms)


  
NoMethodError (undefined method `country' for #<Company:0x00007f7bdc32c710>):
  
app/services/companies/companies_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/companies_controller.rb:11:in `create'
Started POST "/en/companies" for 127.0.0.1 at 2021-05-01 20:59:16 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250", "locale"=>"en", "company"=>{"name"=>"base company", "description"=>"hey hey", "address"=>"gogebashvili streat", "phone_number"=>"577520250"}}
Unpermitted parameters: :format, :locale, :company
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:85
  [1m[36mCompany Create (0.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "base company"], ["description", "hey hey"], ["address", "gogebashvili streat"], ["phone_number", "577520250"]]
  â†³ app/services/companies/companies_service.rb:85
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:85
  [1m[36mCompanyLogo Load (0.4ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 15], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 201 Created in 3327ms (Views: 0.2ms | ActiveRecord: 8.5ms)


  [1m[36mUserRole Load (2.1ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (1.1ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (36.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddNewRoles (20210501202119)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210501202119"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddNewRoles (20210501202119)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mRoleGroup Destroy (0.5ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id_name" IN ($1, $2, $3)[0m  [["id_name", "super_admin"], ["id_name", "project_manager"], ["id_name", "employee"]]
  â†³ db/migrate/20210501202119_add_new_roles.rb:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20210501202119"]]
  â†³ bin/rails:9
  [1m[35m (31.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddNewRoles (20210501202119)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mRoleGroup Create (36.5ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Super Admin"], ["id_name", "super_admin"], ["created_at", "2021-05-01 20:26:06.926042"], ["updated_at", "2021-05-01 20:26:06.926042"]]
  â†³ db/migrate/20210501202119_add_new_roles.rb:3
  [1m[36mRoleGroup Create (1.1ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Project Manager"], ["id_name", "project_manager"], ["created_at", "2021-05-01 20:26:06.964995"], ["updated_at", "2021-05-01 20:26:06.964995"]]
  â†³ db/migrate/20210501202119_add_new_roles.rb:4
  [1m[36mRoleGroup Create (0.7ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Employee"], ["id_name", "employee"], ["created_at", "2021-05-01 20:26:06.968508"], ["updated_at", "2021-05-01 20:26:06.968508"]]
  â†³ db/migrate/20210501202119_add_new_roles.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210501202119"]]
  â†³ bin/rails:9
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1[0m  [["username", "bukabuka"]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (1.0ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.1ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUserRole Create (5.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 93], ["role_group_id", 8]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUserAccount Load (1.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-05-02 00:38:28 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-05-02 00:38:29 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-05-02 00:38:29 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-05-02 00:38:29 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-05-02 00:38:29 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-05-02 00:38:29 +0400
Started POST "/en/user_roles?user_account_id=94&id_name=employee" for 127.0.0.1 at 2021-05-02 00:39:08 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"94", "id_name"=>"employee", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/user_roles?user_account_id=94&id_name=employee" for 127.0.0.1 at 2021-05-02 00:39:20 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"94", "id_name"=>"employee", "locale"=>"en"}
Unpermitted parameters: :id_name, :format, :locale
Unpermitted parameters: :id_name, :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:50
Completed 404 Not Found in 14856ms (ActiveRecord: 6.7ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserAccount with 'id'=94):
  
app/services/account/user_role_management_service.rb:50:in `validate_user!'
app/services/account/user_role_management_service.rb:18:in `initialize_role'
app/controllers/user_roles_controller.rb:11:in `create'
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/user_roles?user_account_id=93&id_name=employee" for 127.0.0.1 at 2021-05-02 00:39:59 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"93", "id_name"=>"employee", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:50
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id_name" = $1 LIMIT $2[0m  [["id_name", "employee"], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:56
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 ORDER BY "user_roles"."id" ASC LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:63
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserRole Update (0.4ms)[0m  [1m[33mUPDATE "user_roles" SET "role_group_id" = $1 WHERE "user_roles"."id" = $2[0m  [["role_group_id", 10], ["id", 31]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:65
Completed 201 Created in 13784ms (Views: 0.4ms | ActiveRecord: 18.8ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
Started POST "/en/auth" for 127.0.0.1 at 2021-05-02 00:43:16 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 100ms (Views: 0.2ms | ActiveRecord: 4.8ms)


Started GET "/en/users/current_user" for 127.0.0.1 at 2021-05-02 00:43:42 +0400
Processing by UsersController#current_user as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/account/current_user_service.rb:15
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 7.0ms)


Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 00:57:13 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT resources.id, resources.name, description, machine_models.name as mod_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN machine_models on machine_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"]]
  â†³ app/services/resources/resources_service.rb:60
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT resources.id, resources.name, description, tool_models.name as tool_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN tool_models on tool_models.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ToolModel"], ["id_name", "tool"]]
  â†³ app/services/resources/resources_service.rb:68
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT resources.id, resources.name, description, external_resource_types.name as external_name FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN external_resource_types on external_resource_types.id = resources.model_on_id WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2[0m  [["model_on_type", "ExternalResourceType"], ["id_name", "external_resource"]]
  â†³ app/services/resources/resources_service.rb:77
Completed 200 OK in 17865ms (Views: 0.3ms | ActiveRecord: 16.6ms)


Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 00:59:08 +0400
  
ActionController::RoutingError (undefined method `is_super_admin?' for ResourcesController:Class):
  
app/controllers/resources_controller.rb:7:in `<class:ResourcesController>'
app/controllers/resources_controller.rb:1:in `<main>'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 00:59:24 +0400
  
ActionController::RoutingError (undefined method `is_super_admin?' for ResourcesController:Class):
  
app/controllers/resources_controller.rb:9:in `<class:ResourcesController>'
app/controllers/resources_controller.rb:1:in `<main>'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 00:59:28 +0400
  
ActionController::RoutingError (undefined method `is_super_admin?' for ResourcesController:Class):
  
app/controllers/resources_controller.rb:9:in `<class:ResourcesController>'
app/controllers/resources_controller.rb:1:in `<main>'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 00:59:36 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
  
ActionController::RoutingError (undefined method `is_super_admin?' for ResourcesController:Class):
  
app/controllers/resources_controller.rb:9:in `<class:ResourcesController>'
app/controllers/resources_controller.rb:1:in `<main>'
Started POST "/en/auth" for 127.0.0.1 at 2021-05-02 00:59:49 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 96ms (Views: 0.2ms | ActiveRecord: 5.0ms)


Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:00:05 +0400
  
ActionController::RoutingError (undefined method `is_super_admin?' for ResourcesController:Class):
  
app/controllers/resources_controller.rb:9:in `<class:ResourcesController>'
app/controllers/resources_controller.rb:1:in `<main>'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:00:14 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ (pry):5
Completed 500 Internal Server Error in 88738ms (ActiveRecord: 19.9ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x00007f2d284a2390>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:01:48 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 3227ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x00007f2d284ee2e0>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:03:24 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 3449ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x0000561c679c8dd8>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:03:55 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 2633ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x0000561c6549ceb0>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:04:06 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ (pry):7
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ (pry):7
Completed 500 Internal Server Error in 13790ms (ActiveRecord: 10.8ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x00007f2d20059318>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:05:48 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 4470ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x00007f2d2028fd08>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:06:08 +0400
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 4973ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<ResourcesController:0x0000561c668c8538>):
  
lib/methods_service.rb:47:in `is_super_admin?'
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:06:51 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:47
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:47
Filter chain halted as :is_super_admin? rendered or redirected
Completed 401 Unauthorized in 6108ms (Views: 0.2ms | ActiveRecord: 12.5ms)


  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
Started GET "/en/resources/resource_list" for 127.0.0.1 at 2021-05-02 01:11:02 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ResourcesController#resource_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:46
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:46
Filter chain halted as :is_super_admin? rendered or redirected
Completed 401 Unauthorized in 4339ms (Views: 0.2ms | ActiveRecord: 13.2ms)


  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddCompanyToAccount (20210502110143)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "user_accounts" ADD "company_id" bigint[0m
  â†³ db/migrate/20210502110143_add_company_to_account.rb:3
  [1m[35m (6.0ms)[0m  [1m[35mCREATE  INDEX  "index_user_accounts_on_company_id" ON "user_accounts"  ("company_id")[0m
  â†³ db/migrate/20210502110143_add_company_to_account.rb:3
  [1m[35m (7.5ms)[0m  [1m[35mALTER TABLE "user_accounts" ADD CONSTRAINT "fk_rails_4f4083b22e"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/migrate/20210502110143_add_company_to_account.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20210502110143"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Update (39.3ms)[0m  [1m[33mUPDATE "user_accounts" SET "company_id" = $1 WHERE "user_accounts"."id" = $2[0m  [["company_id", 15], ["id", 93]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-05-02 15:06:17 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-05-02 15:06:17 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-05-02 15:06:17 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-05-02 15:06:17 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-05-02 15:06:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-05-02 15:06:19 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-05-02 15:06:37 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 108ms (Views: 0.2ms | ActiveRecord: 6.8ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:06:49 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ (pry):5
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mUserAccount Load (4.5ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:34
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:34
  [1m[36mCustomer Load (2.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:34
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  â†³ app/services/account/users_service.rb:40
Completed 200 OK in 537493ms (Views: 1.4ms | ActiveRecord: 23.7ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:15:51 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:46
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:46
Filter chain halted as :is_super_admin? rendered or redirected
Completed 401 Unauthorized in 58ms (Views: 0.2ms | ActiveRecord: 10.9ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (1.0ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUserRole Update (36.3ms)[0m  [1m[33mUPDATE "user_roles" SET "role_group_id" = $1 WHERE "user_roles"."id" = $2[0m  [["role_group_id", 8], ["id", 31]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:16:58 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 57464ms (Views: 0.2ms | ActiveRecord: 18.8ms)


  
ArgumentError (wrong number of arguments (given 1, expected 3)):
  
app/services/account/users_service.rb:8:in `initialize'
app/controllers/users_controller.rb:17:in `new'
app/controllers/users_controller.rb:17:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:18:00 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mCustomer Load (1.3ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" = $3[0m  [["active", true], ["id", 15], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:44
Completed 200 OK in 44594ms (Views: 0.1ms | ActiveRecord: 23.0ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mUserRole Create (4.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 91], ["role_group_id", 9]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 92], ["role_group_id", 10]]
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:19:58 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" IN ($3, $4)[0m  [["active", true], ["id", 15], ["id_name", "project_manager"], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:44
Completed 200 OK in 3552ms (Views: 0.2ms | ActiveRecord: 20.0ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (1.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserAccount Update (37.8ms)[0m  [1m[33mUPDATE "user_accounts" SET "company_id" = $1 WHERE "user_accounts"."id" = $2[0m  [["company_id", 15], ["id", 91]]
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserAccount Update (37.0ms)[0m  [1m[33mUPDATE "user_accounts" SET "company_id" = $1 WHERE "user_accounts"."id" = $2[0m  [["company_id", 15], ["id", 92]]
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:20:50 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mCustomer Load (2.0ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" IN ($3, $4)[0m  [["active", true], ["id", 15], ["id_name", "project_manager"], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:44
Completed 200 OK in 7312ms (Views: 0.3ms | ActiveRecord: 22.7ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mUserRole Load (0.6ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserRole Update (36.8ms)[0m  [1m[33mUPDATE "user_roles" SET "role_group_id" = $1 WHERE "user_roles"."id" = $2[0m  [["role_group_id", 9], ["id", 31]]
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:22:21 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:51
Filter chain halted as :is_super_admin? rendered or redirected
Completed 401 Unauthorized in 50ms (Views: 0.2ms | ActiveRecord: 11.1ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:23:11 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:48
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/account/users_service.rb:48
  [1m[36mCustomer Load (1.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" = $3[0m  [["active", true], ["id", 15], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:44
Completed 200 OK in 5807ms (Views: 0.2ms | ActiveRecord: 19.8ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:24:55 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 95ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `is_admin_or_manager?' for #<UsersController:0x0000561a218cee98>):
  
activesupport (5.2.1) lib/active_support/callbacks.rb:426:in `block in make_lambda'
activesupport (5.2.1) lib/active_support/callbacks.rb:198:in `block (2 levels) in halting'
actionpack (5.2.1) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (5.2.1) lib/active_support/callbacks.rb:199:in `block in halting'
activesupport (5.2.1) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (5.2.1) lib/active_support/callbacks.rb:513:in `each'
activesupport (5.2.1) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (5.2.1) lib/active_support/callbacks.rb:131:in `run_callbacks'
actionpack (5.2.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (5.2.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (5.2.1) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (5.2.1) lib/active_support/notifications.rb:168:in `block in instrument'
activesupport (5.2.1) lib/active_support/notifications/instrumenter.rb:23:in `instrument'
activesupport (5.2.1) lib/active_support/notifications.rb:168:in `instrument'
actionpack (5.2.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:25:07 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Filter chain halted as :is_admin_or_manager? rendered or redirected
Completed 401 Unauthorized in 53ms (Views: 0.2ms | ActiveRecord: 11.4ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:25:22 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Filter chain halted as :is_admin_or_manager? rendered or redirected
Completed 401 Unauthorized in 65ms (Views: 0.2ms | ActiveRecord: 11.0ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:25:25 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Filter chain halted as :is_admin_or_manager? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:25:32 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ (pry):1
Filter chain halted as :is_admin_or_manager? rendered or redirected
Completed 401 Unauthorized in 41882ms (Views: 0.2ms | ActiveRecord: 15.6ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 15:26:26 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mCustomer Load (1.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" = $3[0m  [["active", true], ["id", 15], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:44
Completed 200 OK in 4038ms (Views: 0.4ms | ActiveRecord: 20.8ms)


  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserRole Load (1.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 3]]
  [1m[36mUserRole Update (6.8ms)[0m  [1m[33mUPDATE "user_roles" SET "role_group_id" = $1 WHERE "user_roles"."id" = $2[0m  [["role_group_id", 8], ["id", 31]]
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-05-02 15:31:21 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
Completed 200 OK in 55ms (Views: 0.7ms | ActiveRecord: 9.4ms)


Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-05-02 15:32:39 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:23
Completed 200 OK in 3368ms (Views: 0.6ms | ActiveRecord: 9.2ms)


  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT "projects".* FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "projects"[0m
  [1m[36mProject Load (0.3ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUserAccount Update (7.7ms)[0m  [1m[33mUPDATE "user_accounts" SET "company_id" = $1 WHERE "user_accounts"."id" = $2[0m  [["company_id", 15], ["id", 16]]
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mUserRole Create (4.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 16], ["role_group_id", 9]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT "projects".* FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT "projects".* FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1 AND "user_accounts"."id" = $2[0m  [["id", 15], ["id", 16]]
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT "projects".* FROM "projects"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "projects"[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" ORDER BY "projects"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mProject Update (38.1ms)[0m  [1m[33mUPDATE "projects" SET "user_account_id" = $1 WHERE "projects"."id" = $2[0m  [["user_account_id", 92], ["id", 5]]
  [1m[36mProject Update (1.3ms)[0m  [1m[33mUPDATE "projects" SET "user_account_id" = $1 WHERE "projects"."id" = $2[0m  [["user_account_id", 92], ["id", 6]]
  [1m[36mProject Load (1.9ms)[0m  [1m[34mSELECT "projects".* FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT "projects".* FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1 AND "user_accounts"."id" = $2[0m  [["id", 15], ["id", 16]]
  [1m[36mProject Load (2.1ms)[0m  [1m[34mSELECT projects.id, title, project_id, start_date as start,deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id"[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, title, project_id, start_date as start,deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, title, project_id, start_date as start,deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, title, project_id, start_date as start,deadline as end, user_accounts.first_name, user_accounts.last_name FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1 AND "user_accounts"."id" = $2[0m  [["id", 15], ["id", 92]]
  [1m[36mTask Load (39.9ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTask Load (1.5ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 16]]
  [1m[36mTask Load (1.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mTask Load (1.6ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mTask Load (1.8ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  [1m[36mTask Load (1.3ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1 AND "user_accounts"."id" = $2[0m  [["id", 15], ["id", 16]]
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-05-02 16:31:25 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
lib/methods_service.rb:99:in `get_user_id'
lib/methods_service.rb:4:in `current_account'
lib/methods_service.rb:58:in `is_admin_or_manager?'
Started POST "/en/auth" for 127.0.0.1 at 2021-05-02 16:31:36 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 96ms (Views: 0.3ms | ActiveRecord: 6.1ms)


Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-05-02 16:31:49 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
Completed 500 Internal Server Error in 75ms (ActiveRecord: 11.9ms)


  
NoMethodError (undefined method `user_role' for nil:NilClass):
  
app/services/projects/projects_services.rb:74:in `project_manager?'
app/services/projects/projects_services.rb:70:in `projects_list'
app/controllers/projects_controller.rb:17:in `projects_list'
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-05-02 16:32:14 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
Completed 500 Internal Server Error in 62ms (ActiveRecord: 15.7ms)


  
NoMethodError (undefined method `user_role' for nil:NilClass):
  
app/services/projects/projects_services.rb:74:in `project_manager?'
app/services/projects/projects_services.rb:70:in `projects_list'
app/controllers/projects_controller.rb:17:in `projects_list'
Started GET "/en/projects/projects_list" for 127.0.0.1 at 2021-05-02 16:32:54 +0400
Processing by ProjectsController#projects_list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT "projects".* FROM "projects" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  â†³ app/services/projects/projects_services.rb:24
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:24
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:24
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:24
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:24
  [1m[36mCACHE UserAccount Load (0.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/services/projects/projects_services.rb:24
Completed 200 OK in 79ms (Views: 0.6ms | ActiveRecord: 17.5ms)


Started GET "/en/tasks/user_task_list" for 127.0.0.1 at 2021-05-02 16:33:21 +0400
Processing by TasksController#user_task_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:67
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:67
  [1m[36mTask Load (0.7ms)[0m  [1m[34mSELECT "tasks".* FROM "tasks" INNER JOIN "projects" ON "projects"."id" = "tasks"."project_id" INNER JOIN "user_accounts" ON "user_accounts"."id" = "projects"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" WHERE "companies"."id" = $1[0m  [["id", 15]]
  â†³ app/services/tasks/services.rb:60
  [1m[36mTaskStatus Load (3.5ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:75
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mUserAccount Load (3.8ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 8]]
  â†³ app/services/tasks/services.rb:90
  [1m[36mResource Load (4.9ms)[0m  [1m[34mSELECT resources.id, name, task_resources.id as task_resource_id FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id, task_resources.id[0m  [["id", 8]]
  â†³ app/services/tasks/services.rb:94
  [1m[36mCACHE TaskStatus Load (0.1ms)[0m  [1m[34mSELECT  "task_statuses".* FROM "task_statuses" WHERE "task_statuses"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:75
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT  "projects".* FROM "projects" WHERE "projects"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/tasks/services.rb:78
  [1m[36mUserAccount Load (2.0ms)[0m  [1m[34mSELECT user_accounts.id, first_name, last_name, user_account_tasks.id as task_user_id FROM "user_accounts" INNER JOIN "user_account_tasks" ON "user_account_tasks"."user_account_id" = "user_accounts"."id" INNER JOIN "tasks" ON "tasks"."id" = "user_account_tasks"."task_id" WHERE "tasks"."id" = $1 GROUP BY user_accounts.id, user_account_tasks.id[0m  [["id", 9]]
  â†³ app/services/tasks/services.rb:90
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT resources.id, name, task_resources.id as task_resource_id FROM "resources" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "tasks"."id" = $1 GROUP BY resources.id, task_resources.id[0m  [["id", 9]]
  â†³ app/services/tasks/services.rb:94
Completed 200 OK in 3529ms (Views: 1.3ms | ActiveRecord: 49.1ms)


  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" != $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id_name" = $1 LIMIT $2[0m  [["id_name", "employee"], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id_name" = $1 LIMIT $2[0m  [["id_name", "employee"], ["LIMIT", 1]]
Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 16:53:13 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mCustomer Load (1.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" IN ($3, $4)[0m  [["active", true], ["id", 15], ["id_name", "project_manager"], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:43
Completed 200 OK in 114ms (Views: 0.3ms | ActiveRecord: 23.6ms)


Started GET "/en/users/list" for 127.0.0.1 at 2021-05-02 16:53:26 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 LIMIT $2[0m  [["user_account_id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:58
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1 AND "companies"."id" = $2 AND "role_groups"."id_name" IN ($3, $4)[0m  [["active", true], ["id", 15], ["id_name", "project_manager"], ["id_name", "employee"]]
  â†³ app/services/account/users_service.rb:43
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.6ms)


  [1m[36mTask Load (5.2ms)[0m  [1m[34mSELECT  "tasks".* FROM "tasks" ORDER BY "tasks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (6.7ms)[0m  [1m[34mSELECT resources.id, name, task_resources.id as task_resource_id FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 AND "tasks"."id" = $3 GROUP BY resources.id, task_resources.id[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["id", 9]]
  [1m[36mResource Load (46.8ms)[0m  [1m[34mSELECT resources.id, resources.name, task_resources.id as task_resource_id FROM "resources" INNER JOIN "resource_types" ON "resource_types"."id" = "resources"."resource_type_id" INNER JOIN "task_resources" ON "task_resources"."resource_id" = "resources"."id" INNER JOIN "tasks" ON "tasks"."id" = "task_resources"."task_id" WHERE "resources"."model_on_type" = $1 AND "resource_types"."id_name" = $2 AND "tasks"."id" = $3 GROUP BY resources.id, task_resources.id[0m  [["model_on_type", "MachineModel"], ["id_name", "machine"], ["id", 9]]
  [1m[36mUserRole Load (9.0ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mRoleGroup Load (12.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[36mCustomer Load (16.1ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  [1m[36mCustomer Load (3.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name, role_groups.id_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
  [1m[36mCustomer Load (3.1ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,user_accounts.email, user_accounts.username, user_accounts.first_name, user_accounts.last_name, role_groups.id_name as user_role FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "companies" ON "companies"."id" = "user_accounts"."company_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" WHERE "user_accounts"."active" = $1[0m  [["active", true]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-05-08 13:24:43 +0400
  [1m[35m (48.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-05-08 13:24:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-05-08 13:24:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-05-08 13:24:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-05-08 13:24:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-05-08 13:24:43 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-05-08 13:24:55 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (3.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 295ms (Views: 0.7ms | ActiveRecord: 32.2ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-05-08 13:25:47 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 400 Bad Request in 308ms (Views: 0.8ms | ActiveRecord: 0.7ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-05-08 13:26:20 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:30
  [1m[36mUserAccount Load (5.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:30
Completed 400 Bad Request in 351962ms (Views: 0.2ms | ActiveRecord: 11.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2021-05-08 13:33:45 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2021-05-08 13:33:45 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2021-05-08 13:33:45 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2021-05-08 13:33:45 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2021-05-08 13:33:45 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2021-05-08 13:33:45 +0400
Started POST "/en/auth" for 127.0.0.1 at 2021-05-08 13:34:47 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"bukabuka", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"bukabuka", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "bukabuka"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 112ms (Views: 0.4ms | ActiveRecord: 6.8ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-05-08 13:35:05 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:31
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:31
Completed 500 Internal Server Error in 23294ms (ActiveRecord: 1.1ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/account/registration_service.rb:170:in `register_user!'
app/services/account/registration_service.rb:33:in `block in call'
app/services/account/registration_service.rb:31:in `call'
app/controllers/account/registration_controller.rb:10:in `sign_up'
Started POST "/en/auth" for 127.0.0.1 at 2021-05-08 13:35:44 +0400
Processing by AuthController#login as JSON
  Parameters: {"username"=>"meraba", "password"=>"[FILTERED]", "locale"=>"en", "auth"=>{"username"=>"meraba", "password"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :auth
Unpermitted parameters: :format, :locale, :auth
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."username" = $1 ORDER BY "user_accounts"."id" ASC LIMIT $2[0m  [["username", "meraba"], ["LIMIT", 1]]
  â†³ app/services/auth/service.rb:159
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started POST "/en/account/registration" for 127.0.0.1 at 2021-05-08 13:36:00 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:31
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:31
Completed 500 Internal Server Error in 6655ms (ActiveRecord: 0.4ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/account/registration_service.rb:170:in `register_user!'
app/services/account/registration_service.rb:33:in `block in call'
app/services/account/registration_service.rb:31:in `call'
app/controllers/account/registration_controller.rb:10:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-05-08 13:36:16 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
Unpermitted parameters: :format, :locale, :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:31
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/account/registration_service.rb:31
Completed 500 Internal Server Error in 16738ms (ActiveRecord: 11.6ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/account/registration_service.rb:170:in `register_user!'
app/services/account/registration_service.rb:33:in `block in call'
app/services/account/registration_service.rb:31:in `call'
app/controllers/account/registration_controller.rb:10:in `sign_up'
Started POST "/en/account/registration" for 127.0.0.1 at 2021-05-08 13:36:36 +0400
Processing by Account::RegistrationController#sign_up as JSON
  Parameters: {"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "locale"=>"en", "registration"=>{"first_name"=>"buka", "last_name"=>"urdia", "username"=>"kabuka", "phone_number"=>"577520250", "phone_number_iso"=>"GE", "email"=>"kabuka@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:5
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ lib/methods_service.rb:10
Unpermitted parameters: :format, :locale, :registration
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/registration_service.rb:31
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:171
  [1m[36mUserAccount Create (48.6ms)[0m  [1m[32mINSERT INTO "user_accounts" ("phone_number", "email", "crypted_password", "created_at", "updated_at", "salt", "username", "phone_number_iso", "first_name", "last_name", "company_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["phone_number", "577520250"], ["email", "kabuka@gmail.com"], ["crypted_password", "$2a$10$wfXNs922VVEejRzzhZMIF.aVLsWFB63eiHZfLwz26ZMmgOv5m4lKa"], ["created_at", "2021-05-08 09:37:11.030096"], ["updated_at", "2021-05-08 09:37:11.030096"], ["salt", "hgiGGxDAHrxsAH7TxRqD"], ["username", "kabuka"], ["phone_number_iso", "GE"], ["first_name", "buka"], ["last_name", "urdia"], ["company_id", 15]]
  â†³ app/services/account/registration_service.rb:171
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:179
  [1m[36mCustomer Create (2.9ms)[0m  [1m[32mINSERT INTO "customers" ("user_account_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_account_id", 94], ["created_at", "2021-05-08 09:37:11.125104"], ["updated_at", "2021-05-08 09:37:11.125104"]]
  â†³ app/services/account/registration_service.rb:179
  [1m[36mConfirmationType Load (2.5ms)[0m  [1m[34mSELECT  "confirmation_types".* FROM "confirmation_types" WHERE "confirmation_types"."id_name" = $1 LIMIT $2[0m  [["id_name", "registration"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:15
  [1m[36mConfirmationCode Load (2.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."user_account_id" = $1 AND "confirmation_codes"."confirmation_type_id" = $2 ORDER BY "confirmation_codes"."id" ASC LIMIT $3[0m  [["user_account_id", 94], ["confirmation_type_id", 2], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:16
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Create (1.4ms)[0m  [1m[32mINSERT INTO "confirmation_codes" ("confirmation_token", "sms_code", "generation_time", "failed_attempts_count", "user_account_id", "confirmation_type_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["confirmation_token", "ztiCTfiUxohwoXP1GtkeVo7w"], ["sms_code", "pending"], ["generation_time", "2021-05-08 09:37:11.162144"], ["failed_attempts_count", 0], ["user_account_id", 94], ["confirmation_type_id", 2]]
  â†³ app/services/account/verification_service.rb:57
  [1m[36mConfirmationCode Load (0.3ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "ztiCTfiUxohwoXP1GtkeVo7w"], ["LIMIT", 1]]
  â†³ app/services/account/verification_service.rb:11
  [1m[36mCACHE ConfirmationCode Load (0.0ms)[0m  [1m[34mSELECT  "confirmation_codes".* FROM "confirmation_codes" WHERE "confirmation_codes"."confirmation_token" = $1 LIMIT $2[0m  [["confirmation_token", "ztiCTfiUxohwoXP1GtkeVo7w"], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:76
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:71
  [1m[36mConfirmationCode Update (0.4ms)[0m  [1m[33mUPDATE "confirmation_codes" SET "failed_attempts_count" = $1 WHERE "confirmation_codes"."id" = $2[0m  [["failed_attempts_count", 1], ["id", 64]]
  â†³ app/services/account/registration_service.rb:71
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/account/registration_service.rb:65
  [1m[36mUserAccount Update (1.5ms)[0m  [1m[33mUPDATE "user_accounts" SET "active" = $1, "updated_at" = $2 WHERE "user_accounts"."id" = $3[0m  [["active", true], ["updated_at", "2021-05-08 09:37:11.173590"], ["id", 94]]
  â†³ app/services/account/registration_service.rb:65
  [1m[36mConfirmationCode Destroy (0.3ms)[0m  [1m[31mDELETE FROM "confirmation_codes" WHERE "confirmation_codes"."id" = $1[0m  [["id", 64]]
  â†³ app/services/account/registration_service.rb:59
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/registration_service.rb:31
Completed 200 OK in 34912ms (Views: 0.2ms | ActiveRecord: 110.2ms)


  [1m[36mUserRole Load (1.3ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (1.0ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mRoleGroup Load (3.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id_name" = $1 LIMIT $2[0m  [["id_name", "employee"], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id_name" = $1 LIMIT $2[0m  [["id_name", "employee"], ["LIMIT", 1]]
