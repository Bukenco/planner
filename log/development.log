Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-19 20:15:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-19 20:15:32 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-19 20:15:32 +0400
  [1m[36mProductType Load (39.6ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveFilledTypes (20200919162956)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mProductType Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_types" WHERE "product_types"."id_name" IN ($1, $2, $3)[0m  [["id_name", "catalog_product"], ["id_name", "service"], ["id_name", "working_hour"]]
  â†³ db/migrate/20200919162956_remove_filled_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919162956"]]
  â†³ bin/rails:9
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to AddAndChangeProductTypeTable (20200919163118)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.7ms)[0m  [1m[35mALTER TABLE "product_types" ALTER COLUMN "name" TYPE json[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:3
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddAndChangeProductTypeTable (20200919163118)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (66.6ms)[0m  [1m[35mALTER TABLE "product_types" ALTER COLUMN "name" TYPE json USING name::json[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:3
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddAndChangeProductTypeTable (20200919163118)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (46.3ms)[0m  [1m[35mALTER TABLE "product_types" ALTER COLUMN "name" TYPE json USING name::json[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:3
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "product_types" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20200919163118_add_and_change_product_type_table.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200919163118"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-19 21:08:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-19 21:08:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-19 21:08:07 +0400
Started POST "/en/product_types" for 127.0.0.1 at 2020-09-19 21:10:28 +0400
Processing by ProductTypesController#create as JSON
  Parameters: {"name"=>{"no"=>"aba1", "en"=>"aba1"}, "active"=>true, "locale"=>"en", "product_type"=>{"name"=>{"no"=>"aba1", "en"=>"aba1"}, "active"=>true}}
Unpermitted parameters: :format, :locale, :product_type
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:29
  [1m[36mProductType Create (3.6ms)[0m  [1m[32mINSERT INTO "product_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"no\":\"aba1\",\"en\":\"aba1\"}"], ["id_name", "aba1"]]
  â†³ app/services/products/product_type_service.rb:29
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:29
Completed 201 Created in 114ms (Views: 0.2ms | ActiveRecord: 10.9ms)


Started PUT "/en/product_types" for 127.0.0.1 at 2020-09-19 21:11:01 +0400
Processing by ProductTypesController#update as JSON
  Parameters: {"id"=>4, "name"=>{"no"=>"aba 2", "en"=>"aba 2"}, "active"=>true, "locale"=>"en", "product_type"=>{"id"=>4, "name"=>{"no"=>"aba 2", "en"=>"aba 2"}, "active"=>true}}
Unpermitted parameters: :format, :locale, :product_type
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_type_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:38
  [1m[36mProductType Update (0.3ms)[0m  [1m[33mUPDATE "product_types" SET "name" = $1 WHERE "product_types"."id" = $2[0m  [["name", "{\"no\":\"aba 2\",\"en\":\"aba 2\"}"], ["id", 4]]
  â†³ app/services/products/product_type_service.rb:38
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:38
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 9.8ms)


Started DELETE "/en/product_types?id=4" for 127.0.0.1 at 2020-09-19 21:11:15 +0400
Processing by ProductTypesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductType Load (0.2ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_type_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:46
  [1m[36mProductType Destroy (0.2ms)[0m  [1m[31mDELETE FROM "product_types" WHERE "product_types"."id" = $1[0m  [["id", 4]]
  â†³ app/services/products/product_type_service.rb:46
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:46
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 36.6ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:12:20 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:12:32 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `empty?' for nil:NilClass):
  
app/services/products/product_type_service.rb:52:in `list'
app/controllers/product_types_controller.rb:28:in `list'
Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:13:02 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-19 21:13:27 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  â†³ app/services/products/product_type_service.rb:23
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-20 01:59:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-20 01:59:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-20 01:59:25 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mProductType Load (1.1ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  [1m[36mProductType Load (0.8ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" ORDER BY "product_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for ::1 at 2020-09-21 17:12:55 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-standalone-preset.js" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/swagger-ui.css" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/v1/swagger.json" for ::1 at 2020-09-21 17:12:56 +0400
Started GET "/api-docs/favicon-32x32.png" for ::1 at 2020-09-21 17:12:57 +0400
Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:13:09 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 8.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for ::1 at 2020-09-21 17:14:06 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for ::1 at 2020-09-21 17:14:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for ::1 at 2020-09-21 17:14:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for ::1 at 2020-09-21 17:14:06 +0400
Started GET "/api-docs/v1/swagger.json" for ::1 at 2020-09-21 17:14:07 +0400
Started GET "/api-docs/favicon-32x32.png" for ::1 at 2020-09-21 17:14:07 +0400
Started GET "/%7Blocale%7D/categories/category_list" for ::1 at 2020-09-21 17:14:14 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"{locale}"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("{locale}" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for ::1 at 2020-09-21 17:17:55 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/v1/swagger.json" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/api-docs/favicon-32x32.png" for ::1 at 2020-09-21 17:17:55 +0400
Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:18:09 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 5.4ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:18:17 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:19:08 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>1, "name"=>"buka", "locale"=>"en", "category"=>{"id"=>1, "name"=>"buka"}}
Unpermitted parameter: :name
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:19:22 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:19:30 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:24:34 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:43:53 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>1, "name"=>{"en"=>"buka"}, "locale"=>"en", "category"=>{"id"=>1, "name"=>{"en"=>"buka"}}}
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
  [1m[36mCategory Update (5.8ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1 WHERE "categories"."id" = $2[0m  [["name", "{\"en\":\"buka\"}"], ["id", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:37
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:37
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 7.4ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:43:58 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:44:05 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:52
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:44:54 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>1, "name"=>{"en"=>"buka"}, "locale"=>"en", "category"=>{"id"=>1, "name"=>{"en"=>"buka"}}}
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:59
  [1m[36mCategory Load (0.8ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):18
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):19
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:59
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:38
  [1m[36mCategory Update (0.3ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1 WHERE "categories"."id" = $2[0m  [["name", "{\"en\":\"buka\",\"no\":\"change_1\"}"], ["id", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:38
  [1m[35m (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:38
Completed 200 OK in 595557ms (Views: 0.2ms | ActiveRecord: 47.4ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:55:34 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:54
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 3.6ms)


Started PUT "/en/categories" for ::1 at 2020-09-21 17:55:48 +0400
Processing by CategoriesController#update as JSON
  Parameters: {"id"=>2, "name"=>{"en"=>"buka"}, "locale"=>"en", "category"=>{"id"=>2, "name"=>{"en"=>"buka"}}}
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:67
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/category_sub_categories/categories_service.rb:39
  [1m[36mCategory Update (1.0ms)[0m  [1m[33mUPDATE "categories" SET "name" = $1 WHERE "categories"."id" = $2[0m  [["name", "{\"en\":\"buka\",\"no\":\"category_no 2\"}"], ["id", 2]]
  â†³ app/services/category_sub_categories/categories_service.rb:39
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/category_sub_categories/categories_service.rb:39
Completed 200 OK in 6373ms (Views: 0.6ms | ActiveRecord: 38.7ms)


Started GET "/no/categories/category_list" for ::1 at 2020-09-21 17:56:05 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"no"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:54
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/en/categories/category_list" for ::1 at 2020-09-21 17:56:17 +0400
Processing by CategoriesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCategory Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "categories" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/category_sub_categories/categories_service.rb:54
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/services/category_sub_categories/categories_service.rb:22
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-21 23:53:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-21 23:53:32 +0400
Started GET "/en/supplier/business_types" for 127.0.0.1 at 2020-09-21 23:53:47 +0400
Processing by SuppliersController#business_types as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/supplier/business_types" for 127.0.0.1 at 2020-09-21 23:54:29 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SuppliersController#business_types as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mBusinessType Load (7.8ms)[0m  [1m[34mSELECT "business_types".* FROM "business_types"[0m
  â†³ app/services/suppliers/supplier_helper_service.rb:14
Completed 200 OK in 80ms (Views: 0.8ms | ActiveRecord: 26.2ms)


Started GET "/en/supplier/integration_systems" for 127.0.0.1 at 2020-09-21 23:56:25 +0400
Processing by SuppliersController#integration_systems as JSON
  Parameters: {"locale"=>"en"}
  [1m[36mIntegrationSystem Load (4.6ms)[0m  [1m[34mSELECT "integration_systems".* FROM "integration_systems"[0m
  â†³ app/services/suppliers/supplier_helper_service.rb:18
Completed 200 OK in 65ms (Views: 0.2ms | ActiveRecord: 8.6ms)


  [1m[36mBusinessType Load (0.8ms)[0m  [1m[34mSELECT "business_types".* FROM "business_types"[0m
  [1m[36mBusinessType Load (1.4ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" ORDER BY "business_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBusinessType Load (0.8ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" ORDER BY "business_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mIntegrationSystem Load (0.9ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" ORDER BY "integration_systems"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddBusinessTypes (20200921200604)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mBusinessType Create (4.1ms)[0m  [1m[32mINSERT INTO "business_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"en\":\"default\",\"no\":\"default\"}"], ["id_name", "general"]]
  â†³ db/migrate/20200921200604_add_business_types.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921200604"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to AddIntegrationSystem (20200921203149)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mIntegrationSystem Create (1.1ms)[0m  [1m[32mINSERT INTO "integration_systems" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "manual"]]
  â†³ db/migrate/20200921203149_add_integration_system.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200921203149"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mSupplier Load (40.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mIntegrationSystem Load (0.5ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-22 00:49:59 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-22 00:50:00 +0400
Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 00:50:09 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
  [1m[36mIntegrationSystem Load (0.4ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 43ms (Views: 0.4ms | ActiveRecord: 13.2ms)


  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-22 10:36:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-22 10:36:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-22 10:36:15 +0400
Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 10:36:26 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (3.4ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
  [1m[36mIntegrationSystem Load (1.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 48ms (Views: 0.3ms | ActiveRecord: 24.6ms)


Started PUT "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:37:10 +0400
Processing by SuppliersController#update as JSON
  Parameters: {"active"=>false, "locale"=>"en", "id"=>"3", "supplier"=>{"active"=>false}}
Unpermitted parameters: :active, :format, :locale, :supplier
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:40
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mIntegrationSystem Load (0.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mBusinessType Load (2.2ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" WHERE "business_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 6.1ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 10:37:17 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
  [1m[36mIntegrationSystem Load (0.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started PUT "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:37:48 +0400
Processing by SuppliersController#update as JSON
  Parameters: {"active"=>false, "locale"=>"en", "id"=>"3", "supplier"=>{"active"=>false}}
Unpermitted parameters: :format, :locale, :supplier
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:40
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mIntegrationSystem Load (0.3ms)[0m  [1m[34mSELECT  "integration_systems".* FROM "integration_systems" WHERE "integration_systems"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mBusinessType Load (0.3ms)[0m  [1m[34mSELECT  "business_types".* FROM "business_types" WHERE "business_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[36mSupplier Update (2.4ms)[0m  [1m[33mUPDATE "suppliers" SET "active" = $1 WHERE "suppliers"."id" = $2[0m  [["active", false], ["id", 3]]
  â†³ app/services/suppliers/suppliers_service.rb:41
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/suppliers_service.rb:41
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 12.3ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-22 10:37:53 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."active" = $1[0m  [["active", true]]
  â†³ app/services/suppliers/suppliers_service.rb:27
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started DELETE "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:42:32 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SuppliersController#destroy as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:47
Completed 500 Internal Server Error in 54ms (ActiveRecord: 4.6ms)


  
NoMethodError (undefined method `destroy' for nil:NilClass):
  
app/services/suppliers/suppliers_service.rb:48:in `destroy_supplier'
app/controllers/suppliers_controller.rb:27:in `destroy'
Started DELETE "/en/supplier/3" for 127.0.0.1 at 2020-09-22 10:42:43 +0400
Processing by SuppliersController#destroy as JSON
  Parameters: {"locale"=>"en", "id"=>"3"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/suppliers_service.rb:48
Completed 500 Internal Server Error in 17136ms (ActiveRecord: 12.5ms)


  
NoMethodError (undefined method `destroy' for nil:NilClass):
  
app/services/suppliers/suppliers_service.rb:49:in `destroy_supplier'
app/controllers/suppliers_controller.rb:27:in `destroy'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-26 11:01:09 +0400
Started POST "/en/product_types" for 127.0.0.1 at 2020-09-26 11:01:23 +0400
Processing by ProductTypesController#create as JSON
  Parameters: {"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true, "locale"=>"en", "product_type"=>{"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true}}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.4ms | ActiveRecord: 10.2ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-26 11:01:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-26 11:01:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-26 11:01:44 +0400
Started POST "/en/product_types" for 127.0.0.1 at 2020-09-26 11:01:52 +0400
Processing by ProductTypesController#create as JSON
  Parameters: {"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true, "locale"=>"en", "product_type"=>{"name"=>{"no"=>"string", "en"=>"string"}, "active"=>true}}
Unpermitted parameters: :format, :locale, :product_type
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:29
  [1m[36mProductType Create (4.3ms)[0m  [1m[32mINSERT INTO "product_types" ("name", "id_name") VALUES ($1, $2) RETURNING "id"[0m  [["name", "{\"no\":\"string\",\"en\":\"string\"}"], ["id_name", "string"]]
  â†³ app/services/products/product_type_service.rb:29
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:29
Completed 201 Created in 193ms (Views: 0.4ms | ActiveRecord: 12.1ms)


Started GET "/en/product_types/product_type_list" for 127.0.0.1 at 2020-09-26 11:02:20 +0400
Processing by ProductTypesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
  â†³ app/services/products/product_type_service.rb:23
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 0.4ms)


Started GET "/en/products/list" for 127.0.0.1 at 2020-09-26 11:02:39 +0400
Processing by ProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (7.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (2.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 11], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 13], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
Completed 200 OK in 145ms (Views: 1.1ms | ActiveRecord: 29.8ms)


Started GET "/en/products/product_vat_type" for 127.0.0.1 at 2020-09-26 11:03:10 +0400
Processing by ProductsController#product_vat_type as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductVatType Load (3.6ms)[0m  [1m[34mSELECT "product_vat_types".* FROM "product_vat_types"[0m
  â†³ app/services/products/product_list_service.rb:25
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 10.1ms)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-26 18:11:23 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-26 18:11:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-26 18:11:24 +0400
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (1.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (1.0ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.6ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToProductCharacteristics (20200926145340)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "product_characteristic" ADD "subscription" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20200926145340_add_columns_to_product_characteristics.rb:3
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToProductCharacteristics (20200926145340)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (44.9ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD "subscription" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20200926145340_add_columns_to_product_characteristics.rb:3
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD "commission" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20200926145340_add_columns_to_product_characteristics.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926145340"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mProductCharacteristic Load (0.8ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductType Load (1.4ms)[0m  [1m[34mSELECT "product_types".* FROM "product_types"[0m
Started POST "/en/products" for 127.0.0.1 at 2020-09-26 19:19:41 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#create as JSON
  Parameters: {"name"=>"buka", "full_name"=>"full buka", "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}, "locale"=>"en", "product"=>{"name"=>"buka", "full_name"=>"full buka", "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}}}
Unpermitted parameters: :name, :full_name, :format, :locale, :product
  [1m[36mProductType Load (0.8ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:41
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:47
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_create_service.rb:59
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/products/product_create_service.rb:59
Completed 400 Bad Request in 3715ms (Views: 0.6ms | ActiveRecord: 26.6ms)


Started POST "/en/products" for 127.0.0.1 at 2020-09-26 19:20:23 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}, "locale"=>"en", "product"=>{"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:41
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:47
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_create_service.rb:59
  [1m[36mProduct Create (35.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "full_name", "description", "code", "instruction") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "{\"en\":\"buka\"}"], ["full_name", "{\"en\":\"full buka\"}"], ["description", "Test product"], ["code", "20569"], ["instruction", "Take cerfule with this product"]]
  â†³ app/services/products/product_create_service.rb:59
  [1m[36mProductCharacteristic Create (2.2ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "shape", "volume", "packaging", "manufacturer", "description", "external_code", "sales_start", "sales_end", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17) RETURNING "id"[0m  [["product_id", 14], ["sub_category_id", 2], ["shape", "some shape"], ["volume", "some volume"], ["packaging", "big"], ["manufacturer", "OSRAM"], ["description", "Good lights"], ["external_code", "232323"], ["sales_start", "2020-09-30 00:00:00"], ["sales_end", "2020-12-30 00:00:00"], ["EAN_code", "89665"], ["weight", "24.3"], ["width", "78.3"], ["height", "23.96"], ["depth", "5.3"], ["product_type_id", 5], ["product_vat_type_id", 2]]
  â†³ app/services/products/product_create_service.rb:59
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_create_service.rb:59
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:24
  [1m[36mProductType Load (0.6ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:24
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:24
Completed 201 Created in 6854ms (Views: 0.8ms | ActiveRecord: 52.7ms)


Started PUT "/en/product_types" for 127.0.0.1 at 2020-09-26 19:21:59 +0400
Processing by ProductTypesController#update as JSON
  Parameters: {"id"=>5, "name"=>{"no"=>"string_1", "en"=>"string_1"}, "id_name"=>"string_1", "active"=>true, "locale"=>"en", "product_type"=>{"id"=>5, "name"=>{"no"=>"string_1", "en"=>"string_1"}, "id_name"=>"string_1", "active"=>true}}
Unpermitted parameters: :id_name, :format, :locale, :product_type
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_type_service.rb:67
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_type_service.rb:39
  [1m[36mProductType Update (0.5ms)[0m  [1m[33mUPDATE "product_types" SET "name" = $1 WHERE "product_types"."id" = $2[0m  [["name", "{\"no\":\"string_1\",\"en\":\"string\"}"], ["id", 5]]
  â†³ app/services/products/product_type_service.rb:39
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_type_service.rb:39
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.4ms)


Started GET "/en/products/list" for 127.0.0.1 at 2020-09-26 19:22:12 +0400
Processing by ProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.2ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.2ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 11], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 13], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.2ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.2ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
Completed 200 OK in 20ms (Views: 2.4ms | ActiveRecord: 2.9ms)


Started POST "/en/products" for 127.0.0.1 at 2020-09-26 19:32:36 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}, "locale"=>"en", "product"=>{"name"=>{"en"=>"buka"}, "full_name"=>{"en"=>"full buka"}, "description"=>"Test product", "code"=>"20569", "instruction"=>"Take cerfule with this product", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "shape"=>"some shape", "volume"=>"some volume", "packaging"=>"big", "manufacturer"=>"OSRAM", "description"=>"Good lights", "external_code"=>"232323", "sales_start"=>"30-09-2020", "sales_end"=>"30-12-2020", "EAN_code"=>"89665", "weight"=>24.3, "height"=>23.96, "width"=>78.3, "depth"=>5.3, "subscription"=>false, "commission"=>false}}}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 8.6ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:14:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:14:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:14:04 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:14:22 +0400
Started GET "/en/product/id" for 127.0.0.1 at 2020-09-27 00:14:43 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/product/id"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:19:04 +0400
Started GET "/en/product/edit_product" for 127.0.0.1 at 2020-09-27 00:19:19 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/product/edit_product"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:19:58 +0400
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:20:08 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 7790ms (ActiveRecord: 7.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:25:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:20:59 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 4830ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:25:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:21:23 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 6030ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:25:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:21:39 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 18750ms (ActiveRecord: 3.7ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:22:09 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 38208ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:22:50 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 5793ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
Started GET "/en/products/edit_product" for 127.0.0.1 at 2020-09-27 00:22:59 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 404 Not Found in 7913ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product without an ID):
  
app/services/products/product_update_service.rb:26:in `edit_product'
app/controllers/products_controller.rb:29:in `edit_product'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:23:31 +0400
Started GET "/en/products/edit_product?id=14" for 127.0.0.1 at 2020-09-27 00:23:41 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"14", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:26
Completed 500 Internal Server Error in 6715ms (ActiveRecord: 11.2ms)


  
NameError (undefined local variable or method `product_characteristics_schema' for #<Products::ProductUpdateService:0x00007efc4001b290>):
  
app/services/products/product_update_service.rb:15:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/products_controller.rb:30:in `edit_product'
Started GET "/en/products/edit_product?id=14" for 127.0.0.1 at 2020-09-27 00:24:19 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"14", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
Completed 500 Internal Server Error in 21638ms (ActiveRecord: 4.1ms)


  
NameError (undefined local variable or method `product_characteristics_schema' for #<Products::ProductUpdateService:0x00007efc38027ed0>):
  
app/services/products/product_update_service.rb:16:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/products_controller.rb:30:in `edit_product'
Started GET "/en/products/edit_product?id=14" for 127.0.0.1 at 2020-09-27 00:25:36 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"14", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 5593ms (Views: 0.4ms | ActiveRecord: 26.4ms)


  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveColumnsFromProductCharacteristics (20200926203704)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (41.8ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "shape"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "packing"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:4
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveColumnsFromProductCharacteristics (20200926203704)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "shape"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "packaging"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "sales_start"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:5
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "product_characteristics" DROP COLUMN "sales_end"[0m
  â†³ db/migrate/20200926203704_remove_columns_from_product_characteristics.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926203704"]]
  â†³ bin/rails:9
  [1m[35m (32.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 00:51:27 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 00:51:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 00:51:28 +0400
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCurrencies (20200926205812)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (26.0ms)[0m  [1m[35mCREATE TABLE "currencies" ("id" bigserial primary key, "name" json NOT NULL, "symbol" character varying(20) NOT NULL, "code" character varying(3) NOT NULL)[0m
  â†³ db/migrate/20200926205812_create_currencies.rb:3
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_currencies_on_code" ON "currencies"  ("code")[0m
  â†³ db/migrate/20200926205812_create_currencies.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926205812"]]
  â†³ bin/rails:9
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillCurrencies (20200926210103)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mCurrency Create (0.7ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Krone\""], ["symbol", "â€ŽKR"], ["code", "nok"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:3
  [1m[36mCurrency Create (0.2ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"USD dollar\""], ["symbol", "$"], ["code", "usd"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:4
  [1m[36mCurrency Create (0.4ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Euro\""], ["symbol", "â‚¬"], ["code", "euro"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:5
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to FillCurrencies (20200926210103)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mCurrency Create (0.5ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Krone\""], ["symbol", "â€ŽKR"], ["code", "nok"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:3
  [1m[36mCurrency Create (0.3ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"USD dollar\""], ["symbol", "$"], ["code", "usd"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:4
  [1m[36mCurrency Create (0.2ms)[0m  [1m[32mINSERT INTO "currencies" ("name", "symbol", "code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "\"Euro\""], ["symbol", "â‚¬"], ["code", "eur"]]
  â†³ db/migrate/20200926210103_fill_currencies.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200926210103"]]
  â†³ bin/rails:9
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 01:26:51 +0400
Started GET "/en/currencies/currencies_list" for 127.0.0.1 at 2020-09-27 01:26:57 +0400
Processing by CurrenciesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 204 No Content in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/currencies/currencies_list" for 127.0.0.1 at 2020-09-27 01:27:30 +0400
Processing by CurrenciesController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCurrency Load (0.6ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
  â†³ app/services/general/currencies_service.rb:14
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 5.6ms)


  [1m[36mSupplierProduct Load (1.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddQuantityColumnToSupplierProducts (20200927103709)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "supplier_products" ADD "quantity" integer[0m
  â†³ db/migrate/20200927103709_add_quantity_column_to_supplier_products.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200927103709"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveMinSellAmountColumnFromSupplierProduct (20200927104129)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "supplier_products" DROP COLUMN "min_sell_amount"[0m
  â†³ db/migrate/20200927104129_remove_min_sell_amount_column_from_supplier_product.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200927104129"]]
  â†³ bin/rails:9
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 18:53:16 +0400
Started GET "/en/sub_categories/sub_category_list?category_id=1" for 127.0.0.1 at 2020-09-27 18:58:43 +0400
Processing by SubCategoriesController#list as JSON
  Parameters: {"category_id"=>"1", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/en/sub_categories/sub_category_list?category_id=1" for 127.0.0.1 at 2020-09-27 18:59:05 +0400
Processing by SubCategoriesController#list as JSON
  Parameters: {"category_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSubCategory Load (0.8ms)[0m  [1m[34mSELECT "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."category_id" = $1[0m  [["category_id", 1]]
  â†³ app/services/category_sub_categories/sub_categories_service.rb:22
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 9.9ms)


Started POST "/en/products" for 127.0.0.1 at 2020-09-27 19:00:01 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "sales_start"=>"as", "sales_end"=>"striascng", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}, "locale"=>"en", "product"=>{"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "sales_start"=>"as", "sales_end"=>"striascng", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProductType Load (1.1ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:40
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:46
Completed 500 Internal Server Error in 93ms (ActiveRecord: 20.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'sales_start' for ProductCharacteristic.):
  
app/services/products/product_create_service.rb:57:in `create_product_item'
app/services/products/product_create_service.rb:18:in `create_product'
app/controllers/products_controller.rb:16:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 19:02:45 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 19:02:46 +0400
Started POST "/en/products" for 127.0.0.1 at 2020-09-27 19:03:08 +0400
Processing by ProductsController#create as JSON
  Parameters: {"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}, "locale"=>"en", "product"=>{"name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "full_name"=>{"en"=>"test_product", "no"=>"test_product_no"}, "description"=>"kaia kata", "code"=>"986532", "instruction"=>"You should take care about it", "product_characteristic_attributes"=>{"sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"askja", "manufacturer"=>"Oslo", "description"=>"dasdasd", "external_code"=>"030201", "EAN_code"=>"string", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProductType Load (1.0ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:40
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:46
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_create_service.rb:58
  [1m[36mProduct Create (2.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "full_name", "description", "code", "instruction") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "{\"en\":\"test_product\",\"no\":\"test_product_no\"}"], ["full_name", "{\"en\":\"test_product\",\"no\":\"test_product_no\"}"], ["description", "kaia kata"], ["code", "986532"], ["instruction", "You should take care about it"]]
  â†³ app/services/products/product_create_service.rb:58
  [1m[36mProductCharacteristic Create (2.6ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "volume", "manufacturer", "description", "external_code", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id", "subscription", "commission") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15) RETURNING "id"[0m  [["product_id", 15], ["sub_category_id", 2], ["volume", "askja"], ["manufacturer", "Oslo"], ["description", "dasdasd"], ["external_code", "030201"], ["EAN_code", "string"], ["weight", "23.0"], ["width", "23.0"], ["height", "23.0"], ["depth", "23.0"], ["product_type_id", 5], ["product_vat_type_id", 2], ["subscription", true], ["commission", true]]
  â†³ app/services/products/product_create_service.rb:58
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_create_service.rb:58
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:23
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:23
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_create_service.rb:23
Completed 201 Created in 46ms (Views: 0.5ms | ActiveRecord: 10.2ms)


  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 19:41:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 19:41:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 19:41:08 +0400
  [1m[36mSupplierProductPrice Load (2.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveAndAddColumnsFroCurrency (20200927155250)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" DROP COLUMN "currency"[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:3
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_298846d27d"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:4
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to RemoveAndAddColumnsFroCurrency (20200927155250)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" DROP COLUMN "currency"[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:3
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD "currency_id" integer[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:4
  [1m[35m (16.2ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_298846d27d"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:5
  [1m[35m (6.8ms)[0m  [1m[35mCREATE  INDEX  "supplier_product_prices_currency" ON "supplier_product_prices"  ("currency_id")[0m
  â†³ db/migrate/20200927155250_remove_and_add_columns_fro_currency.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200927155250"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 22:23:38 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 22:23:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 22:23:39 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 22:26:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 22:26:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 22:26:03 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-27 22:27:19 +0400
  [1m[36mSupplier Load (8.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCurrency Load (0.4ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" ORDER BY "currencies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:29:14 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 5.3ms)


  
NameError (uninitialized constant Supplier::SupplierProductsService):
  
app/controllers/supplier_products_controller.rb:9:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:29:44 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 2.8ms)


  
NameError (uninitialized constant Supplier::SupplierProductsService):
  
app/controllers/supplier_products_controller.rb:9:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:31:26 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant Supplier::SupplierProductsService):
  
app/controllers/supplier_products_controller.rb:9:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:37:45 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Completed 500 Internal Server Error in 5491ms (ActiveRecord: 2.7ms)


  
LoadError (Unable to autoload constant Suppliers::SupplierProductsService, expected /home/buka/always24/app/services/suppliers/supplier_products_service.rb to define it):
  
app/controllers/supplier_products_controller.rb:10:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:38:20 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:59
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
Completed 500 Internal Server Error in 24567ms (ActiveRecord: 28.2ms)


  
NoMethodError (undefined method `provider_id' for #<SupplierProduct:0x00007f238c0e6c38>):
  
app/services/suppliers/supplier_products_service.rb:49:in `create_item'
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:39:36 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:59
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
Completed 500 Internal Server Error in 3502ms (ActiveRecord: 21.6ms)


  
NoMethodError (undefined method `med_code' for #<SupplierProduct:0x00007f238cb1f808>):
  
app/services/suppliers/supplier_products_service.rb:49:in `create_item'
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:40:03 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:59
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:49
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:49
Completed 500 Internal Server Error in 5683ms (ActiveRecord: 25.6ms)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
lib/errors_format.rb:22:in `fill_errors'
app/services/suppliers/supplier_products_service.rb:50:in `create_item'
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:40:34 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
Completed 500 Internal Server Error in 10697ms (ActiveRecord: 2.1ms)


  
NameError (undefined local variable or method `validate_data' for #<Suppliers::SupplierProductsService:0x00007f238cf0bc28>
Did you mean?  validate_data!):
  
app/services/suppliers/supplier_products_service.rb:15:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:41:30 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:56
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
Completed 500 Internal Server Error in 4587ms (ActiveRecord: 25.8ms)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
lib/errors_format.rb:22:in `fill_errors'
app/services/suppliers/supplier_products_service.rb:52:in `create_item'
app/services/suppliers/supplier_products_service.rb:17:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:41:39 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:56
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
Completed 500 Internal Server Error in 5694ms (ActiveRecord: 2.5ms)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
lib/errors_format.rb:22:in `fill_errors'
app/services/suppliers/supplier_products_service.rb:52:in `create_item'
app/services/suppliers/supplier_products_service.rb:17:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:42:29 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:58
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:63
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:53
Completed 400 Bad Request in 7303ms (Views: 0.3ms | ActiveRecord: 27.6ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-27 22:43:26 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"code_001", "quantity"=>15, "supplier_product_price_attributes"=>{"price"=>23.6, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:62
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):3
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):3
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):9
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):11
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):11
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):12
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):12
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):13
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):14
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):14
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):15
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):15
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):16
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):16
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:52
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:52
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:52
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:52
Completed 400 Bad Request in 640618ms (Views: 0.7ms | ActiveRecord: 35.9ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-29 20:57:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-29 20:57:29 +0400
Started GET "/en/products/edit_product?id=7" for 127.0.0.1 at 2020-09-29 20:57:59 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (2.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
Completed 404 Not Found in 560499ms (ActiveRecord: 30.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=7):
  
app/services/products/product_update_service.rb:27:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
  [1m[36mProduct Load (3.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:10:58 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (7.8ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (1.7ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (1.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (1.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 11878ms (Views: 0.5ms | ActiveRecord: 35.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:11:49 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 33263ms (Views: 0.4ms | ActiveRecord: 29.6ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:12:25 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.6ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 9754ms (Views: 0.3ms | ActiveRecord: 23.2ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:12:44 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 7122ms (Views: 0.5ms | ActiveRecord: 2.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:12:54 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 4379ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:13:10 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 6926ms (Views: 0.4ms | ActiveRecord: 1.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:13:23 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 1135690ms (Views: 0.4ms | ActiveRecord: 25.1ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:34:50 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 7410ms (Views: 0.7ms | ActiveRecord: 24.6ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:35:29 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 5283ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
config/initializers/multilanguage.rb:2:in `multilanguage'
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:38:30 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 11537ms (ActiveRecord: 5.5ms)


  
NoMethodError (undefined method `edit_action?' for #<Class:0x0000560d80459438>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:39:10 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 89044ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `edit_action?' for #<Class:0x00007f91d008e3c8>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:40:47 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 4767ms (ActiveRecord: 3.8ms)


  
NameError (undefined local variable or method `action' for #<Class:0x00007f91bc5a4470>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:41:07 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 22954ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `action' for #<Class:0x00007f91c89ca818>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:46:48 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 6799ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `action' for #<Class:0x00007f91d0773328>):
  
app/models/product.rb:4:in `<class:Product>'
app/models/product.rb:1:in `<main>'
app/services/products/product_update_service.rb:29:in `edit_product'
app/controllers/products_controller.rb:28:in `edit_product'
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:47:07 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 9704ms (Views: 0.5ms | ActiveRecord: 27.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:47:25 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.6ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 13602ms (Views: 0.9ms | ActiveRecord: 2.8ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:47:47 +0400
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:29
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mSubCategory Load (0.7ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
  [1m[36mProductVatType Load (0.7ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:18
Completed 200 OK in 95586ms (Views: 0.8ms | ActiveRecord: 28.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:52:41 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 8423ms (Views: 0.5ms | ActiveRecord: 23.9ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:16 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.2ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.2ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:23 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:24 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.3ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.2ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.2ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 21:53:26 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.3ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.3ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 1.8ms)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  [1m[36mProductType Load (1.0ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductVatType Load (0.3ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSubCategory Load (1.1ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (1.6ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 22:00:30 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:27
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.4ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 173ms (Views: 0.4ms | ActiveRecord: 32.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-29 22:07:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-29 22:07:58 +0400
Started GET "/en/products/edit_product?id=15" for 127.0.0.1 at 2020-09-29 22:08:16 +0400
Processing by ProductsController#edit_product as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 34ms (Views: 0.4ms | ActiveRecord: 0.0ms)


  [1m[36mSupplier Load (7.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:24:10 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:60
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):2
  [1m[36mCACHE Supplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):2
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 400 Bad Request in 100695ms (Views: 0.5ms | ActiveRecord: 41.7ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:28:53 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:65
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:70
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:51
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:51
Completed 400 Bad Request in 81168ms (Views: 0.7ms | ActiveRecord: 22.1ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:30:18 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (9.1ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:30:23.809969"], ["updated_at", "2020-09-29 18:30:23.809969"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 400 Bad Request in 30850ms (Views: 0.4ms | ActiveRecord: 45.4ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:31:08 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:31:13.905474"], ["updated_at", "2020-09-29 18:31:13.905474"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (9.0ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 2], ["price", "25.0"], ["created_at", "2020-09-29 18:31:14.486813"], ["updated_at", "2020-09-29 18:31:14.486813"], ["currency_id", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 500 Internal Server Error in 5875ms (ActiveRecord: 33.2ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: INSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/suppliers/supplier_products_service.rb:64:in `create_price'
app/services/suppliers/supplier_products_service.rb:16:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:31:21 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:31:25.041458"], ["updated_at", "2020-09-29 18:31:25.041458"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (2.2ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 3], ["price", "25.0"], ["created_at", "2020-09-29 18:32:58.753978"], ["updated_at", "2020-09-29 18:32:58.753978"], ["currency_id", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 500 Internal Server Error in 96857ms (ActiveRecord: 10.4ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: INSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/suppliers/supplier_products_service.rb:64:in `create_price'
app/services/suppliers/supplier_products_service.rb:16:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:33:02 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:33:05.503843"], ["updated_at", "2020-09-29 18:33:05.503843"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (1.3ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 4], ["price", "25.0"], ["created_at", "2020-09-29 18:33:09.752482"], ["updated_at", "2020-09-29 18:33:09.752482"], ["currency_id", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 500 Internal Server Error in 7656ms (ActiveRecord: 7.6ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: INSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"):
  
app/services/suppliers/supplier_products_service.rb:64:in `create_price'
app/services/suppliers/supplier_products_service.rb:16:in `create_supplier_product'
app/controllers/supplier_products_controller.rb:11:in `create'
  [1m[36mCurrency Load (1.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" ORDER BY "currencies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCurrency Load (0.4ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:33:35 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[36mSupplierProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:33:39.503367"], ["updated_at", "2020-09-29 18:33:39.503367"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:55
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[36mSupplierProductPrice Create (0.8ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 5], ["price", "25.0"], ["created_at", "2020-09-29 18:33:40.229638"], ["updated_at", "2020-09-29 18:33:40.229638"], ["currency_id", 3]]
  â†³ app/services/suppliers/supplier_products_service.rb:64
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:64
Completed 204 No Content in 5074ms (Views: 0.3ms | ActiveRecord: 8.4ms)


Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:36:26 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>4}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>4}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:70
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:75
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:15
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mSupplierProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:36:34.424650"], ["updated_at", "2020-09-29 18:36:34.424650"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:57
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:65
  [1m[36mSupplierProductPrice Create (1.2ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 6], ["price", "25.0"], ["created_at", "2020-09-29 18:36:34.450011"], ["updated_at", "2020-09-29 18:36:34.450011"], ["currency_id", 4]]
  â†³ app/services/suppliers/supplier_products_service.rb:65
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:15
Completed 204 No Content in 7818ms (Views: 0.2ms | ActiveRecord: 28.7ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-29 22:42:32 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-29 22:42:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-29 22:42:33 +0400
Started POST "/en/supplier_products" for 127.0.0.1 at 2020-09-29 22:42:50 +0400
Processing by SupplierProductsController#create as JSON
  Parameters: {"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>5}, "locale"=>"en", "supplier_product"=>{"supplier_id"=>4, "product_id"=>15, "supplier_code"=>"0055", "quantity"=>23, "supplier_product_price_attributes"=>{"price"=>25, "currency_id"=>5}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplier Load (1.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:74
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:79
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:19
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[36mSupplierProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-09-29 18:42:58.324208"], ["updated_at", "2020-09-29 18:42:58.324208"], ["quantity", 23]]
  â†³ app/services/suppliers/supplier_products_service.rb:61
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[36mSupplierProductPrice Create (1.3ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 7], ["price", "25.0"], ["created_at", "2020-09-29 18:42:58.357730"], ["updated_at", "2020-09-29 18:42:58.357730"], ["currency_id", 5]]
  â†³ app/services/suppliers/supplier_products_service.rb:69
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:19
Completed 201 Created in 8025ms (Views: 0.2ms | ActiveRecord: 49.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 00:34:18 +0400
Started DELETE "/en/products?id=15" for 127.0.0.1 at 2020-09-30 00:34:31 +0400
Processing by ProductsController#destroy as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started DELETE "/en/products?id=15" for 127.0.0.1 at 2020-09-30 00:35:04 +0400
Processing by ProductsController#destroy as JSON
  Parameters: {"id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_destroy_service.rb:20
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProductCharacteristic Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_characteristics" WHERE "product_characteristics"."id" = $1[0m  [["id", 21]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProductImage Load (5.3ms)[0m  [1m[34mSELECT "product_images".* FROM "product_images" WHERE "product_images"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[36mProduct Destroy (2.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 15]]
  â†³ app/services/products/product_destroy_service.rb:21
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/products/product_destroy_service.rb:21
Completed 500 Internal Server Error in 16390ms (ActiveRecord: 28.5ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "products" violates foreign key constraint "fk_rails_9a363579c5" on table "supplier_products"
DETAIL:  Key (id)=(15) is still referenced from table "supplier_products".
: DELETE FROM "products" WHERE "products"."id" = $1):
  
app/services/products/product_destroy_service.rb:21:in `destroy_product'
app/controllers/products_controller.rb:34:in `destroy'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddActiveColumnToProduct (20200929203713)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.7ms)[0m  [1m[35mALTER TABLE "products" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20200929203713_add_active_column_to_product.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200929203713"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/products?id=2" for 127.0.0.1 at 2020-09-30 00:39:43 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductsController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_destroy_service.rb:20
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_destroy_service.rb:22
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "active" = $1 WHERE "products"."id" = $2[0m  [["active", false], ["id", 2]]
  â†³ app/services/products/product_destroy_service.rb:22
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_destroy_service.rb:22
Completed 200 OK in 21999ms (Views: 0.2ms | ActiveRecord: 46.2ms)


  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.9ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (1.1ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
Started PUT "/en/products" for 127.0.0.1 at 2020-09-30 00:46:46 +0400
Processing by ProductsController#update as JSON
  Parameters: {"id"=>2, "name"=>{"en"=>"changed name"}, "full_name"=>{"en"=>"changed full name"}, "description"=>"changed description", "instruction"=>"changed instruction", "code"=>"02020202", "product_characteristic_attributes"=>{"id"=>2, "sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"54", "manufacturer"=>"OSLAM", "description"=>"changed description", "external_code"=>"989898", "EAN_code"=>"25639", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}, "locale"=>"en", "product"=>{"id"=>2, "name"=>{"en"=>"changed name"}, "full_name"=>{"en"=>"changed full name"}, "description"=>"changed description", "code"=>"02020202", "instruction"=>"changed instruction", "product_characteristic_attributes"=>{"id"=>2, "sub_category_id"=>2, "product_type_id"=>5, "product_vat_type_id"=>2, "volume"=>"54", "manufacturer"=>"OSLAM", "description"=>"changed description", "external_code"=>"989898", "EAN_code"=>"25639", "weight"=>23, "height"=>23, "width"=>23, "depth"=>23, "subscription"=>true, "commission"=>true}}}
Unpermitted parameters: :format, :locale, :product
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):6
  [1m[36mProductCharacteristic Load (0.9ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mProductCharacteristic Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_characteristics" WHERE "product_characteristics"."id" = $1[0m  [["id", 2]]
  â†³ (pry):6
  [1m[36mProduct Update (38.2ms)[0m  [1m[33mUPDATE "products" SET "name" = $1, "full_name" = $2, "description" = $3, "code" = $4, "instruction" = $5 WHERE "products"."id" = $6[0m  [["name", "{\"en\":\"changed name\"}"], ["full_name", "{\"en\":\"changed full name\"}"], ["description", "changed description"], ["code", "02020202"], ["instruction", "changed instruction"], ["id", 2]]
  â†³ (pry):6
  [1m[36mProductCharacteristic Create (6.4ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "volume", "manufacturer", "description", "external_code", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id", "subscription", "commission") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15) RETURNING "id"[0m  [["product_id", 2], ["sub_category_id", 2], ["volume", "54"], ["manufacturer", "OSLAM"], ["description", "changed description"], ["external_code", "989898"], ["EAN_code", "25639"], ["weight", "23.0"], ["width", "23.0"], ["height", "23.0"], ["depth", "23.0"], ["product_type_id", 5], ["product_vat_type_id", 2], ["subscription", true], ["commission", true]]
  â†³ (pry):6
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ (pry):6
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:22
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductCharacteristic Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_characteristics" WHERE "product_characteristics"."id" = $1[0m  [["id", 22]]
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductCharacteristic Create (0.7ms)[0m  [1m[32mINSERT INTO "product_characteristics" ("product_id", "sub_category_id", "volume", "manufacturer", "description", "external_code", "EAN_code", "weight", "width", "height", "depth", "product_type_id", "product_vat_type_id", "subscription", "commission") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15) RETURNING "id"[0m  [["product_id", 2], ["sub_category_id", 2], ["volume", "54"], ["manufacturer", "OSLAM"], ["description", "changed description"], ["external_code", "989898"], ["EAN_code", "25639"], ["weight", "23.0"], ["width", "23.0"], ["height", "23.0"], ["depth", "23.0"], ["product_type_id", 5], ["product_vat_type_id", 2], ["subscription", true], ["commission", true]]
  â†³ app/services/products/product_update_service.rb:23
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_update_service.rb:23
  [1m[36mProductType Load (0.4ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mProductVatType Load (0.6ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_update_service.rb:17
Completed 200 OK in 111426ms (Views: 3.2ms | ActiveRecord: 128.3ms)


Started GET "/en/products/list" for 127.0.0.1 at 2020-09-30 00:53:30 +0400
Processing by ProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."active" = $1[0m  [["active", true]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.6ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.4ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.7ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 11], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mSubCategory Load (0.5ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 13], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 14], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductType Load (0.5ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductVatType Load (0.5ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mProductCharacteristic Load (0.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE ProductType Load (0.0ms)[0m  [1m[34mSELECT  "product_types".* FROM "product_types" WHERE "product_types"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE ProductVatType Load (0.0ms)[0m  [1m[34mSELECT  "product_vat_types".* FROM "product_vat_types" WHERE "product_vat_types"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE SubCategory Load (0.0ms)[0m  [1m[34mSELECT  "sub_categories".* FROM "sub_categories" WHERE "sub_categories"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/products/product_list_service.rb:17
Completed 200 OK in 148ms (Views: 1.3ms | ActiveRecord: 32.9ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-30 00:55:20 +0400
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/suppliers/list" for 127.0.0.1 at 2020-09-30 00:56:00 +0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SuppliersController#list as JSON
  Parameters: {"locale"=>"en", "id"=>"list"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms)


  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductCharacteristic Load (0.5ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" WHERE "product_characteristics"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:21:27 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:21:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:21:28 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:22:24 +0400
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:32:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:32:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:32:26 +0400
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:33:14 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :id, :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (1.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):2
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 31036ms (ActiveRecord: 4.7ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f26f807cd00>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:34:06 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:34:07 +0400
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 7575ms (ActiveRecord: 9.4ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f26f42ec6c0>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):5
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 36960ms (ActiveRecord: 7.6ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f2708270f20>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:34:55 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
Completed 500 Internal Server Error in 36445ms (ActiveRecord: 0.5ms)


  
NameError (undefined local variable or method `supplier' for #<Suppliers::SupplierProductsService:0x00007f26f8127458>
Did you mean?  super):
  
app/services/suppliers/supplier_products_service.rb:51:in `find_supplier_product'
app/services/suppliers/supplier_products_service.rb:32:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:16:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:35:35 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 6854ms (Views: 0.6ms | ActiveRecord: 15.5ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:35:53 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):10
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[36mSupplierProductPrice Destroy (1.2ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ (pry):10
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):10
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):10
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):11
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):11
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 84839ms (Views: 0.2ms | ActiveRecord: 7.3ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:37:21 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 17206ms (Views: 0.2ms | ActiveRecord: 13.7ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:37:51 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 4491ms (Views: 0.2ms | ActiveRecord: 20.8ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:38:02 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):18
  [1m[36mCACHE SupplierProduct Load (0.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):19
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ (pry):19
  [1m[36mCACHE SupplierProduct Load (0.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mCACHE SupplierProductPrice Load (0.0ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 90420ms (Views: 0.8ms | ActiveRecord: 4.1ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:40:19 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>3, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):21
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ (pry):21
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):21
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):21
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):21
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (pry):23
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ (pry):23
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):25
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ (pry):27
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ (pry):28
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ (pry):29
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (pry):30
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 400 Bad Request in 61223ms (Views: 0.1ms | ActiveRecord: 8.5ms)


Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:41:28 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>1}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProduct Update (0.5ms)[0m  [1m[33mUPDATE "supplier_products" SET "product_id" = $1, "supplier_code" = $2, "quantity" = $3, "updated_at" = $4 WHERE "supplier_products"."id" = $5[0m  [["product_id", 2], ["supplier_code", "0066"], ["quantity", 20], ["updated_at", "2020-09-29 21:41:33.961357"], ["id", 7]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Update (0.7ms)[0m  [1m[33mUPDATE "supplier_product_prices" SET "price" = $1, "currency_id" = $2, "updated_at" = $3 WHERE "supplier_product_prices"."id" = $4[0m  [["price", "20.0"], ["currency_id", 1], ["updated_at", "2020-09-29 21:41:33.962833"], ["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 500 Internal Server Error in 5556ms (ActiveRecord: 2.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "supplier_product_prices" violates foreign key constraint "fk_rails_298846d27d"
DETAIL:  Key (currency_id)=(1) is not present in table "currencies".
: UPDATE "supplier_product_prices" SET "price" = $1, "currency_id" = $2, "updated_at" = $3 WHERE "supplier_product_prices"."id" = $4):
  
app/services/suppliers/supplier_products_service.rb:33:in `update_supplier_product'
app/controllers/supplier_products_controller.rb:17:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:41:47 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProduct Update (0.4ms)[0m  [1m[33mUPDATE "supplier_products" SET "product_id" = $1, "supplier_code" = $2, "quantity" = $3, "updated_at" = $4 WHERE "supplier_products"."id" = $5[0m  [["product_id", 2], ["supplier_code", "0066"], ["quantity", 20], ["updated_at", "2020-09-29 21:41:52.336022"], ["id", 7]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[36mSupplierProductPrice Update (0.4ms)[0m  [1m[33mUPDATE "supplier_product_prices" SET "price" = $1, "currency_id" = $2, "updated_at" = $3 WHERE "supplier_product_prices"."id" = $4[0m  [["price", "20.0"], ["currency_id", 3], ["updated_at", "2020-09-29 21:41:52.337401"], ["id", 6]]
  â†³ app/services/suppliers/supplier_products_service.rb:33
  [1m[35m (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:33
Completed 200 OK in 5354ms (Views: 0.3ms | ActiveRecord: 37.6ms)


  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" ORDER BY "supplier_product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:46:04 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
Completed 500 Internal Server Error in 9796ms (ActiveRecord: 15.1ms)


  
NoMethodError (undefined method `currency' for #<SupplierProductPrice:0x00007f26f4497650>
Did you mean?  currency_id):
  
app/services/suppliers/supplier_products_service.rb:18:in `update_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/supplier_products_controller.rb:18:in `update'
Started PUT "/en/supplier_products" for 127.0.0.1 at 2020-09-30 01:46:49 +0400
Processing by SupplierProductsController#update as JSON
  Parameters: {"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}, "locale"=>"en", "supplier_product"=>{"id"=>7, "supplier_id"=>4, "product_id"=>2, "supplier_code"=>"0066", "quantity"=>20, "supplier_product_price_attributes"=>{"id"=>6, "price"=>20, "currency_id"=>3}}}
Unpermitted parameters: :format, :locale, :supplier_product
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:53
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplierProductPrice Load (0.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:36
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:36
Completed 200 OK in 4524ms (Views: 0.3ms | ActiveRecord: 18.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:47:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:47:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:47:20 +0400
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:50:14 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 01:55:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 01:55:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 01:55:06 +0400
Started DELETE "/en/supplier_products?id=7" for 127.0.0.1 at 2020-09-30 01:55:19 +0400
Processing by SupplierProductsController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 12.5ms)


  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products"[0m
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/supplier_products?id=7" for 127.0.0.1 at 2020-09-30 01:56:04 +0400
Processing by SupplierProductsController#destroy as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:54
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[36mSupplierProduct Update (0.4ms)[0m  [1m[33mUPDATE "supplier_products" SET "is_active" = $1, "updated_at" = $2 WHERE "supplier_products"."id" = $3[0m  [["is_active", true], ["updated_at", "2020-09-29 21:56:04.520817"], ["id", 7]]
  â†³ app/services/suppliers/supplier_products_service.rb:47
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/suppliers/supplier_products_service.rb:47
Completed 200 OK in 49ms (Views: 0.2ms | ActiveRecord: 13.8ms)


  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeColumnDefaultValue (20200929215700)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeColumnDefaultValue (20200929215700)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (39.6ms)[0m  [1m[35mALTER TABLE "supplier_products" ALTER COLUMN "is_active" TYPE boolean, ALTER COLUMN "is_active" SET DEFAULT TRUE[0m
  â†³ db/migrate/20200929215700_change_column_default_value.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200929215700"]]
  â†³ bin/rails:9
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 16:56:42 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 16:56:43 +0400
  [1m[36mSupplierProduct Load (6.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-09-30 17:31:00 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-09-30 17:31:01 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-09-30 17:31:01 +0400
Started GET "/en/supplier_products/list" for 127.0.0.1 at 2020-09-30 17:31:13 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/supplier_products/list" for 127.0.0.1 at 2020-09-30 17:31:27 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."is_active" = $1[0m  [["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mProduct Load (4.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mSupplierProductPrice Load (2.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mCurrency Load (1.6ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 84ms (Views: 0.3ms | ActiveRecord: 24.8ms)


  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-01 19:04:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-01 19:04:44 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-01 19:04:44 +0400
Started GET "/en/supplier_products/list?supplier_id=2" for 127.0.0.1 at 2020-10-01 19:05:18 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (3.6ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 2], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 16.7ms)


Started GET "/en/supplier_products/list?supplier_id=5" for 127.0.0.1 at 2020-10-01 19:05:25 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 5], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started GET "/en/supplier_products/list?supplier_id=1" for 127.0.0.1 at 2020-10-01 19:05:31 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 1], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/en/supplier_products/list?supplier_id=2" for 127.0.0.1 at 2020-10-01 19:05:36 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 2], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/en/supplier_products/list?supplier_id=3" for 127.0.0.1 at 2020-10-01 19:05:42 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"3", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (0.6ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 3], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/supplier_products/list?supplier_id=4" for 127.0.0.1 at 2020-10-01 19:05:46 +0400
Processing by SupplierProductsController#list as JSON
  Parameters: {"supplier_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mSupplierProduct Load (35.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."supplier_id" = $1 AND "supplier_products"."is_active" = $2[0m  [["supplier_id", 4], ["is_active", true]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mProduct Load (3.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mSupplierProductPrice Load (2.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
  [1m[36mCurrency Load (2.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/suppliers/supplier_products_service.rb:25
Completed 200 OK in 165ms (Views: 0.4ms | ActiveRecord: 73.9ms)


  [1m[36mProductCharacteristic Load (3.4ms)[0m  [1m[34mSELECT  "product_characteristics".* FROM "product_characteristics" ORDER BY "product_characteristics"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (38.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductPrices (20201001214457)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (21.4ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "product_id" bigint NOT NULL, "list_price_type" character varying(30) NOT NULL, "list_price_amount" decimal NOT NULL, "manufacturing_cost" decimal NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  â†³ db/migrate/20201001214457_create_product_prices.rb:3
  [1m[35m (104.0ms)[0m  [1m[35mCREATE  INDEX  "index_product_prices_on_product_id" ON "product_prices"  ("product_id")[0m
  â†³ db/migrate/20201001214457_create_product_prices.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201001214457"]]
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductPrice Load (1.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (37.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 01:54:59 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 01:55:00 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 01:56:35 +0400
  [1m[36mProduct Load (3.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 01:57:56 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 6.6ms)


  
NameError (uninitialized constant Products::ProductsPrice):
  
app/controllers/product_prices_controller.rb:9:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:00:21 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 1.7ms)


  
NameError (uninitialized constant Products::ProductsPriceService):
  
app/controllers/product_prices_controller.rb:9:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:00:45 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Completed 500 Internal Server Error in 56042ms (ActiveRecord: 2.4ms)


  
NameError (uninitialized constant Products::ProductsPriceService):
  
app/controllers/product_prices_controller.rb:10:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:01:46 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:22
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:27
Completed 500 Internal Server Error in 5612ms (ActiveRecord: 13.2ms)


  
NameError (undefined local variable or method `params' for #<Products::ProductPriceService:0x00007ff884174fd8>):
  
app/services/products/product_price_service.rb:28:in `first_or_initialize_price'
app/services/products/product_price_service.rb:15:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:02:54 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:22
  [1m[36mProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:27
Completed 500 Internal Server Error in 108091ms (ActiveRecord: 1.7ms)


  
NameError (undefined local variable or method `params' for #<Products::ProductPriceService:0x00007ff8700ebb98>):
  
app/services/products/product_price_service.rb:28:in `first_or_initialize_price'
app/services/products/product_price_service.rb:15:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 02:05:13 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>200, "manufacturing_cost"=>300}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:25
  [1m[36mProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:30
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mProductPrice Create (6.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("product_id", "list_price_type", "list_price_amount", "manufacturing_cost", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_id", 15], ["list_price_type", "fix_price"], ["list_price_amount", "200.0"], ["manufacturing_cost", "300.0"], ["created_at", "2020-10-02 22:05:39.266495"], ["updated_at", "2020-10-02 22:05:39.266495"]]
  â†³ app/services/products/product_price_service.rb:31
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):13
Completed 204 No Content in 2954989ms (Views: 0.2ms | ActiveRecord: 28.2ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 02:54:50 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 02:54:51 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 02:54:51 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 02:56:01 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 02:56:02 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 02:56:02 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 02:57:19 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 02:57:20 +0400
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 03:05:38 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>50, "manufacturing_cost"=>200, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>50, "manufacturing_cost"=>200}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:30
  [1m[36mProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:36
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:36
  [1m[36mProductPrice Update (0.8ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_type" = $1, "list_price_amount" = $2, "manufacturing_cost" = $3, "updated_at" = $4 WHERE "product_prices"."id" = $5[0m  [["list_price_type", "percent"], ["list_price_amount", "50.0"], ["manufacturing_cost", "200.0"], ["updated_at", "2020-10-02 23:05:45.999521"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:36
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:36
Completed 500 Internal Server Error in 7591ms (ActiveRecord: 18.4ms)


  
ActiveRecord::ConfigurationError (Can't join 'ProductPrice' to association named 'products'; perhaps you misspelled it?):
  
app/services/products/product_price_service.rb:53:in `calculation'
app/services/products/product_price_service.rb:20:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
  [1m[36mProductPrice Load (2.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductPrice Load (4.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" INNER JOIN "supplier_products" ON "supplier_products"."product_id" = "products"."id" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductPrice Load (1.6ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" INNER JOIN "supplier_products" ON "supplier_products"."product_id" = "products"."id"[0m
  [1m[36mProductPrice Load (1.3ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id"[0m
  [1m[36mProductPrice Load (1.8ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id = products.id[0m
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id = products.id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProductPrice Load (1.6ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id == products.id[0m
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN sipplier_products on supplier_products.product_id == products.id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id == products.id[0m
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id == products.id LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProductPrice Load (1.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id = products.id[0m
  [1m[36mProductPrice Load (40.5ms)[0m  [1m[34mSELECT "product_prices".* FROM "product_prices" INNER JOIN "products" ON "products"."id" = "product_prices"."product_id" LEFT JOIN supplier_products on supplier_products.product_id = products.id LEFT JOIN supplier_product_prices as prices ON prices.supplier_product_id = supplier_products.id[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 17:23:30 +0400
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 17:23:31 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 17:24:47 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 17:24:48 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 17:24:48 +0400
  [1m[36mSupplierProduct Load (4.6ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.2ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (6.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 7], ["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (14.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:36:51 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (3.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (39.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.9ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_amount" = $1, "manufacturing_cost" = $2, "updated_at" = $3 WHERE "product_prices"."id" = $4[0m  [["list_price_amount", "20.0"], ["manufacturing_cost", "100.0"], ["updated_at", "2020-10-03 13:36:59.298049"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:42
  [1m[36mCACHE SupplierProduct Load (0.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 36351ms (ActiveRecord: 72.5ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products"[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 ORDER BY "supplier_products"."id" DESC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 5]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 ORDER BY "supplier_products"."id" DESC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 5]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1 ORDER BY "supplier_products"."id" DESC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 5]]
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 1], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (1.4ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 2], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 2]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 3], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 3]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 4], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (0.3ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 4]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 5], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (1.1ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 4]]
  [1m[36mSupplierProduct Destroy (1.1ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 5]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 6], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (0.8ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 5]]
  [1m[36mSupplierProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 6]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Create (15.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-10-03 13:39:22.038753"], ["updated_at", "2020-10-03 13:39:22.038753"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 4], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-10-03 13:39:49.181275"], ["updated_at", "2020-10-03 13:39:49.181275"], ["quantity", 50]]
  [1m[35m (35.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "supplier_products"[0m
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 8], ["LIMIT", 1]]
  [1m[36mSupplierProduct Destroy (0.9ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 8]]
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:41:13 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.5ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 22971ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:41:51 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 166368ms (ActiveRecord: 4.3ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:44:40 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:42
  [1m[36mCACHE SupplierProduct Load (0.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):11
Completed 500 Internal Server Error in 109857ms (ActiveRecord: 26.2ms)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSupplierProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:47:53 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):19
Completed 500 Internal Server Error in 32510ms (ActiveRecord: 4.6ms)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:48:39 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):22
Completed 500 Internal Server Error in 34184ms (ActiveRecord: 36.3ms)


  
TypeError (nil can't be coerced into BigDecimal):
  
app/services/products/product_price_service.rb:56:in `+'
app/services/products/product_price_service.rb:56:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:49:47 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.3ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ (pry):26
  [1m[36mSupplier Load (1.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):28
  [1m[36mCACHE Supplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):29
  [1m[36mCACHE Supplier Load (0.0ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (pry):30
  [1m[36mCACHE Supplier Load (0.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
Completed 500 Internal Server Error in 95853ms (ActiveRecord: 42.2ms)


  
NoMethodError (undefined method `price' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:47:in `block in calculation'
app/services/products/product_price_service.rb:46:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:51:40 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:56
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
Completed 201 Created in 6253ms (Views: 0.2ms | ActiveRecord: 46.7ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:52:14 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:57
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:59
Completed 201 Created in 5499ms (Views: 0.3ms | ActiveRecord: 47.6ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:52:52 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.2ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 17115ms (Views: 0.7ms | ActiveRecord: 41.0ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:53:29 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.8ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 5493ms (Views: 0.8ms | ActiveRecord: 44.1ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:54:34 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>20, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (1.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 5635ms (Views: 0.6ms | ActiveRecord: 49.2ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:55:07 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.1ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_type" = $1, "list_price_amount" = $2, "updated_at" = $3 WHERE "product_prices"."id" = $4[0m  [["list_price_type", "fix_price"], ["list_price_amount", "30.0"], ["updated_at", "2020-10-03 13:55:11.519251"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 6674ms (Views: 0.5ms | ActiveRecord: 41.8ms)


  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCurrency Load (6.4ms)[0m  [1m[34mSELECT "currencies".* FROM "currencies"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.7ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Create (36.0ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 9], ["price", "100.0"], ["created_at", "2020-10-03 13:56:43.059730"], ["updated_at", "2020-10-03 13:56:43.059730"], ["currency_id", 3]]
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:56:46 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"fix_price", "list_price_amount"=>30, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.7ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 6836ms (Views: 0.7ms | ActiveRecord: 10.4ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:57:11 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>100, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>100}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (0.8ms)[0m  [1m[33mUPDATE "product_prices" SET "list_price_type" = $1, "updated_at" = $2 WHERE "product_prices"."id" = $3[0m  [["list_price_type", "percent"], ["updated_at", "2020-10-03 13:57:13.857079"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.9ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 4621ms (Views: 0.6ms | ActiveRecord: 41.4ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:57:26 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.1ms)[0m  [1m[33mUPDATE "product_prices" SET "manufacturing_cost" = $1, "updated_at" = $2 WHERE "product_prices"."id" = $3[0m  [["manufacturing_cost", "0.0"], ["updated_at", "2020-10-03 13:57:29.707511"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 5069ms (Views: 0.5ms | ActiveRecord: 10.0ms)


  [1m[36mSupplier Load (1.5ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mSupplierProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "supplier_products" ("supplier_id", "product_id", "supplier_code", "created_at", "updated_at", "quantity") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["supplier_id", 3], ["product_id", 15], ["supplier_code", "0055"], ["created_at", "2020-10-03 13:58:08.973874"], ["updated_at", "2020-10-03 13:58:08.973874"], ["quantity", 50]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProduct Load (0.8ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.6ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Create (1.4ms)[0m  [1m[32mINSERT INTO "supplier_product_prices" ("supplier_product_id", "price", "created_at", "updated_at", "currency_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["supplier_product_id", 10], ["price", "120.0"], ["created_at", "2020-10-03 13:58:19.796233"], ["updated_at", "2020-10-03 13:58:19.796233"], ["currency_id", 3]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:58:22 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplierProductPrice Load (0.8ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 10], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:58
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 24934ms (Views: 0.6ms | ActiveRecord: 6.0ms)


  [1m[36mSupplierProduct Load (0.4ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 10], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (0.6ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 8]]
  [1m[36mSupplierProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 10]]
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSupplierProduct Load (1.0ms)[0m  [1m[34mSELECT  "supplier_products".* FROM "supplier_products" ORDER BY "supplier_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSupplierProductPrice Load (0.7ms)[0m  [1m[34mSELECT  "supplier_product_prices".* FROM "supplier_product_prices" WHERE "supplier_product_prices"."supplier_product_id" = $1 LIMIT $2[0m  [["supplier_product_id", 9], ["LIMIT", 1]]
  [1m[36mSupplierProductPrice Destroy (0.8ms)[0m  [1m[31mDELETE FROM "supplier_product_prices" WHERE "supplier_product_prices"."id" = $1[0m  [["id", 7]]
  [1m[36mSupplierProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "supplier_products" WHERE "supplier_products"."id" = $1[0m  [["id", 9]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 17:59:36 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.5ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 12480ms (ActiveRecord: 3.6ms)


  
NoMethodError (undefined method `supplier_id' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:50:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:00:22 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.3ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.3ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
Completed 500 Internal Server Error in 6032ms (ActiveRecord: 21.6ms)


  
NoMethodError (undefined method `supplier_id' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:50:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:00:42 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.1ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 500 Internal Server Error in 4976ms (ActiveRecord: 24.9ms)


  
NoMethodError (undefined method `name' for nil:NilClass):
  
app/services/products/product_price_service.rb:60:in `set_prices'
app/services/products/product_price_service.rb:50:in `calculation'
app/services/products/product_price_service.rb:19:in `call'
app/controllers/product_prices_controller.rb:11:in `create'
Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:01:07 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>0}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (1.2ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplier Load (1.1ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 7671ms (Views: 0.8ms | ActiveRecord: 28.1ms)


Started POST "/en/product_prices" for 127.0.0.1 at 2020-10-03 18:01:31 +0400
Processing by ProductPricesController#create as JSON
  Parameters: {"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>50, "locale"=>"en", "product_price"=>{"product_id"=>15, "list_price_type"=>"percent", "list_price_amount"=>30, "manufacturing_cost"=>50}}
Unpermitted parameters: :format, :locale, :product_price
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:29
  [1m[36mProductPrice Load (1.1ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 ORDER BY "product_prices"."id" ASC LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mProductPrice Update (1.4ms)[0m  [1m[33mUPDATE "product_prices" SET "manufacturing_cost" = $1, "updated_at" = $2 WHERE "product_prices"."id" = $3[0m  [["manufacturing_cost", "50.0"], ["updated_at", "2020-10-03 14:01:41.940575"], ["id", 1]]
  â†³ app/services/products/product_price_service.rb:35
  [1m[35m (36.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/products/product_price_service.rb:35
  [1m[36mSupplierProduct Load (0.7ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:45
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:60
Completed 201 Created in 13098ms (Views: 0.6ms | ActiveRecord: 42.1ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 18:30:23 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 18:30:24 +0400
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/product_prices/price?product_id=15" for 127.0.0.1 at 2020-10-03 18:32:30 +0400
Processing by ProductPricesController#price as JSON
  Parameters: {"product_id"=>"15", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:31
  [1m[36mSupplierProduct Load (0.5ms)[0m  [1m[34mSELECT "supplier_products".* FROM "supplier_products" WHERE "supplier_products"."product_id" = $1[0m  [["product_id", 15]]
  â†³ app/services/products/product_price_service.rb:51
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" WHERE "suppliers"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:64
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 10.3ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-03 18:58:11 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:05:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:05:47 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:05:47 +0400
  [1m[36mProductPrice Load (2.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" ORDER BY "product_prices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:33:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:33:27 +0400
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:34:01 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:34:02 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:34:02 +0400
Started GET "/en/product_prices/%7Bid%7D" for 127.0.0.1 at 2020-10-06 17:34:22 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/product_prices/%7Bid%7D"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:35:28 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:35:29 +0400
Started GET "/en/product_prices/%7Bid%7D" for 127.0.0.1 at 2020-10-06 17:35:37 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{id}"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.6ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:25
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.5ms)


Started GET "/en/product_prices/%7Bid%7D" for 127.0.0.1 at 2020-10-06 17:36:11 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"{id}"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (1.7ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE ProductPrice Load (0.0ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 30090ms (Views: 0.1ms | ActiveRecord: 9.3ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-06 17:38:37 +0400
Started GET "/en/product_prices/15" for 127.0.0.1 at 2020-10-06 17:38:44 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"15"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.4ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 23829ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/en/product_prices/15" for 127.0.0.1 at 2020-10-06 17:39:45 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"15"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.9ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 15], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 5524ms (Views: 0.7ms | ActiveRecord: 12.6ms)


Started GET "/en/product_prices/56" for 127.0.0.1 at 2020-10-06 17:40:35 +0400
Processing by ProductPricesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"56"}
Unpermitted parameters: :format, :locale
  [1m[36mProductPrice Load (0.5ms)[0m  [1m[34mSELECT  "product_prices".* FROM "product_prices" WHERE "product_prices"."product_id" = $1 LIMIT $2[0m  [["product_id", 56], ["LIMIT", 1]]
  â†³ app/services/products/product_price_service.rb:26
Completed 200 OK in 4194ms (Views: 0.2ms | ActiveRecord: 0.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201007134238)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (63.3ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL)[0m
  â†³ db/migrate/20201007134238_create_departments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007134238"]]
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSubDepartments (20201007140014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "sub_departments" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL, "department_id" integer NOT NULL)[0m
  â†³ db/migrate/20201007140014_create_sub_departments.rb:3
  [1m[35m (7.4ms)[0m  [1m[35mALTER TABLE "sub_departments" ADD CONSTRAINT "fk_rails_6f78497161"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/migrate/20201007140014_create_sub_departments.rb:10
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007140014"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSubDepartments (20201007140014)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.8ms)[0m  [1m[35mALTER TABLE "sub_departments" DROP CONSTRAINT "fk_rails_6f78497161"[0m
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "sub_departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201007140014"]]
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201007134238)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201007134238"]]
  â†³ bin/rails:9
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCustomerType Load (2.7ms)[0m  [1m[34mSELECT  "customer_types".* FROM "customer_types" ORDER BY "customer_types"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomerType Load (0.9ms)[0m  [1m[34mSELECT "customer_types".* FROM "customer_types"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanies (20201007194524)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying)[0m
  â†³ db/migrate/20201007194524_create_companies.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007194524"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCountries (20201007200055)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "countries" ("id" bigserial primary key, "name" character varying NOT NULL, "country_code" character varying NOT NULL)[0m
  â†³ db/migrate/20201007200055_create_countries.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007200055"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateCities (20201007200103)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "cities" ("id" bigserial primary key, "name" character varying NOT NULL, "city_code" character varying NOT NULL, "country_id" bigint NOT NULL, CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
)[0m
  â†³ db/migrate/20201007200103_create_cities.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  â†³ db/migrate/20201007200103_create_cities.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007200103"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "countries_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_countries_id" ON "companies"  ("countries_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_0db510c354"
FOREIGN KEY ("countries_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "cities_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_cities_id" ON "companies"  ("cities_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_4cf4bc2908"
FOREIGN KEY ("cities_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_parent_id" ON "companies"  ("parent_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "parents" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "countries_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_countries_id" ON "companies"  ("countries_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_0db510c354"
FOREIGN KEY ("countries_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "cities_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_cities_id" ON "companies"  ("cities_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_4cf4bc2908"
FOREIGN KEY ("cities_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_parent_id" ON "companies"  ("parent_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "parents" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "countries_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_countries_id" ON "companies"  ("countries_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_0db510c354"
FOREIGN KEY ("countries_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "cities_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_cities_id" ON "companies"  ("cities_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_4cf4bc2908"
FOREIGN KEY ("cities_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" integer[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007201451"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:40:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:40:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:40:26 +0400
Started POST "/%7Blocale%7D/settings/country" for 127.0.0.1 at 2020-10-08 01:41:02 +0400
  
ActionController::RoutingError (uninitialized constant SettingsController):
  
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `block in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `rescue in load_missing_constant'
bootsnap (1.3.2) lib/bootsnap/load_path_cache/core_ext/active_support.rb:56:in `load_missing_constant'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/%7Blocale%7D/settings/country" for 127.0.0.1 at 2020-10-08 01:42:36 +0400
  
AbstractController::ActionNotFound (The action 'country' could not be found for SettingsController):
  
actionpack (5.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/%7Blocale%7D/settings/country" for 127.0.0.1 at 2020-10-08 01:43:08 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"{locale}", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)


  
I18n::InvalidLocale ("{locale}" is not a valid locale):
  
app/controllers/application_controller.rb:8:in `set_locale'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:44:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:44:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:44:43 +0400
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:44:58 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
Completed 500 Internal Server Error in 39ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `paramsp' for #<Settings::CountryAndCityService:0x000055aa02129678>
Did you mean?  params
               @params):
  
app/services/settings/country_and_city_service.rb:22:in `country'
app/controllers/settings_controller.rb:10:in `country'
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:17 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "geo"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Create (3.4ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Georgia"], ["country_code", "geo"]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 10.7ms)


Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:26 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgiaaa", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgiaaa", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "geo"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Update (0.3ms)[0m  [1m[33mUPDATE "countries" SET "name" = $1 WHERE "countries"."id" = $2[0m  [["name", "Georgiaaa"], ["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 4.6ms)


Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:34 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"geo", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"geo"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "geo"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Update (0.3ms)[0m  [1m[33mUPDATE "countries" SET "name" = $1 WHERE "countries"."id" = $2[0m  [["name", "Georgia"], ["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (35.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 36.6ms)


Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-08 01:45:43 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Norway", "country_code"=>"nor", "locale"=>"en", "setting"=>{"name"=>"Norway", "country_code"=>"nor"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "nor"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:22
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[36mCountry Create (0.3ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Norway"], ["country_code", "nor"]]
  â†³ app/services/settings/country_and_city_service.rb:23
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:23
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 2.8ms)


Started GET "/en/settings/countries" for 127.0.0.1 at 2020-10-08 01:45:52 +0400
Processing by SettingsController#countries as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 204 No Content in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:46:20 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `paramsp' for #<Settings::CountryAndCityService:0x00007f605026c8e0>
Did you mean?  params
               @params):
  
app/services/settings/country_and_city_service.rb:28:in `city'
app/controllers/settings_controller.rb:16:in `city'
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:47:30 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:36
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[36mCity Create (0.8ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:37
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.5ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (1, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:37:in `city'
app/controllers/settings_controller.rb:16:in `city'
Started GET "/en/settings/countries" for 127.0.0.1 at 2020-10-08 01:48:07 +0400
Processing by SettingsController#countries as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT "countries".* FROM "countries"[0m
  â†³ app/services/settings/country_and_city_service.rb:22
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 2.8ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:49:08 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 46648ms (ActiveRecord: 12.3ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (2, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:16:in `city'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:50:48 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 5253ms (ActiveRecord: 5.7ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (3, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:51:00 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 37719ms (ActiveRecord: 1.0ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (4, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:51:40 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:51:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:51:41 +0400
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:51:51 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.6ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 4014ms (ActiveRecord: 2.4ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (5, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:52:03 +0400
Processing by SettingsController#city as JSON
  Parameters: {"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"county_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :county_id, :format, :locale, :setting
Unpermitted parameters: :county_id, :format, :locale, :setting
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.5ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 500 Internal Server Error in 33613ms (ActiveRecord: 1.2ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "country_id" violates not-null constraint
DETAIL:  Failing row contains (6, Tbilisi, tbl, null).
: INSERT INTO "cities" ("name", "city_code") VALUES ($1, $2) RETURNING "id"):
  
app/services/settings/country_and_city_service.rb:38:in `city'
app/controllers/settings_controller.rb:17:in `city'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 01:52:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 01:52:56 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 01:52:56 +0400
Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-08 01:53:09 +0400
Processing by SettingsController#city as JSON
  Parameters: {"country_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl", "locale"=>"en", "setting"=>{"country_id"=>1, "name"=>"Tbilisi", "city_code"=>"tbl"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "tbl"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:37
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[36mCity Create (0.7ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code", "country_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "tbl"], ["country_id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:38
Completed 200 OK in 9144ms (Views: 1.1ms | ActiveRecord: 43.3ms)


Started GET "/en/settings/cities?country_id=1" for 127.0.0.1 at 2020-10-08 01:53:31 +0400
Processing by SettingsController#cities as JSON
  Parameters: {"country_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."country_id" = $1[0m  [["country_id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:26
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.4ms)


  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-08 17:49:24 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-08 17:49:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-08 17:49:25 +0400
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:49:35 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (1.3ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 500 Internal Server Error in 20ms (ActiveRecord: 8.8ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:59:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_city?id=2" for 127.0.0.1 at 2020-10-08 17:49:53 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[36mCountry Destroy (0.9ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 2]]
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:65
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 35.8ms)


Started DELETE "/en/settings/destroy_country?id=2" for 127.0.0.1 at 2020-10-08 17:50:01 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Country with 'id'=2):
  
app/services/settings/country_and_city_service.rb:58:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:50:05 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (0.7ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:59:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_city?id=1" for 127.0.0.1 at 2020-10-08 17:50:16 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[36mCountry Destroy (0.5ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:65
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.9ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:65:in `destroy_city'
app/controllers/settings_controller.rb:40:in `destroy_city'
Started DELETE "/en/settings/destroy_city?id=1" for 127.0.0.1 at 2020-10-08 17:51:12 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
Completed 404 Not Found in 9ms (ActiveRecord: 3.6ms)


  
ActiveRecord::RecordNotFound (Couldn't find City with 'id'=1):
  
app/services/settings/country_and_city_service.rb:64:in `destroy_city'
app/controllers/settings_controller.rb:40:in `destroy_city'
Started DELETE "/en/settings/destroy_city?id=2" for 127.0.0.1 at 2020-10-08 17:51:19 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find City with 'id'=2):
  
app/services/settings/country_and_city_service.rb:64:in `destroy_city'
app/controllers/settings_controller.rb:40:in `destroy_city'
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:51:25 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (0.6ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 500 Internal Server Error in 10ms (ActiveRecord: 4.1ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "countries" violates foreign key constraint "fk_rails_996e05be41" on table "cities"
DETAIL:  Key (id)=(1) is still referenced from table "cities".
: DELETE FROM "countries" WHERE "countries"."id" = $1):
  
app/services/settings/country_and_city_service.rb:59:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_country?id=2" for 127.0.0.1 at 2020-10-08 17:51:31 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Country with 'id'=2):
  
app/services/settings/country_and_city_service.rb:58:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT "cities".* FROM "cities"[0m
Started DELETE "/en/settings/destroy_city?id=7" for 127.0.0.1 at 2020-10-08 17:51:56 +0400
Processing by SettingsController#destroy_city as JSON
  Parameters: {"id"=>"7", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:64
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[36mCity Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 7]]
  â†³ app/services/settings/country_and_city_service.rb:65
  [1m[35m (35.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:65
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 36.7ms)


Started DELETE "/en/settings/destroy_country?id=2" for 127.0.0.1 at 2020-10-08 17:52:05 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Country with 'id'=2):
  
app/services/settings/country_and_city_service.rb:58:in `destroy_country'
app/controllers/settings_controller.rb:34:in `destroy_country'
Started DELETE "/en/settings/destroy_country?id=1" for 127.0.0.1 at 2020-10-08 17:52:08 +0400
Processing by SettingsController#destroy_country as JSON
  Parameters: {"id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:58
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[36mCountry Destroy (0.6ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 1]]
  â†³ app/services/settings/country_and_city_service.rb:59
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:59
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 36.9ms)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (4.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:29:20 +0400
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-09 00:30:55 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"GEO", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"GEO"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (1.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "GEO"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[36mCountry Create (1.7ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Georgia"], ["country_code", "GEO"]]
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:39
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 10.6ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-09 00:31:14 +0400
Processing by SettingsController#city as JSON
  Parameters: {"country_id"=>3, "name"=>"Tbilisi", "city_code"=>"TBL", "locale"=>"en", "setting"=>{"country_id"=>3, "name"=>"Tbilisi", "city_code"=>"TBL"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "TBL"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:44
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[36mCity Create (4.9ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code", "country_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "TBL"], ["country_id", 3]]
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:45
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 15.6ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:32:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:32:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:32:15 +0400
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:32:25 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
Completed 500 Internal Server Error in 12ms (ActiveRecord: 5.9ms)


  
NameError (undefined local variable or method `params' for #<Companies::CompaniesService:0x000055cd38657a10>
Did you mean?  @params):
  
app/services/companies/companies_service.rb:26:in `validate_country'
app/services/companies/companies_service.rb:21:in `validate_data!'
app/services/companies/companies_service.rb:14:in `create_company'
app/controllers/companies_controller.rb:10:in `create'
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:32:47 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:26
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:38
  [1m[36mCompany Create (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:38
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:38
Completed 400 Bad Request in 112ms (Views: 0.2ms | ActiveRecord: 11.2ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:33:14 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):1
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):3
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (pry):4
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (pry):6
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 82593ms (Views: 0.3ms | ActiveRecord: 21.9ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:34:52 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 4518ms (Views: 0.6ms | ActiveRecord: 59.7ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:35:13 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 8349ms (Views: 0.5ms | ActiveRecord: 62.3ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:35:35 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (1.4ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 35464ms (Views: 0.4ms | ActiveRecord: 4.7ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:36:13 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_is"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3}}
Unpermitted parameters: :cities_is, :format, :locale, :company
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (0.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 400 Bad Request in 14784ms (Views: 0.5ms | ActiveRecord: 59.1ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:36:48 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:36:49 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:36:49 +0400
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:37:04 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:27
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:34
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:40
  [1m[36mCompany Create (1.7ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "countries_id", "cities_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["countries_id", 3], ["cities_id", 8]]
  â†³ app/services/companies/companies_service.rb:40
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:40
Completed 204 No Content in 13319ms (Views: 0.2ms | ActiveRecord: 49.3ms)


  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT "countries".* FROM "countries"[0m
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCountry Destroy (6.8ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (2.1ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (5.5ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (1.8ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (1.1ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (0.8ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (2.0ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (0.5ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 6]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 5]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 4]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.0ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.3ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 2]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (0.8ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCity Destroy (0.9ms)[0m  [1m[31mDELETE FROM "cities" WHERE "cities"."id" = $1[0m  [["id", 8]]
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" ORDER BY "cities"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCountry Destroy (2.2ms)[0m  [1m[31mDELETE FROM "countries" WHERE "countries"."id" = $1[0m  [["id", 3]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" ORDER BY "countries"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "countries_id"[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:10
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "cities_id"[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:11
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" DROP COLUMN "parent_id"[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:12
  [1m[36mActiveRecord::SchemaMigration Destroy (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201007201451"]]
  â†³ bin/rails:9
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnsToCompany (20201007201451)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "companies" ADD "country_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_country_id" ON "companies"  ("country_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (5.9ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_75b15a5c36"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "companies" ADD "city_id" bigint[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_city_id" ON "companies"  ("city_id")[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_268726594d"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "companies" ADD "parent_id" integer[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:5
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/migrate/20201007201451_add_columns_to_company.rb:6
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201007201451"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:45:49 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (1.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
Completed 500 Internal Server Error in 3767ms (ActiveRecord: 17.5ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'countries_id' for Company.):
  
app/services/companies/companies_service.rb:44:in `create_company_obj'
app/services/companies/companies_service.rb:20:in `create_company'
app/controllers/companies_controller.rb:11:in `create'
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:46:24 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>3, "cities_id"=>8, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
Completed 500 Internal Server Error in 3182ms (ActiveRecord: 12.1ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'countries_id' for Company.):
  
app/services/companies/companies_service.rb:44:in `create_company_obj'
app/services/companies/companies_service.rb:20:in `create_company'
app/controllers/companies_controller.rb:11:in `create'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:47:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:47:57 +0400
Started POST "/en/settings/country" for 127.0.0.1 at 2020-10-09 00:48:35 +0400
Processing by SettingsController#country as JSON
  Parameters: {"name"=>"Georgia", "country_code"=>"GEO", "locale"=>"en", "setting"=>{"name"=>"Georgia", "country_code"=>"GEO"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."country_code" = $1 ORDER BY "countries"."id" ASC LIMIT $2[0m  [["country_code", "GEO"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[36mCountry Create (0.5ms)[0m  [1m[32mINSERT INTO "countries" ("name", "country_code") VALUES ($1, $2) RETURNING "id"[0m  [["name", "Georgia"], ["country_code", "GEO"]]
  â†³ app/services/settings/country_and_city_service.rb:39
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:39
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 11.8ms)


Started POST "/en/settings/city" for 127.0.0.1 at 2020-10-09 00:49:03 +0400
Processing by SettingsController#city as JSON
  Parameters: {"country_id"=>4, "name"=>"Tbilisi", "city_code"=>"TBL", "locale"=>"en", "setting"=>{"country_id"=>4, "name"=>"Tbilisi", "city_code"=>"TBL"}}
Unpermitted parameters: :format, :locale, :setting
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."city_code" = $1 ORDER BY "cities"."id" ASC LIMIT $2[0m  [["city_code", "TBL"], ["LIMIT", 1]]
  â†³ app/services/settings/country_and_city_service.rb:44
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[36mCity Create (0.8ms)[0m  [1m[32mINSERT INTO "cities" ("name", "city_code", "country_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "Tbilisi"], ["city_code", "TBL"], ["country_id", 4]]
  â†³ app/services/settings/country_and_city_service.rb:45
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/settings/country_and_city_service.rb:45
Completed 200 OK in 54ms (Views: 0.3ms | ActiveRecord: 41.7ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:49:24 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>4, "cities_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :countries_id, :cities_id, :format, :locale, :company
  [1m[36mCountry Load (1.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:45
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:45
Completed 400 Bad Request in 7363ms (Views: 0.5ms | ActiveRecord: 8.5ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:50:04 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "countries_id"=>4, "cities_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250"}}
Unpermitted parameters: :countries_id, :cities_id, :format, :locale, :company
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:45
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:45
Completed 400 Bad Request in 40801ms (Views: 0.8ms | ActiveRecord: 1.5ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:51:05 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:32
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:39
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:45
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:45
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:45
  [1m[36mCompany Create (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:45
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:45
Completed 201 Created in 7174ms (Views: 0.2ms | ActiveRecord: 6.3ms)


  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompany Destroy (1.6ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 00:55:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 00:55:38 +0400
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 00:55:48 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"Bukas LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat n10", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (1.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:31
  [1m[36mCity Load (1.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:38
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:44
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:44
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:44
  [1m[36mCompany Create (0.8ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bukas LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat n10"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:44
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:44
Completed 201 Created in 6491ms (Views: 0.5ms | ActiveRecord: 35.3ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 01:21:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 01:21:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 01:21:37 +0400
Started PUT "/en/companies" for 127.0.0.1 at 2020-10-09 01:22:30 +0400
Processing by CompaniesController#update as JSON
  Parameters: {"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:35
  [1m[36mCity Load (0.8ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:41
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
  â†³ app/services/companies/companies_service.rb:52
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCompany Update (0.6ms)[0m  [1m[33mUPDATE "companies" SET "name" = $1, "description" = $2, "address" = $3, "phone_number" = $4 WHERE "companies"."id" = $5[0m  [["name", "changed name for test"], ["description", "changed description for test"], ["address", "changed address for test"], ["phone_number", "changed phone for test"], ["id", 9]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:52
Completed 500 Internal Server Error in 52ms (ActiveRecord: 19.6ms)


  
NoMethodError (undefined method `errors' for #<Array:0x00007f17d84a2710>):
  
app/services/companies/companies_service.rb:53:in `update_company_obj'
app/services/companies/companies_service.rb:24:in `update_company'
app/controllers/companies_controller.rb:16:in `update'
Started PUT "/en/companies" for 127.0.0.1 at 2020-10-09 01:23:32 +0400
Processing by CompaniesController#update as JSON
  Parameters: {"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"id"=>9, "name"=>"changed name for test", "description"=>"changed description for test", "address"=>"changed address for test", "phone_number"=>"changed phone for test", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:35
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:41
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:53
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:53
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:53
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:53
Completed 200 OK in 71ms (Views: 0.4ms | ActiveRecord: 15.5ms)


  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 01:36:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 01:36:07 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 01:36:07 +0400
Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:36:18 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:42
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:74
Completed 404 Not Found in 28ms (Views: 0.2ms | ActiveRecord: 9.2ms)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:36:44 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:42
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:74
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms)


  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:37:19 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:43
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ (pry):14
  [1m[36mCACHE Company Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "companies" WHERE "companies"."parent_id" = $1 LIMIT $2[0m  [["parent_id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:43
  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:75
Completed 404 Not Found in 58226ms (Views: 0.6ms | ActiveRecord: 14.7ms)


Started DELETE "/en/companies?id=9" for 127.0.0.1 at 2020-10-09 01:38:20 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"9", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 9]]
  â†³ app/services/companies/companies_service.rb:43
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:75
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:36
  [1m[36mCompany Destroy (0.7ms)[0m  [1m[31mDELETE FROM "companies" WHERE "companies"."id" = $1[0m  [["id", 9]]
  â†³ app/services/companies/companies_service.rb:36
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:36
Completed 200 OK in 5289ms (Views: 0.2ms | ActiveRecord: 7.6ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 01:39:21 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>8, "locale"=>"en", "company"=>{"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>8}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:58
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/companies_service.rb:64
Completed 400 Bad Request in 44ms (Views: 0.2ms | ActiveRecord: 10.5ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 01:39:28 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"Buka LTD", "description"=>"Software development company", "address"=>"Gogebashvili streat 13", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Buka LTD"], ["description", "Software development company"], ["address", "Gogebashvili streat 13"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:64
Completed 201 Created in 13ms (Views: 0.2ms | ActiveRecord: 4.1ms)


Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 01:40:04 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"Buka LTD _test", "description"=>"Software development company test", "address"=>"Gogebashvili streat 13/test", "phone_number"=>"5775202500000", "country_id"=>4, "city_id"=>9, "parent_id"=>10, "locale"=>"en", "company"=>{"name"=>"Buka LTD _test", "description"=>"Software development company test", "address"=>"Gogebashvili streat 13/test", "phone_number"=>"5775202500000", "country_id"=>4, "city_id"=>9, "parent_id"=>10}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:52
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:58
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Create (0.9ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id", "parent_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Buka LTD _test"], ["description", "Software development company test"], ["address", "Gogebashvili streat 13/test"], ["phone_number", "5775202500000"], ["country_id", 4], ["city_id", 9], ["parent_id", 10]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:64
Completed 201 Created in 9ms (Views: 0.2ms | ActiveRecord: 2.9ms)


  [1m[36mCompany Load (1.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 01:58:56 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 01:58:57 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-09 01:59:08 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 9.9ms)


Started GET "/en/companies/sub_company_list?parent_id=10" for 127.0.0.1 at 2020-10-09 01:59:22 +0400
Processing by CompaniesController#sub_company_list as JSON
  Parameters: {"parent_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 10]]
  â†³ app/services/companies/companies_service.rb:26
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (35.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (38.8ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, "parent_id" integer, "integer" integer, CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (4.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_8e1e5764fc"
FOREIGN KEY ("parent_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/migrate/20201009103111_create_departments.rb:14
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "departments" DROP CONSTRAINT "fk_rails_8e1e5764fc"[0m
  â†³ bin/rails:9
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (50.0ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, "department_id" bigint NOT NULL, CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
, CONSTRAINT "fk_rails_75958392cf"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_department_id" ON "departments"  ("department_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE "departments"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (38.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartments (20201009103111)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (43.6ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
, CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
, CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/migrate/20201009103111_create_departments.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103111"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddParentIdToDepartments (20201009103857)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "departments" ADD "parent_id" integer[0m
  â†³ db/migrate/20201009103857_add_parent_id_to_departments.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_8e1e5764fc"
FOREIGN KEY ("parent_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/migrate/20201009103857_add_parent_id_to_departments.rb:4
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201009103857"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (5.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 15:56:05 +0400
Started POST "/en/departments" for 127.0.0.1 at 2020-10-09 15:58:30 +0400
Error occurred while parsing request parameters.
Contents:

{
  "name": "HR department",
  "description": "This is HR department",
  "address": "tseretlis 123",
  "phone_number": "577520250",
  "country_id": 4,
  "city_id": 9
  "company_id": 11
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "HR department",
  "description": "This is HR department",
  "address": "tseretlis 123",
  "phone_number": "577520250",
  "country_id": 4,
  "city_id": 9
  "company_id": 11
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-09 15:58:38 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"HR department", "description"=>"This is HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11, "locale"=>"en", "department"=>{"name"=>"HR department", "description"=>"This is HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (2.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mDepartment Create (1.0ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "address", "phone_number", "country_id", "city_id", "company_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "HR department"], ["description", "This is HR department"], ["address", "tseretlis 123"], ["phone_number", "577520250"], ["country_id", 4], ["city_id", 9], ["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:86
Completed 201 Created in 70ms (Views: 0.2ms | ActiveRecord: 25.6ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 16:09:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 16:09:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 16:09:03 +0400
Started PUT "/en/departments" for 127.0.0.1 at 2020-10-09 16:10:29 +0400
Processing by DepartmentsController#update as JSON
  Parameters: {"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11, "locale"=>"en", "department"=>{"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
Completed 500 Internal Server Error in 36ms (ActiveRecord: 14.4ms)


  
NameError (undefined local variable or method `update_department_obj' for #<Companies::DepartmentsService:0x00007f84442e4800>
Did you mean?  update_department):
  
app/services/companies/departments_service.rb:36:in `update_department'
app/controllers/departments_controller.rb:16:in `update'
Started PUT "/en/departments" for 127.0.0.1 at 2020-10-09 16:10:59 +0400
Processing by DepartmentsController#update as JSON
  Parameters: {"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11, "locale"=>"en", "department"=>{"id"=>1, "name"=>"HR department chnaged", "description"=>"This is changed HR department", "address"=>"tseretlis 123", "phone_number"=>"577520250", "country_id"=>4, "city_id"=>9, "company_id"=>11}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:97
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[36mDepartment Update (0.6ms)[0m  [1m[33mUPDATE "departments" SET "name" = $1, "description" = $2 WHERE "departments"."id" = $3[0m  [["name", "HR department chnaged"], ["description", "This is changed HR department"], ["id", 1]]
  â†³ app/services/companies/departments_service.rb:92
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:92
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 15.5ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 17:44:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 17:44:26 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 17:44:26 +0400
Started GET "/en/departments/department_list" for 127.0.0.1 at 2020-10-09 17:44:34 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL[0m
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 6.6ms)


Started POST "/en/departments" for 127.0.0.1 at 2020-10-09 17:45:33 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"sub department", "description"=>"sub department description", "address"=>"sdcsdcsdcsdc", "phone_number"=>"sdcsdcsdc", "country_id"=>4, "city_id"=>9, "parent_id"=>1, "company_id"=>11, "locale"=>"en", "department"=>{"name"=>"sub department", "description"=>"sub department description", "address"=>"sdcsdcsdcsdc", "phone_number"=>"sdcsdcsdc", "country_id"=>4, "city_id"=>9, "company_id"=>11, "parent_id"=>1}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:68
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:74
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:80
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[36mDepartment Create (1.1ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "address", "phone_number", "country_id", "city_id", "company_id", "parent_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "sub department"], ["description", "sub department description"], ["address", "sdcsdcsdcsdc"], ["phone_number", "sdcsdcsdc"], ["country_id", 4], ["city_id", 9], ["company_id", 11], ["parent_id", 1]]
  â†³ app/services/companies/departments_service.rb:86
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:86
Completed 201 Created in 47ms (Views: 0.2ms | ActiveRecord: 14.1ms)


Started GET "/en/departments/sub_departments_list?parent_id=1" for 127.0.0.1 at 2020-10-09 17:45:46 +0400
  
ActionController::RoutingError (No route matches [GET] "/en/departments/sub_departments_list"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-09 17:46:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-09 17:46:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-09 17:46:36 +0400
Started GET "/en/departments/sub_department_list?parent_id=1" for 127.0.0.1 at 2020-10-09 17:46:43 +0400
Processing by DepartmentsController#sub_department_list as JSON
  Parameters: {"parent_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.7ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" = $1[0m  [["parent_id", 1]]
  â†³ app/services/companies/departments_service.rb:26
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started DELETE "/en/departments?id=2" for 127.0.0.1 at 2020-10-09 17:46:55 +0400
Processing by DepartmentsController#destroy as JSON
  Parameters: {"id"=>"2", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" = $1[0m  [["parent_id", 2]]
  â†³ app/services/companies/departments_service.rb:58
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:97
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:43
  [1m[36mDepartment Destroy (0.7ms)[0m  [1m[31mDELETE FROM "departments" WHERE "departments"."id" = $1[0m  [["id", 2]]
  â†³ app/services/companies/departments_service.rb:43
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:43
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 4.0ms)


  [1m[36mDepartment Load (36.7ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartment Load (1.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/companies" for 127.0.0.1 at 2020-10-09 17:56:40 +0400
Processing by CompaniesController#create as JSON
  Parameters: {"name"=>"zdfsdf", "description"=>"strivvadvng", "address"=>"strdfvdfving", "phone_number"=>"strdfvdfving", "country_id"=>4, "city_id"=>9, "locale"=>"en", "company"=>{"name"=>"zdfsdf", "description"=>"strivvadvng", "address"=>"strdfvdfving", "phone_number"=>"strdfvdfving", "country_id"=>4, "city_id"=>9}}
Unpermitted parameters: :format, :locale, :company
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:67
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:73
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:79
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:79
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:79
  [1m[36mCompany Create (1.5ms)[0m  [1m[32mINSERT INTO "companies" ("name", "description", "address", "phone_number", "country_id", "city_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "zdfsdf"], ["description", "strivvadvng"], ["address", "strdfvdfving"], ["phone_number", "strdfvdfving"], ["country_id", 4], ["city_id", 9]]
  â†³ app/services/companies/companies_service.rb:79
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:79
Completed 201 Created in 13ms (Views: 0.2ms | ActiveRecord: 5.0ms)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 17:06:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 17:06:14 +0400
Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-11 17:06:25 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-11 17:06:42 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (2.1ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 17.5ms)


Started GET "/en/departments/department_list?company_id=12" for 127.0.0.1 at 2020-10-11 17:06:53 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.3ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 12]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 17:09:17 +0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Filter chain halted as :validate_authentication rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 17:09:33 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 61ms (Views: 0.5ms | ActiveRecord: 15.4ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 17:10:34 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyLogos (20201011131733)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (33.9ms)[0m  [1m[35mCREATE TABLE "company_logos" ("id" bigserial primary key, "company_id" bigint NOT NULL, "image" character varying(50), "uuid" uuid NOT NULL, CONSTRAINT "fk_rails_8ae580a1d6"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_logos_on_company_id" ON "company_logos"  ("company_id")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (3.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_company_logos_on_uuid" ON "company_logos"  ("uuid")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201011131733"]]
  â†³ bin/rails:9
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyLogos (20201011131733)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.0ms)[0m  [1m[35mDROP INDEX  "index_company_logos_on_uuid"[0m
  â†³ bin/rails:9
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "company_logos"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201011131733"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyLogos (20201011131733)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (40.3ms)[0m  [1m[35mCREATE TABLE "company_logos" ("id" bigserial primary key, "company_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL, CONSTRAINT "fk_rails_8ae580a1d6"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
)[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_logos_on_company_id" ON "company_logos"  ("company_id")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:3
  [1m[35m (3.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_company_logos_on_uuid" ON "company_logos"  ("uuid")[0m
  â†³ db/migrate/20201011131733_create_company_logos.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201011131733"]]
  â†³ bin/rails:9
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 17:52:02 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 17:52:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 17:52:03 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 17:54:36 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-11 18:38:30 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 43ms (Views: 0.3ms | ActiveRecord: 13.4ms)


Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:39:00 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x000055719762f1c0 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-1a4d92n.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:3:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:14:in `create_company_logo'
app/controllers/company_logos_controller.rb:10:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:41:12 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00005571975804e0 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-1y924mp.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 6146ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:3:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:14:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:41:53 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007f69e01d3d18 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-vu6qae.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 54062ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:14:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:43:41 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007f69cc23b648 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-17629-2dukme.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 24360ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:15:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:45:28 +0400
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007fb1882ede48 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-24526-tcwpi.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 42159ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:15:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:47:48 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007fb1783686d0 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-24526-1ae5vj3.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 28997ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant CompanyLogo::CompanyLogoUploader):
  
app/models/company_logo.rb:4:in `<class:CompanyLogo>'
app/models/company_logo.rb:1:in `<main>'
app/services/companies/company_logo_service.rb:15:in `create_company_logo'
app/controllers/company_logos_controller.rb:11:in `create'
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-11 18:49:50 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007fb194050d00 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-24526-fp1im.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/company_logo_service.rb:16
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:16
  [1m[36mCompanyLogo Create (0.8ms)[0m  [1m[32mINSERT INTO "company_logos" ("company_id", "logo", "uuid") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 10], ["logo", "bank_id_new.png"], ["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"]]
  â†³ app/services/companies/company_logo_service.rb:16
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/company_logo_service.rb:16
Completed 201 Created in 10445ms (Views: 0.2ms | ActiveRecord: 9.6ms)


Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:50:15 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.4ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)


  
NoMethodError (undefined method `image' for #<CompanyLogo:0x000055cd0008cc80>):
  
app/services/companies/company_logo_service.rb:29:in `read_logo'
app/controllers/company_logos_controller.rb:17:in `show_logo'
Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:50:47 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Sent data bank_id_new.png (0.2ms)
Completed 200 OK in 7263ms (Views: 0.1ms | ActiveRecord: 4.2ms)


Started DELETE "/en/company_logo/38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:51:09 +0400
  
ActionController::RoutingError (No route matches [DELETE] "/en/company_logo/38f2903f-1370-4e1c-98b8-023a97b4d61c"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started DELETE "/en/company_logo/38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:53:06 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompanyLogosController#destroy as JSON
  Parameters: {"locale"=>"en", "uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (1.1ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Completed 200 OK in 9391ms (Views: 0.2ms | ActiveRecord: 16.3ms)


Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-11 18:53:21 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:50
Completed 400 Bad Request in 213ms (Views: 0.2ms | ActiveRecord: 0.2ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateDepartmentLogos (20201011150112)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "department_logos" ("id" bigserial primary key, "department_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL, CONSTRAINT "fk_rails_0beebfc42e"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
)[0m
  â†³ db/migrate/20201011150112_create_department_logos.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_department_logos_on_department_id" ON "department_logos"  ("department_id")[0m
  â†³ db/migrate/20201011150112_create_department_logos.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_department_logos_on_uuid" ON "department_logos"  ("uuid")[0m
  â†³ db/migrate/20201011150112_create_department_logos.rb:9
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201011150112"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 19:08:35 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 19:08:36 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 19:08:36 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-11 19:10:58 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-11 19:10:59 +0400
Started GET "/en/departments/department_list?company_id=10" for 127.0.0.1 at 2020-10-11 19:11:13 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 10]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.5ms)


Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-11 19:11:18 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 2.7ms)


Started POST "/en/department_logos" for 127.0.0.1 at 2020-10-11 19:11:49 +0400
Processing by DepartmentLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00007f77a40195c8 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-5139-eu16gz.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "department_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :department_id, :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/companies/department_logo_service.rb:15
Completed 400 Bad Request in 118ms (Views: 0.2ms | ActiveRecord: 3.8ms)


  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/department_logos" for 127.0.0.1 at 2020-10-11 19:12:37 +0400
Processing by DepartmentLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x000055bbb2f27f38 @tempfile=#<Tempfile:/tmp/RackMultipart20201011-5139-1qbrdtw.png>, @original_filename="bank_id_new.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id_new.png\"\r\nContent-Type: image/png\r\n">, "department_id"=>"1", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[36mDepartment Load (0.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" WHERE "departments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[36mDepartmentLogo Create (1.1ms)[0m  [1m[32mINSERT INTO "department_logos" ("department_id", "logo", "uuid") VALUES ($1, $2, $3) RETURNING "id"[0m  [["department_id", 1], ["logo", "bank_id_new.png"], ["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"]]
  â†³ app/services/companies/department_logo_service.rb:15
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/department_logo_service.rb:15
Completed 201 Created in 88ms (Views: 0.1ms | ActiveRecord: 8.1ms)


Started GET "/en/department_logos/logo?uuid=7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:12:49 +0400
Processing by DepartmentLogosController#show_logo as JSON
  Parameters: {"uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Sent data bank_id_new.png (0.3ms)
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started DELETE "/en/department_logo/7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:12:56 +0400
  
ActionController::RoutingError (No route matches [DELETE] "/en/department_logo/7ef2bc05-f348-4182-8a61-87b39b8f1070"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started DELETE "/en/department_logo/7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:13:16 +0400
Processing by DepartmentLogosController#destroy as JSON
  Parameters: {"locale"=>"en", "uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 4.0ms)


Started GET "/en/department_logos/logo?uuid=7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-11 19:13:21 +0400
Processing by DepartmentLogosController#show_logo as JSON
  Parameters: {"uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Completed 400 Bad Request in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)


  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-12 00:03:17 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00005571fe5f8190 @tempfile=#<Tempfile:/tmp/RackMultipart20201012-29156-zg8rwm.png>, @original_filename="bank_id.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"bank_id.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/company_logo_service.rb:15
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:15
  [1m[36mCompanyLogo Create (1.2ms)[0m  [1m[32mINSERT INTO "company_logos" ("company_id", "logo", "uuid") VALUES ($1, $2, $3) RETURNING "id"[0m  [["company_id", 12], ["logo", "bank_id.png"], ["uuid", "c6f47625-9b6c-4a8a-bb94-86ab62821e4e"]]
  â†³ app/services/companies/company_logo_service.rb:15
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/company_logo_service.rb:15
Completed 201 Created in 149ms (Views: 0.2ms | ActiveRecord: 17.7ms)


  [1m[36mCompanyLogo Load (0.6ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompanyLogo Load (1.1ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (1.1ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN company_logos ON company_logos.company_id = companies.id[0m
  [1m[36mCompany Load (2.1ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN company_logos ON company_logos.company_id = companies.id ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN company_logos ON company_logos.company_id = companies.id ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCountry Load (0.8ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.4ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.7ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 00:18:54 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 00:18:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 00:18:55 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 00:20:12 +0400
Started GET "/en/companies/12" for 127.0.0.1 at 2020-10-12 00:20:30 +0400
Processing by CompaniesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"12"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:94
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 200 OK in 67ms (Views: 0.4ms | ActiveRecord: 18.9ms)


Started GET "/en/companies/12" for 127.0.0.1 at 2020-10-12 00:21:16 +0400
Processing by CompaniesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"12"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:94
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 200 OK in 80ms (Views: 0.3ms | ActiveRecord: 23.2ms)


Started GET "/en/companies/10" for 127.0.0.1 at 2020-10-12 00:21:31 +0400
Processing by CompaniesController#show as JSON
  Parameters: {"locale"=>"en", "id"=>"10"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:94
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:14
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started GET "/en/company_logos/logo?uuid=38f2903f-1370-4e1c-98b8-023a97b4d61c" for 127.0.0.1 at 2020-10-12 00:21:58 +0400
Processing by CompanyLogosController#show_logo as JSON
  Parameters: {"uuid"=>"38f2903f-1370-4e1c-98b8-023a97b4d61c", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "38f2903f-1370-4e1c-98b8-023a97b4d61c"], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:49
Completed 400 Bad Request in 75ms (Views: 0.2ms | ActiveRecord: 0.5ms)


  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:27:53 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 200 OK in 4811ms (Views: 0.5ms | ActiveRecord: 8.2ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:28:14 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:52
Completed 200 OK in 16595ms (Views: 0.5ms | ActiveRecord: 4.6ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:28:38 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:52
Completed 200 OK in 20350ms (Views: 0.5ms | ActiveRecord: 0.6ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 00:29:17 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.5ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.5ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 2345ms (Views: 0.4ms | ActiveRecord: 29.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 14:41:22 +0400
  [1m[36mCompanyLogo Load (1.7ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompanyLogo Load (0.9ms)[0m  [1m[34mSELECT "company_logos".* FROM "company_logos"[0m
Started POST "/en/company_logos" for 127.0.0.1 at 2020-10-12 15:48:10 +0400
Processing by CompanyLogosController#create as JSON
  Parameters: {"logo"=>#<ActionDispatch::Http::UploadedFile:0x00005634fe9135c8 @tempfile=#<Tempfile:/tmp/RackMultipart20201012-10873-1wq2ne0.png>, @original_filename="Group 20721.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"logo\"; filename=\"Group 20721.png\"\r\nContent-Type: image/png\r\n">, "company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompanyLogo Load (1.1ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 ORDER BY "company_logos"."id" ASC LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/company_logo_service.rb:22
  [1m[36mCompany Load (2.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/company_logo_service.rb:22
  [1m[36mCompanyLogo Update (1.7ms)[0m  [1m[33mUPDATE "company_logos" SET "logo" = $1, "uuid" = $2 WHERE "company_logos"."id" = $3[0m  [["logo", "Group_20721.png"], ["uuid", "5084daa2-6105-441f-ab67-b86c0a8227c1"], ["id", 1]]
  â†³ app/services/companies/company_logo_service.rb:22
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/company_logo_service.rb:22
Completed 201 Created in 107ms (Views: 0.2ms | ActiveRecord: 17.3ms)


  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT "company_logos".* FROM "company_logos"[0m
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:48:40 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.2ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (1.1ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 15.7ms)


  [1m[36mCompanyLogo Load (0.7ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" ORDER BY "company_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCompanyLogo Destroy (0.5ms)[0m  [1m[31mDELETE FROM "company_logos" WHERE "company_logos"."id" = $1[0m  [["id", 2]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompanyLogo Load (1.0ms)[0m  [1m[34mSELECT "company_logos".* FROM "company_logos"[0m
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:49:01 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.2ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:49:06 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" INNER JOIN "company_logos" ON "company_logos"."company_id" = "companies"."id" WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-12 15:49:42 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL[0m
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 46ms (Views: 0.3ms | ActiveRecord: 13.2ms)


Started POST "/en/departments" for 127.0.0.1 at 2020-10-12 15:58:46 +0400
Error occurred while parsing request parameters.
Contents:

{
  "name": "Tech Department",
  "description": "This is tech support department",
  "address": "Also gogebashvili sterat",
  "phone_number": "577520250",
  "country_id": 8,
  "city_id": 3
  "company_id": 12
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "Tech Department",
  "description": "This is tech support department",
  "address": "Also gogebashvili sterat",
  "phone_number": "577520250",
  "country_id": 8,
  "city_id": 3
  "company_id": 12
}'):
  
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.5) lib/rack/request.rb:57:in `fetch'
rack (2.0.5) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.5) lib/rack/etag.rb:25:in `call'
rack (2.0.5) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.5) lib/rack/head.rb:12:in `call'
activerecord (5.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/en/departments/department_list?company_id=10" for 127.0.0.1 at 2020-10-12 16:03:06 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"10", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (3.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" LEFT JOIN department_logos ON department_logos.department_id = departments.id WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 10]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.9ms)


  [1m[36mDepartment Load (4.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-12 16:03:25 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (1.5ms)[0m  [1m[34mSELECT "departments".* FROM "departments" LEFT JOIN department_logos ON department_logos.department_id = departments.id WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCountry Load (0.4ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
Completed 500 Internal Server Error in 43ms (ActiveRecord: 12.0ms)


  
NoMethodError (undefined method `company_logo' for #<Department:0x00007fcfd83a4350>
Did you mean?  company):
  
app/services/companies/departments_service.rb:22:in `department_list_json_view'
lib/controller_response.rb:22:in `respond_action_json_view'
lib/controller_response.rb:41:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/departments_controller.rb:29:in `department_list'
Started GET "/en/departments/department_list?company_id=11" for 127.0.0.1 at 2020-10-12 16:03:45 +0400
Processing by DepartmentsController#department_list as JSON
  Parameters: {"company_id"=>"11", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartment Load (0.4ms)[0m  [1m[34mSELECT "departments".* FROM "departments" LEFT JOIN department_logos ON department_logos.department_id = departments.id WHERE "departments"."parent_id" IS NULL AND "departments"."company_id" = $1[0m  [["company_id", 11]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
  [1m[36mDepartmentLogo Load (0.2ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."department_id" = $1 LIMIT $2[0m  [["department_id", 1], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:22
Completed 200 OK in 45ms (Views: 0.3ms | ActiveRecord: 12.4ms)


Started GET "/en/department_logos/logo?uuid=7ef2bc05-f348-4182-8a61-87b39b8f1070" for 127.0.0.1 at 2020-10-12 16:04:13 +0400
Processing by DepartmentLogosController#show_logo as JSON
  Parameters: {"uuid"=>"7ef2bc05-f348-4182-8a61-87b39b8f1070", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1 LIMIT $2[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"], ["LIMIT", 1]]
  â†³ app/services/companies/department_logo_service.rb:49
Completed 400 Bad Request in 79ms (Views: 0.2ms | ActiveRecord: 0.3ms)


  [1m[36mDepartmentLogo Load (0.3ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" ORDER BY "department_logos"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartmentLogo Load (0.8ms)[0m  [1m[34mSELECT "department_logos".* FROM "department_logos" WHERE "department_logos"."uuid" = $1[0m  [["uuid", "7ef2bc05-f348-4182-8a61-87b39b8f1070"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateRoleGroups (20201012142347)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (20.7ms)[0m  [1m[35mCREATE TABLE "role_groups" ("id" bigserial primary key, "name" character varying NOT NULL, "id_name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20201012142347_create_role_groups.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012142347"]]
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "product_group_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "activate" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_636fe72066"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_product_group_permissions_on_role_group_id" ON "product_group_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012143738"]]
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "activate" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "product_import_persmissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_0b406b044e"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_persmissions_on_role_group_id" ON "product_import_persmissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "set_price" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.5ms)[0m  [1m[35mDROP TABLE "product_catalog_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (1.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "product_import_persmissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "product_type_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "activate" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "product_import_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_27485bdbba"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_permissions_on_role_group_id" ON "product_import_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show" boolean DEFAULT FALSE, "read" boolean DEFAULT FALSE, "create" boolean DEFAULT FALSE, "edit" boolean DEFAULT FALSE, "set_price" boolean DEFAULT FALSE, "delete" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mProductImportPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" ORDER BY "product_import_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 20:50:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 20:50:40 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 20:50:40 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 20:52:50 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permissions_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permissions_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 79001ms (ActiveRecord: 10.6ms)


  
NoMethodError (undefined method `[]' for true:TrueClass):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 20:58:32 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 20:58:33 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 20:58:33 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 20:59:33 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}], "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}]}}
Unpermitted parameters: :product_group_permissions_attributes, :product_type_permissions_attributes, :product_import_permissions_attributes, :product_catalog_permissions_attributes, :format, :locale, :role_group
Unpermitted parameters: :product_group_permissions_attributes, :product_type_permissions_attributes, :product_import_permissions_attributes, :product_catalog_permissions_attributes, :format, :locale, :role_group
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mRoleGroup Create (3.0ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 16:59:48.111288"], ["updated_at", "2020-10-12 16:59:48.111288"]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:21
Completed 201 Created in 14772ms (Views: 0.3ms | ActiveRecord: 11.4ms)


  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductGroupPermission Load (0.8ms)[0m  [1m[34mSELECT "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mProductTypePermission Load (3.1ms)[0m  [1m[34mSELECT "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mProductImportPermission Load (0.6ms)[0m  [1m[34mSELECT "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mProductCatalogPermission Load (1.3ms)[0m  [1m[34mSELECT "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1[0m  [["role_group_id", 1]]
  [1m[36mRoleGroup Destroy (0.9ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (1.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:01:15 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}], "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_type_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}], "product_import_permissions_attributes"=>[{"show"=>true, "import"=>true}], "product_catalog_permissions_attributes"=>[{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}]}}
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :import
Unpermitted parameters: :show, :read, :create, :edit, :set_price, :delete
Unpermitted parameters: :format, :locale, :role_group
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :read, :create, :edit, :activate, :delete
Unpermitted parameters: :show, :import
Unpermitted parameters: :show, :read, :create, :edit, :set_price, :delete
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 42426ms (ActiveRecord: 16.2ms)


  
ActiveRecord::DangerousAttributeError (delete is defined by Active Record. Check to make sure that you don't have an attribute or method with the same name.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:02:37 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:02:38 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:02:38 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:04:05 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"string", "product_group_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permissions_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permissions_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"string"}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Completed 500 Internal Server Error in 66283ms (ActiveRecord: 9.3ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'product_group_permissions_attributes' for RoleGroup.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:05:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:05:15 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:05:15 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:05:28 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 42984ms (ActiveRecord: 13.4ms)


  
ActiveRecord::DangerousAttributeError (delete is defined by Active Record. Check to make sure that you don't have an attribute or method with the same name.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "product_catalog_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE "product_import_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.0ms)[0m  [1m[35mDROP TABLE "product_type_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "product_group_permissions"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20201012143738"]]
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateProductGroupPermissions (20201012143738)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "product_group_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_636fe72066"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_product_group_permissions_on_role_group_id" ON "product_group_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012143738_create_product_group_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012143738"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductTypePermissions (20201012144027)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144027_create_product_type_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144027"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductImportPersmissions (20201012144338)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "product_import_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_27485bdbba"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_permissions_on_role_group_id" ON "product_import_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144338_create_product_import_persmissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144338"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateProductCatalogPermissions (20201012144424)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "set_price_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012144424_create_product_catalog_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012144424"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:11:11 +0400
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_type_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "activate"=>true, "delete"=>true}, "product_import_permission_attributes"=>{"show"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show"=>true, "read"=>true, "create"=>true, "edit"=>true, "set_price"=>true, "delete"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 26732ms (ActiveRecord: 12.6ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'show' for ProductGroupPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:12:36 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:12:37 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:12:37 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:15:32 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_data"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_data"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_data"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 46855ms (ActiveRecord: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'delete_data' for ProductGroupPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:19:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:19:42 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:19:42 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:19:59 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 17279ms (ActiveRecord: 12.1ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'set_price' for ProductCatalogPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:23:04 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 5482ms (ActiveRecord: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'set_price' for ProductCatalogPermission.):
  
app/services/roles/role_management_service.rb:19:in `create_role'
app/controllers/role_groups_controller.rb:11:in `create'
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:23:14 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:23:38 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mRoleGroup Create (1.8ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 17:23:51.502023"], ["updated_at", "2020-10-12 17:23:51.502023"]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductGroupPermission Create (3.2ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductTypePermission Create (1.6ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductImportPermission Create (2.2ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[36mProductCatalogPermission Create (2.2ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 2], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:21
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:21
Completed 201 Created in 13136ms (Views: 1.0ms | ActiveRecord: 30.0ms)


  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.7ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:34:38 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:34:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:34:39 +0400
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductGroupPermission Load (1.0ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductGroupPermission Destroy (1.0ms)[0m  [1m[31mDELETE FROM "product_group_permissions" WHERE "product_group_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mProductTypePermission Load (0.7ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductTypePermission Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_type_permissions" WHERE "product_type_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mProductImportPermission Load (0.4ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductImportPermission Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_import_permissions" WHERE "product_import_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mProductCatalogPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 2], ["LIMIT", 1]]
  [1m[36mProductCatalogPermission Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."id" = $1[0m  [["id", 1]]
  [1m[36mRoleGroup Destroy (1.7ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 2]]
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-12 21:36:43 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-12 21:37:08 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mRoleGroup Create (0.7ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 17:37:08.512495"], ["updated_at", "2020-10-12 17:37:08.512495"]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductGroupPermission Create (0.9ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductTypePermission Create (0.5ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductImportPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductCatalogPermission Create (1.2ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 3], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:20
Completed 201 Created in 96ms (Views: 0.5ms | ActiveRecord: 30.6ms)


  [1m[36mSupplier Load (40.5ms)[0m  [1m[34mSELECT  "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSuppliersPermissions (20201012200334)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (47.9ms)[0m  [1m[35mCREATE TABLE "suppliers_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_286bbd792d"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012200334_create_suppliers_permissions.rb:3
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_permissions_on_role_group_id" ON "suppliers_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012200334_create_suppliers_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012200334"]]
  â†³ bin/rails:9
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:08:19 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:08:20 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:08:20 +0400
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateCompanyPermissions (20201012203316)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "company_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_f551c3cfb1"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012203316_create_company_permissions.rb:3
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_company_permissions_on_role_group_id" ON "company_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012203316_create_company_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012203316"]]
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateSystemDataPermissions (20201012203339)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "system_data_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_0e8be8eda7"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012203339_create_system_data_permissions.rb:3
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_system_data_permissions_on_role_group_id" ON "system_data_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012203339_create_system_data_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012203339"]]
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:42:42 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (24.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "always_24_test"[0m
  â†³ bin/rails:9
  [1m[35m (319.3ms)[0m  [1m[35mCREATE DATABASE "always_24_test" ENCODING = 'unicode'[0m
  â†³ bin/rails:9
  [1m[35mSQL (0.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  â†³ db/schema.rb:16
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_types" CASCADE[0m
  â†³ db/schema.rb:18
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE "business_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/schema.rb:18
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  â†³ db/schema.rb:23
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL)[0m
  â†³ db/schema.rb:23
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "cities" CASCADE[0m
  â†³ db/schema.rb:29
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "cities" ("id" bigserial primary key, "name" character varying NOT NULL, "city_code" character varying NOT NULL, "country_id" bigint NOT NULL)[0m
  â†³ db/schema.rb:29
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_cities_on_country_id" ON "cities"  ("country_id")[0m
  â†³ db/schema.rb:29
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  â†³ db/schema.rb:36
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint, "city_id" bigint, "parent_id" integer)[0m
  â†³ db/schema.rb:36
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_city_id" ON "companies"  ("city_id")[0m
  â†³ db/schema.rb:36
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_companies_on_country_id" ON "companies"  ("country_id")[0m
  â†³ db/schema.rb:36
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_logos" CASCADE[0m
  â†³ db/schema.rb:48
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "company_logos" ("id" bigserial primary key, "company_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL)[0m
  â†³ db/schema.rb:48
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_company_logos_on_company_id" ON "company_logos"  ("company_id")[0m
  â†³ db/schema.rb:48
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_company_logos_on_uuid" ON "company_logos"  ("uuid")[0m
  â†³ db/schema.rb:48
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_permissions" CASCADE[0m
  â†³ db/schema.rb:56
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "company_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:56
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_company_permissions_on_role_group_id" ON "company_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:56
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "confirmation_codes" CASCADE[0m
  â†³ db/schema.rb:67
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "confirmation_codes" ("id" bigserial primary key, "confirmation_token" character varying, "sms_code" character varying, "retry_count" integer, "generation_time" timestamp, "failed_attempts_count" integer, "user_account_id" bigint NOT NULL, "confirmation_type_id" bigint NOT NULL)[0m
  â†³ db/schema.rb:67
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_confirmation_codes_on_confirmation_type_id" ON "confirmation_codes"  ("confirmation_type_id")[0m
  â†³ db/schema.rb:67
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_confirmation_codes_on_user_account_id" ON "confirmation_codes"  ("user_account_id")[0m
  â†³ db/schema.rb:67
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "confirmation_types" CASCADE[0m
  â†³ db/schema.rb:79
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "confirmation_types" ("id" bigserial primary key, "name" character varying(150), "id_name" character varying(50))[0m
  â†³ db/schema.rb:79
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "countries" CASCADE[0m
  â†³ db/schema.rb:84
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "countries" ("id" bigserial primary key, "name" character varying NOT NULL, "country_code" character varying NOT NULL)[0m
  â†³ db/schema.rb:84
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "country_phone_indices" CASCADE[0m
  â†³ db/schema.rb:89
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "country_phone_indices" ("id" bigserial primary key, "iso_code" character varying(2) NOT NULL, "phone_index" character varying(10) NOT NULL, "length_limit" integer DEFAULT 9 NOT NULL)[0m
  â†³ db/schema.rb:89
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupon_codes" CASCADE[0m
  â†³ db/schema.rb:95
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "coupon_codes" ("id" bigserial primary key, "coupon_promotion_id" integer, "code" character varying)[0m
  â†³ db/schema.rb:95
  [1m[35m (3.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_coupon_codes_on_coupon_promotion_id_and_code" ON "coupon_codes"  ("coupon_promotion_id", "code")[0m
  â†³ db/schema.rb:95
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "currencies" CASCADE[0m
  â†³ db/schema.rb:101
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "currencies" ("id" bigserial primary key, "name" json NOT NULL, "symbol" character varying(20) NOT NULL, "code" character varying(3) NOT NULL)[0m
  â†³ db/schema.rb:101
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_currencies_on_code" ON "currencies"  ("code")[0m
  â†³ db/schema.rb:101
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "customer_types" CASCADE[0m
  â†³ db/schema.rb:108
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "customer_types" ("id" bigserial primary key, "name" character varying, "id_name" character varying)[0m
  â†³ db/schema.rb:108
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "customers" CASCADE[0m
  â†³ db/schema.rb:113
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "customers" ("id" bigserial primary key, "name" character varying(50) NOT NULL, "delivery_address" character varying, "invoice_address" timestamp, "active" boolean DEFAULT TRUE NOT NULL, "user_account_id" integer, "customer_type_id" integer NOT NULL, "legal_id" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:113
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "department_logos" CASCADE[0m
  â†³ db/schema.rb:125
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "department_logos" ("id" bigserial primary key, "department_id" bigint NOT NULL, "logo" character varying(50), "uuid" uuid NOT NULL)[0m
  â†³ db/schema.rb:125
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_department_logos_on_department_id" ON "department_logos"  ("department_id")[0m
  â†³ db/schema.rb:125
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_department_logos_on_uuid" ON "department_logos"  ("uuid")[0m
  â†³ db/schema.rb:125
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "departments" CASCADE[0m
  â†³ db/schema.rb:133
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "departments" ("id" bigserial primary key, "name" character varying NOT NULL, "description" character varying, "address" character varying, "phone_number" character varying, "country_id" bigint NOT NULL, "city_id" bigint NOT NULL, "company_id" bigint NOT NULL, "parent_id" integer)[0m
  â†³ db/schema.rb:133
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_city_id" ON "departments"  ("city_id")[0m
  â†³ db/schema.rb:133
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_company_id" ON "departments"  ("company_id")[0m
  â†³ db/schema.rb:133
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_departments_on_country_id" ON "departments"  ("country_id")[0m
  â†³ db/schema.rb:133
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "integration_systems" CASCADE[0m
  â†³ db/schema.rb:147
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "integration_systems" ("id" bigserial primary key, "name" character varying)[0m
  â†³ db/schema.rb:147
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "locking_types" CASCADE[0m
  â†³ db/schema.rb:151
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "locking_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50))[0m
  â†³ db/schema.rb:151
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_catalog_permissions" CASCADE[0m
  â†³ db/schema.rb:156
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "product_catalog_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "set_price_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:156
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_product_catalog_permissions_on_role_group_id" ON "product_catalog_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:156
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_characteristics" CASCADE[0m
  â†³ db/schema.rb:167
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "product_characteristics" ("id" bigserial primary key, "product_id" bigint NOT NULL, "sub_category_id" bigint NOT NULL, "volume" character varying, "manufacturer" character varying, "description" character varying, "external_code" character varying(50), "EAN_code" character varying(50), "weight" decimal, "width" decimal, "height" decimal, "depth" decimal, "product_type_id" integer, "product_vat_type_id" integer, "subscription" boolean DEFAULT FALSE, "commission" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:167
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_product_id" ON "product_characteristics"  ("product_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_product_type_id" ON "product_characteristics"  ("product_type_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_product_vat_type_id" ON "product_characteristics"  ("product_vat_type_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_characteristics_on_sub_category_id" ON "product_characteristics"  ("sub_category_id")[0m
  â†³ db/schema.rb:167
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_group_permissions" CASCADE[0m
  â†³ db/schema.rb:189
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "product_group_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:189
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_product_group_permissions_on_role_group_id" ON "product_group_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:189
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_images" CASCADE[0m
  â†³ db/schema.rb:200
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "product_images" ("id" bigserial primary key, "product_id" bigint NOT NULL, "image" character varying(50), "uuid" uuid NOT NULL)[0m
  â†³ db/schema.rb:200
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_product_images_on_product_id" ON "product_images"  ("product_id")[0m
  â†³ db/schema.rb:200
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_product_images_on_uuid" ON "product_images"  ("uuid")[0m
  â†³ db/schema.rb:200
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_import_permissions" CASCADE[0m
  â†³ db/schema.rb:208
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "product_import_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "import" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:208
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_product_import_permissions_on_role_group_id" ON "product_import_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:208
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  â†³ db/schema.rb:215
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "product_id" bigint NOT NULL, "list_price_type" character varying(30) NOT NULL, "list_price_amount" decimal NOT NULL, "manufacturing_cost" decimal NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:215
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_product_prices_on_product_id" ON "product_prices"  ("product_id")[0m
  â†³ db/schema.rb:215
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_type_permissions" CASCADE[0m
  â†³ db/schema.rb:225
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "product_type_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:225
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_product_type_permissions_on_role_group_id" ON "product_type_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:225
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_types" CASCADE[0m
  â†³ db/schema.rb:236
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "product_types" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying NOT NULL, "active" boolean DEFAULT TRUE)[0m
  â†³ db/schema.rb:236
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_vat_types" CASCADE[0m
  â†³ db/schema.rb:242
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "product_vat_types" ("id" bigserial primary key, "name" character varying NOT NULL, "id_name" character varying NOT NULL)[0m
  â†³ db/schema.rb:242
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  â†³ db/schema.rb:247
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" json NOT NULL, "full_name" json NOT NULL, "description" character varying NOT NULL, "code" character varying NOT NULL, "instruction" character varying(500), "active" boolean DEFAULT TRUE)[0m
  â†³ db/schema.rb:247
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_products_on_code" ON "products"  ("code")[0m
  â†³ db/schema.rb:247
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "role_groups" CASCADE[0m
  â†³ db/schema.rb:257
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "role_groups" ("id" bigserial primary key, "name" character varying NOT NULL, "id_name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:257
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "sub_categories" CASCADE[0m
  â†³ db/schema.rb:264
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "sub_categories" ("id" bigserial primary key, "name" json NOT NULL, "id_name" character varying(50), "active" boolean DEFAULT TRUE NOT NULL, "category_id" integer NOT NULL)[0m
  â†³ db/schema.rb:264
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "supplier_product_prices" CASCADE[0m
  â†³ db/schema.rb:271
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "supplier_product_prices" ("id" bigserial primary key, "supplier_product_id" bigint NOT NULL, "price" decimal NOT NULL, "price_per_unit" decimal, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "currency_id" integer)[0m
  â†³ db/schema.rb:271
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "supplier_product_prices_currency" ON "supplier_product_prices"  ("currency_id")[0m
  â†³ db/schema.rb:271
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_supplier_product_prices_on_supplier_product_id" ON "supplier_product_prices"  ("supplier_product_id")[0m
  â†³ db/schema.rb:271
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "supplier_products" CASCADE[0m
  â†³ db/schema.rb:282
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "supplier_products" ("id" bigserial primary key, "supplier_id" bigint NOT NULL, "product_id" bigint NOT NULL, "supplier_code" character varying, "is_active" boolean DEFAULT TRUE, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "quantity" integer)[0m
  â†³ db/schema.rb:282
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_supplier_products_on_product_id" ON "supplier_products"  ("product_id")[0m
  â†³ db/schema.rb:282
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_supplier_products_on_supplier_id" ON "supplier_products"  ("supplier_id")[0m
  â†³ db/schema.rb:282
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "suppliers" CASCADE[0m
  â†³ db/schema.rb:294
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "suppliers" ("id" bigserial primary key, "registration_date" timestamp, "active" boolean, "integration_system_id" bigint NOT NULL, "business_type_id" bigint NOT NULL, "name" character varying NOT NULL, "identification_code" character varying NOT NULL, "phone_number" character varying)[0m
  â†³ db/schema.rb:294
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_on_business_type_id" ON "suppliers"  ("business_type_id")[0m
  â†³ db/schema.rb:294
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_on_integration_system_id" ON "suppliers"  ("integration_system_id")[0m
  â†³ db/schema.rb:294
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "suppliers_permissions" CASCADE[0m
  â†³ db/schema.rb:306
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "suppliers_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:306
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_suppliers_permissions_on_role_group_id" ON "suppliers_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:306
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "system_data_permissions" CASCADE[0m
  â†³ db/schema.rb:317
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "system_data_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE)[0m
  â†³ db/schema.rb:317
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_system_data_permissions_on_role_group_id" ON "system_data_permissions"  ("role_group_id")[0m
  â†³ db/schema.rb:317
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "terms_and_condition_agreements" CASCADE[0m
  â†³ db/schema.rb:328
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "terms_and_condition_agreements" ("id" bigserial primary key, "user_account_id" bigint NOT NULL, "terms_and_condition_id" bigint NOT NULL, "agreed_date" timestamp)[0m
  â†³ db/schema.rb:328
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_terms_and_condition_agreements_on_terms_and_condition_id" ON "terms_and_condition_agreements"  ("terms_and_condition_id")[0m
  â†³ db/schema.rb:328
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_terms_and_condition_agreements_on_user_account_id" ON "terms_and_condition_agreements"  ("user_account_id")[0m
  â†³ db/schema.rb:328
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "terms_and_conditions" CASCADE[0m
  â†³ db/schema.rb:336
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "terms_and_conditions" ("id" bigserial primary key, "active_from" timestamp NOT NULL, "version" character varying(50) NOT NULL, "description" character varying, "terms_and_condition" character varying)[0m
  â†³ db/schema.rb:336
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_accounts" CASCADE[0m
  â†³ db/schema.rb:343
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "user_accounts" ("id" bigserial primary key, "phone_number" character varying NOT NULL, "email" character varying NOT NULL, "crypted_password" character varying(255) NOT NULL, "active" boolean DEFAULT FALSE NOT NULL, "failed_logins_count" integer, "last_attempt_date" date, "locked" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "salt" character varying, "username" character varying, "phone_number_iso" character varying(2) DEFAULT 'de' NOT NULL)[0m
  â†³ db/schema.rb:343
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "cities" ADD CONSTRAINT "fk_rails_996e05be41"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/schema.rb:358
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_268726594d"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/schema.rb:359
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_d0676b5972"
FOREIGN KEY ("parent_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/schema.rb:360
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_75b15a5c36"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/schema.rb:361
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "company_logos" ADD CONSTRAINT "fk_rails_8ae580a1d6"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/schema.rb:362
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "company_permissions" ADD CONSTRAINT "fk_rails_f551c3cfb1"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:363
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "confirmation_codes" ADD CONSTRAINT "fk_rails_4663c32944"
FOREIGN KEY ("confirmation_type_id")
  REFERENCES "confirmation_types" ("id")
[0m
  â†³ db/schema.rb:364
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "confirmation_codes" ADD CONSTRAINT "fk_rails_04eb0acbcb"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
[0m
  â†³ db/schema.rb:365
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "customers" ADD CONSTRAINT "fk_rails_9e248b531a"
FOREIGN KEY ("customer_type_id")
  REFERENCES "customer_types" ("id")
[0m
  â†³ db/schema.rb:366
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "department_logos" ADD CONSTRAINT "fk_rails_0beebfc42e"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/schema.rb:367
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_ac0c831fa9"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
[0m
  â†³ db/schema.rb:368
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_f911441942"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  â†³ db/schema.rb:369
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_1cbf437e14"
FOREIGN KEY ("country_id")
  REFERENCES "countries" ("id")
[0m
  â†³ db/schema.rb:370
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "departments" ADD CONSTRAINT "fk_rails_8e1e5764fc"
FOREIGN KEY ("parent_id")
  REFERENCES "departments" ("id")
[0m
  â†³ db/schema.rb:371
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_catalog_permissions" ADD CONSTRAINT "fk_rails_501644f900"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:372
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD CONSTRAINT "fk_rails_682445a94f"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:373
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_characteristics" ADD CONSTRAINT "fk_rails_99eb751a25"
FOREIGN KEY ("sub_category_id")
  REFERENCES "sub_categories" ("id")
[0m
  â†³ db/schema.rb:374
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_group_permissions" ADD CONSTRAINT "fk_rails_636fe72066"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:375
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_images" ADD CONSTRAINT "fk_rails_1c991d3be6"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:376
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_import_permissions" ADD CONSTRAINT "fk_rails_27485bdbba"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:377
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:378
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "product_type_permissions" ADD CONSTRAINT "fk_rails_e9e2a702ec"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:379
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "sub_categories" ADD CONSTRAINT "fk_rails_8e75c2ee78"
FOREIGN KEY ("category_id")
  REFERENCES "categories" ("id")
[0m
  â†³ db/schema.rb:380
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_298846d27d"
FOREIGN KEY ("currency_id")
  REFERENCES "currencies" ("id")
[0m
  â†³ db/schema.rb:381
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "supplier_product_prices" ADD CONSTRAINT "fk_rails_02de7c65e2"
FOREIGN KEY ("supplier_product_id")
  REFERENCES "supplier_products" ("id")
[0m
  â†³ db/schema.rb:382
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "supplier_products" ADD CONSTRAINT "fk_rails_9a363579c5"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  â†³ db/schema.rb:383
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "supplier_products" ADD CONSTRAINT "fk_rails_8e1c65b71a"
FOREIGN KEY ("supplier_id")
  REFERENCES "suppliers" ("id")
[0m
  â†³ db/schema.rb:384
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "suppliers" ADD CONSTRAINT "fk_rails_d7795d572e"
FOREIGN KEY ("business_type_id")
  REFERENCES "business_types" ("id")
[0m
  â†³ db/schema.rb:385
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "suppliers" ADD CONSTRAINT "fk_rails_7d49358d6a"
FOREIGN KEY ("integration_system_id")
  REFERENCES "integration_systems" ("id")
[0m
  â†³ db/schema.rb:386
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "suppliers_permissions" ADD CONSTRAINT "fk_rails_286bbd792d"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:387
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "system_data_permissions" ADD CONSTRAINT "fk_rails_0e8be8eda7"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
[0m
  â†³ db/schema.rb:388
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "terms_and_condition_agreements" ADD CONSTRAINT "fk_rails_08d124cbc2"
FOREIGN KEY ("terms_and_condition_id")
  REFERENCES "terms_and_conditions" ("id")
[0m
  â†³ db/schema.rb:389
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "terms_and_condition_agreements" ADD CONSTRAINT "fk_rails_10d3a09624"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
[0m
  â†³ db/schema.rb:390
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ db/schema.rb:13
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201012203339)[0m
  â†³ db/schema.rb:13
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201007200103),
(20201007194524),
(20200727195202),
(20200727193023),
(20200725155414),
(20200929203713),
(20200927104129),
(20200621120918),
(20200824193304),
(20200727194715),
(20200707214242),
(20200927155250),
(20201012200334),
(20200824195719),
(20200621120451),
(20200926210103),
(20200828093215),
(20201012144424),
(20200824195406),
(20200625214408),
(20200921203149),
(20200919162956),
(20201011131733),
(20200919163118),
(20200707214349),
(20201012203316),
(20200715203104),
(20200624222700),
(20200624194331),
(20200926205812),
(20200824155541),
(20200824193629),
(20201009103111),
(20200725155753),
(20200621104114),
(20201012142347),
(20200824154722),
(20200624205228),
(20200929215700),
(20201009103857),
(20200727193640),
(20201012144027),
(20200927103709),
(20200621120044),
(20200624223129),
(20200926145340),
(20200707213330),
(20201012143738),
(20200926203704),
(20200625214145),
(20200824193950),
(20200707214821),
(20200624194923),
(20200715203325),
(20201012144338),
(20200624224252),
(20200625080846),
(20200707215402),
(20200624210354),
(20201007201451),
(20200824195218),
(20200921200604),
(20201011150112),
(20200715202636),
(20201007200055),
(20201001214457),
(20200624205328);

[0m
  â†³ db/schema.rb:13
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ db/schema.rb:13
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-10-12 20:50:25.698407"], ["updated_at", "2020-10-12 20:50:25.698407"]]
  â†³ db/schema.rb:13
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ db/schema.rb:13
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2020-10-12 20:50:25.702319"], ["key", "environment"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateRoleManagementPermissions (20201012204644)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "role_management_permissions" ("id" bigserial primary key, "role_group_id" bigint NOT NULL, "show_data" boolean DEFAULT FALSE, "read_data" boolean DEFAULT FALSE, "create_data" boolean DEFAULT FALSE, "edit_data" boolean DEFAULT FALSE, "delete_record" boolean DEFAULT FALSE, "activate_data" boolean DEFAULT FALSE, CONSTRAINT "fk_rails_b25cf760ee"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201012204644_create_role_management_permissions.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_role_management_permissions_on_role_group_id" ON "role_management_permissions"  ("role_group_id")[0m
  â†³ db/migrate/20201012204644_create_role_management_permissions.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012204644"]]
  â†³ bin/rails:9
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:51:12 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:51:13 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:51:13 +0400
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductGroupPermission Load (1.0ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductGroupPermission Destroy (0.9ms)[0m  [1m[31mDELETE FROM "product_group_permissions" WHERE "product_group_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mProductTypePermission Load (0.6ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductTypePermission Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_type_permissions" WHERE "product_type_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mProductImportPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductImportPermission Destroy (0.7ms)[0m  [1m[31mDELETE FROM "product_import_permissions" WHERE "product_import_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mProductCatalogPermission Load (0.6ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mProductCatalogPermission Destroy (0.6ms)[0m  [1m[31mDELETE FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."id" = $1[0m  [["id", 2]]
  [1m[36mSuppliersPermission Load (1.0ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mCompanyPermission Load (0.6ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mSystemDataPermission Load (0.5ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mRoleManagementPermission Load (0.6ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 3], ["LIMIT", 1]]
  [1m[36mRoleGroup Destroy (1.8ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 3]]
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:52:56 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "supplier_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 82ms (ActiveRecord: 27.9ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'supplier_permission_attributes' for RoleGroup.):
  
app/services/roles/role_management_service.rb:18:in `create_role'
app/controllers/role_groups_controller.rb:10:in `create'
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:54:10 +0400
  
ArgumentError (No association found for name `suppliers_permission'. Has it been defined yet?):
  
app/models/role_group.rb:17:in `<class:RoleGroup>'
app/models/role_group.rb:1:in `<main>'
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:54:30 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "supplier_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "supplier_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 76ms (ActiveRecord: 20.1ms)


  
NameError (uninitialized constant RoleGroup::SupplierPermission):
  
app/services/roles/role_management_service.rb:18:in `create_role'
app/controllers/role_groups_controller.rb:10:in `create'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 00:58:53 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 00:58:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 00:58:54 +0400
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-13 00:59:08 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mRoleGroup Create (1.2ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Admin"], ["id_name", "admin"], ["created_at", "2020-10-12 20:59:08.348941"], ["updated_at", "2020-10-12 20:59:08.348941"]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductGroupPermission Create (1.1ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductTypePermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductImportPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mProductCatalogPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mSuppliersPermission Create (1.4ms)[0m  [1m[32mINSERT INTO "suppliers_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mCompanyPermission Create (1.2ms)[0m  [1m[32mINSERT INTO "company_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mSystemDataPermission Create (1.4ms)[0m  [1m[32mINSERT INTO "system_data_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[36mRoleManagementPermission Create (0.9ms)[0m  [1m[32mINSERT INTO "role_management_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 4], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:20
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:20
Completed 201 Created in 200ms (Views: 0.3ms | ActiveRecord: 67.1ms)


  [1m[36mSuppliersPermission Load (0.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" ORDER BY "suppliers_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCompanyPermission Load (0.7ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" ORDER BY "company_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mSystemDataPermission Load (0.7ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" ORDER BY "system_data_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDepartment Load (3.2ms)[0m  [1m[34mSELECT  "departments".* FROM "departments" ORDER BY "departments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddColumnToCompany (20201013091205)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (12.2ms)[0m  [1m[35mALTER TABLE "companies" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201013091205_add_column_to_company.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201013091205"]]
  â†³ bin/rails:9
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to AddColumnToDepartment (20201013091414)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "departments" ADD "active" boolean DEFAULT TRUE[0m
  â†³ db/migrate/20201013091414_add_column_to_department.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201013091414"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mCompany Load (6.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 ORDER BY "companies"."id" DESC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCountry Load (2.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCompany Update (0.4ms)[0m  [1m[33mUPDATE "companies" SET "active" = $1 WHERE "companies"."id" = $2[0m  [["active", false], ["id", 10]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" ORDER BY "companies"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 13:33:05 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 13:33:06 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-13 13:33:19 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.3ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 12], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 65ms (Views: 0.3ms | ActiveRecord: 15.9ms)


Started DELETE "/en/companies?id=12" for 127.0.0.1 at 2020-10-13 13:33:29 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:63
  [1m[36mCompany Load (0.7ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:95
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.0ms)


  
NoMethodError (undefined method `acitve=' for #<Company:0x000055b81c8d14e8>
Did you mean?  active=):
  
app/services/companies/companies_service.rb:47:in `destroy'
app/controllers/companies_controller.rb:22:in `destroy'
Started DELETE "/en/companies?id=12" for 127.0.0.1 at 2020-10-13 13:34:25 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Load (3.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:96
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCACHE Company Load (0.0ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:96
Completed 500 Internal Server Error in 62323ms (ActiveRecord: 24.2ms)


  
NoMethodError (undefined method `acitve=' for #<Company:0x00007ff7c50e4c90>
Did you mean?  active=):
  
app/services/companies/companies_service.rb:48:in `destroy'
app/controllers/companies_controller.rb:22:in `destroy'
Started DELETE "/en/companies?id=12" for 127.0.0.1 at 2020-10-13 13:35:31 +0400
Processing by CompaniesController#destroy as JSON
  Parameters: {"id"=>"12", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" WHERE "companies"."parent_id" = $1[0m  [["parent_id", 12]]
  â†³ app/services/companies/companies_service.rb:64
  [1m[36mCompany Load (1.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" DESC LIMIT $3[0m  [["id", 12], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:96
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/companies_service.rb:49
  [1m[36mCountry Load (0.2ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:49
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:49
  [1m[36mCompany Update (0.5ms)[0m  [1m[33mUPDATE "companies" SET "active" = $1 WHERE "companies"."id" = $2[0m  [["active", false], ["id", 12]]
  â†³ app/services/companies/companies_service.rb:49
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/companies_service.rb:49
Completed 200 OK in 3374ms (Views: 0.2ms | ActiveRecord: 26.2ms)


  [1m[36mRoleGroup Load (37.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 18:54:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 18:54:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 18:54:58 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:55:16 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `all?' for #<Class:0x00007ff7c505e780>
Did you mean?  all):
  
app/services/roles/role_management_service.rb:25:in `list'
app/controllers/role_groups_controller.rb:16:in `list'
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:55:33 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms)


  
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
NoMethodError (undefined method `errors' for #<RoleGroup::ActiveRecord_Relation:0x000055b81ef158c0>):
  
app/services/roles/role_management_service.rb:26:in `list'
app/controllers/role_groups_controller.rb:16:in `list'
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:55:39 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
NoMethodError (undefined method `errors' for #<RoleGroup::ActiveRecord_Relation:0x00007ff7c41a4820>):
  
app/services/roles/role_management_service.rb:26:in `list'
app/controllers/role_groups_controller.rb:16:in `list'
  [1m[36mCACHE RoleGroup Load (0.0ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" LIMIT $1[0m  [["LIMIT", 11]]
  â†³ /home/buka/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/did_you_mean-1.3.0/lib/did_you_mean/core_ext/name_error.rb:8
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:56:43 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:14
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 5.0ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:58:38 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 4.7ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 18:58:42 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 18:58:43 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 18:58:43 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 18:59:29 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:00:53 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:00:54 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:00:54 +0400
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-13 19:01:04 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 9.5ms)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:22:05 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:22:06 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:22:06 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:24:46 +0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 19:25:57 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 19:25:58 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 19:25:58 +0400
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (36.8ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" ORDER BY "product_group_permissions"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.9ms)[0m  [1m[34mSELECT "product_group_permissions".* FROM "product_group_permissions"[0m
  [1m[36mProductTypePermission Load (3.5ms)[0m  [1m[34mSELECT "product_type_permissions".* FROM "product_type_permissions"[0m
Started PUT "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 19:28:42 +0400
Processing by RoleGroupsController#update as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "id"=>"4", "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}}}
Unpermitted parameters: :format, :locale, :role_group
Completed 500 Internal Server Error in 7ms (ActiveRecord: 4.2ms)


  
NameError (undefined local variable or method `find_category' for #<Roles::RoleManagementService:0x00007ff7c504f460>
Did you mean?  find_role):
  
app/services/roles/role_management_service.rb:33:in `update'
app/controllers/role_groups_controller.rb:22:in `update'
Started PUT "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 19:28:58 +0400
Processing by RoleGroupsController#update as JSON
  Parameters: {"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "id"=>"4", "locale"=>"en", "role_group"=>{"name"=>"Admin", "product_group_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "product_type_permission_attributes"=>{"id"=>3, "show_data"=>true, "read_data"=>true, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:44
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:35
  [1m[36mProductTypePermission Load (0.6ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:35
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mProductGroupPermission Update (0.6ms)[0m  [1m[33mUPDATE "product_group_permissions" SET "create_data" = $1, "edit_data" = $2, "activate_data" = $3, "delete_record" = $4 WHERE "product_group_permissions"."id" = $5[0m  [["create_data", false], ["edit_data", false], ["activate_data", false], ["delete_record", false], ["id", 3]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mProductTypePermission Update (0.8ms)[0m  [1m[33mUPDATE "product_type_permissions" SET "create_data" = $1, "edit_data" = $2, "activate_data" = $3, "delete_record" = $4 WHERE "product_type_permissions"."id" = $5[0m  [["create_data", false], ["edit_data", false], ["activate_data", false], ["delete_record", false], ["id", 3]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:36
Completed 200 OK in 61ms (Views: 0.2ms | ActiveRecord: 21.6ms)


  [1m[36mProductTypePermission Load (0.9ms)[0m  [1m[34mSELECT "product_type_permissions".* FROM "product_type_permissions"[0m
  [1m[36mProductGroupPermission Load (1.0ms)[0m  [1m[34mSELECT "product_group_permissions".* FROM "product_group_permissions"[0m
  [1m[36mUserAccount Load (37.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (3.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUserRoles (20201013155127)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (21.6ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_account_id" bigint NOT NULL, "role_group_id" bigint NOT NULL, CONSTRAINT "fk_rails_12b7316092"
FOREIGN KEY ("user_account_id")
  REFERENCES "user_accounts" ("id")
, CONSTRAINT "fk_rails_957cec92dd"
FOREIGN KEY ("role_group_id")
  REFERENCES "role_groups" ("id")
)[0m
  â†³ db/migrate/20201013155127_create_user_roles.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_account_id" ON "user_roles"  ("user_account_id")[0m
  â†³ db/migrate/20201013155127_create_user_roles.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_group_id" ON "user_roles"  ("role_group_id")[0m
  â†³ db/migrate/20201013155127_create_user_roles.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201013155127"]]
  â†³ bin/rails:9
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2027190067205577435)[0m
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 21:55:24 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 21:55:25 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 21:55:55 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 21:56:40 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 21:56:41 +0400
  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/user_roles?user_account_id=52&role_group_id=4" for 127.0.0.1 at 2020-10-13 21:58:58 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"52", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 52], ["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:18
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 52], ["role_group_id", 4]]
  â†³ app/services/account/user_role_management_service.rb:19
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:19
Completed 201 Created in 53ms (Views: 0.2ms | ActiveRecord: 16.4ms)


  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (0.3ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
Started POST "/en/user_roles?user_account_id=52&role_group_id=4" for 127.0.0.1 at 2020-10-13 22:03:45 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"52", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:27
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:33
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 52], ["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 52], ["role_group_id", 4]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:40
Completed 201 Created in 48ms (Views: 0.1ms | ActiveRecord: 13.7ms)


  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (0.5ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 2]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
Started POST "/en/user_roles?user_account_id=52&role_group_id=4" for 127.0.0.1 at 2020-10-13 22:03:56 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"52", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:27
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:33
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 52], ["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[36mUserRole Create (0.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 52], ["role_group_id", 4]]
  â†³ app/services/account/user_role_management_service.rb:40
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:40
Completed 201 Created in 44ms (Views: 0.1ms | ActiveRecord: 38.2ms)


  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-13 22:25:52 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-13 22:25:53 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-13 22:25:53 +0400
Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:26:08 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:61
Completed 500 Internal Server Error in 39ms (ActiveRecord: 6.1ms)


  
NoMethodError (undefined method `validate_destroy!' for #<Roles::RoleManagementService:0x00007ff7a81b23b0>
Did you mean?  validate_destroy):
  
app/services/roles/role_management_service.rb:43:in `destroy'
app/controllers/role_groups_controller.rb:28:in `destroy'
Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:26:28 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:61
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:50
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductGroupPermission Load (0.5ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductGroupPermission Destroy (0.3ms)[0m  [1m[31mDELETE FROM "product_group_permissions" WHERE "product_group_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductTypePermission Load (0.3ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductTypePermission Destroy (0.3ms)[0m  [1m[31mDELETE FROM "product_type_permissions" WHERE "product_type_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductImportPermission Load (4.7ms)[0m  [1m[34mSELECT  "product_import_permissions".* FROM "product_import_permissions" WHERE "product_import_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductImportPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "product_import_permissions" WHERE "product_import_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductCatalogPermission Load (0.9ms)[0m  [1m[34mSELECT  "product_catalog_permissions".* FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mProductCatalogPermission Destroy (0.5ms)[0m  [1m[31mDELETE FROM "product_catalog_permissions" WHERE "product_catalog_permissions"."id" = $1[0m  [["id", 3]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSuppliersPermission Load (1.4ms)[0m  [1m[34mSELECT  "suppliers_permissions".* FROM "suppliers_permissions" WHERE "suppliers_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSuppliersPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "suppliers_permissions" WHERE "suppliers_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mCompanyPermission Load (2.9ms)[0m  [1m[34mSELECT  "company_permissions".* FROM "company_permissions" WHERE "company_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mCompanyPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "company_permissions" WHERE "company_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSystemDataPermission Load (1.1ms)[0m  [1m[34mSELECT  "system_data_permissions".* FROM "system_data_permissions" WHERE "system_data_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mSystemDataPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "system_data_permissions" WHERE "system_data_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mRoleManagementPermission Load (1.1ms)[0m  [1m[34mSELECT  "role_management_permissions".* FROM "role_management_permissions" WHERE "role_management_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mRoleManagementPermission Destroy (0.4ms)[0m  [1m[31mDELETE FROM "role_management_permissions" WHERE "role_management_permissions"."id" = $1[0m  [["id", 1]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[36mRoleGroup Destroy (2.1ms)[0m  [1m[31mDELETE FROM "role_groups" WHERE "role_groups"."id" = $1[0m  [["id", 4]]
  â†³ app/services/roles/role_management_service.rb:56
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/services/roles/role_management_service.rb:56
Completed 500 Internal Server Error in 232ms (ActiveRecord: 53.5ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "role_groups" violates foreign key constraint "fk_rails_957cec92dd" on table "user_roles"
DETAIL:  Key (id)=(4) is still referenced from table "user_roles".
: DELETE FROM "role_groups" WHERE "role_groups"."id" = $1):
  
app/services/roles/role_management_service.rb:56:in `destroy_role_group'
app/services/roles/role_management_service.rb:44:in `destroy'
app/controllers/role_groups_controller.rb:28:in `destroy'
Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:26:56 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 48ms (Views: 0.7ms | ActiveRecord: 9.3ms)


Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:27:27 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 23ms (Views: 0.2ms | ActiveRecord: 6.3ms)


Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-13 22:28:02 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 62ms (Views: 0.2ms | ActiveRecord: 8.6ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 13:53:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 13:53:10 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 13:53:10 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:53:20 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 4.0ms)


  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies"[0m
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:54:00 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.4ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 13:54:03 +0400
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:54:24 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/buka/.rvm/gems/ruby-2.6.5/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.9ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.7ms)


  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCompany Load (0.8ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCompany Update (5.4ms)[0m  [1m[33mUPDATE "companies" SET "active" = $1 WHERE "companies"."id" = $2[0m  [["active", true], ["id", 10]]
Started GET "/en/companies/company_list" for 127.0.0.1 at 2020-10-14 13:54:53 +0400
Processing by CompaniesController#company_list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCompany Load (0.6ms)[0m  [1m[34mSELECT "companies".* FROM "companies" LEFT JOIN company_logos ON company_logos.company_id = companies.id WHERE "companies"."parent_id" IS NULL AND "companies"."active" = $1[0m  [["active", true]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCountry Load (1.3ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
  [1m[36mCompanyLogo Load (0.2ms)[0m  [1m[34mSELECT  "company_logos".* FROM "company_logos" WHERE "company_logos"."company_id" = $1 LIMIT $2[0m  [["company_id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/companies_service.rb:22
Completed 200 OK in 118ms (Views: 0.2ms | ActiveRecord: 22.5ms)


Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:55:40 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.5ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:69
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:75
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.8ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/services/companies/departments_service.rb:81:in `validate_company'
app/services/companies/departments_service.rb:65:in `validate_data!'
app/services/companies/departments_service.rb:30:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:56:11 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
Completed 500 Internal Server Error in 12306ms (ActiveRecord: 20.4ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/services/companies/departments_service.rb:82:in `validate_company'
app/services/companies/departments_service.rb:66:in `validate_data!'
app/services/companies/departments_service.rb:31:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:56:57 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.9ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.7ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
Completed 500 Internal Server Error in 3746ms (ActiveRecord: 19.8ms)


  
ArgumentError (Unsupported argument type: 10 (Integer)):
  
app/services/companies/departments_service.rb:82:in `validate_company'
app/services/companies/departments_service.rb:66:in `validate_data!'
app/services/companies/departments_service.rb:31:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:57:18 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.7ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.6ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
Completed 500 Internal Server Error in 37221ms (ActiveRecord: 1.4ms)


  
ArgumentError (Unsupported argument type: 10 (Integer)):
  
app/services/companies/departments_service.rb:82:in `validate_company'
app/services/companies/departments_service.rb:66:in `validate_data!'
app/services/companies/departments_service.rb:31:in `create_department'
app/controllers/departments_controller.rb:10:in `create'
Started POST "/en/departments" for 127.0.0.1 at 2020-10-14 13:57:58 +0400
Processing by DepartmentsController#create as JSON
  Parameters: {"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10, "locale"=>"en", "department"=>{"name"=>"test", "description"=>"test", "address"=>"test", "phone_number"=>"test", "country_id"=>4, "city_id"=>9, "company_id"=>10}}
Unpermitted parameters: :format, :locale, :department
  [1m[36mCountry Load (0.6ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:70
  [1m[36mCity Load (0.9ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:76
  [1m[36mCompany Load (0.5ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 AND "companies"."active" = $2 ORDER BY "companies"."id" ASC LIMIT $3[0m  [["id", 10], ["active", true], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:82
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mCACHE Country Load (0.0ms)[0m  [1m[34mSELECT  "countries".* FROM "countries" WHERE "countries"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mCACHE City Load (0.0ms)[0m  [1m[34mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mCompany Load (0.3ms)[0m  [1m[34mSELECT  "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mDepartment Create (5.3ms)[0m  [1m[32mINSERT INTO "departments" ("name", "description", "address", "phone_number", "country_id", "city_id", "company_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "test"], ["description", "test"], ["address", "test"], ["phone_number", "test"], ["country_id", 4], ["city_id", 9], ["company_id", 10]]
  â†³ app/services/companies/departments_service.rb:88
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/companies/departments_service.rb:88
  [1m[36mDepartmentLogo Load (1.4ms)[0m  [1m[34mSELECT  "department_logos".* FROM "department_logos" WHERE "department_logos"."department_id" = $1 LIMIT $2[0m  [["department_id", 3], ["LIMIT", 1]]
  â†³ app/services/companies/departments_service.rb:14
Completed 201 Created in 2346ms (Views: 0.2ms | ActiveRecord: 40.4ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 15:46:17 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 15:46:18 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 15:46:18 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 15:46:29 +0400
Started GET "/favicon.ico" for 127.0.0.1 at 2020-10-14 15:46:29 +0400
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `block in call'
chewy (5.1.0) lib/chewy/strategy.rb:70:in `wrap'
chewy (5.1.0) lib/chewy.rb:201:in `strategy'
chewy (5.1.0) lib/chewy/railtie.rb:19:in `call'
railties (5.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.5) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.5) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
railties (5.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mRoleGroup Load (1.2ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
Started POST "/en/role_groups" for 127.0.0.1 at 2020-10-14 15:49:53 +0400
Processing by RoleGroupsController#create as JSON
  Parameters: {"name"=>"new_role", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "locale"=>"en", "role_group"=>{"name"=>"new_role", "product_group_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_type_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "product_import_permission_attributes"=>{"show_data"=>true, "import"=>true}, "product_catalog_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "set_price_data"=>true, "delete_record"=>true}, "suppliers_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "company_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "system_data_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}, "role_management_permission_attributes"=>{"show_data"=>true, "read_data"=>true, "create_data"=>true, "edit_data"=>true, "activate_data"=>true, "delete_record"=>true}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mRoleGroup Create (1.4ms)[0m  [1m[32mINSERT INTO "role_groups" ("name", "id_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "new_role"], ["id_name", "new_role"], ["created_at", "2020-10-14 11:49:53.611191"], ["updated_at", "2020-10-14 11:49:53.611191"]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductGroupPermission Create (1.4ms)[0m  [1m[32mINSERT INTO "product_group_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductTypePermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_type_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "activate_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["activate_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductImportPermission Create (0.9ms)[0m  [1m[32mINSERT INTO "product_import_permissions" ("role_group_id", "show_data", "import") VALUES ($1, $2, $3) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["import", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mProductCatalogPermission Create (0.8ms)[0m  [1m[32mINSERT INTO "product_catalog_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "set_price_data", "delete_record") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["set_price_data", true], ["delete_record", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mSuppliersPermission Create (0.7ms)[0m  [1m[32mINSERT INTO "suppliers_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mCompanyPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "company_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mSystemDataPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "system_data_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[36mRoleManagementPermission Create (0.6ms)[0m  [1m[32mINSERT INTO "role_management_permissions" ("role_group_id", "show_data", "read_data", "create_data", "edit_data", "delete_record", "activate_data") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["role_group_id", 5], ["show_data", true], ["read_data", true], ["create_data", true], ["edit_data", true], ["delete_record", true], ["activate_data", true]]
  â†³ app/services/roles/role_management_service.rb:24
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:24
Completed 201 Created in 352ms (Views: 0.3ms | ActiveRecord: 58.6ms)


  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.3ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
Started PUT "/en/role_groups?id=5" for 127.0.0.1 at 2020-10-14 15:51:30 +0400
Processing by RoleGroupsController#update as JSON
  Parameters: {"name"=>"new role", "product_group_permission_attributes"=>{"id"=>4, "show_data"=>false, "read_data"=>false, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}, "id"=>"5", "locale"=>"en", "role_group"=>{"name"=>"new role", "product_group_permission_attributes"=>{"id"=>4, "show_data"=>false, "read_data"=>false, "create_data"=>false, "edit_data"=>false, "activate_data"=>false, "delete_record"=>false}}}
Unpermitted parameters: :format, :locale, :role_group
  [1m[36mRoleGroup Load (0.1ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mProductGroupPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:35
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mRoleGroup Update (0.3ms)[0m  [1m[33mUPDATE "role_groups" SET "name" = $1, "updated_at" = $2 WHERE "role_groups"."id" = $3[0m  [["name", "new role"], ["updated_at", "2020-10-14 11:51:30.886709"], ["id", 5]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[36mProductGroupPermission Update (0.4ms)[0m  [1m[33mUPDATE "product_group_permissions" SET "show_data" = $1, "read_data" = $2, "create_data" = $3, "edit_data" = $4, "activate_data" = $5, "delete_record" = $6 WHERE "product_group_permissions"."id" = $7[0m  [["show_data", false], ["read_data", false], ["create_data", false], ["edit_data", false], ["activate_data", false], ["delete_record", false], ["id", 4]]
  â†³ app/services/roles/role_management_service.rb:36
  [1m[35m (36.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/roles/role_management_service.rb:36
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 37.4ms)


  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductGroupPermission Load (0.2ms)[0m  [1m[34mSELECT  "product_group_permissions".* FROM "product_group_permissions" WHERE "product_group_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductTypePermission Load (0.8ms)[0m  [1m[34mSELECT  "product_type_permissions".* FROM "product_type_permissions" WHERE "product_type_permissions"."role_group_id" = $1 LIMIT $2[0m  [["role_group_id", 5], ["LIMIT", 1]]
Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-14 15:52:13 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 2]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" ORDER BY "role_groups"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/en/user_roles?user_account_id=51&role_group_id=5" for 127.0.0.1 at 2020-10-14 15:52:58 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:49
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:55
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 51], ["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mUserAccount Load (0.2ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 5]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:62
Completed 201 Created in 74ms (Views: 0.2ms | ActiveRecord: 13.8ms)


Started DELETE "/en/role_groups?id=5" for 127.0.0.1 at 2020-10-14 15:53:07 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 5]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started GET "/en/role_groups/list" for 127.0.0.1 at 2020-10-14 16:44:47 +0400
Processing by RoleGroupsController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.6ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  â†³ app/services/roles/role_management_service.rb:18
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started DELETE "/en/role_groups?id=5" for 127.0.0.1 at 2020-10-14 16:44:52 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 5]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started POST "/en/user_roles?user_account_id=51&role_group_id=5" for 127.0.0.1 at 2020-10-14 16:45:03 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:49
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:55
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 AND "user_roles"."role_group_id" = $2 ORDER BY "user_roles"."id" ASC LIMIT $3[0m  [["user_account_id", 51], ["role_group_id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:61
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:62
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:62
Completed 201 Created in 9ms (Views: 0.2ms | ActiveRecord: 2.1ms)


  [1m[36mUserAccount Load (0.6ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.9ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.5ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" ORDER BY "user_accounts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mCustomer Load (1.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id"[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  "customers".* FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" ORDER BY "customers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (2.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (1.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id"[0m
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (2.2ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (2.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (2.1ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:46:13 +0400
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:46:39 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:46:54 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (1.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 71ms (Views: 0.4ms | ActiveRecord: 13.0ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:55:29 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:55:30 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:55:30 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:55:54 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (1.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 35ms (Views: 0.3ms | ActiveRecord: 10.8ms)


  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (36.4ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_riles.id as user_role_id, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT  user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_riles.id as user_role_id, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCustomer Load (1.1ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number, user_accounts.email, user_accounts.username, user_roles.id as user_role_id, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ spec/rails_helper.rb:34
Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:58:34 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:58:35 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:58:35 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:58:46 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 500 Internal Server Error in 26ms (ActiveRecord: 8.4ms)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  syntax error at or near "user_accounts"
LINE 2:                             user_accounts.email, user_accoun...
                                    ^
: SELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"):
  
app/services/account/users_service.rb:14:in `json_view'
lib/controller_response.rb:30:in `respond_json_view'
lib/controller_response.rb:43:in `rest_response_body'
lib/controller_response.rb:8:in `rest_respond_service'
app/controllers/users_controller.rb:11:in `list'
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:59:01 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 9.1ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 17:59:09 +0400
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 17:59:21 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started DELETE "/en/user_roles?id=3" for 127.0.0.1 at 2020-10-14 17:59:45 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"3", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 8ms (ActiveRecord: 5.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:32:in `find_user_role'
app/services/account/user_role_management_service.rb:24:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:11 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:32:in `find_user_role'
app/services/account/user_role_management_service.rb:24:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:32 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 7ms (ActiveRecord: 3.1ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:33:in `find_user_role'
app/services/account/user_role_management_service.rb:25:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:34 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:33:in `find_user_role'
app/services/account/user_role_management_service.rb:25:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:00:50 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :id, :format, :locale
Completed 404 Not Found in 10763ms (ActiveRecord: 12.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole without an ID):
  
app/services/account/user_role_management_service.rb:34:in `find_user_role'
app/services/account/user_role_management_service.rb:26:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:01:20 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.6ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[36mUserRole Destroy (0.9ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 4]]
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:45
Completed 404 Not Found in 2771ms (Views: 0.5ms | ActiveRecord: 51.9ms)


Started DELETE "/en/user_roles?id=4" for 127.0.0.1 at 2020-10-14 18:01:26 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
Completed 404 Not Found in 5600ms (ActiveRecord: 0.8ms)


  
ActiveRecord::RecordNotFound (Couldn't find UserRole with 'id'=4):
  
app/services/account/user_role_management_service.rb:34:in `find_user_role'
app/services/account/user_role_management_service.rb:26:in `destroy_user_role'
app/controllers/user_roles_controller.rb:17:in `destroy'
  [1m[36mUserRole Load (0.6ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:03:20 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 8.5ms)


  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.4ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUserRole Create (1.0ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 4]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:04:33 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started DELETE "/en/user_roles?id=5" for 127.0.0.1 at 2020-10-14 18:04:48 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (1.0ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[36mCACHE UserRole Load (0.0ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[36mUserRole Destroy (0.7ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 5]]
  â†³ app/services/account/user_role_management_service.rb:45
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:45
Completed 404 Not Found in 23945ms (Views: 0.5ms | ActiveRecord: 5.6ms)


  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.5ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUserRole Create (1.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 4]]
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
Started DELETE "/en/user_roles?id=6" for 127.0.0.1 at 2020-10-14 18:05:48 +0400
Processing by UserRolesController#destroy as JSON
  Parameters: {"id"=>"6", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:34
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_roles" WHERE "user_roles"."user_account_id" = $1[0m  [["user_account_id", 51]]
  â†³ app/services/account/user_role_management_service.rb:39
Completed 404 Not Found in 3080ms (Views: 0.8ms | ActiveRecord: 14.2ms)


  [1m[36mRoleGroup Load (0.9ms)[0m  [1m[34mSELECT "role_groups".* FROM "role_groups"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserAccount Load (0.7ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_account_id", "role_group_id") VALUES ($1, $2) RETURNING "id"[0m  [["user_account_id", 51], ["role_group_id", 5]]
  [1m[35m (34.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:07:21 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 9.2ms)


  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUserRole Load (0.7ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" ORDER BY "user_roles"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserRole Destroy (0.8ms)[0m  [1m[31mDELETE FROM "user_roles" WHERE "user_roles"."id" = $1[0m  [["id", 7]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:10:21 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 8.2ms)


Started POST "/en/user_roles?user_account_id=51&role_group_id=4" for 127.0.0.1 at 2020-10-14 18:10:34 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.1ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:51
  [1m[36mRoleGroup Load (0.3ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:57
  [1m[36mUserRole Load (0.5ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 ORDER BY "user_roles"."id" ASC LIMIT $2[0m  [["user_account_id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:63
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserAccount Load (0.3ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mRoleGroup Load (0.2ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:65
Completed 201 Created in 3390ms (Views: 0.2ms | ActiveRecord: 11.9ms)


Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:10:42 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started POST "/en/user_roles?user_account_id=51&role_group_id=5" for 127.0.0.1 at 2020-10-14 18:10:57 +0400
Processing by UserRolesController#create as JSON
  Parameters: {"user_account_id"=>"51", "role_group_id"=>"5", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mUserAccount Load (1.0ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:51
  [1m[36mRoleGroup Load (0.7ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:57
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT  "user_roles".* FROM "user_roles" WHERE "user_roles"."user_account_id" = $1 ORDER BY "user_roles"."id" ASC LIMIT $2[0m  [["user_account_id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:63
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserAccount Load (0.8ms)[0m  [1m[34mSELECT  "user_accounts".* FROM "user_accounts" WHERE "user_accounts"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mRoleGroup Load (0.8ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[36mUserRole Update (1.3ms)[0m  [1m[33mUPDATE "user_roles" SET "role_group_id" = $1 WHERE "user_roles"."id" = $2[0m  [["role_group_id", 5], ["id", 6]]
  â†³ app/services/account/user_role_management_service.rb:65
  [1m[35m (36.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/services/account/user_role_management_service.rb:65
Completed 201 Created in 2205ms (Views: 0.5ms | ActiveRecord: 42.7ms)


Started GET "/en/users/list" for 127.0.0.1 at 2020-10-14 18:11:09 +0400
Processing by UsersController#list as JSON
  Parameters: {"locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT user_accounts.id, customers.name, user_accounts.active, user_accounts.phone_number,  user_roles.id as user_role_id,
                            user_accounts.email, user_accounts.username, user_roles.role_group_id, role_groups.name as role_name FROM "customers" INNER JOIN "user_accounts" ON "user_accounts"."id" = "customers"."user_account_id" INNER JOIN "user_roles" ON "user_roles"."user_account_id" = "user_accounts"."id" INNER JOIN "role_groups" ON "role_groups"."id" = "user_roles"."role_group_id"[0m
  â†³ app/services/account/users_service.rb:14
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)


Started DELETE "/en/role_groups?id=4" for 127.0.0.1 at 2020-10-14 18:13:04 +0400
Processing by RoleGroupsController#destroy as JSON
  Parameters: {"id"=>"4", "locale"=>"en"}
Unpermitted parameters: :format, :locale
  [1m[36mRoleGroup Load (0.4ms)[0m  [1m[34mSELECT  "role_groups".* FROM "role_groups" WHERE "role_groups"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/roles/role_management_service.rb:63
  [1m[36mUserRole Load (0.2ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."role_group_id" = $1[0m  [["role_group_id", 4]]
  â†³ app/services/roles/role_management_service.rb:51
Completed 404 Not Found in 21ms (Views: 0.2ms | ActiveRecord: 6.9ms)


Started GET "/api-docs/index.html" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2020-10-14 18:17:09 +0400
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2020-10-14 18:17:10 +0400
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2020-10-14 18:17:10 +0400
